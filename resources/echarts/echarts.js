var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var e=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;var j=0;while(!(h=b.next()).done){e.push(c.call(g,h.value,j++))}}else {var i=b.length;for(var d=0;d<i;d++){e.push(c.call(g,b[d],d))}}return e};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,g){var c=this;if(c instanceof String){c=String(c)}var f=c.length;var b=g||0;if(b<0){b=Math.max(b+f,0)}for(;b<f;b++){var e=c[b];if(e===d||Object.is(e,d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es8','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];b[a]=null;try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a+'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var a=0;a<this.onSettledCallbacks_.length;++a){d.asyncExecute(this.onSettledCallbacks_[a])}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(callback)}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.polyfill('Promise.prototype.finally',function(a){if(a){return a}var b=function(b){return this.then(function(d){var c=Promise.resolve(b());return c.then(function(){return d})},function(d){var c=Promise.resolve(b());return c.then(function(){throw d})})};return b},'es9','es3');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(a instanceof Object){return}throw new TypeError('Iterator result '+a+' is not an object')};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=undefined;this.nextAddress=1;this.catchAddress_=0;this.finallyAddress_=0;this.abruptCompletion_=null;this.finallyContexts_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_){throw new TypeError('Generator is already running')}this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype['return']=function(a){this.abruptCompletion_={'return':a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,a){this.nextAddress=a;return {value:b}};$jscomp.generator.Context.prototype.yieldAll=function(d,b){var c=$jscomp.makeIterator(d);var a=c.next();$jscomp.generator.ensureIteratorResultIsObject_(a);if(a.done){this.yieldResult=a.value;this.nextAddress=b;return}this.yieldAllIterator_=c;return this.yield(a.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,a){this.catchAddress_=b;if(a!=undefined){this.finallyAddress_=a}};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,a){this.nextAddress=b;this.catchAddress_=a||0};$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;var b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,b,a){if(!a){this.finallyContexts_=[this.abruptCompletion_]}else {this.finallyContexts_[a]=this.abruptCompletion_}this.catchAddress_=c||0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveFinallyBlock=function(d,c){var b=this.finallyContexts_.splice(c||0)[0];var a=this.abruptCompletion_=this.abruptCompletion_||b;if(a){if(a.isException){return this.jumpToErrorHandler_()}if(a.jumpTo!=undefined&&this.finallyAddress_<a.jumpTo){this.nextAddress=a.jumpTo;this.abruptCompletion_=null}else {this.nextAddress=this.finallyAddress_}}else {this.nextAddress=d}};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a){this.properties_.push(b)}this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){while(this.properties_.length>0){var a=this.properties_.pop();if(a in this.object_){return a}}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context();this.program_=a};$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_){return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_)}this.context_.next_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var a=this.context_.yieldAllIterator_;if(a){var c='return' in a?a['return']:function(a){return {value:a,done:!0}};return this.yieldAllStep_(c,b,this.context_['return'])}this.context_['return'](b);return this.nextStep_()};$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_){return this.yieldAllStep_(this.context_.yieldAllIterator_['throw'],a,this.context_.next_)}this.context_.throw_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.yieldAllStep_=function(d,e,c){try{var a=d.call(this.context_.yieldAllIterator_,e);$jscomp.generator.ensureIteratorResultIsObject_(a);if(!a.done){this.context_.stop_();return a}var b=a.value}catch(f){this.context_.yieldAllIterator_=null;this.context_.throw_(f);return this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,b);return this.nextStep_()};$jscomp.generator.Engine_.prototype.nextStep_=function(){while(this.context_.nextAddress){try{var b=this.program_(this.context_);if(b){this.context_.stop_();return {value:b.value,done:!1}}}catch(c){this.context_.yieldResult=undefined;this.context_.throw_(c)}}this.context_.stop_();if(this.context_.abruptCompletion_){var a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException){throw a.exception}return {value:a['return'],done:!0}}return {value:undefined,done:!0}};$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this['throw']=function(b){return a.throw_(b)};this['return']=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,c){var a=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c));if($jscomp.setPrototypeOf){$jscomp.setPrototypeOf(a,b.prototype)}return a};$jscomp.asyncExecutePromiseGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={};var b=Object.create(new $jscomp.global['Proxy'](a,{'get':function(d,e,c){return d==a&&e=='q'&&c==b}}));return b['q']===!0}catch(c){return !1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE){return c}}else {if(isConformant()){return c}}var a='$jscomp_hidden_'+Math.random();function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){function isConformant(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||typeof b!='function'||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(i){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE){return b}}else {if(isConformant()){return b}}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(d,e){d=d===0?0:d;var a=c(this,d);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:e};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=e}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=h(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var g=0;var h=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++g;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(d,e,h){d=Number(d);e=Number(e);var b,g,f;var c=Math.max(Math.abs(d),Math.abs(e));for(b=2;b<arguments.length;b++){c=Math.max(c,Math.abs(arguments[b]))}if(c>1.0E100||c<1.0E-100){if(!c){return c}d=d/c;e=e/c;f=d*d+e*e;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/c;f+=g*g}return Math.sqrt(f)*c}else {f=d*d+e*e;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Number.parseFloat',function(a){return a||parseFloat},'es6','es3');$jscomp.polyfill('Number.parseInt',function(a){return a||parseInt},'es6','es3');$jscomp.assign=typeof Object.assign=='function'?Object.assign:function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(!a){continue}for(var b in a){if($jscomp.owns(a,b)){d[b]=a[b]}}}return d};$jscomp.polyfill('Object.assign',function(a){return a||$jscomp.assign},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){function isConformant(){if($jscomp.ASSUME_NO_NATIVE_SET||!b||typeof b!='function'||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE){return b}}else {if(isConformant()){return b}}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){a=a===0?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(a){function isConformant(){if(!a||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var b=new a([c]);if(!b.has(c)||b.has(d)){return !1}b['delete'](c);b.add(d);return !b.has(c)&&b.has(d)}catch(e){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE){return a}}else {if(isConformant()){return a}}var b=function(b){this.map_=new WeakMap();if(b){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(b);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};b.prototype.add=function(b){this.map_.set(b,!0);return this};b.prototype.has=function(b){return this.map_.has(b)};b.prototype['delete']=function(b){return this.map_['delete'](b)};return b},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}(function(b,a){typeof exports==='object'&&typeof module!=='undefined'?a(exports):typeof define==='function'&&define.amd?define(['exports'],a):a(b.echarts={})})(this,function(d){var ct;if(typeof window!=='undefined'){ct=window.__DEV__}else {if(typeof global!=='undefined'){ct=global.__DEV__}}if(typeof ct==='undefined'){ct=!0}var a=ct;var oa=2311;var jc=function(){return oa++};var cu={};if(typeof wx==='object'&&typeof wx.getSystemInfoSync==='function'){cu={browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}}else {if(typeof document==='undefined'&&typeof self!=='undefined'){cu={browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}}else {if(typeof navigator==='undefined'){cu={browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}}else {cu=detect(navigator.userAgent)}}}var f=cu;function detect(b){var h={};var a={};var c=b.match(/Firefox\/([\d.]+)/);var f=b.match(/MSIE\s([\d.]+)/)||b.match(/Trident\/.+?rv:(([\d.]+))/);var e=b.match(/Edge\/([\d.]+)/);var g=/micromessenger/i.test(b);if(c){a.firefox=!0;a.version=c[1]}if(f){a.ie=!0;a.version=f[1]}if(e){a.edge=!0;a.version=e[1]}if(g){a.weChat=!0}return {browser:a,os:h,node:!1,canvasSupported:!!document.createElement('canvas').getContext,svgSupported:typeof SVGRect!=='undefined',touchEventsSupported:'ontouchstart' in window&&!a.ie&&!a.edge,pointerEventsSupported:'onpointerdown' in window&&(a.edge||a.ie&&a.version>=11),domSupported:typeof document!=='undefined'}}var g3={'[object Function]':1,'[object RegExp]':1,'[object Date]':1,'[object Error]':1,'[object CanvasGradient]':1,'[object CanvasPattern]':1,'[object Image]':1,'[object Canvas]':1};var hL={'[object Int8Array]':1,'[object Uint8Array]':1,'[object Uint8ClampedArray]':1,'[object Int16Array]':1,'[object Uint16Array]':1,'[object Int32Array]':1,'[object Uint32Array]':1,'[object Float32Array]':1,'[object Float64Array]':1};var b3=Object.prototype.toString;var b5=Array.prototype;var lS=b5.forEach;var mj=b5.filter;var b2=b5.slice;var nM=b5.map;var mk=b5.reduce;var fE={};function $override(a,b){if(a==='createCanvas'){dO=null}fE[a]=b}function clone(a){if(a==null||typeof a!=='object'){return a}var c=a;var e=b3.call(a);if(e==='[object Array]'){if(!isPrimitive(a)){c=[];for(var b=0,g=a.length;b<g;b++){c[b]=clone(a[b])}}}else {if(hL[e]){if(!isPrimitive(a)){var h=a.constructor;if(a.constructor.from){c=h.from(a)}else {c=new h(a.length);for(var b=0,g=a.length;b<g;b++){c[b]=clone(a[b])}}}}else {if(!g3[e]&&!isPrimitive(a)&&!isDom(a)){c={};for(var f in a){if(a.hasOwnProperty(f)){c[f]=clone(a[f])}}}}}return c}function merge(e,c,g){if(!isObject$1(c)||!isObject$1(e)){return g?clone(c):e}for(var f in c){if(c.hasOwnProperty(f)){var b=e[f];var a=c[f];if(isObject$1(a)&&isObject$1(b)&&!isArray(a)&&!isArray(b)&&!isDom(a)&&!isDom(b)&&!isBuiltInObject(a)&&!isBuiltInObject(b)&&!isPrimitive(a)&&!isPrimitive(b)){merge(b,a,g)}else {if(g||!(f in e)){e[f]=clone(c[f],!0)}}}}return e}function mergeAll(a,e){var b=a[0];for(var c=1,f=a.length;c<f;c++){b=merge(b,a[c],e)}return b}function extend(c,a){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}return c}function defaults(c,b,e){for(var a in b){if(b.hasOwnProperty(a)&&(e?b[a]!=null:c[a]==null)){c[a]=b[a]}}return c}var bu=function(){return fE.createCanvas()};fE.createCanvas=function(){return document.createElement('canvas')};var dO;function getContext(){if(!dO){dO=bu().getContext('2d')}return dO}function indexOf(a,c){if(a){if(a.indexOf){return a.indexOf(c)}for(var b=0,e=a.length;b<e;b++){if(a[b]===c){return b}}}return -1}function inherits(a,e){var b=a.prototype;function F(){}F.prototype=e.prototype;a.prototype=new F();for(var c in b){if(b.hasOwnProperty(c)){a.prototype[c]=b[c]}}a.prototype.constructor=a;a.superClass=e}function mixin(b,a,c){b='prototype' in b?b.prototype:b;a='prototype' in a?a.prototype:a;defaults(b,a,c)}function isArrayLike(a){if(!a){return}if(typeof a==='string'){return !1}return typeof a.length==='number'}function each$1(a,b,e){if(!(a&&b)){return}if(a.forEach&&a.forEach===lS){a.forEach(b,e)}else {if(a.length===+a.length){for(var c=0,g=a.length;c<g;c++){b.call(e,a[c],c,a)}}else {for(var f in a){if(a.hasOwnProperty(f)){b.call(e,a[f],f,a)}}}}}function map(a,c,e){if(!(a&&c)){return}if(a.map&&a.map===nM){return a.map(c,e)}else {var f=[];for(var b=0,g=a.length;b<g;b++){f.push(c.call(e,a[b],b,a))}return f}}function reduce(a,e,b,f){if(!(a&&e)){return}if(a.reduce&&a.reduce===mk){return a.reduce(e,b,f)}else {for(var c=0,g=a.length;c<g;c++){b=e.call(f,b,a[c],c,a)}return b}}function filter(a,c,e){if(!(a&&c)){return}if(a.filter&&a.filter===mj){return a.filter(c,e)}else {var f=[];for(var b=0,g=a.length;b<g;b++){if(c.call(e,a[b],b,a)){f.push(a[b])}}return f}}function find(a,c,e){if(!(a&&c)){return}for(var b=0,f=a.length;b<f;b++){if(c.call(e,a[b],b,a)){return a[b]}}}function bind(c,a){var b=b2.call(arguments,2);return function(){return c.apply(a,b.concat(b2.call(arguments)))}}function curry(b){var a=b2.call(arguments,1);return function(){return b.apply(this,a.concat(b2.call(arguments)))}}function isArray(a){return b3.call(a)==='[object Array]'}function isFunction$1(a){return typeof a==='function'}function isString(a){return b3.call(a)==='[object String]'}function isObject$1(a){var b=typeof a;return b==='function'||!!a&&b==='object'}function isBuiltInObject(a){return !!g3[b3.call(a)]}function isTypedArray(a){return !!hL[b3.call(a)]}function isDom(a){return typeof a==='object'&&typeof a.nodeType==='number'&&typeof a.ownerDocument==='object'}function eqNaN(a){return a!==a}function retrieve(c){for(var a=0,b=arguments.length;a<b;a++){if(arguments[a]!=null){return arguments[a]}}}function retrieve2(a,b){return a!=null?a:b}function retrieve3(a,b,c){return a!=null?a:b!=null?b:c}function slice(){return Function.call.apply(b2,arguments)}function normalizeCssArray(a){if(typeof a==='number'){return [a,a,a,a]}var b=a.length;if(b===2){return [a[0],a[1],a[0],a[1]]}else {if(b===3){return [a[0],a[1],a[2],a[1]]}}return a}function assert$1(a,b){if(!a){throw new Error(b)}}function trim(a){if(a==null){return null}else {if(typeof a.trim==='function'){return a.trim()}else {return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'')}}}var hF='__ec_primitive__';function setAsPrimitive(a){a[hF]=!0}function isPrimitive(a){return a[hF]}function HashMap(a){var c=isArray(a);this.data={};var b=this;a instanceof HashMap?a.each(visit):a&&each$1(a,visit);function visit(e,f){c?b.set(e,f):b.set(f,e)}}HashMap.prototype={constructor:HashMap,get:function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},set:function(b,a){return this.data[b]=a},each:function(b,c){c!==void 0&&(b=bind(b,c));for(var a in this.data){this.data.hasOwnProperty(a)&&b(this.data[a],a)}},removeKey:function(a){delete this.data[a]}};function createHashMap(a){return new HashMap(a)}function concatArray(b,e){var c=new b.constructor(b.length+e.length);for(var a=0;a<b.length;a++){c[a]=b[a]}var f=b.length;for(a=0;a<e.length;a++){c[a+f]=e[a]}return c}function noop(){}var oA=(Object.freeze||Object)({$override:$override,clone:clone,merge:merge,mergeAll:mergeAll,extend:extend,defaults:defaults,createCanvas:bu,getContext:getContext,indexOf:indexOf,inherits:inherits,mixin:mixin,isArrayLike:isArrayLike,each:each$1,map:map,reduce:reduce,filter:filter,find:find,bind:bind,curry:curry,isArray:isArray,isFunction:isFunction$1,isString:isString,isObject:isObject$1,isBuiltInObject:isBuiltInObject,isTypedArray:isTypedArray,isDom:isDom,eqNaN:eqNaN,retrieve:retrieve,retrieve2:retrieve2,retrieve3:retrieve3,slice:slice,normalizeCssArray:normalizeCssArray,assert:assert$1,trim:trim,setAsPrimitive:setAsPrimitive,isPrimitive:isPrimitive,createHashMap:createHashMap,concatArray:concatArray,noop:noop});var h0=typeof Float32Array==='undefined'?Array:Float32Array;function create(b,c){var a=new h0(2);if(b==null){b=0}if(c==null){c=0}a[0]=b;a[1]=c;return a}function copy(a,b){a[0]=b[0];a[1]=b[1];return a}function clone$1(b){var a=new h0(2);a[0]=b[0];a[1]=b[1];return a}function set(a,b,c){a[0]=b;a[1]=c;return a}function add(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function scaleAndAdd(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;return a}function sub(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function len(a){return Math.sqrt(lenSquare(a))}var os=len;function lenSquare(a){return a[0]*a[0]+a[1]*a[1]}var mi=lenSquare;function mul(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function div(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function dot(a,b){return a[0]*b[0]+a[1]*b[1]}function scale(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;return a}function normalize(a,c){var b=len(c);if(b===0){a[0]=0;a[1]=0}else {a[0]=c[0]/b;a[1]=c[1]/b}return a}function distance(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))}var bd=distance;function distanceSquare(a,b){return (a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1])}var az=distanceSquare;function negate(a,b){a[0]=-b[0];a[1]=-b[1];return a}function lerp(b,a,c,e){b[0]=a[0]+e*(c[0]-a[0]);b[1]=a[1]+e*(c[1]-a[1]);return b}function applyTransform(b,c,a){var e=c[0];var f=c[1];b[0]=a[0]*e+a[2]*f+a[4];b[1]=a[1]*e+a[3]*f+a[5];return b}function min(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a}function max(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a}var oz=(Object.freeze||Object)({create:create,copy:copy,clone:clone$1,set:set,add:add,scaleAndAdd:scaleAndAdd,sub:sub,len:len,length:os,lenSquare:lenSquare,lengthSquare:mi,mul:mul,div:div,dot:dot,scale:scale,normalize:normalize,distance:distance,dist:bd,distanceSquare:distanceSquare,distSquare:az,negate:negate,lerp:lerp,applyTransform:applyTransform,min:min,max:max});function Draggable(){this.on('mousedown',this._dragStart,this);this.on('mousemove',this._drag,this);this.on('mouseup',this._dragEnd,this);this.on('globalout',this._dragEnd,this)}Draggable.prototype={constructor:Draggable,_dragStart:function(b){var a=b.target;if(a&&a.draggable){this._draggingTarget=a;a.dragging=!0;this._x=b.offsetX;this._y=b.offsetY;this.dispatchToElement(param(a,b),'dragstart',b.event)}},_drag:function(a){var c=this._draggingTarget;if(c){var f=a.offsetX;var g=a.offsetY;var h=f-this._x;var i=g-this._y;this._x=f;this._y=g;c.drift(h,i,a);this.dispatchToElement(param(c,a),'drag',a.event);var b=this.findHover(f,g,c).target;var e=this._dropTarget;this._dropTarget=b;if(c!==b){if(e&&b!==e){this.dispatchToElement(param(e,a),'dragleave',a.event)}if(b&&b!==e){this.dispatchToElement(param(b,a),'dragenter',a.event)}}}},_dragEnd:function(a){var b=this._draggingTarget;if(b){b.dragging=!1}this.dispatchToElement(param(b,a),'dragend',a.event);if(this._dropTarget){this.dispatchToElement(param(this._dropTarget,a),'drop',a.event)}this._draggingTarget=null;this._dropTarget=null}};function param(b,a){return {target:b,topTarget:a&&a.topTarget}}var h4=Array.prototype.slice;var r=function(a){this._$handlers={};this._$eventProcessor=a};r.prototype={constructor:r,one:function(c,e,b,a){return on(this,c,e,b,a,!0)},on:function(c,e,b,a){return on(this,c,e,b,a,!1)},isSilent:function(a){var b=this._$handlers;return !b[a]||!b[a].length},off:function(a,e){var b=this._$handlers;if(!a){this._$handlers={};return this}if(e){if(b[a]){var f=[];for(var c=0,g=b[a].length;c<g;c++){if(b[a][c].h!==e){f.push(b[a][c])}}b[a]=f}if(b[a]&&b[a].length===0){delete b[a]}}else {delete b[a]}return this},trigger:function(g){var f=this._$handlers[g];var c=this._$eventProcessor;if(f){var b=arguments;var h=b.length;if(h>3){b=h4.call(b,1)}var i=f.length;for(var e=0;e<i;){var a=f[e];if(c&&c.filter&&a.query!=null&&!c.filter(g,a.query)){e++;continue}switch(h){case 1:a.h.call(a.ctx);break;case 2:a.h.call(a.ctx,b[1]);break;case 3:a.h.call(a.ctx,b[1],b[2]);break;default:a.h.apply(a.ctx,b);break;}if(a.one){f.splice(e,1);i--}else {e++}}}c&&c.afterTrigger&&c.afterTrigger(g);return this},triggerWithContext:function(h){var g=this._$handlers[h];var c=this._$eventProcessor;if(g){var a=arguments;var i=a.length;if(i>4){a=h4.call(a,1,a.length-1)}var f=a[a.length-1];var j=g.length;for(var e=0;e<j;){var b=g[e];if(c&&c.filter&&b.query!=null&&!c.filter(h,b.query)){e++;continue}switch(i){case 1:b.h.call(f);break;case 2:b.h.call(f,a[1]);break;case 3:b.h.call(f,a[1],a[2]);break;default:b.h.apply(f,a);break;}if(b.one){g.splice(e,1);j--}else {e++}}}c&&c.afterTrigger&&c.afterTrigger(h);return this}};function normalizeQuery(c,a){var b=c._$eventProcessor;if(a!=null&&b&&b.normalizeQuery){a=b.normalizeQuery(a)}return a}function on(c,a,f,e,j,l){var b=c._$handlers;if(typeof f==='function'){j=e;e=f;f=null}if(!e||!a){return c}f=normalizeQuery(c,f);if(!b[a]){b[a]=[]}for(var g=0;g<b[a].length;g++){if(b[a][g].h===e){return c}}var k={h:e,one:l,query:f,ctx:j||c,callAtLast:e.zrEventfulCallAtLast};var h=b[a].length-1;var i=b[a][h];i&&i.callAtLast?b[a].splice(h,0,k):b[a].push(k);return c}var oL=Math.log(2);function determinant(e,n,b,i,c,a){var h=i+'-'+c;var l=e.length;if(a.hasOwnProperty(h)){return a[h]}if(n===1){var p=Math.round(Math.log((1<<l)-1&~c)/oL);return e[b][p]}var o=i|1<<b;var g=b+1;while(i&1<<g){g++}var j=0;for(var f=0,k=0;f<l;f++){var m=1<<f;if(!(m&c)){j+=(k%2?-1:1)*e[b][f]*determinant(e,n-1,g,o,c|m,a);k++}}a[h]=j;return j}function buildTransformer(a,b){var i=[[a[0],a[1],1,0,0,0,-b[0]*a[0],-b[0]*a[1]],[0,0,0,a[0],a[1],1,-b[1]*a[0],-b[1]*a[1]],[a[2],a[3],1,0,0,0,-b[2]*a[2],-b[2]*a[3]],[0,0,0,a[2],a[3],1,-b[3]*a[2],-b[3]*a[3]],[a[4],a[5],1,0,0,0,-b[4]*a[4],-b[4]*a[5]],[0,0,0,a[4],a[5],1,-b[5]*a[4],-b[5]*a[5]],[a[6],a[7],1,0,0,0,-b[6]*a[6],-b[6]*a[7]],[0,0,0,a[6],a[7],1,-b[7]*a[6],-b[7]*a[7]]];var g={};var h=determinant(i,8,0,0,0,g);if(h===0){return}var c=[];for(var f=0;f<8;f++){for(var e=0;e<8;e++){c[e]==null&&(c[e]=0);c[e]+=((f+e)%2?-1:1)*determinant(i,7,f===0?1:0,1<<f,1<<e,g)/h*b[f]}}return function(g,e,f){var h=e*c[6]+f*c[7]+1;g[0]=(e*c[0]+f*c[1]+c[2])/h;g[1]=(e*c[3]+f*c[4]+c[5])/h}}var eW=typeof window!=='undefined'&&!!window.addEventListener;var k3=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;var gK='___zrEVENTSAVED';var fm=[];function clientToLocal(c,a,b,e){b=b||{};if(e||!f.canvasSupported){calculateZrXY(c,a,b)}else {if(f.browser.firefox&&a.layerX!=null&&a.layerX!==a.offsetX){b.zrX=a.layerX;b.zrY=a.layerY}else {if(a.offsetX!=null){b.zrX=a.offsetX;b.zrY=a.offsetY}else {calculateZrXY(c,a,b)}}}return b}function calculateZrXY(b,j,a){if(b.getBoundingClientRect&&f.domSupported){var h=j.clientX;var i=j.clientY;if(b.nodeName.toUpperCase()==='CANVAS'){var g=b.getBoundingClientRect();a.zrX=h-g.left;a.zrY=i-g.top;return}else {var e=b[gK]||(b[gK]={});var c=preparePointerTransformer(prepareCoordMarkers(b,e),e);if(c){c(fm,h,i);a.zrX=fm[0];a.zrY=fm[1];return}}}a.zrX=a.zrY=0}function prepareCoordMarkers(k,i){var a=i.markers;if(a){return a}a=i.markers=[];var e=['left','right'];var f=['top','bottom'];for(var b=0;b<4;b++){var c=document.createElement('div');var j=c.style;var g=b%2;var h=(b>>1)%2;j.cssText=['position:absolute','visibility: hidden','padding: 0','margin: 0','border-width: 0','width:0','height:0',e[g]+':0',f[h]+':0',e[1-g]+':auto',f[1-h]+':auto',''].join('!important;');k.appendChild(c);a.push(c)}return a}function preparePointerTransformer(f,b){var m=b.transformer;var c=b.srcCoords;var h=!0;var e=[];var g=[];for(var a=0;a<4;a++){var i=f[a].getBoundingClientRect();var j=2*a;var k=i.left;var l=i.top;e.push(k,l);h&=c&&k===c[j]&&l===c[j+1];g.push(f[a].offsetLeft,f[a].offsetTop)}return h?m:(b.srcCoords=e,b.transformer=buildTransformer(e,g))}function normalizeEvent(g,a,e){a=a||window.event;if(a.zrX!=null){return a}var c=a.type;var h=c&&c.indexOf('touch')>=0;if(!h){clientToLocal(g,a,a,e);a.zrDelta=a.wheelDelta?a.wheelDelta/120:-(a.detail||0)/3}else {var f=c!=='touchend'?a.targetTouches[0]:a.changedTouches[0];f&&clientToLocal(g,f,a,e)}var b=a.button;if(a.which==null&&b!==undefined&&k3.test(a.type)){a.which=b&1?1:b&2?3:b&4?2:0}return a}function addEventListener(c,b,a){if(eW){c.addEventListener(b,a)}else {c.attachEvent('on'+b,a)}}function removeEventListener(c,b,a){if(eW){c.removeEventListener(b,a)}else {c.detachEvent('on'+b,a)}}var aN=eW?function(a){a.preventDefault();a.stopPropagation();a.cancelBubble=!0}:function(a){a.returnValue=!1;a.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(a){return a.which===2||a.which===3}var e$=function(){this._track=[]};e$.prototype={constructor:e$,recognize:function(a,b,c){this._doTrack(a,b,c);return this._recognize(a)},clear:function(){this._track.length=0;return this},_doTrack:function(e,h,i){var b=e.touches;if(!b){return}var a={points:[],touches:[],target:h,event:e};for(var c=0,j=b.length;c<j;c++){var f=b[c];var g=clientToLocal(i,f,{});a.points.push([g.zrX,g.zrY]);a.touches.push(f)}this._track.push(a)},_recognize:function(c){for(var b in eX){if(eX.hasOwnProperty(b)){var a=eX[b](this._track,c);if(a){return a}}}}};function dist$1(a){var b=a[1][0]-a[0][0];var c=a[1][1]-a[0][1];return Math.sqrt(b*b+c*c)}function center(a){return [(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var eX={pinch:function(c,b){var g=c.length;if(!g){return}var a=(c[g-1]||{}).points;var f=(c[g-2]||{}).points||a;if(f&&f.length>1&&a&&a.length>1){var e=dist$1(a)/dist$1(f);!isFinite(e)&&(e=1);b.pinchScale=e;var h=center(a);b.pinchX=h[0];b.pinchY=h[1];return {type:'pinch',target:c[0].target,event:b}}}};var i$='silent';function makeEventPacket(c,b,a){return {type:c,event:a,target:b.target,topTarget:b.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:stopEvent}}function stopEvent(a){aN(this.event)}function EmptyProxy(){}EmptyProxy.prototype.dispose=function(){};var mf=['click','dblclick','mousewheel','mouseout','mouseup','mousedown','mousemove','contextmenu'];var bB=function(e,c,a,b){r.call(this);this.storage=e;this.painter=c;this.painterRoot=b;a=a||new EmptyProxy();this.proxy=null;this._hovered={};this._lastTouchMoment;this._lastX;this._lastY;this._gestureMgr;Draggable.call(this);this.setHandlerProxy(a)};bB.prototype={constructor:bB,setHandlerProxy:function(a){if(this.proxy){this.proxy.dispose()}if(a){each$1(mf,function(b){a.on&&a.on(b,this[b],this)},this);a.handler=this}this.proxy=a},mousemove:function(e){var h=e.zrX;var i=e.zrY;var b=this._hovered;var a=b.target;if(a&&!a.__zr){b=this.findHover(b.x,b.y);a=b.target}var f=this._hovered=this.findHover(h,i);var c=f.target;var g=this.proxy;g.setCursor&&g.setCursor(c?c.cursor:'default');if(a&&c!==a){this.dispatchToElement(b,'mouseout',e)}this.dispatchToElement(f,'mousemove',e);if(c&&c!==a){this.dispatchToElement(f,'mouseover',e)}},mouseout:function(b){this.dispatchToElement(this._hovered,'mouseout',b);var a=b.toElement||b.relatedTarget;var c;do{a=a&&a.parentNode}while(a&&a.nodeType!==9&&!(c=a===this.painterRoot));!c&&this.trigger('globalout',{event:b})},resize:function(a){this._hovered={}},dispatch:function(c,b){var a=this[c];a&&a.call(this,b)},dispose:function(){this.proxy.dispose();this.storage=this.proxy=this.painter=null},setCursorStyle:function(b){var a=this.proxy;a.setCursor&&a.setCursor(b)},dispatchToElement:function(f,c,g){f=f||{};var a=f.target;if(a&&a.silent){return}var e='on'+c;var b=makeEventPacket(c,f,g);while(a){a[e]&&(b.cancelBubble=a[e].call(a,b));a.trigger(c,b);a=a.parent;if(b.cancelBubble){break}}if(!b.cancelBubble){this.trigger(c,b);this.painter&&this.painter.eachOtherLayer(function(a){if(typeof a[e]==='function'){a[e].call(a,b)}if(a.trigger){a.trigger(c,b)}})}},findHover:function(f,g,h){var b=this.storage.getDisplayList();var c={x:f,y:g};for(var a=b.length-1;a>=0;a--){var e;if(b[a]!==h&&!b[a].ignore&&(e=isHover(b[a],f,g))){!c.topTarget&&(c.topTarget=b[a]);if(e!==i$){c.target=b[a];break}}}return c},processGesture:function(b,e){if(!this._gestureMgr){this._gestureMgr=new e$()}var c=this._gestureMgr;e==='start'&&c.clear();var a=c.recognize(b,this.findHover(b.zrX,b.zrY,null).target,this.proxy.dom);e==='end'&&c.clear();if(a){var f=a.type;b.gestureEvent=f;this.dispatchToElement({target:a.target},f,a.event)}}};each$1(['click','mousedown','mouseup','mousewheel','dblclick','contextmenu'],function(a){bB.prototype[a]=function(b){var e=this.findHover(b.zrX,b.zrY);var c=e.target;if(a==='mousedown'){this._downEl=c;this._downPoint=[b.zrX,b.zrY];this._upEl=c}else {if(a==='mouseup'){this._upEl=c}else {if(a==='click'){if(this._downEl!==this._upEl||!this._downPoint||bd(this._downPoint,[b.zrX,b.zrY])>4){return}this._downPoint=null}}}this.dispatchToElement(e,a,b)}});function isHover(b,e,f){if(b[b.rectHover?'rectContain':'contain'](e,f)){var a=b;var c;while(a){if(a.clipPath&&!a.clipPath.contain(e,f)){return !1}if(a.silent){c=!0}a=a.parent}return c?i$:!0}return !1}mixin(bB,r);mixin(bB,Draggable);var mw=typeof Float32Array==='undefined'?Array:Float32Array;function create$1(){var a=new mw(6);identity(a);return a}function identity(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a}function copy$1(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function mul$1(c,a,b){var e=a[0]*b[0]+a[2]*b[1];var f=a[1]*b[0]+a[3]*b[1];var g=a[0]*b[2]+a[2]*b[3];var h=a[1]*b[2]+a[3]*b[3];var i=a[0]*b[4]+a[2]*b[5]+a[4];var j=a[1]*b[4]+a[3]*b[5]+a[5];c[0]=e;c[1]=f;c[2]=g;c[3]=h;c[4]=i;c[5]=j;return c}function translate(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4]+c[0];a[5]=b[5]+c[1];return a}function rotate(a,e,h){var i=e[0];var k=e[2];var f=e[4];var j=e[1];var l=e[3];var g=e[5];var c=Math.sin(h);var b=Math.cos(h);a[0]=i*b+j*c;a[1]=-i*c+j*b;a[2]=k*b+l*c;a[3]=-k*c+b*l;a[4]=b*f+c*g;a[5]=b*g-c*f;return a}function scale$1(a,b,f){var c=f[0];var e=f[1];a[0]=b[0]*c;a[1]=b[1]*e;a[2]=b[2]*c;a[3]=b[3]*e;a[4]=b[4]*c;a[5]=b[5]*e;return a}function invert(b,c){var e=c[0];var g=c[2];var i=c[4];var f=c[1];var h=c[3];var j=c[5];var a=e*h-f*g;if(!a){return null}a=1/a;b[0]=h*a;b[1]=-f*a;b[2]=-g*a;b[3]=e*a;b[4]=(g*j-h*i)*a;b[5]=(f*i-e*j)*a;return b}function clone$2(b){var a=create$1();copy$1(a,b);return a}var ot=(Object.freeze||Object)({create:create$1,identity:identity,copy:copy$1,mul:mul$1,translate:translate,rotate:rotate,scale:scale$1,invert:invert,clone:clone$2});var fa=identity;var ix=5.0E-5;function isNotAroundZero(a){return a>ix||a<-ix}var V=function(a){a=a||{};if(!a.position){this.position=[0,0]}if(a.rotation==null){this.rotation=0}if(!a.scale){this.scale=[1,1]}this.origin=this.origin||null};var R=V.prototype;R.transform=null;R.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.position[0])||isNotAroundZero(this.position[1])||isNotAroundZero(this.scale[0]-1)||isNotAroundZero(this.scale[1]-1)};var a7=[];R.updateTransform=function(){var c=this.parent;var f=c&&c.transform;var e=this.needLocalTransform();var a=this.transform;if(!(e||f)){a&&fa(a);return}a=a||create$1();if(e){this.getLocalTransform(a)}else {fa(a)}if(f){if(e){mul$1(a,c.transform,a)}else {copy$1(a,c.transform)}}this.transform=a;var b=this.globalScaleRatio;if(b!=null&&b!==1){this.getGlobalScale(a7);var g=a7[0]<0?-1:1;var h=a7[1]<0?-1:1;var i=((a7[0]-g)*b+g)/a7[0]||0;var j=((a7[1]-h)*b+h)/a7[1]||0;a[0]*=i;a[1]*=i;a[2]*=j;a[3]*=j}this.invTransform=this.invTransform||create$1();invert(this.invTransform,a)};R.getLocalTransform=function(a){return V.getLocalTransform(this,a)};R.setTransform=function(c){var b=this.transform;var a=c.dpr||1;if(b){c.setTransform(a*b[0],a*b[1],a*b[2],a*b[3],a*b[4],a*b[5])}else {c.setTransform(a,0,0,a,0,0)}};R.restoreTransform=function(a){var b=a.dpr||1;a.setTransform(b,0,0,b,0,0)};var bv=[];var es=create$1();R.setLocalTransform=function(a){if(!a){return}var b=a[0]*a[0]+a[1]*a[1];var c=a[2]*a[2]+a[3]*a[3];var e=this.position;var f=this.scale;if(isNotAroundZero(b-1)){b=Math.sqrt(b)}if(isNotAroundZero(c-1)){c=Math.sqrt(c)}if(a[0]<0){b=-b}if(a[3]<0){c=-c}e[0]=a[4];e[1]=a[5];f[0]=b;f[1]=c;this.rotation=Math.atan2(-a[1]/c,a[0]/b)};R.decomposeTransform=function(){if(!this.transform){return}var c=this.parent;var b=this.transform;if(c&&c.transform){mul$1(bv,c.invTransform,b);b=bv}var a=this.origin;if(a&&(a[0]||a[1])){es[4]=a[0];es[5]=a[1];mul$1(bv,b,es);bv[4]-=a[0];bv[5]-=a[1];b=bv}this.setLocalTransform(b)};R.getGlobalScale=function(a){var b=this.transform;a=a||[];if(!b){a[0]=1;a[1]=1;return a}a[0]=Math.sqrt(b[0]*b[0]+b[1]*b[1]);a[1]=Math.sqrt(b[2]*b[2]+b[3]*b[3]);if(b[0]<0){a[0]=-a[0]}if(b[3]<0){a[1]=-a[1]}return a};R.transformCoordToLocal=function(c,e){var a=[c,e];var b=this.invTransform;if(b){applyTransform(a,a,b)}return a};R.transformCoordToGlobal=function(c,e){var a=[c,e];var b=this.transform;if(b){applyTransform(a,a,b)}return a};V.getLocalTransform=function(c,a){a=a||[];fa(a);var b=c.origin;var g=c.scale||[1,1];var f=c.rotation||0;var e=c.position||[0,0];if(b){a[4]-=b[0];a[5]-=b[1]}scale$1(a,a,g);if(f){rotate(a,a,f)}if(b){a[4]+=b[0];a[5]+=b[1]}a[4]+=e[0];a[5]+=e[1];return a};var dG={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){if((a*=2)<1){return 0.5*a*a}return -0.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return --a*a*a+1},cubicInOut:function(a){if((a*=2)<1){return 0.5*a*a*a}return 0.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){if((a*=2)<1){return 0.5*a*a*a*a}return -0.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return --a*a*a*a*a+1},quinticInOut:function(a){if((a*=2)<1){return 0.5*a*a*a*a*a}return 0.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return 0.5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){if(a===0){return 0}if(a===1){return 1}if((a*=2)<1){return 0.5*Math.pow(1024,a-1)}return 0.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){if((a*=2)<1){return -0.5*(Math.sqrt(1-a*a)-1)}return 0.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(b){var e;var a=0.1;var c=0.4;if(b===0){return 0}if(b===1){return 1}if(!a||a<1){a=1;e=c/4}else {e=c*Math.asin(1/a)/(2*Math.PI)}return -(a*Math.pow(2,10*(b-=1))*Math.sin((b-e)*(2*Math.PI)/c))},elasticOut:function(b){var e;var a=0.1;var c=0.4;if(b===0){return 0}if(b===1){return 1}if(!a||a<1){a=1;e=c/4}else {e=c*Math.asin(1/a)/(2*Math.PI)}return a*Math.pow(2,-10*b)*Math.sin((b-e)*(2*Math.PI)/c)+1},elasticInOut:function(a){var e;var b=0.1;var c=0.4;if(a===0){return 0}if(a===1){return 1}if(!b||b<1){b=1;e=c/4}else {e=c*Math.asin(1/b)/(2*Math.PI)}if((a*=2)<1){return -0.5*(b*Math.pow(2,10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/c))}return b*Math.pow(2,-10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/c)*0.5+1},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){var b=1.70158;return --a*a*((b+1)*a+b)+1},backInOut:function(a){var b=1.70158*1.525;if((a*=2)<1){return 0.5*(a*a*((b+1)*a-b))}return 0.5*((a-=2)*a*((b+1)*a+b)+2)},bounceIn:function(a){return 1-dG.bounceOut(1-a)},bounceOut:function(a){if(a<1/2.75){return 7.5625*a*a}else {if(a<2/2.75){return 7.5625*(a-=1.5/2.75)*a+0.75}else {if(a<2.5/2.75){return 7.5625*(a-=2.25/2.75)*a+0.9375}else {return 7.5625*(a-=2.625/2.75)*a+0.984375}}}},bounceInOut:function(a){if(a<0.5){return dG.bounceIn(a*2)*0.5}return dG.bounceOut(a*2-1)*0.5+0.5}};function Clip(a){this._target=a.target;this._life=a.life||1000;this._delay=a.delay||0;this._initialized=!1;this.loop=a.loop==null?!1:a.loop;this.gap=a.gap||0;this.easing=a.easing||'Linear';this.onframe=a.onframe;this.ondestroy=a.ondestroy;this.onrestart=a.onrestart;this._pausedTime=0;this._paused=!1}Clip.prototype={constructor:Clip,step:function(b,f){if(!this._initialized){this._startTime=b+this._delay;this._initialized=!0}if(this._paused){this._pausedTime+=f;return}var a=(b-this._startTime-this._pausedTime)/this._life;if(a<0){return}a=Math.min(a,1);var c=this.easing;var e=typeof c==='string'?dG[c]:c;var g=typeof e==='function'?e(a):a;this.fire('frame',g);if(a===1){if(this.loop){this.restart(b);return 'restart'}this._needsRemove=!0;return 'destroy'}return null},restart:function(a){var b=(a-this._startTime-this._pausedTime)%this._life;this._startTime=a-b+this.gap;this._pausedTime=0;this._needsRemove=!1},fire:function(a,b){a='on'+a;if(this[a]){this[a](this._target,b)}},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var hT=function(){this.head=null;this.tail=null;this._len=0};var bY=hT.prototype;bY.insert=function(b){var a=new i2(b);this.insertEntry(a);return a};bY.insertEntry=function(a){if(!this.head){this.head=this.tail=a}else {this.tail.next=a;a.prev=this.tail;a.next=null;this.tail=a}this._len++};bY.remove=function(a){var c=a.prev;var b=a.next;if(c){c.next=b}else {this.head=b}if(b){b.prev=c}else {this.tail=c}a.next=a.prev=null;this._len--};bY.len=function(){return this._len};bY.clear=function(){this.head=this.tail=null;this._len=0};var i2=function(a){this.value=a;this.next;this.prev};var fS=function(a){this._list=new hT();this._map={};this._maxSize=a||10;this._lastRemovedEntry=null};var fk=fS.prototype;fk.put=function(e,h){var c=this._list;var f=this._map;var g=null;if(f[e]==null){var i=c.len();var a=this._lastRemovedEntry;if(i>=this._maxSize&&i>0){var b=c.head;c.remove(b);delete f[b.key];g=b.value;this._lastRemovedEntry=b}if(a){a.value=h}else {a=new i2(h)}a.key=e;c.insertEntry(a);f[e]=a}return g};fk.get=function(c){var a=this._map[c];var b=this._list;if(a!=null){if(a!==b.tail){b.remove(a);b.insertEntry(a)}return a.value}};fk.clear=function(){this._list.clear();this._map={}};var hd={'transparent':[0,0,0,0],'aliceblue':[240,248,255,1],'antiquewhite':[250,235,215,1],'aqua':[0,255,255,1],'aquamarine':[127,255,212,1],'azure':[240,255,255,1],'beige':[245,245,220,1],'bisque':[255,228,196,1],'black':[0,0,0,1],'blanchedalmond':[255,235,205,1],'blue':[0,0,255,1],'blueviolet':[138,43,226,1],'brown':[165,42,42,1],'burlywood':[222,184,135,1],'cadetblue':[95,158,160,1],'chartreuse':[127,255,0,1],'chocolate':[210,105,30,1],'coral':[255,127,80,1],'cornflowerblue':[100,149,237,1],'cornsilk':[255,248,220,1],'crimson':[220,20,60,1],'cyan':[0,255,255,1],'darkblue':[0,0,139,1],'darkcyan':[0,139,139,1],'darkgoldenrod':[184,134,11,1],'darkgray':[169,169,169,1],'darkgreen':[0,100,0,1],'darkgrey':[169,169,169,1],'darkkhaki':[189,183,107,1],'darkmagenta':[139,0,139,1],'darkolivegreen':[85,107,47,1],'darkorange':[255,140,0,1],'darkorchid':[153,50,204,1],'darkred':[139,0,0,1],'darksalmon':[233,150,122,1],'darkseagreen':[143,188,143,1],'darkslateblue':[72,61,139,1],'darkslategray':[47,79,79,1],'darkslategrey':[47,79,79,1],'darkturquoise':[0,206,209,1],'darkviolet':[148,0,211,1],'deeppink':[255,20,147,1],'deepskyblue':[0,191,255,1],'dimgray':[105,105,105,1],'dimgrey':[105,105,105,1],'dodgerblue':[30,144,255,1],'firebrick':[178,34,34,1],'floralwhite':[255,250,240,1],'forestgreen':[34,139,34,1],'fuchsia':[255,0,255,1],'gainsboro':[220,220,220,1],'ghostwhite':[248,248,255,1],'gold':[255,215,0,1],'goldenrod':[218,165,32,1],'gray':[128,128,128,1],'green':[0,128,0,1],'greenyellow':[173,255,47,1],'grey':[128,128,128,1],'honeydew':[240,255,240,1],'hotpink':[255,105,180,1],'indianred':[205,92,92,1],'indigo':[75,0,130,1],'ivory':[255,255,240,1],'khaki':[240,230,140,1],'lavender':[230,230,250,1],'lavenderblush':[255,240,245,1],'lawngreen':[124,252,0,1],'lemonchiffon':[255,250,205,1],'lightblue':[173,216,230,1],'lightcoral':[240,128,128,1],'lightcyan':[224,255,255,1],'lightgoldenrodyellow':[250,250,210,1],'lightgray':[211,211,211,1],'lightgreen':[144,238,144,1],'lightgrey':[211,211,211,1],'lightpink':[255,182,193,1],'lightsalmon':[255,160,122,1],'lightseagreen':[32,178,170,1],'lightskyblue':[135,206,250,1],'lightslategray':[119,136,153,1],'lightslategrey':[119,136,153,1],'lightsteelblue':[176,196,222,1],'lightyellow':[255,255,224,1],'lime':[0,255,0,1],'limegreen':[50,205,50,1],'linen':[250,240,230,1],'magenta':[255,0,255,1],'maroon':[128,0,0,1],'mediumaquamarine':[102,205,170,1],'mediumblue':[0,0,205,1],'mediumorchid':[186,85,211,1],'mediumpurple':[147,112,219,1],'mediumseagreen':[60,179,113,1],'mediumslateblue':[123,104,238,1],'mediumspringgreen':[0,250,154,1],'mediumturquoise':[72,209,204,1],'mediumvioletred':[199,21,133,1],'midnightblue':[25,25,112,1],'mintcream':[245,255,250,1],'mistyrose':[255,228,225,1],'moccasin':[255,228,181,1],'navajowhite':[255,222,173,1],'navy':[0,0,128,1],'oldlace':[253,245,230,1],'olive':[128,128,0,1],'olivedrab':[107,142,35,1],'orange':[255,165,0,1],'orangered':[255,69,0,1],'orchid':[218,112,214,1],'palegoldenrod':[238,232,170,1],'palegreen':[152,251,152,1],'paleturquoise':[175,238,238,1],'palevioletred':[219,112,147,1],'papayawhip':[255,239,213,1],'peachpuff':[255,218,185,1],'peru':[205,133,63,1],'pink':[255,192,203,1],'plum':[221,160,221,1],'powderblue':[176,224,230,1],'purple':[128,0,128,1],'red':[255,0,0,1],'rosybrown':[188,143,143,1],'royalblue':[65,105,225,1],'saddlebrown':[139,69,19,1],'salmon':[250,128,114,1],'sandybrown':[244,164,96,1],'seagreen':[46,139,87,1],'seashell':[255,245,238,1],'sienna':[160,82,45,1],'silver':[192,192,192,1],'skyblue':[135,206,235,1],'slateblue':[106,90,205,1],'slategray':[112,128,144,1],'slategrey':[112,128,144,1],'snow':[255,250,250,1],'springgreen':[0,255,127,1],'steelblue':[70,130,180,1],'tan':[210,180,140,1],'teal':[0,128,128,1],'thistle':[216,191,216,1],'tomato':[255,99,71,1],'turquoise':[64,224,208,1],'violet':[238,130,238,1],'wheat':[245,222,179,1],'white':[255,255,255,1],'whitesmoke':[245,245,245,1],'yellow':[255,255,0,1],'yellowgreen':[154,205,50,1]};function clampCssByte(a){a=Math.round(a);return a<0?0:a>255?255:a}function clampCssAngle(a){a=Math.round(a);return a<0?0:a>360?360:a}function clampCssFloat(a){return a<0?0:a>1?1:a}function parseCssInt(a){if(a.length&&a.charAt(a.length-1)==='%'){return clampCssByte(parseFloat(a)/100*255)}return clampCssByte(parseInt(a,10))}function parseCssFloat(a){if(a.length&&a.charAt(a.length-1)==='%'){return clampCssFloat(parseFloat(a)/100)}return clampCssFloat(parseFloat(a))}function cssHueToRgb(b,c,a){if(a<0){a+=1}else {if(a>1){a-=1}}if(a*6<1){return b+(c-b)*a*6}if(a*2<1){return c}if(a*3<2){return b+(c-b)*(2/3-a)*6}return b}function lerpNumber(a,b,c){return a+(b-a)*c}function setRgba(a,f,e,c,b){a[0]=f;a[1]=e;a[2]=c;a[3]=b;return a}function copyRgba(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}var hX=new fS(20);var cP=null;function putToCache(b,a){if(cP){copyRgba(cP,a)}cP=hX.put(b,cP||a.slice())}function parse(f,a){if(!f){return}a=a||[];var h=hX.get(f);if(h){return copyRgba(a,h)}f=f+'';var e=f.replace(/ /g,'').toLowerCase();if(e in hd){copyRgba(a,hd[e]);putToCache(f,a);return a}if(e.charAt(0)==='#'){if(e.length===4){var b=parseInt(e.substr(1),16);if(!(b>=0&&b<=4095)){setRgba(a,0,0,0,1);return}setRgba(a,(b&3840)>>4|(b&3840)>>8,b&240|(b&240)>>4,b&15|(b&15)<<4,1);putToCache(f,a);return a}else {if(e.length===7){var b=parseInt(e.substr(1),16);if(!(b>=0&&b<=16777215)){setRgba(a,0,0,0,1);return}setRgba(a,(b&16711680)>>16,(b&65280)>>8,b&255,1);putToCache(f,a);return a}}return}var g=e.indexOf('(');var j=e.indexOf(')');if(g!==-1&&j+1===e.length){var k=e.substr(0,g);var c=e.substr(g+1,j-(g+1)).split(',');var i=1;switch(k){case 'rgba':if(c.length!==4){setRgba(a,0,0,0,1);return};i=parseCssFloat(c.pop());case 'rgb':if(c.length!==3){setRgba(a,0,0,0,1);return};setRgba(a,parseCssInt(c[0]),parseCssInt(c[1]),parseCssInt(c[2]),i);putToCache(f,a);return a;case 'hsla':if(c.length!==4){setRgba(a,0,0,0,1);return};c[3]=parseCssFloat(c[3]);hsla2rgba(c,a);putToCache(f,a);return a;case 'hsl':if(c.length!==3){setRgba(a,0,0,0,1);return};hsla2rgba(c,a);putToCache(f,a);return a;default:return;}}setRgba(a,0,0,0,1);return}function hsla2rgba(a,b){var g=(parseFloat(a[0])%360+360)%360/360;var h=parseCssFloat(a[1]);var c=parseCssFloat(a[2]);var e=c<=0.5?c*(h+1):c+h-c*h;var f=c*2-e;b=b||[];setRgba(b,clampCssByte(cssHueToRgb(f,e,g+1/3)*255),clampCssByte(cssHueToRgb(f,e,g)*255),clampCssByte(cssHueToRgb(f,e,g-1/3)*255),1);if(a.length===4){b[3]=a[3]}return b}function rgba2hsla(e){if(!e){return}var i=e[0]/255;var h=e[1]/255;var g=e[2]/255;var f=Math.min(i,h,g);var a=Math.max(i,h,g);var b=a-f;var o=(a+f)/2;var c;var j;if(b===0){c=0;j=0}else {if(o<0.5){j=b/(a+f)}else {j=b/(2-a-f)}var m=((a-i)/6+b/2)/b;var l=((a-h)/6+b/2)/b;var k=((a-g)/6+b/2)/b;if(i===a){c=k-l}else {if(h===a){c=1/3+m-k}else {if(g===a){c=2/3+l-m}}}if(c<0){c+=1}if(c>1){c-=1}}var n=[c*360,j,o];if(e[3]!=null){n.push(e[3])}return n}function lift(e,c){var a=parse(e);if(a){for(var b=0;b<3;b++){if(c<0){a[b]=a[b]*(1-c)|0}else {a[b]=(255-a[b])*c+a[b]|0}if(a[b]>255){a[b]=255}else {if(e[b]<0){a[b]=0}}}return stringify(a,a.length===4?'rgba':'rgb')}}function toHex(b){var a=parse(b);if(a){return ((1<<24)+(a[0]<<16)+(a[1]<<8)+ +a[2]).toString(16).slice(1)}}function fastLerp(g,b,a){if(!(b&&b.length)||!(g>=0&&g<=1)){return}a=a||[];var h=g*(b.length-1);var i=Math.floor(h);var j=Math.ceil(h);var e=b[i];var c=b[j];var f=h-i;a[0]=clampCssByte(lerpNumber(e[0],c[0],f));a[1]=clampCssByte(lerpNumber(e[1],c[1],f));a[2]=clampCssByte(lerpNumber(e[2],c[2],f));a[3]=clampCssFloat(lerpNumber(e[3],c[3],f));return a}var lu=fastLerp;function lerp$1(g,a,k){if(!(a&&a.length)||!(g>=0&&g<=1)){return}var e=g*(a.length-1);var h=Math.floor(e);var i=Math.ceil(e);var c=parse(a[h]);var b=parse(a[i]);var f=e-h;var j=stringify([clampCssByte(lerpNumber(c[0],b[0],f)),clampCssByte(lerpNumber(c[1],b[1],f)),clampCssByte(lerpNumber(c[2],b[2],f)),clampCssFloat(lerpNumber(c[3],b[3],f))],'rgba');return k?{color:j,leftIndex:h,rightIndex:i,value:e}:j}var nd=lerp$1;function modifyHSL(a,b,e,c){a=parse(a);if(a){a=rgba2hsla(a);b!=null&&(a[0]=clampCssAngle(b));e!=null&&(a[1]=parseCssFloat(e));c!=null&&(a[2]=parseCssFloat(c));return stringify(hsla2rgba(a),'rgba')}}function modifyAlpha(a,b){a=parse(a);if(a&&b!=null){a[3]=clampCssFloat(b);return stringify(a,'rgba')}}function stringify(a,b){if(!a||!a.length){return}var c=a[0]+','+a[1]+','+a[2];if(b==='rgba'||b==='hsva'||b==='hsla'){c+=','+a[3]}return b+'('+c+')'}var oF=(Object.freeze||Object)({parse:parse,lift:lift,toHex:toHex,fastLerp:fastLerp,fastMapToColor:lu,lerp:lerp$1,mapToColor:nd,modifyHSL:modifyHSL,modifyAlpha:modifyAlpha,stringify:stringify});var e1=Array.prototype.slice;function defaultGetter(a,b){return a[b]}function defaultSetter(a,c,b){a[c]=b}function interpolateNumber(a,c,b){return (c-a)*b+a}function interpolateString(b,c,a){return a>0.5?c:b}function interpolateArray(c,h,f,g,i){var e=c.length;if(i===1){for(var a=0;a<e;a++){g[a]=interpolateNumber(c[a],h[a],f)}}else {var j=e&&c[0].length;for(var a=0;a<e;a++){for(var b=0;b<j;b++){g[a][b]=interpolateNumber(c[a][b],h[a][b],f)}}}}function fillArr(b,c,h){var g=b.length;var f=c.length;if(g!==f){var i=g>f;if(i){b.length=f}else {for(var a=g;a<f;a++){b.push(h===1?c[a]:e1.call(c[a]))}}}var j=b[0]&&b[0].length;for(var a=0;a<b.length;a++){if(h===1){if(isNaN(b[a])){b[a]=c[a]}}else {for(var e=0;e<j;e++){if(isNaN(b[a][e])){b[a][e]=c[a][e]}}}}}function isArraySame(b,c,g){if(b===c){return !0}var f=b.length;if(f!==c.length){return !1}if(g===1){for(var a=0;a<f;a++){if(b[a]!==c[a]){return !1}}}else {var h=b[0].length;for(var a=0;a<f;a++){for(var e=0;e<h;e++){if(b[a][e]!==c[a][e]){return !1}}}}return !0}function catmullRomInterpolateArray(c,g,h,i,l,j,k,f,m){var e=c.length;if(m===1){for(var a=0;a<e;a++){f[a]=catmullRomInterpolate(c[a],g[a],h[a],i[a],l,j,k)}}else {var n=c[0].length;for(var a=0;a<e;a++){for(var b=0;b<n;b++){f[a][b]=catmullRomInterpolate(c[a][b],g[a][b],h[a][b],i[a][b],l,j,k)}}}}function catmullRomInterpolate(f,a,b,g,j,h,i){var c=(b-f)*0.5;var e=(g-a)*0.5;return (2*(a-b)+c+e)*i+(-3*(a-b)-2*c-e)*h+c*j+a}function cloneValue(a){if(isArrayLike(a)){var e=a.length;if(isArrayLike(a[0])){var c=[];for(var b=0;b<e;b++){c.push(e1.call(a[b]))}return c}return e1.call(a)}return a}function rgba2String(a){a[0]=Math.floor(a[0]);a[1]=Math.floor(a[1]);a[2]=Math.floor(a[2]);return 'rgba('+a.join(',')+')'}function getArrayDim(a){var b=a[a.length-1].value;return isArrayLike(b&&b[0])?2:1}function createTrackClip(j,r,G,f,l,F){var y=j._getter;var C=j._setter;var H=r==='spline';var c=f.length;if(!c){return}var I=f[0].value;var g=isArrayLike(I);var k=!1;var p=!1;var m=g?getArrayDim(f):0;var v;f.sort(function(a,b){return a.time-b.time});v=f[c-1].time;var i=[];var b=[];var x=f[0].value;var A=!0;for(var e=0;e<c;e++){i.push(f[e].time/v);var h=f[e].value;if(!(g&&isArraySame(h,x,m)||!g&&h===x)){A=!1}x=h;if(typeof h==='string'){var B=parse(h);if(B){h=B;k=!0}else {p=!0}}b.push(h)}if(!F&&A){return}var q=b[c-1];for(var e=0;e<c-1;e++){if(g){fillArr(b[e],q,m)}else {if(isNaN(b[e])&&!isNaN(q)&&!p&&!k){b[e]=q}}}g&&fillArr(y(j._target,l),q,m);var w=0;var z=0;var D;var a;var t;var n;var o;var u;if(k){var s=[0,0,0,0]}var J=function(v,q){var e;if(q<0){e=0}else {if(q<z){D=Math.min(w+1,c-1);for(e=D;e>=0;e--){if(i[e]<=q){break}}e=Math.min(e,c-2)}else {for(e=w;e<c;e++){if(i[e]>q){break}}e=Math.min(e-1,c-2)}}w=e;z=q;var x=i[e+1]-i[e];if(x===0){return}else {a=(q-i[e])/x}if(H){n=b[e];t=b[e===0?e:e-1];o=b[e>c-2?c-1:e+1];u=b[e>c-3?c-1:e+2];if(g){catmullRomInterpolateArray(t,n,o,u,a,a*a,a*a*a,y(v,l),m)}else {var h;if(k){h=catmullRomInterpolateArray(t,n,o,u,a,a*a,a*a*a,s,1);h=rgba2String(s)}else {if(p){return interpolateString(n,o,a)}else {h=catmullRomInterpolate(t,n,o,u,a,a*a,a*a*a)}}C(v,l,h)}}else {if(g){interpolateArray(b[e],b[e+1],a,y(v,l),m)}else {var h;if(k){interpolateArray(b[e],b[e+1],a,s,1);h=rgba2String(s)}else {if(p){return interpolateString(b[e],b[e+1],a)}else {h=interpolateNumber(b[e],b[e+1],a)}}C(v,l,h)}}};var E=new Clip({target:j._target,life:v,loop:j._loop,delay:j._delay,onframe:J,ondestroy:G});if(r&&r!=='spline'){E.easing=r}return E}var fj=function(c,e,a,b){this._tracks={};this._target=c;this._loop=e||!1;this._getter=a||defaultGetter;this._setter=b||defaultSetter;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[]};fj.prototype={when:function(f,c){var b=this._tracks;for(var a in c){if(!c.hasOwnProperty(a)){continue}if(!b[a]){b[a]=[];var e=this._getter(this._target,a);if(e==null){continue}if(f!==0){b[a].push({time:0,value:cloneValue(e)})}}b[a].push({time:f,value:c[a]})}return this},during:function(a){this._onframeList.push(a);return this},pause:function(){for(var a=0;a<this._clipList.length;a++){this._clipList[a].pause()}this._paused=!0},resume:function(){for(var a=0;a<this._clipList.length;a++){this._clipList[a].resume()}this._paused=!1},isPaused:function(){return !!this._paused},_doneCallback:function(){this._tracks={};this._clipList.length=0;var b=this._doneList;var c=b.length;for(var a=0;a<c;a++){b[a].call(this)}},start:function(j,g){var f=this;var a=0;var h=function(){a--;if(!a){f._doneCallback()}};var b;for(var e in this._tracks){if(!this._tracks.hasOwnProperty(e)){continue}var c=createTrackClip(this,j,h,this._tracks[e],e,g);if(c){this._clipList.push(c);a++;if(this.animation){this.animation.addClip(c)}b=c}}if(b){var i=b.onframe;b.onframe=function(c,b){i(c,b);for(var a=0;a<f._onframeList.length;a++){f._onframeList[a](c,b)}}}if(!a){this._doneCallback()}return this},stop:function(f){var a=this._clipList;var c=this.animation;for(var b=0;b<a.length;b++){var e=a[b];if(f){e.onframe(this._target,1)}c&&c.removeClip(e)}a.length=0},delay:function(a){this._delay=a;return this},done:function(a){if(a){this._doneList.push(a)}return this},getClips:function(){return this._clipList}};var ji=1;if(typeof window!=='undefined'){ji=Math.max(window.devicePixelRatio||1,1)}var nE=0;var cF=ji;var iu=function(){};if(nE===1){iu=console.error}var aA=iu;var c0=function(){this.animators=[]};c0.prototype={constructor:c0,animate:function(h,l){var e;var j=!1;var c=this;var k=this.__zr;if(h){var f=h.split('.');var b=c;j=f[0]==='shape';for(var i=0,m=f.length;i<m;i++){if(!b){continue}b=b[f[i]]}if(b){e=b}}else {e=c}if(!e){aA('Property "'+h+'" is not existed in element '+c.id);return}var g=c.animators;var a=new fj(e,l);a.during(function(a){c.dirty(j)}).done(function(){g.splice(indexOf(g,a),1)});g.push(a);if(k){k.animation.addAnimator(a)}return a},stopAnimation:function(c){var a=this.animators;var e=a.length;for(var b=0;b<e;b++){a[b].stop(c)}a.length=0;return this},animateTo:function(e,g,f,c,b,a){animateTo(this,e,g,f,c,b,a)},animateFrom:function(e,g,f,c,b,a){animateTo(this,e,g,f,c,b,a,!0)}};function animateTo(f,l,e,b,c,a,j,k){if(isString(b)){a=c;c=b;b=0}else {if(isFunction$1(c)){a=c;c='linear';b=0}else {if(isFunction$1(b)){a=b;b=0}else {if(isFunction$1(e)){a=e;e=500}else {if(!e){e=500}}}}}f.stopAnimation();animateToShallow(f,'',f,l,e,b,k);var g=f.animators.slice();var h=g.length;function done(){h--;if(!h){a&&a()}}if(!h){a&&a()}for(var i=0;i<g.length;i++){g[i].done(done).start(c,j)}}function animateToShallow(e,c,h,b,i,k,g){var f={};var j=0;for(var a in b){if(!b.hasOwnProperty(a)){continue}if(h[a]!=null){if(isObject$1(b[a])&&!isArrayLike(b[a])){animateToShallow(e,c?c+'.'+a:a,h[a],b[a],i,k,g)}else {if(g){f[a]=h[a];setAttrByPath(e,c,a,b[a])}else {f[a]=b[a]}j++}}else {if(b[a]!=null&&!g){setAttrByPath(e,c,a,b[a])}}}if(j>0){e.animate(c,!1).when(i==null?500:i,f).delay(k||0)}}function setAttrByPath(f,b,e,c){if(!b){f.attr(e,c)}else {var a={};a[b]={};a[b][e]=c;f.attr(a)}}var am=function(a){V.call(this,a);r.call(this,a);c0.call(this,a);this.id=a.id||jc()};am.prototype={type:'element',name:'',__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(b,c){switch(this.draggable){case 'horizontal':c=0;break;case 'vertical':b=0;break;}var a=this.transform;if(!a){a=this.transform=[1,0,0,1,0,0]}a[4]+=b;a[5]+=c;this.decomposeTransform();this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(b,a){},attrKV:function(a,c){if(a==='position'||a==='scale'||a==='origin'){if(c){var b=this[a];if(!b){b=this[a]=[]}b[0]=c[0];b[1]=c[1]}}else {this[a]=c}},hide:function(){this.ignore=!0;this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1;this.__zr&&this.__zr.refresh()},attr:function(a,c){if(typeof a==='string'){this.attrKV(a,c)}else {if(isObject$1(a)){for(var b in a){if(a.hasOwnProperty(b)){this.attrKV(b,a[b])}}}}this.dirty(!1);return this},setClipPath:function(a){var b=this.__zr;if(b){a.addSelfToZr(b)}if(this.clipPath&&this.clipPath!==a){this.removeClipPath()}this.clipPath=a;a.__zr=b;a.__clipTarget=this;this.dirty(!1)},removeClipPath:function(){var a=this.clipPath;if(a){if(a.__zr){a.removeSelfFromZr(a.__zr)}a.__zr=null;a.__clipTarget=null;this.clipPath=null;this.dirty(!1)}},addSelfToZr:function(b){this.__zr=b;var a=this.animators;if(a){for(var c=0;c<a.length;c++){b.animation.addAnimator(a[c])}}if(this.clipPath){this.clipPath.addSelfToZr(b)}},removeSelfFromZr:function(c){this.__zr=null;var a=this.animators;if(a){for(var b=0;b<a.length;b++){c.animation.removeAnimator(a[b])}}if(this.clipPath){this.clipPath.removeSelfFromZr(c)}}};mixin(am,c0);mixin(am,V);mixin(am,r);var cH=applyTransform;var dv=Math.min;var du=Math.max;function BoundingRect(c,e,b,a){if(b<0){c=c+b;b=-b}if(a<0){e=e+a;a=-a}this.x=c;this.y=e;this.width=b;this.height=a}BoundingRect.prototype={constructor:BoundingRect,union:function(a){var b=dv(a.x,this.x);var c=dv(a.y,this.y);this.width=du(a.x+a.width,this.x+this.width)-b;this.height=du(a.y+a.height,this.y+this.height)-c;this.x=b;this.y=c},applyTransform:function(){var b=[];var c=[];var a=[];var e=[];return function(f){if(!f){return}b[0]=a[0]=this.x;b[1]=e[1]=this.y;c[0]=e[0]=this.x+this.width;c[1]=a[1]=this.y+this.height;cH(b,b,f);cH(c,c,f);cH(a,a,f);cH(e,e,f);this.x=dv(b[0],c[0],a[0],e[0]);this.y=dv(b[1],c[1],a[1],e[1]);var g=du(b[0],c[0],a[0],e[0]);var h=du(b[1],c[1],a[1],e[1]);this.width=g-this.x;this.height=h-this.y}}(),calculateTransform:function(c){var b=this;var e=c.width/b.width;var f=c.height/b.height;var a=create$1();translate(a,a,[-b.x,-b.y]);scale$1(a,a,[e,f]);translate(a,a,[c.x,c.y]);return a},intersect:function(a){if(!a){return !1}if(!(a instanceof BoundingRect)){a=BoundingRect.create(a)}var b=this;var c=b.x;var e=b.x+b.width;var f=b.y;var g=b.y+b.height;var h=a.x;var i=a.x+a.width;var j=a.y;var k=a.y+a.height;return !(e<h||i<c||g<j||k<f)},contain:function(b,c){var a=this;return b>=a.x&&b<=a.x+a.width&&c>=a.y&&c<=a.y+a.height},clone:function(){return new BoundingRect(this.x,this.y,this.width,this.height)},copy:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height},plain:function(){return {x:this.x,y:this.y,width:this.width,height:this.height}}};BoundingRect.create=function(a){return new BoundingRect(a.x,a.y,a.width,a.height)};var b=function(a){a=a||{};am.call(this,a);for(var b in a){if(a.hasOwnProperty(b)){this[b]=a[b]}}this._children=[];this.__storage=null;this.__dirty=!0};b.prototype={constructor:b,isGroup:!0,type:'group',silent:!1,children:function(){return this._children.slice()},childAt:function(a){return this._children[a]},childOfName:function(c){var b=this._children;for(var a=0;a<b.length;a++){if(b[a].name===c){return b[a]}}},childCount:function(){return this._children.length},add:function(a){if(a&&a!==this&&a.parent!==this){this._children.push(a);this._doAdd(a)}return this},addBefore:function(a,b){if(a&&a!==this&&a.parent!==this&&b&&b.parent===this){var c=this._children;var e=c.indexOf(b);if(e>=0){c.splice(e,0,a);this._doAdd(a)}}return this},_doAdd:function(a){if(a.parent){a.parent.remove(a)}a.parent=this;var c=this.__storage;var e=this.__zr;if(c&&c!==a.__storage){c.addToStorage(a);if(a instanceof b){a.addChildrenToStorage(c)}}e&&e.refresh()},remove:function(a){var g=this.__zr;var c=this.__storage;var e=this._children;var f=indexOf(e,a);if(f<0){return this}e.splice(f,1);a.parent=null;if(c){c.delFromStorage(a);if(a instanceof b){a.delChildrenFromStorage(c)}}g&&g.refresh();return this},removeAll:function(){var e=this._children;var f=this.__storage;var a;var c;for(c=0;c<e.length;c++){a=e[c];if(f){f.delFromStorage(a);if(a instanceof b){a.delChildrenFromStorage(f)}}a.parent=null}e.length=0;return this},eachChild:function(f,c){var b=this._children;for(var a=0;a<b.length;a++){var e=b[a];f.call(c,e,a)}return this},traverse:function(e,c){for(var b=0;b<this._children.length;b++){var a=this._children[b];e.call(c,a);if(a.type==='group'){a.traverse(e,c)}}return this},addChildrenToStorage:function(e){for(var c=0;c<this._children.length;c++){var a=this._children[c];e.addToStorage(a);if(a instanceof b){a.addChildrenToStorage(e)}}},delChildrenFromStorage:function(e){for(var c=0;c<this._children.length;c++){var a=this._children[c];e.delFromStorage(a);if(a instanceof b){a.delChildrenFromStorage(e)}}},dirty:function(){this.__dirty=!0;this.__zr&&this.__zr.refresh();return this},getBoundingRect:function(i){var a=null;var b=new BoundingRect(0,0,0,0);var h=i||this._children;var j=[];for(var f=0;f<h.length;f++){var c=h[f];if(c.ignore||c.invisible){continue}var e=c.getBoundingRect();var g=c.getLocalTransform(j);if(g){b.copy(e);b.applyTransform(g);a=a||b.clone();a.union(b)}else {a=a||e.clone();a.union(e)}}return a||b}};inherits(b,am);var gG=32;var bU=7;function minRunLength(a){var b=0;while(a>=gG){b|=a&1;a>>=1}return a+b}function makeAscendingRun(b,c,f,e){var a=c+1;if(a===f){return 1}if(e(b[a++],b[c])<0){while(a<f&&e(b[a],b[a-1])<0){a++}reverseRun(b,c,a)}else {while(a<f&&e(b[a],b[a-1])>=0){a++}}return a-c}function reverseRun(a,c,b){b--;while(c<b){var e=a[c];a[c++]=a[b];a[b--]=e}}function binaryInsertionSort(b,i,k,c,j){if(c===i){c++}for(;c<k;c++){var h=b[c];var a=i;var g=c;var f;while(a<g){f=a+g>>>1;if(j(h,b[f])<0){g=f}else {a=f+1}}var e=c-a;switch(e){case 3:b[a+3]=b[a+2];case 2:b[a+2]=b[a+1];case 1:b[a+1]=b[a];break;default:while(e>0){b[a+e]=b[a+e-1];e--};}b[a]=h}}function gallopLeft(i,g,h,k,e,f){var b=0;var c=0;var a=1;if(f(i,g[h+e])>0){c=k-e;while(a<c&&f(i,g[h+e+a])>0){b=a;a=(a<<1)+1;if(a<=0){a=c}}if(a>c){a=c}b+=e;a+=e}else {c=e+1;while(a<c&&f(i,g[h+e-a])<=0){b=a;a=(a<<1)+1;if(a<=0){a=c}}if(a>c){a=c}var l=b;b=e-a;a=e-l}b++;while(b<a){var j=b+(a-b>>>1);if(f(i,g[h+j])>0){b=j+1}else {a=j}}return a}function gallopRight(i,g,h,k,e,f){var b=0;var c=0;var a=1;if(f(i,g[h+e])<0){c=e+1;while(a<c&&f(i,g[h+e-a])<0){b=a;a=(a<<1)+1;if(a<=0){a=c}}if(a>c){a=c}var l=b;b=e-a;a=e-l}else {c=k-e;while(a<c&&f(i,g[h+e+a])>=0){b=a;a=(a<<1)+1;if(a<=0){a=c}}if(a>c){a=c}b+=e;a+=e}b++;while(b<a){var j=b+(a-b>>>1);if(f(i,g[h+j])<0){a=j}else {b=j+1}}return a}function TimSort(a,g){var f=bU;var h;var c;var e=0;var b=[];h=[];c=[];function pushRun(f,b){h[e]=f;c[e]=b;e+=1}function mergeRuns(){while(e>1){var b=e-2;if(b>=1&&c[b-1]<=c[b]+c[b+1]||b>=2&&c[b-2]<=c[b]+c[b-1]){if(c[b-1]<c[b+1]){b--}}else {if(c[b]>c[b+1]){break}}mergeAt(b)}}function forceMergeRuns(){while(e>1){var b=e-2;if(b>0&&c[b-1]<c[b+1]){b--}mergeAt(b)}}function mergeAt(b){var j=h[b];var f=c[b];var k=h[b+1];var i=c[b+1];c[b]=f+i;if(b===e-3){h[b+1]=h[b+2];c[b+1]=c[b+2]}e--;var l=gallopRight(a[k],a,j,f,0,g);j+=l;f-=l;if(f===0){return}i=gallopLeft(a[j+f-1],a,k,i,i-1,g);if(i===0){return}if(f<=i){mergeLow(j,f,k,i)}else {mergeHigh(j,f,k,i)}}function mergeLow(p,i,q,m){var c=0;for(c=0;c<i;c++){b[c]=a[p+c]}var h=0;var l=q;var e=p;a[e++]=a[l++];if(--m===0){for(c=0;c<i;c++){a[e+c]=b[h+c]}return}if(i===1){for(c=0;c<m;c++){a[e+c]=a[l+c]}a[e+m]=b[h];return}var o=f;var j;var k;var n;while(1){j=0;k=0;n=!1;do{if(g(a[l],b[h])<0){a[e++]=a[l++];k++;j=0;if(--m===0){n=!0;break}}else {a[e++]=b[h++];j++;k=0;if(--i===1){n=!0;break}}}while((j|k)<o);if(n){break}do{j=gallopRight(a[l],b,h,i,0,g);if(j!==0){for(c=0;c<j;c++){a[e+c]=b[h+c]}e+=j;h+=j;i-=j;if(i<=1){n=!0;break}}a[e++]=a[l++];if(--m===0){n=!0;break}k=gallopLeft(b[h],a,l,m,0,g);if(k!==0){for(c=0;c<k;c++){a[e+c]=a[l+c]}e+=k;l+=k;m-=k;if(m===0){n=!0;break}}a[e++]=b[h++];if(--i===1){n=!0;break}o--}while(j>=bU||k>=bU);if(n){break}if(o<0){o=0}o+=2}f=o;f<1&&(f=1);if(i===1){for(c=0;c<m;c++){a[e+c]=a[l+c]}a[e+m]=b[h]}else {if(i===0){throw new Error()}else {for(c=0;c<i;c++){a[e+c]=b[h+c]}}}}function mergeHigh(r,i,s,e){var c=0;for(c=0;c<e;c++){b[c]=a[s+c]}var k=r+i-1;var o=e-1;var h=s+e-1;var j=0;var n=0;a[h--]=a[k--];if(--i===0){j=h-(e-1);for(c=0;c<e;c++){a[j+c]=b[c]}return}if(e===1){h-=i;k-=i;n=h+1;j=k+1;for(c=i-1;c>=0;c--){a[n+c]=a[j+c]}a[h]=b[o];return}var q=f;while(!0){var l=0;var m=0;var p=!1;do{if(g(b[o],a[k])<0){a[h--]=a[k--];l++;m=0;if(--i===0){p=!0;break}}else {a[h--]=b[o--];m++;l=0;if(--e===1){p=!0;break}}}while((l|m)<q);if(p){break}do{l=i-gallopRight(b[o],a,r,i,i-1,g);if(l!==0){h-=l;k-=l;i-=l;n=h+1;j=k+1;for(c=l-1;c>=0;c--){a[n+c]=a[j+c]}if(i===0){p=!0;break}}a[h--]=b[o--];if(--e===1){p=!0;break}m=e-gallopLeft(a[k],b,0,e,e-1,g);if(m!==0){h-=m;o-=m;e-=m;n=h+1;j=o+1;for(c=0;c<m;c++){a[n+c]=b[j+c]}if(e<=1){p=!0;break}}a[h--]=a[k--];if(--i===0){p=!0;break}q--}while(l>=bU||m>=bU);if(p){break}if(q<0){q=0}q+=2}f=q;if(f<1){f=1}if(e===1){h-=i;k-=i;n=h+1;j=k+1;for(c=i-1;c>=0;c--){a[n+c]=a[j+c]}a[h]=b[o]}else {if(e===0){throw new Error()}else {j=h-(e-1);for(c=0;c<e;c++){a[j+c]=b[c]}}}}this.mergeRuns=mergeRuns;this.forceMergeRuns=forceMergeRuns;this.pushRun=pushRun}function sort(e,g,a,f){if(!a){a=0}if(!f){f=e.length}var c=f-a;if(c<2){return}var b=0;if(c<gG){b=makeAscendingRun(e,a,f,g);binaryInsertionSort(e,a,f,a+b,g);return}var j=new TimSort(e,g);var i=minRunLength(c);do{b=makeAscendingRun(e,a,f,g);if(b<i){var h=c;if(h>i){h=i}binaryInsertionSort(e,a,a+h,a+b,g);b=h}j.pushRun(a,b);j.mergeRuns();c-=b;a+=b}while(c!==0);j.forceMergeRuns()}function shapeCompareFunc(a,b){if(a.zlevel===b.zlevel){if(a.z===b.z){return a.z2-b.z2}return a.z-b.z}return a.zlevel-b.zlevel}var fu=function(){this._roots=[];this._displayList=[];this._displayListLen=0};fu.prototype={constructor:fu,traverse:function(c,b){for(var a=0;a<this._roots.length;a++){this._roots[a].traverse(c,b)}},getDisplayList:function(b,a){a=a||!1;if(b){this.updateDisplayList(a)}return this._displayList},updateDisplayList:function(e){this._displayListLen=0;var c=this._roots;var b=this._displayList;for(var a=0,g=c.length;a<g;a++){this._updateAndAddDisplayable(c[a],null,e)}b.length=this._displayListLen;f.canvasSupported&&sort(b,shapeCompareFunc)},_updateAndAddDisplayable:function(a,c,h){if(a.ignore&&!h){return}a.beforeUpdate();if(a.__dirty){a.update()}a.afterUpdate();var f=a.clipPath;if(f){if(c){c=c.slice()}else {c=[]}var b=f;var g=a;while(b){b.parent=g;b.updateTransform();c.push(b);g=b;b=b.clipPath}}if(a.isGroup){var i=a._children;for(var e=0;e<i.length;e++){var j=i[e];if(a.__dirty){j.__dirty=!0}this._updateAndAddDisplayable(j,c,h)}a.__dirty=!1}else {a.__clipPaths=c;this._displayList[this._displayListLen++]=a}},addRoot:function(a){if(a.__storage===this){return}if(a instanceof b){a.addChildrenToStorage(this)}this.addToStorage(a);this._roots.push(a)},delRoot:function(a){if(a==null){for(var c=0;c<this._roots.length;c++){var e=this._roots[c];if(e instanceof b){e.delChildrenFromStorage(this)}}this._roots=[];this._displayList=[];this._displayListLen=0;return}if(a instanceof Array){for(var c=0,g=a.length;c<g;c++){this.delRoot(a[c])}return}var f=indexOf(this._roots,a);if(f>=0){this.delFromStorage(a);this._roots.splice(f,1);if(a instanceof b){a.delChildrenFromStorage(this)}}},addToStorage:function(a){if(a){a.__storage=this;a.dirty(!1)}return this},delFromStorage:function(a){if(a){a.__storage=null}return this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:shapeCompareFunc};var l$={'shadowBlur':1,'shadowOffsetX':1,'shadowOffsetY':1,'textShadowBlur':1,'textShadowOffsetX':1,'textShadowOffsetY':1,'textBoxShadowBlur':1,'textBoxShadowOffsetX':1,'textBoxShadowOffsetY':1};var e8=function(c,b,a){if(l$.hasOwnProperty(b)){return a*=c.dpr}return a};var as={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2};var ef=9;var cD=[['shadowBlur',0],['shadowOffsetX',0],['shadowOffsetY',0],['shadowColor','#000'],['lineCap','butt'],['lineJoin','miter'],['miterLimit',10]];var aK=function(a){this.extendFrom(a,!1)};function createLinearGradient(i,a,b){var f=a.x==null?0:a.x;var c=a.x2==null?1:a.x2;var g=a.y==null?0:a.y;var e=a.y2==null?0:a.y2;if(!a.global){f=f*b.width+b.x;c=c*b.width+b.x;g=g*b.height+b.y;e=e*b.height+b.y}f=isNaN(f)?0:f;c=isNaN(c)?1:c;g=isNaN(g)?0:g;e=isNaN(e)?0:e;var h=i.createLinearGradient(f,g,c,e);return h}function createRadialGradient(j,a,b){var h=b.width;var g=b.height;var k=Math.min(h,g);var c=a.x==null?0.5:a.x;var e=a.y==null?0.5:a.y;var f=a.r==null?0.5:a.r;if(!a.global){c=c*h+b.x;e=e*g+b.y;f=f*k}var i=j.createRadialGradient(c,e,0,c,e,f);return i}aK.prototype={constructor:aK,fill:'#000',stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:'#000',textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:'inside',textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:'transparent',textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:'transparent',textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(b,g,i){var a=this;var c=i&&i.style;var e=!c||b.__attrCachedBy!==as.STYLE_BIND;b.__attrCachedBy=as.STYLE_BIND;for(var h=0;h<cD.length;h++){var j=cD[h];var f=j[0];if(e||a[f]!==c[f]){b[f]=e8(b,f,a[f]||j[1])}}if(e||a.fill!==c.fill){b.fillStyle=a.fill}if(e||a.stroke!==c.stroke){b.strokeStyle=a.stroke}if(e||a.opacity!==c.opacity){b.globalAlpha=a.opacity==null?1:a.opacity}if(e||a.blend!==c.blend){b.globalCompositeOperation=a.blend||'source-over'}if(this.hasStroke()){var k=a.lineWidth;b.lineWidth=k/(this.strokeNoScale&&g&&g.getLineScale?g.getLineScale():1)}},hasFill:function(){var a=this.fill;return a!=null&&a!=='none'},hasStroke:function(){var a=this.stroke;return a!=null&&a!=='none'&&this.lineWidth>0},extendFrom:function(a,c){if(a){for(var b in a){if(a.hasOwnProperty(b)&&(c===!0||(c===!1?!this.hasOwnProperty(b):a[b]!=null))){this[b]=a[b]}}}},set:function(a,b){if(typeof a==='string'){this[a]=b}else {this.extendFrom(a,!0)}},clone:function(){var a=new this.constructor();a.extendFrom(this,!0);return a},getGradient:function(h,c,g){var f=c.type==='radial'?createRadialGradient:createLinearGradient;var e=f(h,c,g);var b=c.colorStops;for(var a=0;a<b.length;a++){e.addColorStop(b[a].offset,b[a].color)}return e}};var e4=aK.prototype;for(var fZ=0;fZ<cD.length;fZ++){var fQ=cD[fZ];if(!(fQ[0] in e4)){e4[fQ[0]]=fQ[1]}}aK.getGradient=e4.getGradient;var ft=function(b,a){this.image=b;this.repeat=a;this.type='pattern'};ft.prototype.getCanvasPattern=function(a){return a.createPattern(this.image,this.repeat||'repeat')};function returnFalse(){return !1}function createDom(h,c,g){var b=bu();var f=c.getWidth();var e=c.getHeight();var a=b.style;if(a){a.position='absolute';a.left=0;a.top=0;a.width=f+'px';a.height=e+'px';b.setAttribute('data-zr-dom-id',h)}b.width=f*g;b.height=e*g;return b}var cq=function(c,f,e){var b;e=e||cF;if(typeof c==='string'){b=createDom(c,f,e)}else {if(isObject$1(c)){b=c;c=b.id}}this.id=c;this.dom=b;var a=b.style;if(a){b.onselectstart=returnFalse;a['-webkit-user-select']='none';a['user-select']='none';a['-webkit-touch-callout']='none';a['-webkit-tap-highlight-color']='rgba(0,0,0,0)';a['padding']=0;a['margin']=0;a['border-width']=0}this.domBack=null;this.ctxBack=null;this.painter=f;this.config=null;this.clearColor=0;this.motionBlur=!1;this.lastFrameAlpha=0.7;this.dpr=e};cq.prototype={constructor:cq,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext('2d');this.ctx.dpr=this.dpr},createBackBuffer:function(){var a=this.dpr;this.domBack=createDom('back-'+this.id,this.painter,a);this.ctxBack=this.domBack.getContext('2d');if(a!==1){this.ctxBack.scale(a,a)}},resize:function(f,e){var a=this.dpr;var g=this.dom;var b=g.style;var c=this.domBack;if(b){b.width=f+'px';b.height=e+'px'}g.width=f*a;g.height=e*a;if(c){c.width=f*a;c.height=e*a;if(a!==1){this.ctxBack.scale(a,a)}}},clear:function(k,a){var g=this.dom;var b=this.ctx;var e=g.width;var c=g.height;var a=a||this.clearColor;var h=this.motionBlur&&!k;var j=this.lastFrameAlpha;var i=this.dpr;if(h){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation='copy';this.ctxBack.drawImage(g,0,0,e/i,c/i)}b.clearRect(0,0,e,c);if(a&&a!=='transparent'){var f;if(a.colorStops){f=a.__canvasGradient||aK.getGradient(b,a,{x:0,y:0,width:e,height:c});a.__canvasGradient=f}else {if(a.image){f=ft.prototype.getCanvasPattern.call(a,b)}}b.save();b.fillStyle=f||a;b.fillRect(0,0,e,c);b.restore()}if(h){var l=this.domBack;b.save();b.globalAlpha=j;b.drawImage(l,0,0,e,c);b.restore()}}};var dS=typeof window!=='undefined'&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){setTimeout(a,16)};var ek=new fS(50);function findExistImage(a){if(typeof a==='string'){var b=ek.get(a);return b&&b.image}else {return a}}function createOrUpdateImage(b,a,f,h,g){if(!b){return a}else {if(typeof b==='string'){if(a&&a.__zrImageSrc===b||!f){return a}var c=ek.get(b);var e={hostEl:f,cb:h,cbPayload:g};if(c){a=c.image;!isImageReady(a)&&c.pending.push(e)}else {a=new Image();a.onload=a.onerror=imageOnLoad;ek.put(b,a.__cachedImgObj={image:a,pending:[e]});a.src=a.__zrImageSrc=b}return a}else {return b}}}function imageOnLoad(){var a=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var c=0;c<a.pending.length;c++){var b=a.pending[c];var e=b.cb;e&&e(this,b.cbPayload);b.hostEl.dirty()}a.pending.length=0}function isImageReady(a){return a&&a.width&&a.height}var cR={};var dT=0;var ll=5000;var e6=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;var cK='12px sans-serif';var ff={};function $override$1(a,b){ff[a]=b}function getWidth(g,b){b=b||cK;var c=g+':'+b;if(cR[c]){return cR[c]}var f=(g+'').split('\n');var a=0;for(var e=0,h=f.length;e<h;e++){a=Math.max(measureText(f[e],b).width,a)}if(dT>ll){dT=0;cR={}}dT++;cR[c]=a;return a}function getBoundingRect(i,g,e,a,c,b,h,f){return h?getRichTextRect(i,g,e,a,c,b,h,f):getPlainTextRect(i,g,e,a,c,b,f)}function getPlainTextRect(h,f,k,i,a,j,l){var c=parsePlainText(h,f,a,j,l);var b=getWidth(h,f);if(a){b+=a[1]+a[3]}var e=c.outerHeight;var m=adjustTextX(0,b,k);var n=adjustTextY(0,e,i);var g=new BoundingRect(m,n,b,e);g.lineHeight=c.lineHeight;return g}function getRichTextRect(l,j,e,f,h,g,k,i){var a=parseRichText(l,{rich:k,truncate:i,font:j,textAlign:e,textPadding:h,textLineHeight:g});var c=a.outerWidth;var b=a.outerHeight;var m=adjustTextX(0,c,e);var n=adjustTextY(0,b,f);return new BoundingRect(m,n,c,b)}function adjustTextX(a,c,b){if(b==='right'){a-=c}else {if(b==='center'){a-=c/2}}return a}function adjustTextY(a,c,b){if(b==='middle'){a-=c/2}else {if(b==='bottom'){a-=c}}return a}function calculateTextPosition(h,l,k){var m=l.textPosition;var a=l.textDistance;var b=k.x;var c=k.y;a=a||0;var j=k.height;var g=k.width;var i=j/2;var f='left';var e='top';switch(m){case 'left':b-=a;c+=i;f='right';e='middle';break;case 'right':b+=a+g;c+=i;e='middle';break;case 'top':b+=g/2;c-=a;f='center';e='bottom';break;case 'bottom':b+=g/2;c+=j+a;f='center';break;case 'inside':b+=g/2;c+=i;f='center';e='middle';break;case 'insideLeft':b+=a;c+=i;e='middle';break;case 'insideRight':b+=g-a;c+=i;f='right';e='middle';break;case 'insideTop':b+=g/2;c+=a;f='center';break;case 'insideBottom':b+=g/2;c+=j-a;f='center';e='bottom';break;case 'insideTopLeft':b+=a;c+=a;break;case 'insideTopRight':b+=g-a;c+=a;f='right';break;case 'insideBottomLeft':b+=a;c+=j-a;e='bottom';break;case 'insideBottomRight':b+=g-a;c+=j-a;f='right';e='bottom';break;}h=h||{};h.x=b;h.y=c;h.textAlign=f;h.textVerticalAlign=e;return h}function truncateText(h,e,g,f,c){if(!e){return ''}var a=(h+'').split('\n');c=prepareTruncateOptions(e,g,f,c);for(var b=0,i=a.length;b<i;b++){a[b]=truncateSingleLine(a[b],c)}return a.join('\n')}function prepareTruncateOptions(e,g,c,a){a=extend({},a);a.font=g;var c=retrieve2(c,'...');a.maxIterations=retrieve2(a.maxIterations,2);var j=a.minChar=retrieve2(a.minChar,0);a.cnCharWidth=getWidth('',g);var h=a.ascCharWidth=getWidth('a',g);a.placeholder=retrieve2(a.placeholder,'');var b=e=Math.max(0,e-1);for(var i=0;i<j&&b>=h;i++){b-=h}var f=getWidth(c,g);if(f>b){c='';f=0}b=e-f;a.ellipsis=c;a.ellipsisWidth=f;a.contentWidth=b;a.containerWidth=e;return a}function truncateSingleLine(a,b){var g=b.containerWidth;var h=b.font;var e=b.contentWidth;if(!g){return ''}var c=getWidth(a,h);if(c<=g){return a}for(var f=0;;f++){if(c<=e||f>=b.maxIterations){a+=b.ellipsis;break}var i=f===0?estimateLength(a,e,b.ascCharWidth,b.cnCharWidth):c>0?Math.floor(a.length*e/c):0;a=a.substr(0,i);c=getWidth(a,h)}if(a===''){a=b.placeholder}return a}function estimateLength(e,g,f,h){var c=0;var a=0;for(var i=e.length;a<i&&c<g;a++){var b=e.charCodeAt(a);c+=0<=b&&b<=127?f:h}return a}function getLineHeight(a){return getWidth('',a)}function measureText(b,a){return ff.measureText(b,a)}ff.measureText=function(c,b){var a=getContext();a.font=b||cK;return a.measureText(c)};function parsePlainText(e,m,b,n,a){e!=null&&(e+='');var k=retrieve2(n,getLineHeight(m));var c=e?e.split('\n'):[];var l=c.length*k;var g=l;var h=!0;if(b){g+=b[0]+b[2]}if(e&&a){h=!1;var i=a.outerHeight;var j=a.outerWidth;if(i!=null&&g>i){e='';c=[]}else {if(j!=null){var o=prepareTruncateOptions(j-(b?b[1]+b[3]:0),m,a.ellipsis,{minChar:a.minChar,placeholder:a.placeholder});for(var f=0,p=c.length;f<p;f++){c[f]=truncateSingleLine(c[f],o)}}}}return {lines:c,height:l,outerHeight:g,lineHeight:k,canCacheByTextString:h}}function parseRichText(h,g){var c={lines:[],width:0,height:0};h!=null&&(h+='');if(!h){return c}var m=e6.lastIndex=0;var v;while((v=e6.exec(h))!=null){var D=v.index;if(D>m){pushTokens(c,h.substring(m,D))}pushTokens(c,v[2],v[1]);m=e6.lastIndex}if(m<h.length){pushTokens(c,h.substring(m,h.length))}var E=c.lines;var y=0;var q=0;var z=[];var f=g.textPadding;var k=g.truncate;var p=k&&k.outerWidth;var o=k&&k.outerHeight;if(f){p!=null&&(p-=f[1]+f[3]);o!=null&&(o-=f[0]+f[2])}for(var i=0;i<E.length;i++){var x=E[i];var s=0;var t=0;for(var A=0;A<x.tokens.length;A++){var a=x.tokens[A];var e=a.styleName&&g.rich[a.styleName]||{};var j=a.textPadding=e.textPadding;var w=a.font=e.font||g.font;var r=a.textHeight=retrieve2(e.textHeight,getLineHeight(w));j&&(r+=j[0]+j[2]);a.height=r;a.lineHeight=retrieve3(e.textLineHeight,g.textLineHeight,r);a.textAlign=e&&e.textAlign||g.textAlign;a.textVerticalAlign=e&&e.textVerticalAlign||'middle';if(o!=null&&y+a.lineHeight>o){return {lines:[],width:0,height:0}}a.textWidth=getWidth(a.text,w);var b=e.textWidth;var B=b==null||b==='auto';if(typeof b==='string'&&b.charAt(b.length-1)==='%'){a.percentWidth=b;z.push(a);b=0}else {if(B){b=a.textWidth;var C=e.textBackgroundColor;var l=C&&C.image;if(l){l=findExistImage(l);if(isImageReady(l)){b=Math.max(b,l.width*r/l.height)}}}var u=j?j[1]+j[3]:0;b+=u;var n=p!=null?p-t:null;if(n!=null&&n<b){if(!B||n<u){a.text='';a.textWidth=b=0}else {a.text=truncateText(a.text,n-u,w,k.ellipsis,{minChar:k.minChar});a.textWidth=getWidth(a.text,w);b=a.textWidth+u}}}t+=a.width=b;e&&(s=Math.max(s,a.lineHeight))}x.width=t;x.lineHeight=s;y+=s;q=Math.max(q,t)}c.outerWidth=c.width=retrieve2(g.textWidth,q);c.outerHeight=c.height=retrieve2(g.textHeight,y);if(f){c.outerWidth+=f[1]+f[3];c.outerHeight+=f[0]+f[2]}for(var i=0;i<z.length;i++){var a=z[i];var F=a.percentWidth;a.width=parseInt(F,10)/100*q}return c}function pushTokens(l,j,k){var g=j==='';var i=j.split('\n');var b=l.lines;for(var c=0;c<i.length;c++){var f=i[c];var e={styleName:k,text:f,isLineHolder:!f&&!g};if(!c){var a=(b[b.length-1]||(b[0]={tokens:[]})).tokens;var h=a.length;h===1&&a[0].isLineHolder?a[0]=e:(f||!h||g)&&a.push(e)}else {b.push({tokens:[e]})}}}function makeFont(a){var b=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+'px',a.fontFamily||'sans-serif'].join(' ');return b&&trim(b)||a.textFont||a.font}function buildPath(l,m){var j=m.x;var k=m.y;var h=m.width;var g=m.height;var f=m.r;var a;var b;var c;var e;if(h<0){j=j+h;h=-h}if(g<0){k=k+g;g=-g}if(typeof f==='number'){a=b=c=e=f}else {if(f instanceof Array){if(f.length===1){a=b=c=e=f[0]}else {if(f.length===2){a=c=f[0];b=e=f[1]}else {if(f.length===3){a=f[0];b=e=f[1];c=f[2]}else {a=f[0];b=f[1];c=f[2];e=f[3]}}}}else {a=b=c=e=0}}var i;if(a+b>h){i=a+b;a*=h/i;b*=h/i}if(c+e>h){i=c+e;c*=h/i;e*=h/i}if(b+c>g){i=b+c;b*=g/i;c*=g/i}if(a+e>g){i=a+e;a*=g/i;e*=g/i}l.moveTo(j+a,k);l.lineTo(j+h-b,k);b!==0&&l.arc(j+h-b,k+b,b,-Math.PI/2,0);l.lineTo(j+h,k+g-c);c!==0&&l.arc(j+h-c,k+g-c,c,0,Math.PI/2);l.lineTo(j+e,k+g);e!==0&&l.arc(j+e,k+g-e,e,Math.PI/2,Math.PI);l.lineTo(j,k+a);a!==0&&l.arc(j+a,k+a,a,Math.PI,Math.PI*1.5)}var eL=cK;var kL={left:1,right:1,center:1};var jy={top:1,bottom:1,middle:1};var f5=[['textShadowBlur','shadowBlur',0],['textShadowOffsetX','shadowOffsetX',0],['textShadowOffsetY','shadowOffsetY',0],['textShadowColor','shadowColor','transparent']];var gg={};var gn={};function normalizeTextStyle(a){normalizeStyle(a);each$1(a.rich,normalizeStyle);return a}function normalizeStyle(a){if(a){a.font=makeFont(a);var c=a.textAlign;c==='middle'&&(c='center');a.textAlign=c==null||kL[c]?c:'left';var b=a.textVerticalAlign||a.textBaseline;b==='center'&&(b='middle');a.textVerticalAlign=b==null||jy[b]?b:'top';var e=a.textPadding;if(e){a.textPadding=normalizeCssArray(a.textPadding)}}}function renderText(b,g,f,a,e,c){a.rich?renderRichText(b,g,f,a,e,c):renderPlainText(b,g,f,a,e,c)}function renderPlainText(c,a,H,b,G,x){var m=needDrawBackground(b);var h;var g=!1;var A=a.__attrCachedBy===as.PLAIN_TEXT;if(x!==ef){if(x){h=x.style;g=!m&&A&&h}a.__attrCachedBy=m?as.NONE:as.PLAIN_TEXT}else {if(A){a.__attrCachedBy=as.NONE}}var o=b.font||eL;if(!g||o!==(h.font||eL)){a.font=o}var t=c.__computedFont;if(c.__styleFont!==o){c.__styleFont=o;t=c.__computedFont=a.font}var e=b.textPadding;var L=b.textLineHeight;var k=c.__textCotentBlock;if(!k||c.__dirtyText){k=c.__textCotentBlock=parsePlainText(H,t,e,L,b.truncate)}var z=k.outerHeight;var j=k.lines;var B=k.lineHeight;var q=getBoxPosition(gn,c,b,G);var r=q.baseX;var E=q.baseY;var v=q.textAlign||'left';var K=q.textVerticalAlign;applyTextRotation(a,b,G,r,E);var F=adjustTextY(E,z,K);var l=r;var i=F;if(m||e){var N=getWidth(H,t);var u=N;e&&(u+=e[1]+e[3]);var O=adjustTextX(r,u,v);m&&drawBackground(c,a,b,O,F,u,z);if(e){l=getTextXForPadding(r,v,e);i+=e[0]}}a.textAlign=v;a.textBaseline='middle';a.globalAlpha=b.opacity||1;for(var f=0;f<f5.length;f++){var w=f5[f];var C=w[0];var D=w[1];var I=b[C];if(!g||I!==h[C]){a[D]=e8(a,D,I||w[2])}}i+=B/2;var s=b.textStrokeWidth;var J=g?h.textStrokeWidth:null;var y=!g||s!==J;var M=!g||y||b.textStroke!==h.textStroke;var n=getStroke(b.textStroke,s);var p=getFill(b.textFill);if(n){if(y){a.lineWidth=s}if(M){a.strokeStyle=n}}if(p){if(!g||b.textFill!==h.textFill){a.fillStyle=p}}if(j.length===1){n&&a.strokeText(j[0],l,i);p&&a.fillText(j[0],l,i)}else {for(var f=0;f<j.length;f++){n&&a.strokeText(j[f],l,i);p&&a.fillText(j[f],l,i);i+=B}}}function renderRichText(a,e,h,c,g,f){if(f!==ef){e.__attrCachedBy=as.NONE}var b=a.__textCotentBlock;if(!b||a.__dirtyText){b=a.__textCotentBlock=parseRichText(h,c)}drawRichText(a,e,b,c,g)}function drawRichText(h,i,f,b,C){var t=f.width;var v=f.outerWidth;var u=f.outerHeight;var o=b.textPadding;var l=getBoxPosition(gn,h,b,C);var y=l.baseX;var z=l.baseY;var E=l.textAlign;var D=l.textVerticalAlign;applyTextRotation(i,b,C,y,z);var A=adjustTextX(y,v,E);var B=adjustTextY(z,u,D);var n=A;var g=B;if(o){n+=o[3];g+=o[0]}var x=n+t;needDrawBackground(b)&&drawBackground(h,i,b,A,B,v,u);for(var s=0;s<f.lines.length;s++){var r=f.lines[s];var m=r.tokens;var w=m.length;var j=r.lineHeight;var q=r.width;var c=0;var e=n;var p=x;var k=w-1;var a;while(c<w&&(a=m[c],!a.textAlign||a.textAlign==='left')){placeToken(h,i,a,b,j,g,e,'left');q-=a.width;e+=a.width;c++}while(k>=0&&(a=m[k],a.textAlign==='right')){placeToken(h,i,a,b,j,g,p,'right');q-=a.width;p-=a.width;k--}e+=(t-(e-n)-(x-p)-q)/2;while(c<=k){a=m[c];placeToken(h,i,a,b,j,g,e+a.width/2,'center');e+=a.width;c++}g+=j}}function applyTextRotation(g,f,a,c,e){if(a&&f.textRotation){var b=f.textOrigin;if(b==='center'){c=a.width/2+a.x;e=a.height/2+a.y}else {if(b){c=b[0]+a.x;e=b[1]+a.y}}g.translate(c,e);g.rotate(-f.textRotation);g.translate(-c,-e)}}function placeToken(p,b,a,e,m,j,f,h){var c=e.rich[a.styleName]||{};c.text=a.text;var k=a.textVerticalAlign;var g=j+m/2;if(k==='top'){g=j+a.height/2}else {if(k==='bottom'){g=j+m-a.height/2}}!a.isLineHolder&&needDrawBackground(c)&&drawBackground(p,b,c,h==='right'?f-a.width:h==='center'?f-a.width/2:f,g-a.height/2,a.width,a.height);var i=a.textPadding;if(i){f=getTextXForPadding(f,h,i);g-=a.height/2-i[2]-a.textHeight/2}setCtx(b,'shadowBlur',retrieve3(c.textShadowBlur,e.textShadowBlur,0));setCtx(b,'shadowColor',c.textShadowColor||e.textShadowColor||'transparent');setCtx(b,'shadowOffsetX',retrieve3(c.textShadowOffsetX,e.textShadowOffsetX,0));setCtx(b,'shadowOffsetY',retrieve3(c.textShadowOffsetY,e.textShadowOffsetY,0));setCtx(b,'textAlign',h);setCtx(b,'textBaseline','middle');setCtx(b,'font',a.font||eL);var n=getStroke(c.textStroke||e.textStroke,l);var o=getFill(c.textFill||e.textFill);var l=retrieve2(c.textStrokeWidth,e.textStrokeWidth);if(n){setCtx(b,'lineWidth',l);setCtx(b,'strokeStyle',n);b.strokeText(a.text,f,g)}if(o){setCtx(b,'fillStyle',o);b.fillText(a.text,f,g)}}function needDrawBackground(a){return !!(a.textBackgroundColor||a.textBorderWidth&&a.textBorderColor)}function drawBackground(o,a,b,k,l,j,i){var c=b.textBackgroundColor;var h=b.textBorderWidth;var g=b.textBorderColor;var n=isString(c);setCtx(a,'shadowBlur',b.textBoxShadowBlur||0);setCtx(a,'shadowColor',b.textBoxShadowColor||'transparent');setCtx(a,'shadowOffsetX',b.textBoxShadowOffsetX||0);setCtx(a,'shadowOffsetY',b.textBoxShadowOffsetY||0);if(n||h&&g){a.beginPath();var m=b.textBorderRadius;if(!m){a.rect(k,l,j,i)}else {buildPath(a,{x:k,y:l,width:j,height:i,r:m})}a.closePath()}if(n){setCtx(a,'fillStyle',c);if(b.fillOpacity!=null){var f=a.globalAlpha;a.globalAlpha=b.fillOpacity*b.opacity;a.fill();a.globalAlpha=f}else {a.fill()}}else {if(isObject$1(c)){var e=c.image;e=createOrUpdateImage(e,null,o,onBgImageLoaded,c);if(e&&isImageReady(e)){a.drawImage(e,k,l,j,i)}}}if(h&&g){setCtx(a,'lineWidth',h);setCtx(a,'strokeStyle',g);if(b.strokeOpacity!=null){var f=a.globalAlpha;a.globalAlpha=b.strokeOpacity*b.opacity;a.stroke();a.globalAlpha=f}else {a.stroke()}}}function onBgImageLoaded(b,a){a.image=b}function getBoxPosition(c,l,a,b){var e=a.x||0;var f=a.y||0;var k=a.textAlign;var h=a.textVerticalAlign;if(b){var i=a.textPosition;if(i instanceof Array){e=b.x+parsePercent(i[0],b.width);f=b.y+parsePercent(i[1],b.height)}else {var g=l&&l.calculateTextPosition?l.calculateTextPosition(gg,a,b):calculateTextPosition(gg,a,b);e=g.x;f=g.y;k=k||g.textAlign;h=h||g.textVerticalAlign}var j=a.textOffset;if(j){e+=j[0];f+=j[1]}}c=c||{};c.baseX=e;c.baseY=f;c.textAlign=k;c.textVerticalAlign=h;return c}function setCtx(b,a,c){b[a]=e8(b,a,c);return b[a]}function getStroke(a,b){return a==null||b<=0||a==='transparent'||a==='none'?null:a.image||a.colorStops?'#000':a}function getFill(a){return a==null||a==='none'?null:a.image||a.colorStops?'#000':a}function parsePercent(a,b){if(typeof a==='string'){if(a.lastIndexOf('%')>=0){return parseFloat(a)/100*b}return parseFloat(a)}return a}function getTextXForPadding(b,c,a){return c==='right'?b-a[1]:c==='center'?b+a[3]/2-a[1]/2:b+a[3]}function needDrawText(b,a){return b!=null&&(b||a.textBackgroundColor||a.textBorderWidth&&a.textBorderColor||a.textPadding)}var fg=new BoundingRect();var dp=function(){};dp.prototype={constructor:dp,drawRectText:function(e,b){var a=this.style;b=a.textRect||b;this.__dirty&&normalizeTextStyle(a,!0);var c=a.text;c!=null&&(c+='');if(!needDrawText(c,a)){return}e.save();var f=this.transform;if(!a.transformText){if(f){fg.copy(b);fg.applyTransform(f);b=fg}}else {this.setTransform(e)}renderText(this,e,c,a,b,ef);e.restore()}};function Displayable(a){a=a||{};am.call(this,a);for(var b in a){if(a.hasOwnProperty(b)&&b!=='style'){this[b]=a[b]}}this.style=new aK(a.style,this);this._rect=null;this.__clipPaths=null}Displayable.prototype={constructor:Displayable,type:'displayable',__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:'pointer',rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(a){},afterBrush:function(a){},brush:function(b,a){},getBoundingRect:function(){},contain:function(a,b){return this.rectContain(a,b)},traverse:function(b,a){b.call(a,this)},rectContain:function(c,e){var a=this.transformCoordToLocal(c,e);var b=this.getBoundingRect();return b.contain(a[0],a[1])},dirty:function(){this.__dirty=this.__dirtyText=!0;this._rect=null;this.__zr&&this.__zr.refresh()},animateStyle:function(a){return this.animate('style',a)},attrKV:function(b,a){if(b!=='style'){am.prototype.attrKV.call(this,b,a)}else {this.style.set(a)}},setStyle:function(b,a){this.style.set(b,a);this.dirty(!1);return this},useStyle:function(a){this.style=new aK(a,this);this.dirty(!1);return this},calculateTextPosition:null};inherits(Displayable,am);mixin(Displayable,dp);function ZImage(a){Displayable.call(this,a)}ZImage.prototype={constructor:ZImage,type:'image',brush:function(f,m){var a=this.style;var o=a.image;a.bind(f,this,m);var e=this._image=createOrUpdateImage(o,this._image,this,this.onload);if(!e||!isImageReady(e)){return}var i=a.x||0;var j=a.y||0;var c=a.width;var b=a.height;var k=e.width/e.height;if(c==null&&b!=null){c=b*k}else {if(b==null&&c!=null){b=c/k}else {if(c==null&&b==null){c=e.width;b=e.height}}}this.setTransform(f);if(a.sWidth&&a.sHeight){var g=a.sx||0;var h=a.sy||0;f.drawImage(e,g,h,a.sWidth,a.sHeight,i,j,c,b)}else {if(a.sx&&a.sy){var g=a.sx;var h=a.sy;var n=c-g;var l=b-h;f.drawImage(e,g,h,n,l,i,j,c,b)}else {f.drawImage(e,i,j,c,b)}}if(a.text!=null){this.restoreTransform(f);this.drawRectText(f,this.getBoundingRect())}},getBoundingRect:function(){var a=this.style;if(!this._rect){this._rect=new BoundingRect(a.x||0,a.y||0,a.width||0,a.height||0)}return this._rect}};inherits(ZImage,Displayable);var gw=100000;var aX=314159;var f7=0.01;var k2=0.001;function parseInt10(a){return parseInt(a,10)}function isLayerValid(a){if(!a){return !1}if(a.__builtin__){return !0}if(typeof a.resize!=='function'||typeof a.refresh!=='function'){return !1}return !0}var fG=new BoundingRect(0,0,0,0);var fr=new BoundingRect(0,0,0,0);function isDisplayableCulled(a,c,b){fG.copy(a.getBoundingRect());if(a.transform){fG.applyTransform(a.transform)}fr.width=c;fr.height=b;return !fG.intersect(fr)}function isClipPathChanged(a,b){if(a===b){return !1}if(!a||!b||a.length!==b.length){return !0}for(var c=0;c<a.length;c++){if(a[c]!==b[c]){return !0}}return !1}function doClip(e,a){for(var c=0;c<e.length;c++){var b=e[c];b.setTransform(a);a.beginPath();b.buildPath(a,b.shape);a.clip();b.restoreTransform(a)}}function createRoot(c,b){var a=document.createElement('div');a.style.cssText=['position:relative','width:'+c+'px','height:'+b+'px','padding:0','margin:0','border-width:0'].join(';')+';';return a}var fs=function(a,k,b){this.type='canvas';var h=!a.nodeName||a.nodeName.toUpperCase()==='CANVAS';this._opts=b=extend({},b||{});this.dpr=b.devicePixelRatio||cF;this._singleCanvas=h;this.root=a;var c=a.style;if(c){c['-webkit-tap-highlight-color']='transparent';c['-webkit-user-select']=c['user-select']=c['-webkit-touch-callout']='none';a.innerHTML=''}this.storage=k;var i=this._zlevelList=[];var l=this._layers={};this._layerConfig={};this._needsManuallyCompositing=!1;if(!h){this._width=this._getSize(0);this._height=this._getSize(1);var j=this._domRoot=createRoot(this._width,this._height);a.appendChild(j)}else {var g=a.width;var f=a.height;if(b.width!=null){g=b.width}if(b.height!=null){f=b.height}this.dpr=b.devicePixelRatio||1;a.width=g*this.dpr;a.height=f*this.dpr;this._width=g;this._height=f;var e=new cq(a,this,this.dpr);e.__builtin__=!0;e.initContext();l[aX]=e;e.zlevel=aX;i.push(aX);this._domRoot=a}this._hoverlayer=null;this._hoverElements=[]};fs.prototype={constructor:fs,getType:function(){return 'canvas'},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a){return {offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}}},refresh:function(f){var g=this.storage.getDisplayList(!0);var c=this._zlevelList;this._redrawId=Math.random();this._paintList(g,f,this._redrawId);for(var a=0;a<c.length;a++){var h=c[a];var b=this._layers[h];if(!b.__builtin__&&b.refresh){var e=a===0?this._backgroundColor:null;b.refresh(e)}}this.refreshHover();return this},addHover:function(a,c){if(a.__hoverMir){return}var b=new a.constructor({style:a.style,shape:a.shape,z:a.z,z2:a.z2,silent:a.silent});b.__from=a;a.__hoverMir=b;c&&b.setStyle(c);this._hoverElements.push(b);return b},removeHover:function(c){var e=c.__hoverMir;var a=this._hoverElements;var b=indexOf(a,e);if(b>=0){a.splice(b,1)}c.__hoverMir=null},clearHover:function(e){var a=this._hoverElements;for(var b=0;b<a.length;b++){var c=a[b].__from;if(c){c.__hoverMir=null}}a.length=0},refreshHover:function(){var e=this._hoverElements;var g=e.length;var a=this._hoverlayer;a&&a.clear();if(!g){return}sort(e,this.storage.displayableSortFunc);if(!a){a=this._hoverlayer=this.getLayer(gw)}var h={};a.ctx.save();for(var f=0;f<g;){var c=e[f];var b=c.__from;if(!(b&&b.__zr)){e.splice(f,1);b.__hoverMir=null;g--;continue}f++;if(!b.invisible){c.transform=b.transform;c.invTransform=b.invTransform;c.__clipPaths=b.__clipPaths;this._doPaintEl(c,a,!0,h)}}a.ctx.restore()},getHoverLayer:function(){return this.getLayer(gw)},_paintList:function(b,a,c){if(this._redrawId!==c){return}a=a||!1;this._updateLayerStatus(b);var e=this._doPaintList(b,a);if(this._needsManuallyCompositing){this._compositeManually()}if(!e){var f=this;dS(function(){f._paintList(b,a,c)})}},_compositeManually:function(){var c=this.getLayer(aX).ctx;var b=this._domRoot.width;var a=this._domRoot.height;c.clearRect(0,0,b,a);this.eachBuiltinLayer(function(e){if(e.virtual){c.drawImage(e.dom,0,0,b,a)}})},_doPaintList:function(q,b){var g=[];for(var j=0;j<this._zlevelList.length;j++){var s=this._zlevelList[j];var a=this._layers[s];if(a.__builtin__&&a!==this._hoverlayer&&(a.__dirty||b)){g.push(a)}}var m=!0;for(var k=0;k<g.length;k++){var a=g[k];var h=a.ctx;var p={};h.save();var c=b?a.__startIndex:a.__drawIndex;var n=!b&&a.incremental&&Date.now;var r=n&&Date.now();var l=a.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(a.__startIndex===a.__endIndex){a.clear(!1,l)}else {if(c===a.__startIndex){var o=q[c];if(!o.incremental||!o.notClear||b){a.clear(!1,l)}}}if(c===-1){console.error('For some unknown reason. drawIndex is -1');c=a.__startIndex}for(var e=c;e<a.__endIndex;e++){var i=q[e];this._doPaintEl(i,a,b,p);i.__dirty=i.__dirtyText=!1;if(n){var t=Date.now()-r;if(t>15){break}}}a.__drawIndex=e;if(a.__drawIndex<a.__endIndex){m=!1}if(p.prevElClipPaths){h.restore()}h.restore()}if(f.wxa){each$1(this._layers,function(a){if(a&&a.ctx&&a.ctx.draw){a.ctx.draw()}})}return m},_doPaintEl:function(a,h,i,b){var c=h.ctx;var g=a.transform;if((h.__dirty||i)&&!a.invisible&&a.style.opacity!==0&&!(g&&!g[0]&&!g[3])&&!(a.culling&&isDisplayableCulled(a,this._width,this._height))){var e=a.__clipPaths;var f=b.prevElClipPaths;if(!f||isClipPathChanged(e,f)){if(f){c.restore();b.prevElClipPaths=null;b.prevEl=null}if(e){c.save();doClip(e,c);b.prevElClipPaths=e}}a.beforeBrush&&a.beforeBrush(c);a.brush(c,b.prevEl||null);b.prevEl=a;a.afterBrush&&a.afterBrush(c)}},getLayer:function(b,c){if(this._singleCanvas&&!this._needsManuallyCompositing){b=aX}var a=this._layers[b];if(!a){a=new cq('zr_'+b,this,this.dpr);a.zlevel=b;a.__builtin__=!0;if(this._layerConfig[b]){merge(a,this._layerConfig[b],!0)}if(c){a.virtual=c}this.insertLayer(b,a);a.initContext()}return a},insertLayer:function(a,b){var g=this._layers;var e=this._zlevelList;var j=e.length;var h=null;var c=-1;var f=this._domRoot;if(g[a]){aA('ZLevel '+a+' has been used already');return}if(!isLayerValid(b)){aA('Layer of zlevel '+a+' is not valid');return}if(j>0&&a>e[0]){for(c=0;c<j-1;c++){if(e[c]<a&&e[c+1]>a){break}}h=g[e[c]]}e.splice(c+1,0,a);g[a]=b;if(!b.virtual){if(h){var i=h.dom;if(i.nextSibling){f.insertBefore(b.dom,i.nextSibling)}else {f.appendChild(b.dom)}}else {if(f.firstChild){f.insertBefore(b.dom,f.firstChild)}else {f.appendChild(b.dom)}}}},eachLayer:function(f,e){var c=this._zlevelList;var b;var a;for(a=0;a<c.length;a++){b=c[a];f.call(e,this._layers[b],b)}},eachBuiltinLayer:function(g,f){var e=this._zlevelList;var b;var c;var a;for(a=0;a<e.length;a++){c=e[a];b=this._layers[c];if(b.__builtin__){g.call(f,b,c)}}},eachOtherLayer:function(g,f){var e=this._zlevelList;var b;var c;var a;for(a=0;a<e.length;a++){c=e[a];b=this._layers[c];if(!b.__builtin__){g.call(f,b,c)}}},getLayers:function(){return this._layers},_updateLayerStatus:function(f){this.eachBuiltinLayer(function(a,b){a.__dirty=a.__used=!1});function updatePrevLayer(a){if(c){if(c.__endIndex!==a){c.__dirty=!0}c.__endIndex=a}}if(this._singleCanvas){for(var b=1;b<f.length;b++){var e=f[b];if(e.zlevel!==f[b-1].zlevel||e.incremental){this._needsManuallyCompositing=!0;break}}}var c=null;var h=0;for(var b=0;b<f.length;b++){var e=f[b];var g=e.zlevel;var a;if(e.incremental){a=this.getLayer(g+k2,this._needsManuallyCompositing);a.incremental=!0;h=1}else {a=this.getLayer(g+(h>0?f7:0),this._needsManuallyCompositing)}if(!a.__builtin__){aA('ZLevel '+g+' has been used by unkown layer '+a.id)}if(a!==c){a.__used=!0;if(a.__startIndex!==b){a.__dirty=!0}a.__startIndex=b;if(!a.incremental){a.__drawIndex=b}else {a.__drawIndex=-1}updatePrevLayer(b);c=a}if(e.__dirty){a.__dirty=!0;if(a.incremental&&a.__drawIndex<0){a.__drawIndex=b}}}updatePrevLayer(b);this.eachBuiltinLayer(function(a,b){if(!a.__used&&a.getElementCount()>0){a.__dirty=!0;a.__startIndex=a.__endIndex=a.__drawIndex=0}if(a.__dirty&&a.__drawIndex<0){a.__drawIndex=a.__startIndex}})},clear:function(){this.eachBuiltinLayer(this._clearLayer);return this},_clearLayer:function(a){a.clear()},setBackgroundColor:function(a){this._backgroundColor=a},configLayer:function(a,e){if(e){var b=this._layerConfig;if(!b[a]){b[a]=e}else {merge(b[a],e,!0)}for(var f=0;f<this._zlevelList.length;f++){var c=this._zlevelList[f];if(c===a||c===a+f7){var g=this._layers[c];merge(g,b[a],!0)}}}},delLayer:function(a){var e=this._layers;var c=this._zlevelList;var b=e[a];if(!b){return}b.dom.parentNode.removeChild(b.dom);delete e[a];c.splice(indexOf(c,a),1)},resize:function(b,a){if(!this._domRoot.style){if(b==null||a==null){return}this._width=b;this._height=a;this.getLayer(aX).resize(b,a)}else {var c=this._domRoot;c.style.display='none';var e=this._opts;b!=null&&(e.width=b);a!=null&&(e.height=a);b=this._getSize(0);a=this._getSize(1);c.style.display='';if(this._width!==b||a!==this._height){c.style.width=b+'px';c.style.height=a+'px';for(var f in this._layers){if(this._layers.hasOwnProperty(f)){this._layers[f].resize(b,a)}}each$1(this._progressiveLayers,function(c){c.resize(b,a)});this.refresh(!0)}this._width=b;this._height=a}return this},clearLayer:function(b){var a=this._layers[b];if(a){a.clear()}},dispose:function(){this.root.innerHTML='';this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(b){b=b||{};if(this._singleCanvas&&!this._compositeManually){return this._layers[aX].dom}var a=new cq('image',this,b.pixelRatio||this.dpr);a.initContext();a.clear(!1,b.backgroundColor||this._backgroundColor);if(b.pixelRatio<=this.dpr){this.refresh();var h=a.dom.width;var f=a.dom.height;var i=a.ctx;this.eachLayer(function(c){if(c.__builtin__){i.drawImage(c.dom,0,0,h,f)}else {if(c.renderToCanvas){a.ctx.save();c.renderToCanvas(a.ctx);a.ctx.restore()}}})}else {var g={};var e=this.storage.getDisplayList(!0);for(var c=0;c<e.length;c++){var j=e[c];this._doPaintEl(j,a,!0,g)}}return a.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(b){var c=this._opts;var a=['width','height'][b];var g=['clientWidth','clientHeight'][b];var h=['paddingLeft','paddingTop'][b];var i=['paddingRight','paddingBottom'][b];if(c[a]!=null&&c[a]!=='auto'){return parseFloat(c[a])}var e=this.root;var f=document.defaultView.getComputedStyle(e);return (e[g]||parseInt10(f[a])||parseInt10(e.style[a]))-(parseInt10(f[h])||0)-(parseInt10(f[i])||0)|0},pathToImage:function(a,b){b=b||this.dpr;var i=document.createElement('canvas');var k=i.getContext('2d');var j=a.getBoundingRect();var e=a.style;var f=e.shadowBlur*b;var l=e.shadowOffsetX*b;var m=e.shadowOffsetY*b;var g=e.hasStroke()?e.lineWidth:0;var n=Math.max(g/2,-l+f);var s=Math.max(g/2,l+f);var o=Math.max(g/2,-m+f);var r=Math.max(g/2,m+f);var q=j.width+n+s;var p=j.height+o+r;i.width=q*b;i.height=p*b;k.scale(b,b);k.clearRect(0,0,q,p);k.dpr=b;var c={position:a.position,rotation:a.rotation,scale:a.scale};a.position=[n-j.x,o-j.y];a.rotation=0;a.scale=[1,1];a.updateTransform();if(a){a.brush(k)}var t=ZImage;var h=new t({style:{x:0,y:0,image:i}});if(c.position!=null){h.position=a.position=c.position}if(c.rotation!=null){h.rotation=a.rotation=c.rotation}if(c.scale!=null){h.scale=a.scale=c.scale}return h}};var c7=function(a){a=a||{};this.stage=a.stage||{};this.onframe=a.onframe||function(){};this._clips=[];this._running=!1;this._time;this._pausedTime;this._pauseStart;this._paused=!1;r.call(this)};c7.prototype={constructor:c7,addClip:function(a){this._clips.push(a)},addAnimator:function(b){b.animation=this;var c=b.getClips();for(var a=0;a<c.length;a++){this.addClip(c[a])}},removeClip:function(b){var a=indexOf(this._clips,b);if(a>=0){this._clips.splice(a,1)}},removeAnimator:function(b){var c=b.getClips();for(var a=0;a<c.length;a++){this.removeClip(c[a])}b.animation=null},_update:function(){var g=(new Date()).getTime()-this._pausedTime;var f=g-this._time;var b=this._clips;var c=b.length;var e=[];var h=[];for(var a=0;a<c;a++){var i=b[a];var j=i.step(g,f);if(j){e.push(j);h.push(i)}}for(var a=0;a<c;){if(b[a]._needsRemove){b[a]=b[c-1];b.pop();c--}else {a++}}c=e.length;for(var a=0;a<c;a++){h[a].fire(e[a])}this._time=g;this.onframe(f);this.trigger('frame',f);if(this.stage.update){this.stage.update()}},_startLoop:function(){var a=this;this._running=!0;function step(){if(a._running){dS(step);!a._paused&&a._update()}}dS(step)},start:function(){this._time=(new Date()).getTime();this._pausedTime=0;this._startLoop()},stop:function(){this._running=!1},pause:function(){if(!this._paused){this._pauseStart=(new Date()).getTime();this._paused=!0}},resume:function(){if(this._paused){this._pausedTime+=(new Date()).getTime()-this._pauseStart;this._paused=!1}},clear:function(){this._clips=[]},isFinished:function(){return !this._clips.length},animate:function(c,a){a=a||{};var b=new fj(c,a.loop,a.getter,a.setter);this.addAnimator(b);return b}};mixin(c7,r);var kw=300;var cE=['click','dblclick','mousewheel','mouseout','mouseup','mousedown','mousemove','contextmenu'];var eb=['touchstart','touchend','touchmove'];var kD={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};var gv=map(cE,function(a){var b=a.replace('mouse','pointer');return kD[b]?b:a});function eventNameFix(a){return a==='mousewheel'&&f.browser.firefox?'DOMMouseScroll':a}function setTouchTimer(a){a._touching=!0;clearTimeout(a._touchTimer);a._touchTimer=setTimeout(function(){a._touching=!1},700)}var E={mousemove:function(a){a=normalizeEvent(this.dom,a);this.trigger('mousemove',a)},mouseout:function(b){b=normalizeEvent(this.dom,b);var a=b.toElement||b.relatedTarget;if(a!==this.dom){while(a&&a.nodeType!==9){if(a===this.dom){return}a=a.parentNode}}this.trigger('mouseout',b)},touchstart:function(a){a=normalizeEvent(this.dom,a);a.zrByTouch=!0;this._lastTouchMoment=new Date();this.handler.processGesture(a,'start');E.mousemove.call(this,a);E.mousedown.call(this,a);setTouchTimer(this)},touchmove:function(a){a=normalizeEvent(this.dom,a);a.zrByTouch=!0;this.handler.processGesture(a,'change');E.mousemove.call(this,a);setTouchTimer(this)},touchend:function(a){a=normalizeEvent(this.dom,a);a.zrByTouch=!0;this.handler.processGesture(a,'end');E.mouseup.call(this,a);if(+new Date()-this._lastTouchMoment<kw){E.click.call(this,a)}setTouchTimer(this)},pointerdown:function(a){E.mousedown.call(this,a)},pointermove:function(a){if(!isPointerFromTouch(a)){E.mousemove.call(this,a)}},pointerup:function(a){E.mouseup.call(this,a)},pointerout:function(a){if(!isPointerFromTouch(a)){E.mouseout.call(this,a)}}};function isPointerFromTouch(b){var a=b.pointerType;return a==='pen'||a==='touch'}each$1(['click','mousedown','mouseup','mousewheel','dblclick','contextmenu'],function(a){E[a]=function(b){b=normalizeEvent(this.dom,b);this.trigger(a,b)}});function initDomHandler(a){each$1(eb,function(b){a._handlers[b]=bind(E[b],a)});each$1(gv,function(b){a._handlers[b]=bind(E[b],a)});each$1(cE,function(b){a._handlers[b]=makeMouseHandler(E[b],a)});function makeMouseHandler(c,b){return function(){if(b._touching){return}return c.apply(b,arguments)}}}function HandlerDomProxy(a){r.call(this);this.dom=a;this._touching=!1;this._touchTimer;this._handlers={};initDomHandler(this);if(f.pointerEventsSupported){mountHandlers(gv,this)}else {if(f.touchEventsSupported){mountHandlers(eb,this)}mountHandlers(cE,this)}function mountHandlers(c,b){each$1(c,function(e){addEventListener(a,eventNameFix(e),b._handlers[e])},b)}}var gq=HandlerDomProxy.prototype;gq.dispose=function(){var b=cE.concat(eb);for(var a=0;a<b.length;a++){var c=b[a];removeEventListener(this.dom,eventNameFix(c),this._handlers[c])}};gq.setCursor=function(a){this.dom.style&&(this.dom.style.cursor=a||'default')};mixin(HandlerDomProxy,r);var oy=!f.canvasSupported;var cX={canvas:fs};var a0={};var fi='4.1.2';function init$1(c,b){var a=new fv(jc(),c,b);a0[a.id]=a;return a}function dispose$1(b){if(b){b.dispose()}else {for(var a in a0){if(a0.hasOwnProperty(a)){a0[a].dispose()}}a0={}}return this}function getInstance(a){return a0[a]}function registerPainter(b,a){cX[b]=a}function delInstance(a){delete a0[a]}var fv=function(i,h,e){e=e||{};this.dom=h;this.id=i;var g=this;var a=new fu();var b=e.renderer;if(oy){if(!cX.vml){throw new Error("You need to require 'zrender/vml/vml' to support IE8")}b='vml'}else {if(!b||!cX[b]){b='canvas'}}var c=new cX[b](h,a,e,i);this.storage=a;this.painter=c;var l=!f.node&&!f.worker?new HandlerDomProxy(c.getViewportRoot()):null;this.handler=new bB(a,c,l,c.root);this.animation=new c7({stage:{update:bind(this.flush,this)}});this.animation.start();this._needsRefresh;var j=a.delFromStorage;var k=a.addToStorage;a.delFromStorage=function(b){j.call(a,b);b&&b.removeSelfFromZr(g)};a.addToStorage=function(b){k.call(a,b);b.addSelfToZr(g)}};fv.prototype={constructor:fv,getId:function(){return this.id},add:function(a){this.storage.addRoot(a);this._needsRefresh=!0},remove:function(a){this.storage.delRoot(a);this._needsRefresh=!0},configLayer:function(b,a){if(this.painter.configLayer){this.painter.configLayer(b,a)}this._needsRefresh=!0},setBackgroundColor:function(a){if(this.painter.setBackgroundColor){this.painter.setBackgroundColor(a)}this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1;this.painter.refresh();this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var a;if(this._needsRefresh){a=!0;this.refreshImmediately()}if(this._needsRefreshHover){a=!0;this.refreshHoverImmediately()}a&&this.trigger('rendered')},addHover:function(c,b){if(this.painter.addHover){var a=this.painter.addHover(c,b);this.refreshHover();return a}},removeHover:function(a){if(this.painter.removeHover){this.painter.removeHover(a);this.refreshHover()}},clearHover:function(){if(this.painter.clearHover){this.painter.clearHover();this.refreshHover()}},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1;this.painter.refreshHover&&this.painter.refreshHover()},resize:function(a){a=a||{};this.painter.resize(a.width,a.height);this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(b,a){return this.painter.pathToImage(b,a)},setCursorStyle:function(a){this.handler.setCursorStyle(a)},findHover:function(a,b){return this.handler.findHover(a,b)},on:function(b,a,c){this.handler.on(b,a,c)},off:function(b,a){this.handler.off(b,a)},trigger:function(a,b){this.handler.trigger(a,b)},clear:function(){this.storage.delRoot();this.painter.clear()},dispose:function(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=this.storage=this.painter=this.handler=null;delInstance(this.id)}};var oh=(Object.freeze||Object)({version:fi,init:init$1,dispose:dispose$1,getInstance:getInstance,registerPainter:registerPainter});var bJ=each$1;var by=isObject$1;var nG=isArray;var f2='series\x00';function normalizeToArray(a){return a instanceof Array?a:a==null?[]:[a]}function defaultEmphasis(a,b,f){if(a){a[b]=a[b]||{};a.emphasis=a.emphasis||{};a.emphasis[b]=a.emphasis[b]||{};for(var e=0,g=f.length;e<g;e++){var c=f[e];if(!a.emphasis[b].hasOwnProperty(c)&&a[b].hasOwnProperty(c)){a.emphasis[b][c]=a[b][c]}}}}var gy=['fontStyle','fontWeight','fontSize','fontFamily','rich','tag','color','textBorderColor','textBorderWidth','width','height','lineHeight','align','verticalAlign','baseline','shadowColor','shadowBlur','shadowOffsetX','shadowOffsetY','textShadowColor','textShadowBlur','textShadowOffsetX','textShadowOffsetY','backgroundColor','borderColor','borderWidth','borderRadius','padding'];function getDataItemValue(a){return by(a)&&!nG(a)&&!(a instanceof Date)?a.value:a}function isDataItemOption(a){return by(a)&&!(a instanceof Array)}function mappingToExists(c,b){b=(b||[]).slice();var a=map(c||[],function(a,e){return {exist:a}});bJ(b,function(f,h){if(!by(f)){return}for(var e=0;e<a.length;e++){if(!a[e].option&&f.id!=null&&a[e].exist.id===f.id+''){a[e].option=f;b[h]=null;return}}for(var e=0;e<a.length;e++){var g=a[e].exist;if(!a[e].option&&(g.id==null||f.id==null)&&f.name!=null&&!isIdInner(f)&&!isIdInner(g)&&g.name===f.name+''){a[e].option=f;b[h]=null;return}}});bJ(b,function(f,h){if(!by(f)){return}var e=0;for(;e<a.length;e++){var g=a[e].exist;if(!a[e].option&&!isIdInner(g)&&f.id==null){a[e].option=f;break}}if(e>=a.length){a.push({option:f})}});return a}function makeIdAndName(b){var a=createHashMap();bJ(b,function(e,f){var c=e.exist;c&&a.set(c.id,e)});bJ(b,function(e,f){var c=e.option;assert$1(!c||c.id==null||!a.get(c.id)||a.get(c.id)===e,'id duplicates: '+(c&&c.id));c&&c.id!=null&&a.set(c.id,e);!e.keyInfo&&(e.keyInfo={})});bJ(b,function(g,i){var f=g.exist;var e=g.option;var c=g.keyInfo;if(!by(e)){return}c.name=e.name!=null?e.name+'':f?f.name:f2+i;if(f){c.id=f.id}else {if(e.id!=null){c.id=e.id+''}else {var h=0;do{c.id='\x00'+c.name+'\x00'+h++}while(a.get(c.id))}}a.set(c.id,g)})}function isNameSpecified(b){var a=b.name;return !!(a&&a.indexOf(f2))}function isIdInner(a){return by(a)&&a.id&&(a.id+'').indexOf('\x00_ec_\x00')===0}function compressBatches(c,e){var a={};var b={};makeMap(c||[],a);makeMap(e||[],b,a);return [mapToArray(a),mapToArray(b)];function makeMap(f,l,k){for(var a=0,n=f.length;a<n;a++){var h=f[a].seriesId;var j=normalizeToArray(f[a].dataIndex);var b=k&&k[h];for(var i=0,m=j.length;i<m;i++){var g=j[i];if(b&&b[g]){b[g]=null}else {(l[h]||(l[h]={}))[g]=1}}}}function mapToArray(b,h){var f=[];for(var a in b){if(b.hasOwnProperty(a)&&b[a]!=null){if(h){f.push(+a)}else {var g=mapToArray(b[a],!0);g.length&&f.push({seriesId:a,dataIndex:g})}}}return f}}function queryDataIndex(b,a){if(a.dataIndexInside!=null){return a.dataIndexInside}else {if(a.dataIndex!=null){return isArray(a.dataIndex)?map(a.dataIndex,function(c){return b.indexOfRawIndex(c)}):b.indexOfRawIndex(a.dataIndex)}else {if(a.name!=null){return isArray(a.name)?map(a.name,function(c){return b.indexOfName(c)}):b.indexOfName(a.name)}}}}function makeInner(){var a='__\x00ec_inner_'+kQ++ +'_'+Math.random().toFixed(5);return function(b){return b[a]||(b[a]={})}}var kQ=0;function parseFinder(g,a,c){if(isString(a)){var f={};f[a+'Index']=0;a=f}var b=c&&c.defaultMainType;if(b&&!has(a,b+'Index')&&!has(a,b+'Id')&&!has(a,b+'Name')){a[b+'Index']=0}var e={};bJ(a,function(b,h){var b=a[h];if(h==='dataIndex'||h==='dataIndexInside'){e[h]=b;return}var k=h.match(/^(\w+)(Index|Id|Name)$/)||[];var f=k[1];var i=(k[2]||'').toLowerCase();if(!f||!i||b==null||i==='index'&&b==='none'||c&&c.includeMainTypes&&indexOf(c.includeMainTypes,f)<0){return}var j={mainType:f};if(i!=='index'||b!=='all'){j[i]=b}var l=g.queryComponents(j);e[f+'Models']=l;e[f+'Model']=l[0]});return e}function has(a,b){return a&&a.hasOwnProperty(b)}function setAttribute(a,c,b){a.setAttribute?a.setAttribute(c,b):a[c]=b}function getAttribute(a,b){return a.getAttribute?a.getAttribute(b):a[b]}function getTooltipRenderMode(a){if(a==='auto'){return f.domSupported?'html':'richText'}else {return a||'html'}}function groupData(e,c){var a=createHashMap();var b=[];each$1(e,function(g){var f=c(g);(a.get(f)||(b.push(f),a.set(f,[]))).push(g)});return {keys:b,buckets:a}}var lm='.';var aZ='___EC__COMPONENT__CONTAINER___';function parseClassType$1(a){var b={main:'',sub:''};if(a){a=a.split(lm);b.main=a[0]||'';b.sub=a[1]||''}return b}function checkClassType(a){assert$1(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function enableClassExtend(b,c){b.$constructor=b;b.extend=function(f){if(a){each$1(c,function(a){if(!f[a]){console.warn('Method `'+a+'` should be implemented'+(f.type?' in '+f.type:'')+'.')}})}var g=this;var e=function(){if(!f.$constructor){g.apply(this,arguments)}else {f.$constructor.apply(this,arguments)}};extend(e.prototype,f);e.extend=this.extend;e.superCall=superCall;e.superApply=superApply;inherits(e,this);e.superClass=g;return e}}var nB=0;function enableClassCheck(b){var c=['__\x00is_clz',nB++,Math.random().toFixed(3)].join('_');b.prototype[c]=!0;if(a){assert$1(!b.isInstance,'The method "is" can not be defined.')}b.isInstance=function(a){return !!(a&&a[c])}}function superCall(b,a){var c=slice(arguments,2);return this.superClass.prototype[a].apply(b,c)}function superApply(b,a,c){return this.superClass.prototype[a].apply(b,c)}function enableClassManagement(b,e){e=e||{};var c={};b.registerClass=function(g,f){if(f){checkClassType(f);f=parseClassType$1(f);if(!f.sub){if(a){if(c[f.main]){console.warn(f.main+' exists.')}}c[f.main]=g}else {if(f.sub!==aZ){var h=makeContainer(f);h[f.sub]=g}}}return g};b.getClass=function(g,f,h){var a=c[g];if(a&&a[aZ]){a=f?a[f]:null}if(h&&!a){throw new Error(!f?g+'.'+'type should be specified.':'Component '+g+'.'+(f||'')+' not exists. Load it first.')}return a};b.getClassesByMainType=function(f){f=parseClassType$1(f);var g=[];var a=c[f.main];if(a&&a[aZ]){each$1(a,function(c,a){a!==aZ&&g.push(c)})}else {g.push(a)}return g};b.hasClass=function(a){a=parseClassType$1(a);return !!c[a.main]};b.getAllClassMainTypes=function(){var a=[];each$1(c,function(f,c){a.push(c)});return a};b.hasSubTypes=function(a){a=parseClassType$1(a);var f=c[a.main];return f&&f[aZ]};b.parseClassType=parseClassType$1;function makeContainer(f){var a=c[f.main];if(!a||!a[aZ]){a=c[f.main]={};a[aZ]=!0}return a}if(e.registerWhenExtend){var f=b.extend;if(f){b.extend=function(a){var c=f.call(this,a);return b.registerClass(c,a.type)}}}return b}var bo=function(a){for(var b=0;b<a.length;b++){if(!a[b][1]){a[b][1]=a[b][0]}}return function(i,e,f){var g={};for(var b=0;b<a.length;b++){var c=a[b][1];if(e&&indexOf(e,c)>=0||f&&indexOf(f,c)<0){continue}var h=i.getShallow(c);if(h!=null){g[a[b][0]]=h}}return g}};var me=bo([['lineWidth','width'],['stroke','color'],['opacity'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor']]);var lw={getLineStyle:function(b){var a=me(this,b);a.lineDash=this.getLineDash(a.lineWidth);return a},getLineDash:function(a){if(a==null){a=1}var b=this.get('type');var e=Math.max(a,2);var c=a*4;return b==='solid'||b==null?!1:b==='dashed'?[c,c]:[e,e]}};var mb=bo([['fill','color'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['opacity'],['shadowColor']]);var lo={getAreaStyle:function(a,b){return mb(this,a,b)}};var dw=Math.pow;var aB=Math.sqrt;var da=1.0E-8;var gV=1.0E-4;var hW=aB(3);var dc=1/3;var ag=create();var O=create();var bP=create();function isAroundZero(a){return a>-da&&a<da}function isNotAroundZero$1(a){return a>da||a<-da}function cubicAt(c,e,f,g,a){var b=1-a;return b*b*(b*c+3*a*e)+a*a*(a*g+3*b*f)}function cubicDerivativeAt(f,c,e,g,a){var b=1-a;return 3*(((c-f)*b+2*(e-c)*a)*b+(g-e)*a*a)}function cubicRootAt(m,r,u,y,x,f){var e=y+3*(r-u)-m;var b=3*(u-r*2+m);var l=3*(r-m);var w=m-x;var c=b*b-3*e*l;var i=b*l-9*e*w;var z=l*l-3*b*w;var g=0;if(isAroundZero(c)&&isAroundZero(i)){if(isAroundZero(b)){f[0]=0}else {var a=-l/b;if(a>=0&&a<=1){f[g++]=a}}}else {var p=i*i-4*c*z;if(isAroundZero(p)){var v=i/c;var a=-b/e+v;var h=-v/2;if(a>=0&&a<=1){f[g++]=a}if(h>=0&&h<=1){f[g++]=h}}else {if(p>0){var t=aB(p);var j=c*b+1.5*e*(-i+t);var k=c*b+1.5*e*(-i-t);if(j<0){j=-dw(-j,dc)}else {j=dw(j,dc)}if(k<0){k=-dw(-k,dc)}else {k=dw(k,dc)}var a=(-b-(j+k))/(3*e);if(a>=0&&a<=1){f[g++]=a}}else {var A=(2*c*b-3*e*i)/(2*aB(c*c*c));var o=Math.acos(A)/3;var n=aB(c);var q=Math.cos(o);var a=(-b-2*n*q)/(3*e);var h=(-b+n*(q+hW*Math.sin(o)))/(3*e);var s=(-b+n*(q-hW*Math.sin(o)))/(3*e);if(a>=0&&a<=1){f[g++]=a}if(h>=0&&h<=1){f[g++]=h}if(s>=0&&s<=1){f[g++]=s}}}}return g}function cubicExtrema(h,i,l,n,e){var b=6*l-12*i+6*h;var c=9*i+3*n-3*h-9*l;var m=3*i-3*h;var f=0;if(isAroundZero(c)){if(isNotAroundZero$1(b)){var a=-m/b;if(a>=0&&a<=1){e[f++]=a}}}else {var g=b*b-4*c*m;if(isAroundZero(g)){e[0]=-b/(2*c)}else {if(g>0){var k=aB(g);var a=(-b+k)/(2*c);var j=(-b-k)/(2*c);if(a>=0&&a<=1){e[f++]=a}if(j>=0&&j<=1){e[f++]=j}}}}return f}function cubicSubdivide(g,h,i,m,b,a){var e=(h-g)*b+g;var f=(i-h)*b+h;var l=(m-i)*b+i;var c=(f-e)*b+e;var k=(l-f)*b+f;var j=(k-c)*b+c;a[0]=g;a[1]=e;a[2]=c;a[3]=j;a[4]=j;a[5]=k;a[6]=l;a[7]=m}function cubicProjectPoint(i,m,j,n,k,o,l,p,t,u,q){var b;var h=0.005;var a=Infinity;var f;var e;var c;var r;ag[0]=t;ag[1]=u;for(var g=0;g<1;g+=0.05){O[0]=cubicAt(i,j,k,l,g);O[1]=cubicAt(m,n,o,p,g);c=az(ag,O);if(c<a){b=g;a=c}}a=Infinity;for(var s=0;s<32;s++){if(h<gV){break}f=b-h;e=b+h;O[0]=cubicAt(i,j,k,l,f);O[1]=cubicAt(m,n,o,p,f);c=az(O,ag);if(f>=0&&c<a){b=f;a=c}else {bP[0]=cubicAt(i,j,k,l,e);bP[1]=cubicAt(m,n,o,p,e);r=az(bP,ag);if(e<=1&&r<a){b=e;a=r}else {h*=0.5}}}if(q){q[0]=cubicAt(i,j,k,l,b);q[1]=cubicAt(m,n,o,p,b)}return aB(a)}function quadraticAt(c,e,f,a){var b=1-a;return b*(b*c+2*a*e)+a*a*f}function quadraticDerivativeAt(c,a,e,b){return 2*((1-b)*(a-c)+b*(e-a))}function quadraticRootAt(h,k,n,m,f){var c=h-2*k+n;var b=2*(k-h);var l=h-m;var e=0;if(isAroundZero(c)){if(isNotAroundZero$1(b)){var a=-l/b;if(a>=0&&a<=1){f[e++]=a}}}else {var g=b*b-4*c*l;if(isAroundZero(g)){var a=-b/(2*c);if(a>=0&&a<=1){f[e++]=a}}else {if(g>0){var j=aB(g);var a=(-b+j)/(2*c);var i=(-b-j)/(2*c);if(a>=0&&a<=1){f[e++]=a}if(i>=0&&i<=1){f[e++]=i}}}}return e}function quadraticExtremum(b,c,e){var a=b+e-2*c;if(a===0){return 0.5}else {return (b-c)/a}}function quadraticSubdivide(c,e,i,f,a){var b=(e-c)*f+c;var h=(i-e)*f+e;var g=(h-b)*f+b;a[0]=c;a[1]=b;a[2]=g;a[3]=g;a[4]=h;a[5]=i}function quadraticProjectPoint(i,l,j,m,k,n,r,s,o){var b;var f=0.005;var a=Infinity;ag[0]=r;ag[1]=s;for(var c=0;c<1;c+=0.05){O[0]=quadraticAt(i,j,k,c);O[1]=quadraticAt(l,m,n,c);var e=az(ag,O);if(e<a){b=c;a=e}}a=Infinity;for(var q=0;q<32;q++){if(f<gV){break}var h=b-f;var g=b+f;O[0]=quadraticAt(i,j,k,h);O[1]=quadraticAt(l,m,n,h);var e=az(O,ag);if(h>=0&&e<a){b=h;a=e}else {bP[0]=quadraticAt(i,j,k,g);bP[1]=quadraticAt(l,m,n,g);var p=az(bP,ag);if(g<=1&&p<a){b=g;a=p}else {f*=0.5}}}if(o){o[0]=quadraticAt(i,j,k,b);o[1]=quadraticAt(l,m,n,b)}return aB(a)}var A=Math.min;var z=Math.max;var fe=Math.sin;var fb=Math.cos;var be=Math.PI*2;var dL=create();var dP=create();var dg=create();function fromPoints(b,j,i){if(b.length===0){return}var a=b[0];var g=a[0];var f=a[0];var h=a[1];var e=a[1];var c;for(c=1;c<b.length;c++){a=b[c];g=A(g,a[0]);f=z(f,a[0]);h=A(h,a[1]);e=z(e,a[1])}j[0]=g;j[1]=h;i[0]=f;i[1]=e}function fromLine(c,f,e,g,b,a){b[0]=A(c,e);b[1]=A(f,g);a[0]=z(c,e);a[1]=z(f,g)}var jf=[];var jg=[];function fromCubic(e,g,l,n,m,o,f,h,b,a){var j=cubicExtrema;var k=cubicAt;var c;var i=j(e,l,m,f,jf);b[0]=Infinity;b[1]=Infinity;a[0]=-Infinity;a[1]=-Infinity;for(c=0;c<i;c++){var p=k(e,l,m,f,jf[c]);b[0]=A(p,b[0]);a[0]=z(p,a[0])}i=j(g,n,o,h,jg);for(c=0;c<i;c++){var q=k(g,n,o,h,jg[c]);b[1]=A(q,b[1]);a[1]=z(q,a[1])}b[0]=A(e,b[0]);a[0]=z(e,a[0]);b[0]=A(f,b[0]);a[0]=z(f,a[0]);b[1]=A(g,b[1]);a[1]=z(g,a[1]);b[1]=A(h,b[1]);a[1]=z(h,a[1])}function fromQuadratic(a,c,j,k,b,e,i,h){var f=quadraticExtremum;var g=quadraticAt;var n=z(A(f(a,j,b),1),0);var o=z(A(f(c,k,e),1),0);var l=g(a,j,b,n);var m=g(c,k,e,o);i[0]=A(a,b,l);i[1]=A(c,e,m);h[0]=z(a,b,l);h[1]=z(c,e,m)}function fromArc(i,j,g,h,a,b,k,e,c){var m=min;var l=max;var n=Math.abs(a-b);if(n%be<1.0E-4&&n>1.0E-4){e[0]=i-g;e[1]=j-h;c[0]=i+g;c[1]=j+h;return}dL[0]=fb(a)*g+i;dL[1]=fe(a)*h+j;dP[0]=fb(b)*g+i;dP[1]=fe(b)*h+j;m(e,dL,dP);l(c,dL,dP);a=a%be;if(a<0){a=a+be}b=b%be;if(b<0){b=b+be}if(a>b&&!k){b+=be}else {if(a<b&&k){a+=be}}if(k){var o=b;b=a;a=o}for(var f=0;f<b;f+=Math.PI/2){if(f>a){dg[0]=fb(f)*g+i;dg[1]=fe(f)*h+j;m(e,dg,e);l(c,dg,c)}}}var o={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7};var ad=[];var aL=[];var af=[];var ae=[];var ie=Math.min;var ib=Math.max;var b9=Math.cos;var cd=Math.sin;var c5=Math.sqrt;var bF=Math.abs;var eG=typeof Float32Array!=='undefined';var y=function(a){this._saveData=!(a||!1);if(this._saveData){this.data=[]}this._ctx=null};y.prototype={constructor:y,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(b,c,a){a=a||0;this._ux=bF(a/cF/b)||0;this._uy=bF(a/cF/c)||0},getContext:function(){return this._ctx},beginPath:function(a){this._ctx=a;a&&a.beginPath();a&&(this.dpr=a.dpr);if(this._saveData){this._len=0}if(this._lineDash){this._lineDash=null;this._dashOffset=0}return this},moveTo:function(a,b){this.addData(o.M,a,b);this._ctx&&this._ctx.moveTo(a,b);this._x0=a;this._y0=b;this._xi=a;this._yi=b;return this},lineTo:function(a,b){var c=bF(a-this._xi)>this._ux||bF(b-this._yi)>this._uy||this._len<5;this.addData(o.L,a,b);if(this._ctx&&c){this._needsDash()?this._dashedLineTo(a,b):this._ctx.lineTo(a,b)}if(c){this._xi=a;this._yi=b}return this},bezierCurveTo:function(c,f,e,g,a,b){this.addData(o.C,c,f,e,g,a,b);if(this._ctx){this._needsDash()?this._dashedBezierTo(c,f,e,g,a,b):this._ctx.bezierCurveTo(c,f,e,g,a,b)}this._xi=a;this._yi=b;return this},quadraticCurveTo:function(c,e,a,b){this.addData(o.Q,c,e,a,b);if(this._ctx){this._needsDash()?this._dashedQuadraticTo(c,e,a,b):this._ctx.quadraticCurveTo(c,e,a,b)}this._xi=a;this._yi=b;return this},arc:function(e,f,a,c,b,g){this.addData(o.A,e,f,a,a,c,b-c,0,g?0:1);this._ctx&&this._ctx.arc(e,f,a,c,b,g);this._xi=b9(b)*a+e;this._yi=cd(b)*a+f;return this},arcTo:function(b,e,c,f,a){if(this._ctx){this._ctx.arcTo(b,e,c,f,a)}return this},rect:function(c,e,b,a){this._ctx&&this._ctx.rect(c,e,b,a);this.addData(o.R,c,e,b,a);return this},closePath:function(){this.addData(o.Z);var a=this._ctx;var b=this._x0;var c=this._y0;if(a){this._needsDash()&&this._dashedLineTo(b,c);a.closePath()}this._xi=b;this._yi=c;return this},fill:function(a){a&&a.fill();this.toStatic()},stroke:function(a){a&&a.stroke();this.toStatic()},setLineDash:function(a){if(a instanceof Array){this._lineDash=a;this._dashIdx=0;var c=0;for(var b=0;b<a.length;b++){c+=a[b]}this._dashSum=c}return this},setLineDashOffset:function(a){this._dashOffset=a;return this},len:function(){return this._len},setData:function(c){var a=c.length;if(!(this.data&&this.data.length===a)&&eG){this.data=new Float32Array(a)}for(var b=0;b<a;b++){this.data[b]=c[b]}this._len=a},appendPath:function(b){if(!(b instanceof Array)){b=[b]}var h=b.length;var g=0;var c=this._len;for(var a=0;a<h;a++){g+=b[a].len()}if(eG&&this.data instanceof Float32Array){this.data=new Float32Array(c+g)}for(var a=0;a<h;a++){var f=b[a].data;for(var e=0;e<f.length;e++){this.data[c++]=f[e]}}this._len=c},addData:function(c){if(!this._saveData){return}var a=this.data;if(this._len+arguments.length>a.length){this._expandData();a=this.data}for(var b=0;b<arguments.length;b++){a[this._len++]=arguments[b]}this._prevCmd=c},_expandData:function(){if(!(this.data instanceof Array)){var b=[];for(var a=0;a<this._len;a++){b[a]=this.data[a]}this.data=b}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(g,h){var n=this._dashSum;var f=this._dashOffset;var m=this._lineDash;var q=this._ctx;var j=this._xi;var k=this._yi;var a=g-j;var b=h-k;var o=c5(a*a+b*b);var c=j;var e=k;var l;var p=m.length;var i;a/=o;b/=o;if(f<0){f=n+f}f%=n;c-=f*a;e-=f*b;while(a>0&&c<=g||a<0&&c>=g||a===0&&(b>0&&e<=h||b<0&&e>=h)){i=this._dashIdx;l=m[i];c+=a*l;e+=b*l;this._dashIdx=(i+1)%p;if(a>0&&c<j||a<0&&c>j||b>0&&e<k||b<0&&e>k){continue}q[i%2?'moveTo':'lineTo'](a>=0?ie(c,g):ib(c,g),b>=0?ie(e,h):ib(e,h))}a=c-g;b=e-h;this._dashOffset=-c5(a*a+b*b)},_dashedBezierTo:function(q,t,r,u,h,i){var v=this._dashSum;var e=this._dashOffset;var m=this._lineDash;var o=this._ctx;var p=this._xi;var s=this._yi;var a;var f;var g;var c=cubicAt;var l=0;var b=this._dashIdx;var w=m.length;var j;var k;var n=0;if(e<0){e=v+e}e%=v;for(a=0;a<1;a+=0.1){f=c(p,q,r,h,a+0.1)-c(p,q,r,h,a);g=c(s,t,u,i,a+0.1)-c(s,t,u,i,a);l+=c5(f*f+g*g)}for(;b<w;b++){n+=m[b];if(n>e){break}}a=(n-e)/l;while(a<=1){j=c(p,q,r,h,a);k=c(s,t,u,i,a);b%2?o.moveTo(j,k):o.lineTo(j,k);a+=m[b]/l;b=(b+1)%w}b%2!==0&&o.lineTo(h,i);f=h-j;g=i-k;this._dashOffset=-c5(f*f+g*g)},_dashedQuadraticTo:function(a,c,b,e){var f=b;var g=e;b=(b+2*a)/3;e=(e+2*c)/3;a=(this._xi+2*a)/3;c=(this._yi+2*c)/3;this._dashedBezierTo(a,c,b,e,f,g)},toStatic:function(){var a=this.data;if(a instanceof Array){a.length=this._len;if(eG){this.data=new Float32Array(a)}}},getBoundingRect:function(){ad[0]=ad[1]=af[0]=af[1]=Number.MAX_VALUE;aL[0]=aL[1]=ae[0]=ae[1]=-Number.MAX_VALUE;var b=this.data;var c=0;var e=0;var f=0;var g=0;for(var a=0;a<b.length;){var r=b[a++];if(a===1){c=b[a];e=b[a+1];f=c;g=e}switch(r){case o.M:f=b[a++];g=b[a++];c=f;e=g;af[0]=f;af[1]=g;ae[0]=f;ae[1]=g;break;case o.L:fromLine(c,e,b[a],b[a+1],af,ae);c=b[a++];e=b[a++];break;case o.C:fromCubic(c,e,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],af,ae);c=b[a++];e=b[a++];break;case o.Q:fromQuadratic(c,e,b[a++],b[a++],b[a],b[a+1],af,ae);c=b[a++];e=b[a++];break;case o.A:var j=b[a++];var k=b[a++];var l=b[a++];var m=b[a++];var h=b[a++];var i=b[a++]+h;a+=1;var n=1-b[a++];if(a===1){f=b9(h)*l+j;g=cd(h)*m+k};fromArc(j,k,l,m,h,i,n,af,ae);c=b9(i)*l+j;e=cd(i)*m+k;break;case o.R:f=c=b[a++];g=e=b[a++];var q=b[a++];var p=b[a++];fromLine(f,g,f+q,g+p,af,ae);break;case o.Z:c=f;e=g;break;}min(ad,ad,af);max(aL,aL,ae)}if(a===0){ad[0]=ad[1]=aL[0]=aL[1]=0}return new BoundingRect(ad[0],ad[1],aL[0]-ad[0],aL[1]-ad[1])},rebuildPath:function(c){var b=this.data;var l;var m;var e;var f;var p;var q;var A=this._ux;var B=this._uy;var r=this._len;for(var a=0;a<r;){var z=b[a++];if(a===1){e=b[a];f=b[a+1];l=e;m=f}switch(z){case o.M:l=e=b[a++];m=f=b[a++];c.moveTo(e,f);break;case o.L:p=b[a++];q=b[a++];if(bF(p-e)>A||bF(q-f)>B||a===r-1){c.lineTo(p,q);e=p;f=q};break;case o.C:c.bezierCurveTo(b[a++],b[a++],b[a++],b[a++],b[a++],b[a++]);e=b[a-2];f=b[a-1];break;case o.Q:c.quadraticCurveTo(b[a++],b[a++],b[a++],b[a++]);e=b[a-2];f=b[a-1];break;case o.A:var j=b[a++];var k=b[a++];var g=b[a++];var h=b[a++];var i=b[a++];var y=b[a++];var u=b[a++];var v=b[a++];var w=g>h?g:h;var s=g>h?1:g/h;var t=g>h?h/g:1;var x=Math.abs(g-h)>0.001;var n=i+y;if(x){c.translate(j,k);c.rotate(u);c.scale(s,t);c.arc(0,0,w,i,n,1-v);c.scale(1/s,1/t);c.rotate(-u);c.translate(-j,-k)}else {c.arc(j,k,w,i,n,1-v)};if(a===1){l=b9(i)*g+j;m=cd(i)*h+k};e=b9(n)*g+j;f=cd(n)*h+k;break;case o.R:l=e=b[a];m=f=b[a+1];c.rect(b[a++],b[a++],b[a++],b[a++]);break;case o.Z:c.closePath();e=l;f=m;}}}};y.CMD=o;function containStroke$1(b,h,c,i,j,e,f){if(j===0){return !1}var a=j;var g=0;var l=b;if(f>h+a&&f>i+a||f<h-a&&f<i-a||e>b+a&&e>c+a||e<b-a&&e<c-a){return !1}if(b!==c){g=(h-i)/(b-c);l=(b*i-c*h)/(b-c)}else {return Math.abs(e-b)<=a/2}var k=g*e-f+l;var m=k*k/(g*g+1);return m<=a/2*a/2}function containStroke$2(e,i,f,j,g,k,h,l,m,b,c){if(m===0){return !1}var a=m;if(c>i+a&&c>j+a&&c>k+a&&c>l+a||c<i-a&&c<j-a&&c<k-a&&c<l-a||b>e+a&&b>f+a&&b>g+a&&b>h+a||b<e-a&&b<f-a&&b<g-a&&b<h-a){return !1}var n=cubicProjectPoint(e,i,f,j,g,k,h,l,b,c,null);return n<=a/2}function containStroke$3(e,h,f,i,g,j,k,b,c){if(k===0){return !1}var a=k;if(c>h+a&&c>i+a&&c>j+a||c<h-a&&c<i-a&&c<j-a||b>e+a&&b>f+a&&b>g+a||b<e-a&&b<f-a&&b<g-a){return !1}var l=quadraticProjectPoint(e,h,f,i,g,j,b,c,null);return l<=a/2}var i3=Math.PI*2;function normalizeRadian(a){a%=i3;if(a<0){a+=i3}return a}var cr=Math.PI*2;function containStroke$4(m,n,j,b,a,k,g,e,f){if(g===0){return !1}var h=g;e-=m;f-=n;var i=Math.sqrt(e*e+f*f);if(i-h>j||i+h<j){return !1}if(Math.abs(b-a)%cr<1.0E-4){return !0}if(k){var l=b;b=normalizeRadian(a);a=normalizeRadian(l)}else {b=normalizeRadian(b);a=normalizeRadian(a)}if(b>a){a+=cr}var c=Math.atan2(f,e);if(c<0){c+=cr}return c>=b&&c<=a||c+cr>=b&&c+cr<=a}function windingLine(g,a,j,b,i,c){if(c>a&&c>b||c<a&&c<b){return 0}if(b===a){return 0}var f=b<a?1:-1;var e=(c-a)/(b-a);if(e===1||e===0){f=b<a?0.5:-0.5}var h=e*(j-g)+g;return h===i?Infinity:h>i?f:0}var aI=y.CMD;var bM=Math.PI*2;var nm=1.0E-4;function isAroundEqual(a,b){return Math.abs(a-b)<nm}var w=[-1,-1,-1];var M=[-1,-1];function swapExtrema(){var a=M[0];M[0]=M[1];M[1]=a}function windingCubic(o,c,p,f,q,g,r,e,t,b){if(b>c&&b>f&&b>g&&b>e||b<c&&b<f&&b<g&&b<e){return 0}var n=cubicRootAt(c,f,g,e,b,w);if(n===0){return 0}else {var i=0;var j=-1;var k;var l;for(var m=0;m<n;m++){var h=w[m];var a=h===0||h===1?0.5:1;var s=cubicAt(o,p,q,r,h);if(s<t){continue}if(j<0){j=cubicExtrema(c,f,g,e,M);if(M[1]<M[0]&&j>1){swapExtrema()}k=cubicAt(c,f,g,e,M[0]);if(j>1){l=cubicAt(c,f,g,e,M[1])}}if(j===2){if(h<M[0]){i+=k<c?a:-a}else {if(h<M[1]){i+=l<k?a:-a}else {i+=e<l?a:-a}}}else {if(h<M[0]){i+=k<c?a:-a}else {i+=e<k?a:-a}}}return i}}function windingQuadratic(l,b,m,g,n,c,p,e){if(e>b&&e>g&&e>c||e<b&&e<g&&e<c){return 0}var k=quadraticRootAt(b,g,c,e,w);if(k===0){return 0}else {var h=quadraticExtremum(b,g,c);if(h>=0&&h<=1){var j=0;var o=quadraticAt(b,g,c,h);for(var f=0;f<k;f++){var a=w[f]===0||w[f]===1?0.5:1;var i=quadraticAt(l,m,n,w[f]);if(i<p){continue}if(w[f]<h){j+=o<b?a:-a}else {j+=c<o?a:-a}}return j}else {var a=w[0]===0||w[0]===1?0.5:1;var i=quadraticAt(l,m,n,w[0]);if(i<p){return 0}return c<b?a:-a}}}function windingArc(j,p,h,b,a,i,l,e){e-=p;if(e>h||e<-h){return 0}var g=Math.sqrt(h*h-e*e);w[0]=-g;w[1]=g;var m=Math.abs(b-a);if(m<1.0E-4){return 0}if(m%bM<1.0E-4){b=0;a=bM;var f=i?1:-1;if(l>=w[0]+j&&l<=w[1]+j){return f}else {return 0}}if(i){var g=b;b=normalizeRadian(a);a=normalizeRadian(g)}else {b=normalizeRadian(b);a=normalizeRadian(a)}if(b>a){a+=bM}var o=0;for(var k=0;k<2;k++){var n=w[k];if(n+j>l){var c=Math.atan2(e,n);var f=i?1:-1;if(c<0){c=bM+c}if(c>=b&&c<=a||c+bM>=b&&c+bM<=a){if(c>Math.PI/2&&c<Math.PI*1.5){f=-f}o+=f}}}return o}function containPath(b,k,n,h,f){var j=0;var e=0;var c=0;var i=0;var g=0;for(var a=0;a<b.length;){var v=b[a++];if(v===aI.M&&a>1){if(!n){j+=windingLine(e,c,i,g,h,f)}}if(a===1){e=b[a];c=b[a+1];i=e;g=c}switch(v){case aI.M:i=b[a++];g=b[a++];e=i;c=g;break;case aI.L:if(n){if(containStroke$1(e,c,b[a],b[a+1],k,h,f)){return !0}}else {j+=windingLine(e,c,b[a],b[a+1],h,f)||0};e=b[a++];c=b[a++];break;case aI.C:if(n){if(containStroke$2(e,c,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],k,h,f)){return !0}}else {j+=windingCubic(e,c,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],h,f)||0};e=b[a++];c=b[a++];break;case aI.Q:if(n){if(containStroke$3(e,c,b[a++],b[a++],b[a],b[a+1],k,h,f)){return !0}}else {j+=windingQuadratic(e,c,b[a++],b[a++],b[a],b[a+1],h,f)||0};e=b[a++];c=b[a++];break;case aI.A:var p=b[a++];var s=b[a++];var t=b[a++];var q=b[a++];var o=b[a++];var r=b[a++];a+=1;var u=1-b[a++];var l=Math.cos(o)*t+p;var m=Math.sin(o)*q+s;if(a>1){j+=windingLine(e,c,l,m,h,f)}else {i=l;g=m};var w=(h-p)*q/t+p;if(n){if(containStroke$4(p,s,q,o,o+r,u,k,w,f)){return !0}}else {j+=windingArc(p,s,q,o,o+r,u,w,f)};e=Math.cos(o+r)*t+p;c=Math.sin(o+r)*q+s;break;case aI.R:i=e=b[a++];g=c=b[a++];var y=b[a++];var x=b[a++];var l=i+y;var m=g+x;if(n){if(containStroke$1(i,g,l,g,k,h,f)||containStroke$1(l,g,l,m,k,h,f)||containStroke$1(l,m,i,m,k,h,f)||containStroke$1(i,m,i,g,k,h,f)){return !0}}else {j+=windingLine(l,g,l,m,h,f);j+=windingLine(i,m,i,g,h,f)};break;case aI.Z:if(n){if(containStroke$1(e,c,i,g,k,h,f)){return !0}}else {j+=windingLine(e,c,i,g,h,f)};e=i;c=g;break;}}if(!n&&!isAroundEqual(c,g)){j+=windingLine(e,c,i,g,h,f)||0}return j!==0}function contain(a,b,c){return containPath(a,0,!1,b,c)}function containStroke(b,a,c,e){return containPath(b,a,!0,c,e)}var gP=ft.prototype.getCanvasPattern;var fT=Math.abs;var kT=new y(!0);function Path(a){Displayable.call(this,a);this.path=null}Path.prototype={constructor:Path,type:'path',__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(a,s){var b=this.style;var c=this.path||kT;var h=b.hasStroke();var l=b.hasFill();var j=b.fill;var i=b.stroke;var n=l&&!!j.colorStops;var m=h&&!!i.colorStops;var r=l&&!!j.image;var q=h&&!!i.image;b.bind(a,this,s);this.setTransform(a);if(this.__dirty){var f;if(n){f=f||this.getBoundingRect();this._fillGradient=b.getGradient(a,j,f)}if(m){f=f||this.getBoundingRect();this._strokeGradient=b.getGradient(a,i,f)}}if(n){a.fillStyle=this._fillGradient}else {if(r){a.fillStyle=gP.call(j,a)}}if(m){a.strokeStyle=this._strokeGradient}else {if(q){a.strokeStyle=gP.call(i,a)}}var e=b.lineDash;var o=b.lineDashOffset;var g=!!a.setLineDash;var p=this.getGlobalScale();c.setScale(p[0],p[1],this.segmentIgnoreThreshold);if(this.__dirtyPath||e&&!g&&h){c.beginPath(a);if(e&&!g){c.setLineDash(e);c.setLineDashOffset(o)}this.buildPath(c,this.shape,!1);if(this.path){this.__dirtyPath=!1}}else {a.beginPath();this.path.rebuildPath(a)}if(l){if(b.fillOpacity!=null){var k=a.globalAlpha;a.globalAlpha=b.fillOpacity*b.opacity;c.fill(a);a.globalAlpha=k}else {c.fill(a)}}if(e&&g){a.setLineDash(e);a.lineDashOffset=o}if(h){if(b.strokeOpacity!=null){var k=a.globalAlpha;a.globalAlpha=b.strokeOpacity*b.opacity;c.stroke(a);a.globalAlpha=k}else {c.stroke(a)}}if(e&&g){a.setLineDash([])}if(b.text!=null){this.restoreTransform(a);this.drawRectText(a,this.getBoundingRect())}},buildPath:function(c,b,a){},createPathProxy:function(){this.path=new y()},getBoundingRect:function(){var b=this._rect;var g=this.style;var h=!b;if(h){var f=this.path;if(!f){f=this.path=new y()}if(this.__dirtyPath){f.beginPath();this.buildPath(f,this.shape,!1)}b=f.getBoundingRect()}this._rect=b;if(g.hasStroke()){var a=this._rectWithStroke||(this._rectWithStroke=b.clone());if(this.__dirty||h){a.copy(b);var c=g.lineWidth;var e=g.strokeNoScale?this.getLineScale():1;if(!g.hasFill()){c=Math.max(c,this.strokeContainThreshold||4)}if(e>1.0E-10){a.width+=c/e;a.height+=c/e;a.x-=c/e/2;a.y-=c/e/2}}return a}return b},contain:function(b,c){var g=this.transformCoordToLocal(b,c);var i=this.getBoundingRect();var a=this.style;b=g[0];c=g[1];if(i.contain(b,c)){var h=this.path.data;if(a.hasStroke()){var e=a.lineWidth;var f=a.strokeNoScale?this.getLineScale():1;if(f>1.0E-10){if(!a.hasFill()){e=Math.max(e,this.strokeContainThreshold)}if(containStroke(h,e/f,b,c)){return !0}}}if(a.hasFill()){return contain(h,b,c)}}return !1},dirty:function(a){if(a==null){a=!0}if(a){this.__dirtyPath=a;this._rect=null}this.__dirty=this.__dirtyText=!0;this.__zr&&this.__zr.refresh();if(this.__clipTarget){this.__clipTarget.dirty()}},animateShape:function(a){return this.animate('shape',a)},attrKV:function(b,a){if(b==='shape'){this.setShape(a);this.__dirtyPath=!0;this._rect=null}else {Displayable.prototype.attrKV.call(this,b,a)}},setShape:function(a,e){var b=this.shape;if(b){if(isObject$1(a)){for(var c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}}else {b[a]=e}this.dirty(!0)}return this},getLineScale:function(){var a=this.transform;return a&&fT(a[0]-1)>1.0E-10&&fT(a[3]-1)>1.0E-10?Math.sqrt(fT(a[0]*a[3]-a[2]*a[1])):1}};Path.extend=function(a){var c=function(f){Path.call(this,f);if(a.style){this.style.extendFrom(a.style,!1)}var b=a.shape;if(b){this.shape=this.shape||{};var e=this.shape;for(var c in b){if(!e.hasOwnProperty(c)&&b.hasOwnProperty(c)){e[c]=b[c]}}}a.init&&a.init.call(this,f)};inherits(c,Path);for(var b in a){if(b!=='style'&&b!=='shape'){c.prototype[b]=a[b]}}return c};inherits(Path,Displayable);var bL=y.CMD;var ow=[[],[],[]];var h$=Math.sqrt;var nK=Math.atan2;var lV=function(m,e){var a=m.data;var l;var g;var b;var f;var h;var c;var q=bL.M;var o=bL.C;var p=bL.L;var s=bL.R;var n=bL.A;var r=bL.Q;for(b=0,f=0;b<a.length;){l=a[b++];f=b;g=0;switch(l){case q:g=1;break;case p:g=1;break;case o:g=3;break;case r:g=2;break;case n:var t=e[4];var u=e[5];var i=h$(e[0]*e[0]+e[1]*e[1]);var j=h$(e[2]*e[2]+e[3]*e[3]);var k=nK(-e[1]/j,e[0]/i);a[b]*=i;a[b++]+=t;a[b]*=j;a[b++]+=u;a[b++]*=i;a[b++]*=j;a[b++]+=k;a[b++]+=k;b+=2;f=b;break;case s:c[0]=a[b++];c[1]=a[b++];applyTransform(c,c,e);a[f++]=c[0];a[f++]=c[1];c[0]+=a[b++];c[1]+=a[b++];applyTransform(c,c,e);a[f++]=c[0];a[f++]=c[1];}for(h=0;h<g;h++){var c=ow[h];c[0]=a[b++];c[1]=a[b++];applyTransform(c,c,e);a[f++]=c[0];a[f++]=c[1]}}};var fo=Math.sqrt;var dx=Math.sin;var dt=Math.cos;var dQ=Math.PI;var je=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])};var fL=function(a,b){return (a[0]*b[0]+a[1]*b[1])/(je(a)*je(b))};var i1=function(a,b){return (a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(fL(a,b))};function processArc(l,n,m,o,y,j,a,b,s,v,u){var g=s*(dQ/180);var c=dt(g)*(l-m)/2+dx(g)*(n-o)/2;var e=-1*dx(g)*(l-m)/2+dt(g)*(n-o)/2;var k=c*c/(a*a)+e*e/(b*b);if(k>1){a*=fo(k);b*=fo(k)}var r=(y===j?-1:1)*fo((a*a*(b*b)-a*a*(e*e)-b*b*(c*c))/(a*a*(e*e)+b*b*(c*c)))||0;var h=r*a*e/b;var i=r*-b*c/a;var w=(l+m)/2+dt(g)*h-dx(g)*i;var x=(n+o)/2+dx(g)*h+dt(g)*i;var t=i1([1,0],[(c-h)/a,(e-i)/b]);var p=[(c-h)/a,(e-i)/b];var q=[(-1*c-h)/a,(-1*e-i)/b];var f=i1(p,q);if(fL(p,q)<=-1){f=dQ}if(fL(p,q)>=1){f=0}if(j===0&&f>0){f=f-2*dQ}if(j===1&&f<0){f=f+2*dQ}u.addData(v,w,x,a,b,t,f,g,j)}var m4=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;var nN=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(C){if(!C){return new y()}var c=0;var e=0;var w=c;var x=e;var o;var g=new y();var h=y.CMD;var A=C.match(m4);for(var z=0;z<A.length;z++){var B=A[z];var p=B.charAt(0);var f;var a=B.match(nN)||[];var D=a.length;for(var v=0;v<D;v++){a[v]=parseFloat(a[v])}var b=0;while(b<D){var i;var j;var t;var u;var q;var r;var s;var k=c;var l=e;switch(p){case 'l':c+=a[b++];e+=a[b++];f=h.L;g.addData(f,c,e);break;case 'L':c=a[b++];e=a[b++];f=h.L;g.addData(f,c,e);break;case 'm':c+=a[b++];e+=a[b++];f=h.M;g.addData(f,c,e);w=c;x=e;p='l';break;case 'M':c=a[b++];e=a[b++];f=h.M;g.addData(f,c,e);w=c;x=e;p='L';break;case 'h':c+=a[b++];f=h.L;g.addData(f,c,e);break;case 'H':c=a[b++];f=h.L;g.addData(f,c,e);break;case 'v':e+=a[b++];f=h.L;g.addData(f,c,e);break;case 'V':e=a[b++];f=h.L;g.addData(f,c,e);break;case 'C':f=h.C;g.addData(f,a[b++],a[b++],a[b++],a[b++],a[b++],a[b++]);c=a[b-2];e=a[b-1];break;case 'c':f=h.C;g.addData(f,a[b++]+c,a[b++]+e,a[b++]+c,a[b++]+e,a[b++]+c,a[b++]+e);c+=a[b-2];e+=a[b-1];break;case 'S':i=c;j=e;var n=g.len();var m=g.data;if(o===h.C){i+=c-m[n-4];j+=e-m[n-3]};f=h.C;k=a[b++];l=a[b++];c=a[b++];e=a[b++];g.addData(f,i,j,k,l,c,e);break;case 's':i=c;j=e;var n=g.len();var m=g.data;if(o===h.C){i+=c-m[n-4];j+=e-m[n-3]};f=h.C;k=c+a[b++];l=e+a[b++];c+=a[b++];e+=a[b++];g.addData(f,i,j,k,l,c,e);break;case 'Q':k=a[b++];l=a[b++];c=a[b++];e=a[b++];f=h.Q;g.addData(f,k,l,c,e);break;case 'q':k=a[b++]+c;l=a[b++]+e;c+=a[b++];e+=a[b++];f=h.Q;g.addData(f,k,l,c,e);break;case 'T':i=c;j=e;var n=g.len();var m=g.data;if(o===h.Q){i+=c-m[n-4];j+=e-m[n-3]};c=a[b++];e=a[b++];f=h.Q;g.addData(f,i,j,c,e);break;case 't':i=c;j=e;var n=g.len();var m=g.data;if(o===h.Q){i+=c-m[n-4];j+=e-m[n-3]};c+=a[b++];e+=a[b++];f=h.Q;g.addData(f,i,j,c,e);break;case 'A':t=a[b++];u=a[b++];q=a[b++];r=a[b++];s=a[b++];k=c,l=e;c=a[b++];e=a[b++];f=h.A;processArc(k,l,c,e,r,s,t,u,q,f,g);break;case 'a':t=a[b++];u=a[b++];q=a[b++];r=a[b++];s=a[b++];k=c,l=e;c+=a[b++];e+=a[b++];f=h.A;processArc(k,l,c,e,r,s,t,u,q,f,g);break;}}if(p==='z'||p==='Z'){f=h.Z;g.addData(f);c=w;e=x}o=f}g.toStatic();return g}function createPathOptions(c,a){var b=createPathProxyFromString(c);a=a||{};a.buildPath=function(e){if(e.setData){e.setData(b.data);var f=e.getContext();if(f){e.rebuildPath(f)}}else {var f=e;b.rebuildPath(f)}};a.applyTransform=function(e){lV(b,e);this.dirty(!0)};return a}function createFromString(b,a){return new Path(createPathOptions(b,a))}function extendFromString(b,a){return Path.extend(createPathOptions(b,a))}function mergePath$1(f,g){var e=[];var h=f.length;for(var c=0;c<h;c++){var a=f[c];if(!a.path){a.createPathProxy()}if(a.__dirtyPath){a.buildPath(a.path,a.shape,!0)}e.push(a.path)}var b=new Path(g);b.createPathProxy();b.buildPath=function(a){a.appendPath(e);var b=a.getContext();if(b){a.rebuildPath(b)}};return b}var e=function(a){Displayable.call(this,a)};e.prototype={constructor:e,type:'text',brush:function(c,e){var a=this.style;this.__dirty&&normalizeTextStyle(a,!0);a.fill=a.stroke=a.shadowBlur=a.shadowColor=a.shadowOffsetX=a.shadowOffsetY=null;var b=a.text;b!=null&&(b+='');if(!needDrawText(b,a)){c.__attrCachedBy=as.NONE;return}this.setTransform(c);renderText(this,c,b,a,null,e);this.restoreTransform(c)},getBoundingRect:function(){var a=this.style;this.__dirty&&normalizeTextStyle(a,!0);if(!this._rect){var e=a.text;e!=null?e+='':e='';var b=getBoundingRect(a.text+'',a.font,a.textAlign,a.textVerticalAlign,a.textPadding,a.textLineHeight,a.rich);b.x+=a.x||0;b.y+=a.y||0;if(getStroke(a.textStroke,a.textStrokeWidth)){var c=a.textStrokeWidth;b.x-=c/2;b.y-=c/2;b.width+=c;b.height+=c}this._rect=b}return this._rect}};inherits(e,Displayable);var ao=Path.extend({type:'circle',shape:{cx:0,cy:0,r:0},buildPath:function(b,a,c){if(c){b.moveTo(a.cx+a.r,a.cy)}b.arc(a.cx,a.cy,a.r,0,Math.PI*2,!0)}});var aC=[['shadowBlur',0],['shadowColor','#000'],['shadowOffsetX',0],['shadowOffsetY',0]];var ea=function(a){return f.browser.ie&&f.browser.version>=11?function(){var f=this.__clipPaths;var g=this.style;var i;if(f){for(var h=0;h<f.length;h++){var e=f[h];var c=e&&e.shape;var j=e&&e.type;if(c&&(j==='sector'&&c.startAngle===c.endAngle||j==='rect'&&(!c.width||!c.height))){for(var b=0;b<aC.length;b++){aC[b][2]=g[aC[b][0]];g[aC[b][0]]=aC[b][1]}i=!0;break}}}a.apply(this,arguments);if(i){for(var b=0;b<aC.length;b++){g[aC[b][0]]=aC[b][2]}}}:a};var aa=Path.extend({type:'sector',shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},brush:ea(Path.prototype.brush),buildPath:function(b,a){var e=a.cx;var f=a.cy;var c=Math.max(a.r0||0,0);var i=Math.max(a.r,0);var g=a.startAngle;var h=a.endAngle;var j=a.clockwise;var k=Math.cos(g);var l=Math.sin(g);b.moveTo(k*c+e,l*c+f);b.lineTo(k*i+e,l*i+f);b.arc(e,f,i,g,h,!j);b.lineTo(Math.cos(h)*c+e,Math.sin(h)*c+f);if(c!==0){b.arc(e,f,c,h,g,j)}b.closePath()}});var dN=Path.extend({type:'ring',shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(b,a){var c=a.cx;var e=a.cy;var f=Math.PI*2;b.moveTo(c+a.r,e);b.arc(c,e,a.r,0,f,!1);b.moveTo(c+a.r0,e);b.arc(c,e,a.r0,0,f,!0)}});function interpolate(f,a,b,g,j,h,i){var c=(b-f)*0.5;var e=(g-a)*0.5;return (2*(a-b)+c+e)*i+(-3*(a-b)-2*c-e)*h+c*j+a}var mv=function(c,m){var a=c.length;var o=[];var l=0;for(var e=1;e<a;e++){l+=distance(c[e-1],c[e])}var f=l/2;f=f<a?a:f;for(var e=0;e<f;e++){var n=e/(f-1)*(m?a:a-1);var b=Math.floor(n);var g=n-b;var h;var p=c[b%a];var i;var j;if(!m){h=c[b===0?b:b-1];i=c[b>a-2?a-1:b+1];j=c[b>a-3?a-1:b+2]}else {h=c[(b-1+a)%a];i=c[(b+1)%a];j=c[(b+2)%a]}var k=g*g;var q=g*k;o.push([interpolate(h[0],p[0],i[0],j[0],g,k,q),interpolate(h[1],p[1],i[1],j[1],g,k,q)])}return o};var mu=function(b,u,r,k){var g=[];var j=[];var s=[];var t=[];var m;var l;var e;var c;if(k){e=[Infinity,Infinity];c=[-Infinity,-Infinity];for(var a=0,f=b.length;a<f;a++){min(e,e,b[a]);max(c,c,b[a])}min(e,e,k[0]);max(c,c,k[1])}for(var a=0,f=b.length;a<f;a++){var n=b[a];if(r){m=b[a?a-1:f-1];l=b[(a+1)%f]}else {if(a===0||a===f-1){g.push(clone$1(b[a]));continue}else {m=b[a-1];l=b[a+1]}}sub(j,l,m);scale(j,j,u);var p=distance(n,m);var q=distance(n,l);var o=p+q;if(o!==0){p/=o;q/=o}scale(s,j,-p);scale(t,j,q);var h=add([],n,s);var i=add([],n,t);if(k){max(h,h,e);min(h,h,c);max(i,i,e);min(i,i,c)}g.push(h);g.push(i)}if(r){g.push(g.shift())}return g};function buildPath$1(c,g,e){var a=g.points;var f=g.smooth;if(a&&a.length>=2){if(f&&f!=='spline'){var i=mu(a,f,e,g.smoothConstraint);c.moveTo(a[0][0],a[0][1]);var h=a.length;for(var b=0;b<(e?h:h-1);b++){var j=i[b*2];var k=i[b*2+1];var l=a[(b+1)%h];c.bezierCurveTo(j[0],j[1],k[0],k[1],l[0],l[1])}}else {if(f==='spline'){a=mv(a,e)}c.moveTo(a[0][0],a[0][1]);for(var b=1,m=a.length;b<m;b++){c.lineTo(a[b][0],a[b][1])}}e&&c.closePath()}}var I=Path.extend({type:'polygon',shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(b,a){buildPath$1(b,a,!0)}});var L=Path.extend({type:'polyline',shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:'#000',fill:null},buildPath:function(b,a){buildPath$1(b,a,!1)}});var bN=Math.round;function subPixelOptimizeLine$1(a,b,g){var c=g&&g.lineWidth;if(!b||!c){return}var e=b.x1;var h=b.x2;var f=b.y1;var i=b.y2;if(bN(e*2)===bN(h*2)){a.x1=a.x2=subPixelOptimize$1(e,c,!0)}else {a.x1=e;a.x2=h}if(bN(f*2)===bN(i*2)){a.y1=a.y2=subPixelOptimize$1(f,c,!0)}else {a.y1=f;a.y2=i}}function subPixelOptimizeRect$1(a,b,i){var c=i&&i.lineWidth;if(!b||!c){return}var g=b.x;var h=b.y;var f=b.width;var e=b.height;a.x=subPixelOptimize$1(g,c,!0);a.y=subPixelOptimize$1(h,c,!0);a.width=Math.max(subPixelOptimize$1(g+f,c,!1)-a.x,f===0?0:1);a.height=Math.max(subPixelOptimize$1(h+e,c,!1)-a.y,e===0?0:1)}function subPixelOptimize$1(e,c,b){var a=bN(e*2);return (a+bN(c))%2===0?a/2:(a+(b?1:-1))/2}var aO={};var h=Path.extend({type:'rect',shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,a){var f;var g;var c;var b;if(this.subPixelOptimize){subPixelOptimizeRect$1(aO,a,this.style);f=aO.x;g=aO.y;c=aO.width;b=aO.height;aO.r=a.r;a=aO}else {f=a.x;g=a.y;c=a.width;b=a.height}if(!a.r){e.rect(f,g,c,b)}else {buildPath(e,a)}e.closePath();return}});var bR={};var B=Path.extend({type:'line',shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:'#000',fill:null},buildPath:function(h,b){var f;var g;var c;var e;if(this.subPixelOptimize){subPixelOptimizeLine$1(bR,b,this.style);f=bR.x1;g=bR.y1;c=bR.x2;e=bR.y2}else {f=b.x1;g=b.y1;c=b.x2;e=b.y2}var a=b.percent;if(a===0){return}h.moveTo(f,g);if(a<1){c=f*(1-a)+c*a;e=g*(1-a)+e*a}h.lineTo(c,e)},pointAt:function(b){var a=this.shape;return [a.x1*(1-b)+a.x2*b,a.y1*(1-b)+a.y2*b]}});var C=[];function someVectorAt(a,c,b){var e=a.cpx2;var f=a.cpy2;if(e===null||f===null){return [(b?cubicDerivativeAt:cubicAt)(a.x1,a.cpx1,a.cpx2,a.x2,c),(b?cubicDerivativeAt:cubicAt)(a.y1,a.cpy1,a.cpy2,a.y2,c)]}else {return [(b?quadraticDerivativeAt:quadraticAt)(a.x1,a.cpx1,a.x2,c),(b?quadraticDerivativeAt:quadraticAt)(a.y1,a.cpy1,a.y2,c)]}}var cZ=Path.extend({type:'bezier-curve',shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:'#000',fill:null},buildPath:function(j,a){var k=a.x1;var l=a.y1;var f=a.x2;var g=a.y2;var c=a.cpx1;var e=a.cpy1;var h=a.cpx2;var i=a.cpy2;var b=a.percent;if(b===0){return}j.moveTo(k,l);if(h==null||i==null){if(b<1){quadraticSubdivide(k,c,f,b,C);c=C[1];f=C[2];quadraticSubdivide(l,e,g,b,C);e=C[1];g=C[2]}j.quadraticCurveTo(c,e,f,g)}else {if(b<1){cubicSubdivide(k,c,h,f,b,C);c=C[1];h=C[2];f=C[3];cubicSubdivide(l,e,i,g,b,C);e=C[1];i=C[2];g=C[3]}j.bezierCurveTo(c,e,h,i,f,g)}},pointAt:function(a){return someVectorAt(this.shape,a,!1)},tangentAt:function(b){var a=someVectorAt(this.shape,b,!0);return normalize(a,a)}});var fR=Path.extend({type:'arc',shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},style:{stroke:'#000',fill:null},buildPath:function(e,a){var f=a.cx;var g=a.cy;var c=Math.max(a.r,0);var b=a.startAngle;var i=a.endAngle;var h=a.clockwise;var j=Math.cos(b);var k=Math.sin(b);e.moveTo(j*c+f,k*c+g);e.arc(f,g,c,b,i,!h)}});var hy=Path.extend({type:'compound',shape:{paths:null},_updatePathDirty:function(){var a=this.__dirtyPath;var c=this.shape.paths;for(var b=0;b<c.length;b++){a=a||c[b].__dirtyPath}this.__dirtyPath=a;this.__dirty=this.__dirty||a},beforeBrush:function(){this._updatePathDirty();var b=this.shape.paths||[];var c=this.getGlobalScale();for(var a=0;a<b.length;a++){if(!b[a].path){b[a].createPathProxy()}b[a].path.setScale(c[0],c[1],b[a].segmentIgnoreThreshold)}},buildPath:function(e,c){var b=c.paths||[];for(var a=0;a<b.length;a++){b[a].buildPath(e,b[a].shape,!0)}},afterBrush:function(){var b=this.shape.paths||[];for(var a=0;a<b.length;a++){b[a].__dirtyPath=!1}},getBoundingRect:function(){this._updatePathDirty();return Path.prototype.getBoundingRect.call(this)}});var X=function(a){this.colorStops=a||[]};X.prototype={constructor:X,addColorStop:function(a,b){this.colorStops.push({offset:a,color:b})}};var aV=function(c,e,a,b,g,f){this.x=c==null?0:c;this.y=e==null?0:e;this.x2=a==null?1:a;this.y2=b==null?0:b;this.type='linear';this.global=f||!1;X.call(this,g)};aV.prototype={constructor:aV};inherits(aV,X);var cL=function(b,c,a,f,e){this.x=b==null?0.5:b;this.y=c==null?0.5:c;this.r=a==null?0.5:a;this.type='radial';this.global=e||!1;X.call(this,f)};cL.prototype={constructor:cL};inherits(cL,X);function IncrementalDisplayble(a){Displayable.call(this,a);this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.notClear=!0}IncrementalDisplayble.prototype.incremental=!0;IncrementalDisplayble.prototype.clearDisplaybles=function(){this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.dirty();this.notClear=!1};IncrementalDisplayble.prototype.addDisplayable=function(a,b){if(b){this._temporaryDisplayables.push(a)}else {this._displayables.push(a)}this.dirty()};IncrementalDisplayble.prototype.addDisplayables=function(c,a){a=a||!1;for(var b=0;b<c.length;b++){this.addDisplayable(c[b],a)}};IncrementalDisplayble.prototype.eachPendingDisplayable=function(b){for(var a=this._cursor;a<this._displayables.length;a++){b&&b(this._displayables[a])}for(var a=0;a<this._temporaryDisplayables.length;a++){b&&b(this._temporaryDisplayables[a])}};IncrementalDisplayble.prototype.update=function(){this.updateTransform();for(var b=this._cursor;b<this._displayables.length;b++){var a=this._displayables[b];a.parent=this;a.update();a.parent=null}for(var b=0;b<this._temporaryDisplayables.length;b++){var a=this._temporaryDisplayables[b];a.parent=this;a.update();a.parent=null}};IncrementalDisplayble.prototype.brush=function(c,e){for(var a=this._cursor;a<this._displayables.length;a++){var b=this._displayables[a];b.beforeBrush&&b.beforeBrush(c);b.brush(c,a===this._cursor?null:this._displayables[a-1]);b.afterBrush&&b.afterBrush(c)}this._cursor=a;for(var a=0;a<this._temporaryDisplayables.length;a++){var b=this._temporaryDisplayables[a];b.beforeBrush&&b.beforeBrush(c);b.brush(c,a===0?null:this._temporaryDisplayables[a-1]);b.afterBrush&&b.afterBrush(c)}this._temporaryDisplayables=[];this.notClear=!0};var oO=[];IncrementalDisplayble.prototype.getBoundingRect=function(){if(!this._rect){var e=new BoundingRect(Infinity,Infinity,-Infinity,-Infinity);for(var b=0;b<this._displayables.length;b++){var a=this._displayables[b];var c=a.getBoundingRect().clone();if(a.needLocalTransform()){c.applyTransform(a.getLocalTransform(oO))}e.union(c)}this._rect=e}return this._rect};IncrementalDisplayble.prototype.contain=function(c,e){var b=this.transformCoordToLocal(c,e);var g=this.getBoundingRect();if(g.contain(b[0],b[1])){for(var a=0;a<this._displayables.length;a++){var f=this._displayables[a];if(f.contain(c,e)){return !0}}}return !1};inherits(IncrementalDisplayble,Displayable);var di=Math.max;var dj=Math.min;var c9={};var bV=1;var f1={color:'textFill',textBorderColor:'textStroke',textBorderWidth:'textStrokeWidth'};var ik='emphasis';var iX='normal';var gt=1;var gM={};var ep={};function extendShape(a){return Path.extend(a)}function extendPath(a,b){return extendFromString(a,b)}function registerShape(b,a){ep[b]=a}function getShapeClass(a){if(ep.hasOwnProperty(a)){return ep[a]}}function makePath(c,f,a,e){var b=createFromString(c,f);if(a){if(e==='center'){a=centerGraphic(a,b.getBoundingRect())}resizePath(b,a)}return b}function makeImage(c,a,e){var b=new ZImage({style:{image:c,x:a.x,y:a.y,width:a.width,height:a.height},onload:function(f){if(e==='center'){var g={width:f.width,height:f.height};b.setStyle(centerGraphic(a,g))}}});return b}function centerGraphic(a,e){var f=e.width/e.height;var b=a.height*f;var c;if(b<=a.width){c=a.height}else {b=a.width;c=b/f}var g=a.x+a.width/2;var h=a.y+a.height/2;return {x:g-b/2,y:h-c/2,width:b,height:c}}var ak=mergePath$1;function resizePath(a,c){if(!a.applyTransform){return}var b=a.getBoundingRect();var e=b.calculateTransform(c);a.applyTransform(e)}function subPixelOptimizeLine(a){subPixelOptimizeLine$1(a.shape,a.shape,a.style);return a}function subPixelOptimizeRect(a){subPixelOptimizeRect$1(a.shape,a.shape,a.style);return a}var cG=subPixelOptimize$1;function hasFillOrStroke(a){return a!=null&&a!=='none'}var he=createHashMap();var gQ=0;function liftColor(a){if(typeof a!=='string'){return a}var b=he.get(a);if(!b){b=lift(a,-0.1);if(gQ<10000){he.set(a,b);gQ++}}return b}function cacheElementStl(a){if(!a.__hoverStlDirty){return}a.__hoverStlDirty=!1;var c=a.__hoverStl;if(!c){a.__cachedNormalStl=a.__cachedNormalZ2=null;return}var b=a.__cachedNormalStl={};a.__cachedNormalZ2=a.z2;var e=a.style;for(var f in c){if(c[f]!=null){b[f]=e[f]}}b.fill=e.fill;b.stroke=e.stroke}function singleEnterEmphasis(a){var e=a.__hoverStl;if(!e||a.__highlighted){return}var f=a.__zr;var c=a.useHoverLayer&&f&&f.painter.type==='canvas';a.__highlighted=c?'layer':'plain';if(a.isGroup||!f&&a.useHoverLayer){return}var g=a;var b=a.style;if(c){g=f.addHover(a);b=g.style}rollbackDefaultTextStyle(b);if(!c){cacheElementStl(g)}b.extendFrom(e);setDefaultHoverFillStroke(b,e,'fill');setDefaultHoverFillStroke(b,e,'stroke');applyDefaultTextStyle(b);if(!c){a.dirty(!1);a.z2+=bV}}function setDefaultHoverFillStroke(b,c,a){if(!hasFillOrStroke(c[a])&&hasFillOrStroke(b[a])){b[a]=liftColor(b[a])}}function singleEnterNormal(a){var c=a.__highlighted;if(!c){return}a.__highlighted=!1;if(a.isGroup){return}if(c==='layer'){a.__zr&&a.__zr.removeHover(a)}else {var f=a.style;var e=a.__cachedNormalStl;if(e){rollbackDefaultTextStyle(f);a.setStyle(e);applyDefaultTextStyle(f)}var b=a.__cachedNormalZ2;if(b!=null&&a.z2-b===bV){a.z2=b}}}function traverseUpdate(a,g,c){var e=iX;var f=iX;var b;a.__highlighted&&(e=ik,b=!0);g(a,c);a.__highlighted&&(f=ik,b=!0);a.isGroup&&a.traverse(function(b){!b.isGroup&&g(b,c)});b&&a.__highDownOnUpdate&&a.__highDownOnUpdate(e,f)}function setElementHoverStyle(a,b){b=a.__hoverStl=b!==!1&&(a.hoverStyle||b||{});a.__hoverStlDirty=!0;if(a.__highlighted){a.__cachedNormalStl=null;singleEnterNormal(a);singleEnterEmphasis(a)}}function onElementMouseOver(a){!shouldSilent(this,a)&&!this.__highByOuter&&traverseUpdate(this,singleEnterEmphasis)}function onElementMouseOut(a){!shouldSilent(this,a)&&!this.__highByOuter&&traverseUpdate(this,singleEnterNormal)}function onElementEmphasisEvent(a){this.__highByOuter|=1<<(a||0);traverseUpdate(this,singleEnterEmphasis)}function onElementNormalEvent(a){!(this.__highByOuter&=~(1<<(a||0)))&&traverseUpdate(this,singleEnterNormal)}function shouldSilent(a,b){return a.__highDownSilentOnTouch&&b.zrByTouch}function setHoverStyle(a,b){setAsHighDownDispatcher(a,!0);traverseUpdate(a,setElementHoverStyle,b)}function setAsHighDownDispatcher(a,e){var c=e===!1;a.__highDownSilentOnTouch=a.highDownSilentOnTouch;a.__highDownOnUpdate=a.highDownOnUpdate;if(!c||a.__highDownDispatcher){var b=c?'off':'on';a[b]('mouseover',onElementMouseOver)[b]('mouseout',onElementMouseOut);a[b]('emphasis',onElementEmphasisEvent)[b]('normal',onElementNormalEvent);a.__highByOuter=a.__highByOuter||0;a.__highDownDispatcher=!c}}function isHighDownDispatcher(a){return !!(a&&a.__highDownDispatcher)}function getHighlightDigit(b){var a=gM[b];if(a==null&&gt<=32){a=gM[b]=gt++}return a}function setLabelStyle(m,i,l,h,a,p,o){a=a||c9;var c=a.labelFetcher;var e=a.labelDataIndex;var j=a.labelDimIndex;var n=l.getShallow('show');var k=h.getShallow('show');var b;if(n||k){if(c){b=c.getFormattedLabel(e,'normal',null,j)}if(b==null){b=isFunction$1(a.defaultText)?a.defaultText(e,a):a.defaultText}}var g=n?b:null;var f=k?retrieve2(c?c.getFormattedLabel(e,'emphasis',null,j):null,b):null;if(g!=null||f!=null){setTextStyle(m,l,p,a);setTextStyle(i,h,o,a,!0)}m.text=g;i.text=f}function modifyLabelStyle(b,e,c){var a=b.style;if(e){rollbackDefaultTextStyle(a);b.setStyle(e);applyDefaultTextStyle(a)}a=b.__hoverStl;if(c&&a){rollbackDefaultTextStyle(a);extend(a,c);applyDefaultTextStyle(a)}}function setTextStyle(a,c,b,f,e){setTextStyleCommon(a,c,f,e);b&&extend(a,b);return a}function setText(f,e,a){var c={isRectText:!0};var b;if(a===!1){b=!0}else {c.autoColor=a}setTextStyleCommon(f,e,c,b)}function setTextStyleCommon(c,b,a,f){a=a||c9;if(a.isRectText){var e;if(a.getTextPosition){e=a.getTextPosition(b,f)}else {e=b.getShallow('position')||(f?null:'inside');e==='outside'&&(e='top')}c.textPosition=e;c.textOffset=b.getShallow('offset');var h=b.getShallow('rotate');h!=null&&(h*=Math.PI/180);c.textRotation=h;c.textDistance=retrieve2(b.getShallow('distance'),f?null:5)}var l=b.ecModel;var k=l&&l.option.textStyle;var g=getRichItemNames(b);var i;if(g){i={};for(var j in g){if(g.hasOwnProperty(j)){var m=b.getModel(['rich',j]);setTokenTextStyle(i[j]={},m,k,a,f)}}}c.rich=i;setTokenTextStyle(c,b,k,a,f,!0);if(a.forceRich&&!a.textStyle){a.textStyle={}}return c}function getRichItemNames(a){var b;while(a&&a!==a.ecModel){var c=(a.option||c9).rich;if(c){b=b||{};for(var e in c){if(c.hasOwnProperty(e)){b[e]=1}}}a=a.parentModel}return b}function setTokenTextStyle(a,b,c,e,f,g){c=!f&&c||c9;a.textFill=getAutoColor(b.getShallow('color'),e)||c.color;a.textStroke=getAutoColor(b.getShallow('textBorderColor'),e)||c.textBorderColor;a.textStrokeWidth=retrieve2(b.getShallow('textBorderWidth'),c.textBorderWidth);if(!f){if(g){a.insideRollbackOpt=e;applyDefaultTextStyle(a)}if(a.textFill==null){a.textFill=e.autoColor}}a.fontStyle=b.getShallow('fontStyle')||c.fontStyle;a.fontWeight=b.getShallow('fontWeight')||c.fontWeight;a.fontSize=b.getShallow('fontSize')||c.fontSize;a.fontFamily=b.getShallow('fontFamily')||c.fontFamily;a.textAlign=b.getShallow('align');a.textVerticalAlign=b.getShallow('verticalAlign')||b.getShallow('baseline');a.textLineHeight=b.getShallow('lineHeight');a.textWidth=b.getShallow('width');a.textHeight=b.getShallow('height');a.textTag=b.getShallow('tag');if(!g||!e.disableBox){a.textBackgroundColor=getAutoColor(b.getShallow('backgroundColor'),e);a.textPadding=b.getShallow('padding');a.textBorderColor=getAutoColor(b.getShallow('borderColor'),e);a.textBorderWidth=b.getShallow('borderWidth');a.textBorderRadius=b.getShallow('borderRadius');a.textBoxShadowColor=b.getShallow('shadowColor');a.textBoxShadowBlur=b.getShallow('shadowBlur');a.textBoxShadowOffsetX=b.getShallow('shadowOffsetX');a.textBoxShadowOffsetY=b.getShallow('shadowOffsetY')}a.textShadowColor=b.getShallow('textShadowColor')||c.textShadowColor;a.textShadowBlur=b.getShallow('textShadowBlur')||c.textShadowBlur;a.textShadowOffsetX=b.getShallow('textShadowOffsetX')||c.textShadowOffsetX;a.textShadowOffsetY=b.getShallow('textShadowOffsetY')||c.textShadowOffsetY}function getAutoColor(b,a){return b!=='auto'?b:a&&a.autoColor?a.autoColor:null}function applyDefaultTextStyle(a){var e=a.textPosition;var b=a.insideRollbackOpt;var h;if(b&&a.textFill==null){var f=b.autoColor;var j=b.isRectText;var i=b.useInsideStyle;var c=i!==!1&&(i===!0||j&&e&&typeof e==='string'&&e.indexOf('inside')>=0);var g=!c&&f!=null;if(c||g){h={textFill:a.textFill,textStroke:a.textStroke,textStrokeWidth:a.textStrokeWidth}}if(c){a.textFill='#fff';if(a.textStroke==null){a.textStroke=f;a.textStrokeWidth==null&&(a.textStrokeWidth=2)}}if(g){a.textFill=f}}a.insideRollback=h}function rollbackDefaultTextStyle(a){var b=a.insideRollback;if(b){a.textFill=b.textFill;a.textStroke=b.textStroke;a.textStrokeWidth=b.textStrokeWidth;a.insideRollback=null}}function getFont(b,c){var a=c||c.getModel('textStyle');return trim([b.fontStyle||a&&a.getShallow('fontStyle')||'',b.fontWeight||a&&a.getShallow('fontWeight')||'',(b.fontSize||a&&a.getShallow('fontSize')||12)+'px',b.fontFamily||a&&a.getShallow('fontFamily')||'sans-serif'].join(' '))}function animateOrSetProps(l,e,i,a,c,b){if(typeof c==='function'){b=c;c=null}var j=a&&a.isAnimationEnabled();if(j){var h=l?'Update':'';var f=a.getShallow('animationDuration'+h);var k=a.getShallow('animationEasing'+h);var g=a.getShallow('animationDelay'+h);if(typeof g==='function'){g=g(c,a.getAnimationDelayParams?a.getAnimationDelayParams(e,c):null)}if(typeof f==='function'){f=f(c)}f>0?e.animateTo(i,f,g||0,k,b,!!b):(e.stopAnimation(),e.attr(i),b&&b())}else {e.stopAnimation();e.attr(i);b&&b()}}function updateProps(f,c,a,b,e){animateOrSetProps(!0,f,c,a,b,e)}function initProps(f,c,a,b,e){animateOrSetProps(!1,f,c,a,b,e)}function getTransform(a,c){var b=identity([]);while(a&&a!==c){mul$1(b,a.getLocalTransform(),b);a=a.parent}return b}function applyTransform$1(c,a,b){if(a&&!isArrayLike(a)){a=V.getLocalTransform(a)}if(b){a=invert([],a)}return applyTransform([],c,a)}function transformDirection(c,a,g){var e=a[4]===0||a[5]===0||a[0]===0?1:Math.abs(2*a[4]/a[0]);var f=a[4]===0||a[5]===0||a[2]===0?1:Math.abs(2*a[4]/a[2]);var b=[c==='left'?-e:c==='right'?e:0,c==='top'?-f:c==='bottom'?f:0];b=applyTransform$1(b,a,g);return Math.abs(b[0])>Math.abs(b[1])?b[0]>0?'right':'left':b[1]>0?'bottom':'top'}function groupTransition(a,b,c,f){if(!a||!b){return}function getElMap(g){var e={};g.traverse(function(h){if(!h.isGroup&&h.anid){e[h.anid]=h}});return e}function getAnimatableProps(e){var g={position:clone$1(e.position),rotation:e.rotation};if(e.shape){g.shape=extend({},e.shape)}return g}var e=getElMap(a);b.traverse(function(g){if(!g.isGroup&&g.anid){var h=e[g.anid];if(h){var i=getAnimatableProps(g);g.attr(getAnimatableProps(h));updateProps(g,i,c,g.dataIndex)}}})}function clipPointsByRect(b,a){return map(b,function(f){var c=f[0];c=di(c,a.x);c=dj(c,a.x+a.width);var e=f[1];e=di(e,a.y);e=dj(e,a.y+a.height);return [c,e]})}function clipRectByRect(a,b){var c=di(a.x,b.x);var f=dj(a.x+a.width,b.x+b.width);var e=di(a.y,b.y);var g=dj(a.y+a.height,b.y+b.height);if(f>=c&&g>=e){return {x:c,y:e,width:f-c,height:g-e}}}function createIcon(b,a,c){a=extend({rectHover:!0},a);var e=a.style={strokeNoScale:!0};c=c||{x:-1,y:-1,width:2,height:2};if(b){return b.indexOf('image://')===0?(e.image=b.slice(8),defaults(e,c),new ZImage(a)):makePath(b.replace('path://',''),a,c,'center')}}function linePolygonIntersect(f,g,h,i,a){for(var c=0,b=a[a.length-1];c<a.length;c++){var e=a[c];if(lineLineIntersect(f,g,h,i,e[0],e[1],b[0],b[1])){return !0}b=e}}function lineLineIntersect(e,f,o,p,g,h,q,r){var i=o-e;var j=p-f;var k=q-g;var l=r-h;var a=crossProduct2d(k,l,i,j);if(nearZero(a)){return !1}var b=e-g;var c=f-h;var n=crossProduct2d(b,c,i,j)/a;if(n<0||n>1){return !1}var m=crossProduct2d(b,c,k,l)/a;if(m<0||m>1){return !1}return !0}function crossProduct2d(a,c,b,e){return a*e-b*c}function nearZero(a){return a<=1.0E-6&&a>=-1.0E-6}registerShape('circle',ao);registerShape('sector',aa);registerShape('ring',dN);registerShape('polygon',I);registerShape('polyline',L);registerShape('rect',h);registerShape('line',B);registerShape('bezierCurve',cZ);registerShape('arc',fR);var an=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:bV,CACHED_LABEL_STYLE_PROPERTIES:f1,extendShape:extendShape,extendPath:extendPath,registerShape:registerShape,getShapeClass:getShapeClass,makePath:makePath,makeImage:makeImage,mergePath:ak,resizePath:resizePath,subPixelOptimizeLine:subPixelOptimizeLine,subPixelOptimizeRect:subPixelOptimizeRect,subPixelOptimize:cG,setElementHoverStyle:setElementHoverStyle,setHoverStyle:setHoverStyle,setAsHighDownDispatcher:setAsHighDownDispatcher,isHighDownDispatcher:isHighDownDispatcher,getHighlightDigit:getHighlightDigit,setLabelStyle:setLabelStyle,modifyLabelStyle:modifyLabelStyle,setTextStyle:setTextStyle,setText:setText,getFont:getFont,updateProps:updateProps,initProps:initProps,getTransform:getTransform,applyTransform:applyTransform$1,transformDirection:transformDirection,groupTransition:groupTransition,clipPointsByRect:clipPointsByRect,clipRectByRect:clipRectByRect,createIcon:createIcon,linePolygonIntersect:linePolygonIntersect,lineLineIntersect:lineLineIntersect,Group:b,Image:ZImage,Text:e,Circle:ao,Sector:aa,Ring:dN,Polygon:I,Polyline:L,Rect:h,Line:B,BezierCurve:cZ,Arc:fR,IncrementalDisplayable:IncrementalDisplayble,CompoundPath:hy,LinearGradient:aV,RadialGradient:cL,BoundingRect:BoundingRect});var m1=['textStyle','color'];var lD={getTextColor:function(b){var a=this.ecModel;return this.getShallow('color')||(!b&&a?a.get(m1):null)},getFont:function(){return getFont({fontStyle:this.getShallow('fontStyle'),fontWeight:this.getShallow('fontWeight'),fontSize:this.getShallow('fontSize'),fontFamily:this.getShallow('fontFamily')},this.ecModel)},getTextRect:function(a){return getBoundingRect(a,this.getFont(),this.getShallow('align'),this.getShallow('verticalAlign')||this.getShallow('baseline'),this.getShallow('padding'),this.getShallow('lineHeight'),this.getShallow('rich'),this.getShallow('truncateText'))}};var md=bo([['fill','color'],['stroke','borderColor'],['lineWidth','borderWidth'],['opacity'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor'],['textPosition'],['textAlign']]);var lv={getItemStyle:function(c,e){var b=md(this,c,e);var a=this.getBorderLineDash();a&&(b.lineDash=a);return b},getBorderLineDash:function(){var a=this.get('borderType');return a==='solid'||a==null?null:a==='dashed'?[5,5]:[1,1]}};var dy=mixin;var i5=makeInner();function Model(c,a,b){this.parentModel=a;this.ecModel=b;this.option=c}Model.prototype={constructor:Model,init:null,mergeOption:function(a){merge(this.option,a,!0)},get:function(a,b){if(a==null){return this.option}return doGet(this.option,this.parsePath(a),!b&&getParent(this,a))},getShallow:function(b,f){var a=this.option;var c=a==null?a:a[b];var e=!f&&getParent(this,b);if(c==null&&e){c=e.getShallow(b)}return c},getModel:function(a,b){var e=a==null?this.option:doGet(this.option,a=this.parsePath(a));var c;b=b||(c=getParent(this,a))&&c.getModel(a);return new Model(e,b,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var a=this.constructor;return new a(clone(this.option))},setReadOnly:function(a){},parsePath:function(a){if(typeof a==='string'){a=a.split('.')}return a},customizeGetParent:function(a){i5(this).getParent=a},isAnimationEnabled:function(){if(!f.node){if(this.option.animation!=null){return !!this.option.animation}else {if(this.parentModel){return this.parentModel.isAnimationEnabled()}}}}};function doGet(a,b,e){for(var c=0;c<b.length;c++){if(!b[c]){continue}a=a&&typeof a==='object'?a[b[c]]:null;if(a==null){break}}if(a==null&&e){a=e.get(b)}return a}function getParent(a,c){var b=i5(a).getParent;return b?b.call(a,c):a.parentModel}enableClassExtend(Model);enableClassCheck(Model);dy(Model,lw);dy(Model,lo);dy(Model,lD);dy(Model,lv);var oK=0;function getUID(a){return [a||'',oK++,Math.random().toFixed(5)].join('_')}function enableSubTypeDefaulter(a){var b={};a.registerSubTypeDefaulter=function(c,e){c=parseClassType$1(c);b[c.main]=e};a.determineSubType=function(f,g){var c=g.type;if(!c){var e=parseClassType$1(f).main;if(a.hasSubTypes(f)&&b[e]){c=b[e](g)}}return c};return a}function enableTopologicalTravel(b,a){b.topologicalTravel=function(i,l,m,n){if(!i.length){return}var k=makeDepndencyGraph(l);var f=k.graph;var g=k.noEntryList;var c={};each$1(i,function(e){c[e]=!0});while(g.length){var e=g.pop();var j=f[e];var h=!!c[e];if(h){m.call(n,e,j.originalDeps.slice());delete c[e]}each$1(j.successor,h?removeEdgeAndAdd:removeEdge)}each$1(c,function(){throw new Error('Circle dependency may exists')});function removeEdge(c){f[c].entryCount--;if(f[c].entryCount===0){g.push(c)}}function removeEdgeAndAdd(e){c[e]=!0;removeEdge(e)}};function makeDepndencyGraph(e){var c={};var f=[];each$1(e,function(h){var g=createDependencyGraphItem(c,h);var j=g.originalDeps=a(h);var i=getAvailableDependencies(j,e);g.entryCount=i.length;if(g.entryCount===0){f.push(h)}each$1(i,function(f){if(indexOf(g.predecessor,f)<0){g.predecessor.push(f)}var i=createDependencyGraphItem(c,f);if(indexOf(i.successor,f)<0){i.successor.push(h)}})});return {graph:c,noEntryList:f}}function createDependencyGraphItem(c,e){if(!c[e]){c[e]={predecessor:[],successor:[]}}return c[e]}function getAvailableDependencies(f,e){var c=[];each$1(f,function(g){indexOf(e,g)>=0&&c.push(g)});return c}}var ha=1.0E-4;function _trim(a){return a.replace(/^\s+|\s+$/g,'')}function linearMap(c,b,a,g){var e=b[1]-b[0];var f=a[1]-a[0];if(e===0){return f===0?a[0]:(a[0]+a[1])/2}if(g){if(e>0){if(c<=b[0]){return a[0]}else {if(c>=b[1]){return a[1]}}}else {if(c>=b[0]){return a[0]}else {if(c<=b[1]){return a[1]}}}}else {if(c===b[0]){return a[0]}if(c===b[1]){return a[1]}}return (c-b[0])/e*f+a[0]}function parsePercent$1(a,b){switch(a){case 'center':case 'middle':a='50%';break;case 'left':case 'top':a='0%';break;case 'right':case 'bottom':a='100%';break;}if(typeof a==='string'){if(_trim(a).match(/%$/)){return parseFloat(a)/100*b}return parseFloat(a)}return a==null?NaN:+a}function round$1(b,a,c){if(a==null){a=10}a=Math.min(Math.max(0,a),20);b=(+b).toFixed(a);return c?b:+b}function asc(a){a.sort(function(b,c){return b-c});return a}function getPrecision(a){a=+a;if(isNaN(a)){return 0}var b=1;var c=0;while(Math.round(a*b)/b!==a){b*=10;c++}return c}function getPrecisionSafe(f){var a=f.toString();var e=a.indexOf('e');if(e>0){var b=+a.slice(e+1);return b<0?-b:0}else {var c=a.indexOf('.');return c<0?0:a.length-1-c}}function getPixelPrecision(b,a){var f=Math.log;var e=Math.LN10;var g=Math.floor(f(b[1]-b[0])/e);var h=Math.round(f(Math.abs(a[1]-a[0]))/e);var c=Math.min(Math.max(-g+h,0),20);return !isFinite(c)?20:c}function getPercentWithPrecision(e,j,n){if(!e[j]){return 0}var l=reduce(e,function(b,a){return b+(isNaN(a)?0:a)},0);if(l===0){return 0}var f=Math.pow(10,n);var h=map(e,function(a){return (isNaN(a)?0:a)/l*f*100});var m=f*100;var c=map(h,function(a){return Math.floor(a)});var i=reduce(c,function(a,b){return a+b},0);var b=map(h,function(a,b){return a-c[b]});while(i<m){var k=Number.NEGATIVE_INFINITY;var g=null;for(var a=0,o=b.length;a<o;++a){if(b[a]>k){k=b[a];g=a}}++c[g];b[g]=0;++i}return c[j]/f}var ec=9.007199254740991E15;function remRadian(b){var a=Math.PI*2;return (b%a+a)%a}function isRadianAroundZero(a){return a>-ha&&a<ha}var nT=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(b){if(b instanceof Date){return b}else {if(typeof b==='string'){var a=nT.exec(b);if(!a){return new Date(NaN)}if(!a[8]){return new Date(+a[1],+(a[2]||1)-1,+a[3]||1,+a[4]||0,+(a[5]||0),+a[6]||0,+a[7]||0)}else {var c=+a[4]||0;if(a[8].toUpperCase()!=='Z'){c-=a[8].slice(0,3)}return new Date(Date.UTC(+a[1],+(a[2]||1)-1,+a[3]||1,c,+(a[5]||0),+a[6]||0,+a[7]||0))}}else {if(b==null){return new Date(NaN)}}}return new Date(Math.round(b))}function quantity(a){return Math.pow(10,quantityExponent(a))}function quantityExponent(b){if(b===0){return 0}var a=Math.floor(Math.log(b)/Math.LN10);if(b/Math.pow(10,a)>=10){a++}return a}function nice(c,g){var e=quantityExponent(c);var f=Math.pow(10,e);var b=c/f;var a;if(g){if(b<1.5){a=1}else {if(b<2.5){a=2}else {if(b<4){a=3}else {if(b<7){a=5}else {a=10}}}}}else {if(b<1){a=1}else {if(b<2){a=2}else {if(b<3){a=3}else {if(b<5){a=5}else {a=10}}}}}c=a*f;return e>=-20?+c.toFixed(e<0?-e:0):c}function quantile(a,g){var e=(a.length-1)*g+1;var b=Math.floor(e);var c=+a[b-1];var f=e-b;return f?c+f*(a[b]-c):c}function reformIntervals(b){b.sort(function(a,c){return littleThan(a,c,0)?-1:1});var g=-Infinity;var h=1;for(var e=0;e<b.length;){var c=b[e].interval;var f=b[e].close;for(var a=0;a<2;a++){if(c[a]<=g){c[a]=g;f[a]=!a?1-h:1}g=c[a];h=f[a]}if(c[0]===c[1]&&f[0]*f[1]!==1){b.splice(e,1)}else {e++}}return b;function littleThan(c,e,a){return c.interval[a]<e.interval[a]||c.interval[a]===e.interval[a]&&(c.close[a]-e.close[a]===(!a?1:-1)||!a&&littleThan(c,e,1))}}function isNumeric(a){return a-parseFloat(a)>=0}var ov=(Object.freeze||Object)({linearMap:linearMap,parsePercent:parsePercent$1,round:round$1,asc:asc,getPrecision:getPrecision,getPrecisionSafe:getPrecisionSafe,getPixelPrecision:getPixelPrecision,getPercentWithPrecision:getPercentWithPrecision,MAX_SAFE_INTEGER:ec,remRadian:remRadian,isRadianAroundZero:isRadianAroundZero,parseDate:parseDate,quantity:quantity,quantityExponent:quantityExponent,nice:nice,quantile:quantile,reformIntervals:reformIntervals,isNumeric:isNumeric});function addCommas(a){if(isNaN(a)){return '-'}a=(a+'').split('.');return a[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,'$1,')+(a.length>1?'.'+a[1]:'')}function toCamelCase(a,b){a=(a||'').toLowerCase().replace(/-(.)/g,function(e,c){return c.toUpperCase()});if(b&&a){a=a.charAt(0).toUpperCase()+a.slice(1)}return a}var aR=normalizeCssArray;var nj=/([&<>"'])/g;var ni={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'};function encodeHTML(a){return a==null?'':(a+'').replace(nj,function(c,b){return ni[b]})}var hn=['a','b','c','d','e','f','g'];var fH=function(b,a){return '{'+b+(a==null?'':a)+'}'};function formatTpl(b,a,k){if(!isArray(a)){a=[a]}var h=a.length;if(!h){return ''}var f=a[0].$vars||[];for(var g=0;g<f.length;g++){var i=hn[g];b=b.replace(fH(i),fH(i,0))}for(var c=0;c<h;c++){for(var e=0;e<f.length;e++){var j=a[c][f[e]];b=b.replace(fH(hn[e],c),k?encodeHTML(j):j)}}return b}function formatTplSimple(a,c,b){each$1(c,function(e,f){a=a.replace('{'+f+'}',b?encodeHTML(e):e)});return a}function getTooltipMarker(a,b){a=isString(a)?{color:a,extraCssText:b}:a||{};var c=a.color;var g=a.type;var b=a.extraCssText;var e=a.renderMode||'html';var f=a.markerId||'X';if(!c){return ''}if(e==='html'){return g==='subItem'?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;'+'border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(c)+';'+(b||'')+'"></span>':'<span style="display:inline-block;margin-right:5px;'+'border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(c)+';'+(b||'')+'"></span>'}else {return {renderMode:e,content:'{marker'+f+'|}  ',style:{color:c}}}}function pad(a,b){a+='';return '0000'.substr(0,b-a.length)+a}function formatTime(a,l,k){if(a==='week'||a==='month'||a==='quarter'||a==='half-year'||a==='year'){a='MM-dd\nyyyy'}var b=parseDate(l);var c=k?'UTC':'';var j=b['get'+c+'FullYear']();var e=b['get'+c+'Month']()+1;var f=b['get'+c+'Date']();var g=b['get'+c+'Hours']();var h=b['get'+c+'Minutes']();var i=b['get'+c+'Seconds']();var m=b['get'+c+'Milliseconds']();a=a.replace('MM',pad(e,2)).replace('M',e).replace('yyyy',j).replace('yy',j%100).replace('dd',pad(f,2)).replace('d',f).replace('hh',pad(g,2)).replace('h',g).replace('mm',pad(h,2)).replace('m',h).replace('ss',pad(i,2)).replace('s',i).replace('SSS',pad(m,3));return a}function capitalFirst(a){return a?a.charAt(0).toUpperCase()+a.substr(1):a}var hj=truncateText;function getTextBoundingRect(a){return getBoundingRect(a.text,a.font,a.textAlign,a.textVerticalAlign,a.textPadding,a.textLineHeight,a.rich,a.truncate)}function getTextRect(i,g,e,a,c,h,f,b){return getBoundingRect(i,g,e,a,c,b,h,f)}var op=(Object.freeze||Object)({addCommas:addCommas,toCamelCase:toCamelCase,normalizeCssArray:aR,encodeHTML:encodeHTML,formatTpl:formatTpl,formatTplSimple:formatTplSimple,getTooltipMarker:getTooltipMarker,formatTime:formatTime,capitalFirst:capitalFirst,truncateText:hj,getTextBoundingRect:getTextBoundingRect,getTextRect:getTextRect});var dE=each$1;var gX=['left','right','top','bottom','width','height'];var a4=[['width','left','right'],['height','top','bottom']];function boxLayout(h,i,e,g,f){var b=0;var c=0;if(g==null){g=Infinity}if(f==null){f=Infinity}var a=0;i.eachChild(function(k,s){var p=k.position;var j=k.getBoundingRect();var o=i.childAt(s+1);var l=o&&o.getBoundingRect();var m;var n;if(h==='horizontal'){var q=j.width+(l?-l.x+j.x:0);m=b+q;if(m>g||k.newline){b=0;m=q;c+=a+e;a=j.height}else {a=Math.max(a,j.height)}}else {var r=j.height+(l?-l.y+j.y:0);n=c+r;if(n>f||k.newline){b+=a+e;c=0;n=r;a=j.width}else {a=Math.max(a,j.width)}}if(k.newline){return}p[0]=b;p[1]=c;h==='horizontal'?b=m+e:c=n+e})}var bf=boxLayout;var o2=curry(boxLayout,'vertical');var o1=curry(boxLayout,'horizontal');function getAvailableSize(a,j,b){var e=j.width;var c=j.height;var h=parsePercent$1(a.x,e);var i=parsePercent$1(a.y,c);var f=parsePercent$1(a.x2,e);var g=parsePercent$1(a.y2,c);(isNaN(h)||isNaN(parseFloat(a.x)))&&(h=0);(isNaN(f)||isNaN(parseFloat(a.x2)))&&(f=e);(isNaN(i)||isNaN(parseFloat(a.y)))&&(i=0);(isNaN(g)||isNaN(parseFloat(a.y2)))&&(g=c);b=aR(b||0);return {width:Math.max(f-h-b[1]-b[3],0),height:Math.max(g-i-b[0]-b[2],0)}}function getLayoutRect(c,o,e){e=aR(e||0);var g=o.width;var f=o.height;var h=parsePercent$1(c.left,g);var i=parsePercent$1(c.top,f);var n=parsePercent$1(c.right,g);var m=parsePercent$1(c.bottom,f);var b=parsePercent$1(c.width,g);var a=parsePercent$1(c.height,f);var k=e[2]+e[0];var j=e[1]+e[3];var l=c.aspect;if(isNaN(b)){b=g-n-j-h}if(isNaN(a)){a=f-m-k-i}if(l!=null){if(isNaN(b)&&isNaN(a)){if(l>g/f){b=g*0.8}else {a=f*0.8}}if(isNaN(b)){b=l*a}if(isNaN(a)){a=b/l}}if(isNaN(h)){h=g-n-b-j}if(isNaN(i)){i=f-m-a-k}switch(c.left||c.right){case 'center':h=g/2-b/2-e[3];break;case 'right':h=g-b-j;break;}switch(c.top||c.bottom){case 'middle':case 'center':i=f/2-a/2-e[0];break;case 'bottom':i=f-a-k;break;}h=h||0;i=i||0;if(isNaN(b)){b=g-j-h-(n||0)}if(isNaN(a)){a=f-k-i-(m||0)}var p=new BoundingRect(h+e[3],i+e[0],b,a);p.margin=e;return p}function positionElement(c,e,l,n,b){var j=!b||!b.hv||b.hv[0];var k=!b||!b.hv||b.hv[1];var f=b&&b.boundingMode||'all';if(!j&&!k){return}var a;if(f==='raw'){a=c.type==='group'?new BoundingRect(0,0,+e.width||0,+e.height||0):c.getBoundingRect()}else {a=c.getBoundingRect();if(c.needLocalTransform()){var m=c.getLocalTransform();a=a.clone();a.applyTransform(m)}}e=getLayoutRect(defaults({width:a.width,height:a.height},e),l,n);var g=c.position;var h=j?e.x-a.x:0;var i=k?e.y-a.y:0;c.attr('position',f==='raw'?[h,i]:[g[0]+h,g[1]+i])}function sizeCalculable(a,b){return a[a4[b][0]]!=null||a[a4[b][1]]!=null&&a[a4[b][2]]!=null}function mergeLayoutParam(a,c,e){!isObject$1(e)&&(e={});var b=e.ignoreSize;!isArray(b)&&(b=[b,b]);var f=merge$$1(a4[0],0);var g=merge$$1(a4[1],1);copy(a4[0],a,f);copy(a4[1],a,g);function merge$$1(f,n){var h={};var j=0;var g={};var m=0;var l=2;dE(f,function(b){g[b]=a[b]});dE(f,function(b){hasProp(c,b)&&(h[b]=g[b]=c[b]);hasValue(h,b)&&j++;hasValue(g,b)&&m++});if(b[n]){if(hasValue(c,f[1])){g[f[2]]=null}else {if(hasValue(c,f[2])){g[f[1]]=null}}return g}if(m===l||!j){return g}else {if(j>=l){return h}else {for(var k=0;k<f.length;k++){var i=f[k];if(!hasProp(h,i)&&hasProp(a,i)){h[i]=a[i];break}}return h}}}function hasProp(f,b){return f.hasOwnProperty(b)}function hasValue(f,b){return f[b]!=null&&f[b]!=='auto'}function copy(g,f,b){dE(g,function(h){f[h]=b[h]})}}function getLayoutParams(a){return copyLayoutParams({},a)}function copyLayoutParams(b,a){a&&b&&dE(gX,function(c){a.hasOwnProperty(c)&&(b[c]=a[c])});return b}var lp={getBoxLayoutParams:function(){return {left:this.get('left'),top:this.get('top'),right:this.get('right'),bottom:this.get('bottom'),width:this.get('width'),height:this.get('height')}}};var ob=makeInner();var g=Model.extend({type:'component',id:'',name:'',mainType:'',subType:'',componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,a,c,b){Model.call(this,e,a,c,b);this.uid=getUID('ec_cpt_model')},init:function(b,c,a,e){this.mergeDefaultAndTheme(b,a)},mergeDefaultAndTheme:function(a,f){var b=this.layoutMode;var c=b?getLayoutParams(a):{};var e=f.getTheme();merge(a,e.get(this.mainType));merge(a,this.getDefaultOption());if(b){mergeLayoutParam(a,c,b)}},mergeOption:function(b,c){merge(this.option,b,!0);var a=this.layoutMode;if(a){mergeLayoutParam(this.option,b,a)}},optionUpdated:function(a,b){},getDefaultOption:function(){var e=ob(this);if(!e.defaultOption){var c=[];var a=this.constructor;while(a){var g=a.prototype.defaultOption;g&&c.push(g);a=a.superClass}var b={};for(var f=c.length-1;f>=0;f--){b=merge(b,c[f],!0)}e.defaultOption=b}return e.defaultOption},getReferringComponents:function(a){return this.ecModel.queryComponents({mainType:a,index:this.get(a+'Index',!0),id:this.get(a+'Id',!0)})}});enableClassManagement(g,{registerWhenExtend:!0});enableSubTypeDefaulter(g);enableTopologicalTravel(g,getDependencies);function getDependencies(b){var a=[];each$1(g.getClassesByMainType(b),function(c){a=a.concat(c.prototype.dependencies||[])});a=map(a,function(a){return parseClassType$1(a).main});if(b!=='dataset'&&indexOf(a,'dataset')<=0){a.unshift('dataset')}return a}mixin(g,lp);var iw='';if(typeof navigator!=='undefined'){iw=navigator.platform||''}var lP={color:['#c23531','#2f4554','#61a0a8','#d48265','#91c7ae','#749f83','#ca8622','#bda29a','#6e7074','#546570','#c4ccd3'],gradientColor:['#f6efa6','#d88273','#bf444c'],textStyle:{fontFamily:iw.match(/^Win/)?'Microsoft YaHei':'sans-serif',fontSize:12,fontStyle:'normal',fontWeight:'normal'},blendMode:null,animation:'auto',animationDuration:1000,animationDurationUpdate:300,animationEasing:'exponentialOut',animationEasingUpdate:'cubicOut',animationThreshold:2000,progressiveThreshold:3000,progressive:400,hoverLayerThreshold:3000,useUTC:!1};var fD=makeInner();function getNearestColorPalette(a,e){var c=a.length;for(var b=0;b<c;b++){if(a[b].length>e){return a[b]}}return a[c-1]}var d9={clearColorPalette:function(){fD(this).colorIdx=0;fD(this).colorNameMap={}},getColorFromPalette:function(c,f,i){f=f||this;var b=fD(f);var j=b.colorIdx||0;var e=b.colorNameMap=b.colorNameMap||{};if(e.hasOwnProperty(c)){return e[c]}var g=normalizeToArray(this.get('color',!0));var h=this.get('colorLayer',!0);var a=i==null||!h?g:getNearestColorPalette(h,i);a=a||g;if(!a||!a.length){return}var k=a[j];if(c){e[c]=k}b.colorIdx=(j+1)%a.length;return k}};function getCoordSysDefineBySeries(c){var b=c.get('coordinateSystem');var a={coordSysName:b,coordSysDims:[],axisMap:createHashMap(),categoryAxisMap:createHashMap()};var e=nX[b];if(e){e(c,a,a.axisMap,a.categoryAxisMap);return a}}var nX={cartesian2d:function(b,f,h,g){var c=b.getReferringComponents('xAxis')[0];var e=b.getReferringComponents('yAxis')[0];if(a){if(!c){throw new Error('xAxis "'+retrieve(b.get('xAxisIndex'),b.get('xAxisId'),0)+'" not found')}if(!e){throw new Error('yAxis "'+retrieve(b.get('xAxisIndex'),b.get('yAxisId'),0)+'" not found')}}f.coordSysDims=['x','y'];h.set('x',c);h.set('y',e);if(isCategory(c)){g.set('x',c);f.firstCategoryDimIndex=0}if(isCategory(e)){g.set('y',e);f.firstCategoryDimIndex=1}},singleAxis:function(f,c,g,e){var b=f.getReferringComponents('singleAxis')[0];if(a){if(!b){throw new Error('singleAxis should be specified.')}}c.coordSysDims=['single'];g.set('single',b);if(isCategory(b)){e.set('single',b);c.firstCategoryDimIndex=0}},polar:function(i,e,h,f){var g=i.getReferringComponents('polar')[0];var b=g.findAxisModel('radiusAxis');var c=g.findAxisModel('angleAxis');if(a){if(!c){throw new Error('angleAxis option not found')}if(!b){throw new Error('radiusAxis option not found')}}e.coordSysDims=['radius','angle'];h.set('radius',b);h.set('angle',c);if(isCategory(b)){f.set('radius',b);e.firstCategoryDimIndex=0}if(isCategory(c)){f.set('angle',c);e.firstCategoryDimIndex=1}},geo:function(c,a,e,b){a.coordSysDims=['lng','lat']},parallel:function(c,a,h,f){var e=c.ecModel;var b=e.getComponent('parallel',c.get('parallelIndex'));var g=a.coordSysDims=b.dimensions.slice();each$1(b.parallelAxisIndex,function(k,j){var b=e.getComponent('parallelAxis',k);var i=g[j];h.set(i,b);if(isCategory(b)&&a.firstCategoryDimIndex==null){f.set(i,b);a.firstCategoryDimIndex=j}})}};function isCategory(a){return a.get('type')==='category'}var aP='original';var bT='arrayRows';var cx='objectRows';var cw='keyedColumns';var gl='unknown';var bS='typedArray';var gb='column';var dW='row';function Source(a){this.fromDataset=a.fromDataset;this.data=a.data||(a.sourceFormat===cw?{}:[]);this.sourceFormat=a.sourceFormat||gl;this.seriesLayoutBy=a.seriesLayoutBy||gb;this.dimensionsDefine=a.dimensionsDefine;this.encodeDefine=a.encodeDefine&&createHashMap(a.encodeDefine);this.startIndex=a.startIndex||0;this.dimensionsDetectCount=a.dimensionsDetectCount}Source.seriesDataToSource=function(a){return new Source({data:a,sourceFormat:isTypedArray(a)?bS:aP,fromDataset:!1})};enableClassCheck(Source);var bD=makeInner();function detectSourceFormat(f){var a=f.option.source;var b=gl;if(isTypedArray(a)){b=bS}else {if(isArray(a)){if(a.length===0){b=bT}for(var e=0,h=a.length;e<h;e++){var c=a[e];if(c==null){continue}else {if(isArray(c)){b=bT;break}else {if(isObject$1(c)){b=cx;break}}}}}else {if(isObject$1(a)){for(var g in a){if(a.hasOwnProperty(g)&&isArrayLike(a[g])){b=cw;break}}}else {if(a!=null){throw new Error('Invalid data')}}}}bD(f).sourceFormat=b}function getSource(a){return bD(a).source}function resetSourceDefaulter(a){bD(a).datasetMap=createHashMap()}function prepareSource(i){var c=i.option;var e=c.data;var h=isTypedArray(e)?bS:aP;var m=!1;var a=c.seriesLayoutBy;var l=c.sourceHeader;var j=c.dimensions;var b=getDatasetModel(i);if(b){var g=b.option;e=g.source;h=bD(b).sourceFormat;m=!0;a=a||g.seriesLayoutBy;l==null&&(l=g.sourceHeader);j=j||g.dimensions}var f=completeBySourceData(e,h,a,l,j);var k=c.encode;if(!k&&b){k=makeDefaultEncode(i,b,e,h,a,f)}bD(i).source=new Source({data:e,fromDataset:m,seriesLayoutBy:a,sourceFormat:h,dimensionsDefine:f.dimensionsDefine,startIndex:f.startIndex,dimensionsDetectCount:f.dimensionsDetectCount,encodeDefine:k})}function completeBySourceData(c,f,i,j,b){if(!c){return {dimensionsDefine:normalizeDimensionsDefine(b)}}var g;var e;var h;if(f===bT){if(j==='auto'||j==null){arrayRowsTravelFirst(function(a){if(a!=null&&a!=='-'){if(isString(a)){e==null&&(e=1)}else {e=0}}},i,c,10)}else {e=j?1:0}if(!b&&e===1){b=[];arrayRowsTravelFirst(function(a,e){b[e]=a!=null?a:''},i,c)}g=b?b.length:i===dW?c.length:c[0]?c[0].length:null}else {if(f===cx){if(!b){b=objectRowsCollectDimensions(c);h=!0}}else {if(f===cw){if(!b){b=[];h=!0;each$1(c,function(e,a){b.push(a)})}}else {if(f===aP){var l=getDataItemValue(c[0]);g=isArray(l)&&l.length||1}else {if(f===bS){if(a){assert$1(!!b,'dimensions must be given if data is TypedArray.')}}}}}}var k;if(h){each$1(b,function(a,e){if((isObject$1(a)?a.name:a)==='name'){k=e}})}return {startIndex:e,dimensionsDefine:normalizeDimensionsDefine(b),dimensionsDetectCount:g,potentialNameDimIndex:k}}function normalizeDimensionsDefine(a){if(!a){return}var b=createHashMap();return map(a,function(c,f){c=extend({},isObject$1(c)?c:{name:c});if(c.name==null){return c}c.name+='';if(c.displayName==null){c.displayName=c.name}var e=b.get(c.name);if(!e){b.set(c.name,{count:1})}else {c.name+='-'+e.count++}return c})}function arrayRowsTravelFirst(f,g,c,b){b==null&&(b=Infinity);if(g===dW){for(var a=0;a<c.length&&a<b;a++){f(c[a]?c[a][0]:null,a)}}else {var e=c[0]||[];for(var a=0;a<e.length&&a<b;a++){f(e[a],a)}}}function objectRowsCollectDimensions(e){var c=0;var a;while(c<e.length&&!(a=e[c++])){}if(a){var b=[];each$1(a,function(c,a){b.push(a)});return b}}function makeDefaultEncode(i,p,u,q,j,h){var e=getCoordSysDefineBySeries(i);var a={};var f=[];var b=[];var n=i.subType;var s=createHashMap(['pie','map','funnel']);var r=createHashMap(['line','bar','pictorialBar','scatter','effectScatter','candlestick','boxplot']);if(e&&r.get(n)!=null){var t=i.ecModel;var m=bD(t).datasetMap;var o=p.uid+'_'+j;var k=m.get(o)||m.set(o,{categoryWayDim:1,valueWayDim:0});each$1(e.coordSysDims,function(g){if(e.firstCategoryDimIndex==null){var c=k.valueWayDim++;a[g]=c;b.push(c)}else {if(e.categoryAxisMap.get(g)){a[g]=0;f.push(0)}else {var c=k.categoryWayDim++;a[g]=c;b.push(c)}}})}else {if(s.get(n)!=null){var c;for(var g=0;g<5&&c==null;g++){if(!doGuessOrdinal(u,q,j,h.dimensionsDefine,h.startIndex,g)){c=g}}if(c!=null){a.value=c;var l=h.potentialNameDimIndex||Math.max(c-1,0);b.push(l);f.push(l)}}}f.length&&(a.itemName=f);b.length&&(a.seriesName=b);return a}function getDatasetModel(a){var b=a.option;var c=b.data;if(!c){return a.ecModel.getComponent('dataset',b.datasetIndex||0)}}function guessOrdinal(a,b){return doGuessOrdinal(a.data,a.sourceFormat,a.seriesLayoutBy,a.dimensionsDefine,a.startIndex,b)}function doGuessOrdinal(e,h,o,k,l,i){var b;var g=5;if(isTypedArray(e)){return !1}var c;if(k){c=k[i];c=isObject$1(c)?c.name:c}if(h===bT){if(o===dW){var f=e[i];for(var a=0;a<(f||[]).length&&a<g;a++){if((b=detectValue(f[l+a]))!=null){return b}}}else {for(var a=0;a<e.length&&a<g;a++){var m=e[l+a];if(m&&(b=detectValue(m[i]))!=null){return b}}}}else {if(h===cx){if(!c){return}for(var a=0;a<e.length&&a<g;a++){var j=e[a];if(j&&(b=detectValue(j[c]))!=null){return b}}}else {if(h===cw){if(!c){return}var f=e[c];if(!f||isTypedArray(f)){return !1}for(var a=0;a<f.length&&a<g;a++){if((b=detectValue(f[a]))!=null){return b}}}else {if(h===aP){for(var a=0;a<e.length&&a<g;a++){var j=e[a];var n=getDataItemValue(j);if(!isArray(n)){return !1}if((b=detectValue(n[i]))!=null){return b}}}}}}function detectValue(a){if(a!=null&&isFinite(a)&&a!==''){return !1}else {if(isString(a)&&a!=='-'){return !0}}}return !1}var ed='\x00_ec_inner';var eV=Model.extend({init:function(e,c,a,b){a=a||{};this.option=null;this._theme=new Model(a);this._optionManager=b},setOption:function(a,b){assert$1(!(ed in a),'please use chart.getOption()');this._optionManager.setOption(a,b);this.resetOption(null)},resetOption:function(a){var b=!1;var c=this._optionManager;if(!a||a==='recreate'){var g=c.mountOption(a==='recreate');if(!this.option||a==='recreate'){initBase.call(this,g)}else {this.restoreData();this.mergeOption(g)}b=!0}if(a==='timeline'||a==='media'){this.restoreData()}if(!a||a==='recreate'||a==='timeline'){var e=c.getTimelineOption(this);e&&(this.mergeOption(e),b=!0)}if(!a||a==='recreate'||a==='media'){var f=c.getMediaOption(this,this._api);if(f.length){each$1(f,function(c){this.mergeOption(c,b=!0)},this)}}return b},mergeOption:function(e){var b=this.option;var a=this._componentsMap;var c=[];resetSourceDefaulter(this);each$1(e,function(f,a){if(f==null){return}if(!g.hasClass(a)){b[a]=b[a]==null?clone(f):merge(b[a],f,!0)}else {if(a){c.push(a)}}});g.topologicalTravel(c,g.getAllClassMainTypes(),visitComponent,this);function visitComponent(c,j){var h=normalizeToArray(e[c]);var f=mappingToExists(a.get(c),h);makeIdAndName(f);each$1(f,function(a,f){var b=a.option;if(isObject$1(b)){a.keyInfo.mainType=c;a.keyInfo.subType=determineSubType(c,b,a.exist)}});var i=getComponentsByTypes(a,j);b[c]=[];a.set(c,[]);each$1(f,function(k,m){var f=k.exist;var h=k.option;assert$1(isObject$1(h)||f,'Empty component definition');if(!h){f.mergeOption({},this);f.optionUpdated({},!1)}else {var n=g.getClass(c,k.keyInfo.subType,!0);if(f&&f.constructor===n){f.name=k.keyInfo.name;f.mergeOption(h,this);f.optionUpdated(h,!1)}else {var l=extend({dependentModels:i,componentIndex:m},k.keyInfo);f=new n(h,this,this,l);extend(f,l);f.init(h,this,this,l);f.optionUpdated(null,!0)}}a.get(c)[m]=f;b[c][m]=f.option},this);if(c==='series'){createSeriesIndices(this,a.get('series'))}}this._seriesIndicesMap=createHashMap(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var a=clone(this.option);each$1(a,function(b,e){if(g.hasClass(e)){var b=normalizeToArray(b);for(var c=b.length-1;c>=0;c--){if(isIdInner(b[c])){b.splice(c,1)}}a[e]=b}});delete a[ed];return a},getTheme:function(){return this._theme},getComponent:function(b,c){var a=this._componentsMap.get(b);if(a){return a[c||0]}},queryComponents:function(b){var j=b.mainType;if(!j){return []}var e=b.index;var g=b.id;var f=b.name;var a=this._componentsMap.get(j);if(!a||!a.length){return []}var c;if(e!=null){if(!isArray(e)){e=[e]}c=filter(map(e,function(c){return a[c]}),function(a){return !!a})}else {if(g!=null){var i=isArray(g);c=filter(a,function(a){return i&&indexOf(g,a.id)>=0||!i&&a.id===g})}else {if(f!=null){var h=isArray(f);c=filter(a,function(a){return h&&indexOf(f,a.name)>=0||!h&&a.name===f})}else {c=a.slice()}}}return filterBySubType(c,b)},findComponents:function(a){var f=a.query;var b=a.mainType;var c=getQueryCond(f);var e=c?this.queryComponents(c):this._componentsMap.get(b);return doFilter(filterBySubType(e,a));function getQueryCond(c){var e=b+'Index';var g=b+'Id';var f=b+'Name';return c&&(c[e]!=null||c[g]!=null||c[f]!=null)?{mainType:b,index:c[e],id:c[g],name:c[f]}:null}function doFilter(b){return a.filter?filter(b,a.filter):b}},eachComponent:function(a,b,c){var e=this._componentsMap;if(typeof a==='function'){c=b;b=a;e.each(function(f,e){each$1(f,function(g,h){b.call(c,e,g,h)})})}else {if(isString(a)){each$1(e.get(a),b,c)}else {if(isObject$1(a)){var f=this.findComponents(a);each$1(f,b,c)}}}},getSeriesByName:function(b){var a=this._componentsMap.get('series');return filter(a,function(a){return a.name===b})},getSeriesByIndex:function(a){return this._componentsMap.get('series')[a]},getSeriesByType:function(a){var b=this._componentsMap.get('series');return filter(b,function(b){return b.subType===a})},getSeries:function(){return this._componentsMap.get('series').slice()},getSeriesCount:function(){return this._componentsMap.get('series').length},eachSeries:function(b,a){assertSeriesInitialized(this);each$1(this._seriesIndices,function(c){var e=this._componentsMap.get('series')[c];b.call(a,e,c)},this)},eachRawSeries:function(b,a){each$1(this._componentsMap.get('series'),b,a)},eachSeriesByType:function(b,c,a){assertSeriesInitialized(this);each$1(this._seriesIndices,function(e){var f=this._componentsMap.get('series')[e];if(f.subType===b){c.call(a,f,e)}},this)},eachRawSeriesByType:function(b,c,a){return each$1(this.getSeriesByType(b),c,a)},isSeriesFiltered:function(a){assertSeriesInitialized(this);return this._seriesIndicesMap.get(a.componentIndex)==null},getCurrentSeriesIndices:function(){return (this._seriesIndices||[]).slice()},filterSeries:function(c,b){assertSeriesInitialized(this);var a=filter(this._componentsMap.get('series'),c,b);createSeriesIndices(this,a)},restoreData:function(c){var a=this._componentsMap;createSeriesIndices(this,a.get('series'));var b=[];a.each(function(e,a){b.push(a)});g.topologicalTravel(b,g.getAllClassMainTypes(),function(b,e){each$1(a.get(b),function(a){(b!=='series'||!isNotTargetSeries(a,c))&&a.restoreData()})})}});function isNotTargetSeries(b,a){if(a){var c=a.seiresIndex;var f=a.seriesId;var e=a.seriesName;return c!=null&&b.componentIndex!==c||f!=null&&b.id!==f||e!=null&&b.name!==e}}function mergeTheme(a,c){var b=a.color&&!a.colorLayer;each$1(c,function(f,e){if(e==='colorLayer'&&b){return}if(!g.hasClass(e)){if(typeof f==='object'){a[e]=!a[e]?clone(f):merge(a[e],f,!1)}else {if(a[e]==null){a[e]=f}}}})}function initBase(a){a=a;this.option={};this.option[ed]=1;this._componentsMap=createHashMap({series:[]});this._seriesIndices;this._seriesIndicesMap;mergeTheme(a,this._theme.option);merge(a,lP,!1);this.mergeOption(a)}function getComponentsByTypes(c,a){if(!isArray(a)){a=a?[a]:[]}var b={};each$1(a,function(e){b[e]=(c.get(e)||[]).slice()});return b}function determineSubType(c,a,b){var e=a.type?a.type:b?b.subType:g.determineSubType(c,a);return e}function createSeriesIndices(a,b){a._seriesIndicesMap=createHashMap(a._seriesIndices=map(b,function(c){return c.componentIndex})||[])}function filterBySubType(a,b){return b.hasOwnProperty('subType')?filter(a,function(c){return c.subType===b.subType}):a}function assertSeriesInitialized(b){if(a){if(!b._seriesIndices){throw new Error('Option should contains series.')}}}mixin(eV,d9);var lt=['getDom','getZr','getWidth','getHeight','getDevicePixelRatio','dispatchAction','isDisposed','on','off','getDataURL','getConnectedDataURL','getModel','getOption','getViewOfComponentModel','getViewOfSeriesModel'];function ExtensionAPI(a){each$1(lt,function(b){this[b]=bind(a[b],a)},this)}var dR={};function CoordinateSystemManager(){this._coordinateSystems=[]}CoordinateSystemManager.prototype={constructor:CoordinateSystemManager,create:function(b,c){var a=[];each$1(dR,function(e,g){var f=e.create(b,c);a=a.concat(f||[])});this._coordinateSystems=a},update:function(a,b){each$1(this._coordinateSystems,function(c){c.update&&c.update(a,b)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}};CoordinateSystemManager.register=function(b,a){dR[b]=a};CoordinateSystemManager.get=function(a){return dR[a]};var dF=each$1;var a8=clone;var dK=map;var iN=merge;var ns=/^(min|max)?(.+)$/;function OptionManager(a){this._api=a;this._timelineOptions=[];this._mediaList=[];this._mediaDefault;this._currentMediaIndices=[];this._optionBackup;this._newBaseOption}OptionManager.prototype={constructor:OptionManager,setOption:function(c,e){if(c){each$1(normalizeToArray(c.series),function(a){a&&a.data&&isTypedArray(a.data)&&setAsPrimitive(a.data)})}c=a8(c);var b=this._optionBackup;var a=parseRawOption.call(this,c,e,!b);this._newBaseOption=a.baseOption;if(b){mergeOption(b.baseOption,a.baseOption);if(a.timelineOptions.length){b.timelineOptions=a.timelineOptions}if(a.mediaList.length){b.mediaList=a.mediaList}if(a.mediaDefault){b.mediaDefault=a.mediaDefault}}else {this._optionBackup=a}},mountOption:function(b){var a=this._optionBackup;this._timelineOptions=dK(a.timelineOptions,a8);this._mediaList=dK(a.mediaList,a8);this._mediaDefault=a8(a.mediaDefault);this._currentMediaIndices=[];return a8(b?a.baseOption:this._newBaseOption)},getTimelineOption:function(e){var c;var a=this._timelineOptions;if(a.length){var b=e.getComponent('timeline');if(b){c=a8(a[b.getCurrentIndex()],!0)}}return c},getMediaOption:function(j){var h=this._api.getWidth();var g=this._api.getHeight();var b=this._mediaList;var e=this._mediaDefault;var a=[];var f=[];if(!b.length&&!e){return f}for(var c=0,i=b.length;c<i;c++){if(applyMediaQuery(b[c].query,h,g)){a.push(c)}}if(!a.length&&e){a=[-1]}if(a.length&&!indicesEquals(a,this._currentMediaIndices)){f=dK(a,function(a){return a8(a===-1?e.option:b[a].option)})}this._currentMediaIndices=a;return f}};function parseRawOption(b,h,i){var c=[];var f=[];var e;var a;var g=b.timeline;if(b.baseOption){a=b.baseOption}if(g||b.options){a=a||{};c=(b.options||[]).slice()}if(b.media){a=a||{};var j=b.media;dF(j,function(a){if(a&&a.option){if(a.query){f.push(a)}else {if(!e){e=a}}}})}if(!a){a=b}if(!a.timeline){a.timeline=g}dF([a].concat(c).concat(map(f,function(a){return a.option})),function(a){dF(h,function(c){c(a,i)})});return {baseOption:a,timelineOptions:c,mediaDefault:e,mediaList:f}}function applyMediaQuery(f,c,b){var e={width:c,height:b,aspectratio:c/b};var a=!0;each$1(f,function(j,k){var g=k.match(ns);if(!g||!g[1]||!g[2]){return}var h=g[1];var i=g[2].toLowerCase();if(!compare(e[i],j,h)){a=!1}});return a}function compare(b,a,c){if(c==='min'){return b>=a}else {if(c==='max'){return b<=a}else {return b===a}}}function indicesEquals(a,b){return a.join(',')===b.join(',')}function mergeOption(b,a){a=a||{};dF(a,function(c,f){if(c==null){return}var e=b[f];if(!g.hasClass(f)){b[f]=iN(e,c,!0)}else {c=normalizeToArray(c);e=normalizeToArray(e);var h=mappingToExists(e,c);b[f]=dK(h,function(e){return e.option&&e.exist?iN(e.exist,e.option,!0):e.exist||e.option})}})}var T=each$1;var b7=isObject$1;var gY=['areaStyle','lineStyle','nodeStyle','linkStyle','chordStyle','label','labelLine'];function compatEC2ItemStyle(b){var f=b&&b.itemStyle;if(!f){return}for(var g=0,h=gY.length;g<h;g++){var a=gY[g];var e=f.normal;var c=f.emphasis;if(e&&e[a]){b[a]=b[a]||{};if(!b[a].normal){b[a].normal=e[a]}else {merge(b[a].normal,e[a])}e[a]=null}if(c&&c[a]){b[a]=b[a]||{};if(!b[a].emphasis){b[a].emphasis=c[a]}else {merge(b[a].emphasis,c[a])}c[a]=null}}}function convertNormalEmphasis(a,b,f){if(a&&a[b]&&(a[b].normal||a[b].emphasis)){var c=a[b].normal;var e=a[b].emphasis;if(c){if(f){a[b].normal=a[b].emphasis=null;defaults(a[b],c)}else {a[b]=c}}if(e){a.emphasis=a.emphasis||{};a.emphasis[b]=e}}}function removeEC3NormalStatus(a){convertNormalEmphasis(a,'itemStyle');convertNormalEmphasis(a,'lineStyle');convertNormalEmphasis(a,'areaStyle');convertNormalEmphasis(a,'label');convertNormalEmphasis(a,'labelLine');convertNormalEmphasis(a,'upperLabel');convertNormalEmphasis(a,'edgeLabel')}function compatTextStyle(f,a){var b=b7(f)&&f[a];var c=b7(b)&&b.textStyle;if(c){for(var e=0,g=gy.length;e<g;e++){var a=gy[e];if(c.hasOwnProperty(a)){b[a]=c[a]}}}}function compatEC3CommonStyles(a){if(a){removeEC3NormalStatus(a);compatTextStyle(a,'label');a.emphasis&&compatTextStyle(a.emphasis,'label')}}function processSeries(a){if(!b7(a)){return}compatEC2ItemStyle(a);removeEC3NormalStatus(a);compatTextStyle(a,'label');compatTextStyle(a,'upperLabel');compatTextStyle(a,'edgeLabel');if(a.emphasis){compatTextStyle(a.emphasis,'label');compatTextStyle(a.emphasis,'upperLabel');compatTextStyle(a.emphasis,'edgeLabel')}var c=a.markPoint;if(c){compatEC2ItemStyle(c);compatEC3CommonStyles(c)}var e=a.markLine;if(e){compatEC2ItemStyle(e);compatEC3CommonStyles(e)}var i=a.markArea;if(i){compatEC3CommonStyles(i)}var f=a.data;if(a.type==='graph'){f=f||a.nodes;var h=a.links||a.edges;if(h&&!isTypedArray(h)){for(var b=0;b<h.length;b++){compatEC3CommonStyles(h[b])}}each$1(a.categories,function(b){removeEC3NormalStatus(b)})}if(f&&!isTypedArray(f)){for(var b=0;b<f.length;b++){compatEC3CommonStyles(f[b])}}var c=a.markPoint;if(c&&c.data){var j=c.data;for(var b=0;b<j.length;b++){compatEC3CommonStyles(j[b])}}var e=a.markLine;if(e&&e.data){var g=e.data;for(var b=0;b<g.length;b++){if(isArray(g[b])){compatEC3CommonStyles(g[b][0]);compatEC3CommonStyles(g[b][1])}else {compatEC3CommonStyles(g[b])}}}if(a.type==='gauge'){compatTextStyle(a,'axisLabel');compatTextStyle(a,'title');compatTextStyle(a,'detail')}else {if(a.type==='treemap'){convertNormalEmphasis(a.breadcrumb,'itemStyle');each$1(a.levels,function(b){removeEC3NormalStatus(b)})}else {if(a.type==='tree'){removeEC3NormalStatus(a.leaves)}}}}function toArr(a){return isArray(a)?a:a?[a]:[]}function toObj(a){return (isArray(a)?a[0]:a)||{}}var mE=function(a,c){T(toArr(a.series),function(b){b7(b)&&processSeries(b)});var b=['xAxis','yAxis','radiusAxis','angleAxis','singleAxis','parallelAxis','radar'];c&&b.push('valueAxis','categoryAxis','logAxis','timeAxis');T(b,function(b){T(toArr(a[b]),function(e){if(e){compatTextStyle(e,'axisLabel');compatTextStyle(e.axisPointer,'label')}})});T(toArr(a.parallel),function(e){var b=e&&e.parallelAxisDefault;compatTextStyle(b,'axisLabel');compatTextStyle(b&&b.axisPointer,'label')});T(toArr(a.calendar),function(b){convertNormalEmphasis(b,'itemStyle');compatTextStyle(b,'dayLabel');compatTextStyle(b,'monthLabel');compatTextStyle(b,'yearLabel')});T(toArr(a.radar),function(b){compatTextStyle(b,'name')});T(toArr(a.geo),function(b){if(b7(b)){compatEC3CommonStyles(b);T(toArr(b.regions),function(e){compatEC3CommonStyles(e)})}});T(toArr(a.timeline),function(b){compatEC3CommonStyles(b);convertNormalEmphasis(b,'label');convertNormalEmphasis(b,'itemStyle');convertNormalEmphasis(b,'controlStyle',!0);var e=b.data;isArray(e)&&each$1(e,function(e){if(isObject$1(e)){convertNormalEmphasis(e,'label');convertNormalEmphasis(e,'itemStyle')}})});T(toArr(a.toolbox),function(b){convertNormalEmphasis(b,'iconStyle');T(b.feature,function(e){convertNormalEmphasis(e,'iconStyle')})});compatTextStyle(toObj(a.axisPointer),'label');compatTextStyle(toObj(a.tooltip).axisPointer,'label')};function get(e,b){b=b.split(',');var a=e;for(var c=0;c<b.length;c++){a=a&&a[b[c]];if(a==null){break}}return a}function set$1(g,a,h,f){a=a.split(',');var b=g;var e;for(var c=0;c<a.length-1;c++){e=a[c];if(b[e]==null){b[e]={}}b=b[e]}if(f||b[a[c]]==null){b[a[c]]=h}}function compatLayoutProperties(a){each$1(ks,function(b){if(b[0] in a&&!(b[1] in a)){a[b[1]]=a[b[0]]}})}var ks=[['x','left'],['y','top'],['x2','right'],['y2','bottom']];var jH=['grid','geo','parallel','legend','toolbox','title','visualMap','dataZoom','timeline'];var hb=function(a,b){mE(a,b);a.series=normalizeToArray(a.series);each$1(a.series,function(c){if(!isObject$1(c)){return}var e=c.type;if(e==='line'){if(c.clipOverflow!=null){c.clip=c.clipOverflow}}else {if(e==='pie'||e==='gauge'){if(c.clockWise!=null){c.clockwise=c.clockWise}}else {if(e==='gauge'){var f=get(c,'pointer.color');f!=null&&set$1(c,'itemStyle.color',f)}}}compatLayoutProperties(c)});if(a.dataRange){a.visualMap=a.dataRange}each$1(jH,function(e){var c=a[e];if(c){if(!isArray(c)){c=[c]}each$1(c,function(c){compatLayoutProperties(c)})}})};var nD=function(b){var a=createHashMap();b.eachSeries(function(g){var h=g.get('stack');if(h){var e=a.get(h)||a.set(h,[]);var c=g.getData();var f={stackResultDimension:c.getCalculationInfo('stackResultDimension'),stackedOverDimension:c.getCalculationInfo('stackedOverDimension'),stackedDimension:c.getCalculationInfo('stackedDimension'),stackedByDimension:c.getCalculationInfo('stackedByDimension'),isStackedByIndex:c.getCalculationInfo('isStackedByIndex'),data:c,seriesModel:g};if(!f.stackedDimension||!(f.isStackedByIndex||f.stackedByDimension)){return}e.length&&c.setCalculationInfo('stackedOnSeries',e[e.length-1].seriesModel);e.push(f)}});a.each(calculateStack)};function calculateStack(a){each$1(a,function(b,h){var e=[];var i=[NaN,NaN];var j=[b.stackResultDimension,b.stackedOverDimension];var c=b.data;var f=b.isStackedByIndex;var g=c.map(j,function(q,r,m){var g=c.get(b.stackedDimension,m);if(isNaN(g)){return i}var p;var j;if(f){j=c.getRawIndex(m)}else {p=c.get(b.stackedByDimension,m)}var o=NaN;for(var n=h-1;n>=0;n--){var k=a[n];if(!f){j=k.data.rawIndexOf(k.stackedByDimension,p)}if(j>=0){var l=k.data.getByRawIndex(k.stackResultDimension,j);if(g>=0&&l>0||g<=0&&l<0){g+=l;o=l;break}}}e[0]=g;e[1]=o;return e});c.hostModel.setData(g);b.data=g})}function DefaultDataProvider(b,e){if(!Source.isInstance(b)){b=Source.seriesDataToSource(b)}this._source=b;var g=this._data=b.data;var c=b.sourceFormat;if(c===bS){if(a){if(e==null){throw new Error('Typed array data must specify dimension size')}}this._offset=0;this._dimSize=e;this._data=g}var f=lc[c===bT?c+'_'+b.seriesLayoutBy:c];if(a){assert$1(f,'Invalide sourceFormat: '+c)}extend(this,f)}var eH=DefaultDataProvider.prototype;eH.pure=!1;eH.persistent=!0;eH.getSource=function(){return this._source};var lc={'arrayRows_column':{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(a){return this._data[a+this._source.startIndex]},appendData:appendDataSimply},'arrayRows_row':{pure:!0,count:function(){var a=this._data[0];return a?Math.max(0,a.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;var c=[];var b=this._data;for(var a=0;a<b.length;a++){var f=b[a];c.push(f?f[e]:null)}return c},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},'objectRows':{pure:!0,count:countSimply,getItem:getItemSimply,appendData:appendDataSimply},'keyedColumns':{pure:!0,count:function(){var b=this._source.dimensionsDefine[0].name;var a=this._data[b];return a?a.length:0},getItem:function(f){var c=[];var b=this._source.dimensionsDefine;for(var a=0;a<b.length;a++){var e=this._data[b[a].name];c.push(e?e[f]:null)}return c},appendData:function(b){var a=this._data;each$1(b,function(e,f){var g=a[f]||(a[f]=[]);for(var c=0;c<(e||[]).length;c++){g.push(e[c])}})}},'original':{count:countSimply,getItem:getItemSimply,appendData:appendDataSimply},'typedArray':{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(c,a){c=c-this._offset;a=a||[];var e=this._dimSize*c;for(var b=0;b<this._dimSize;b++){a[b]=this._data[e+b]}return a},appendData:function(b){if(a){assert$1(isTypedArray(b),'Added data must be TypedArray if data in initialization is TypedArray')}this._data=b},clean:function(){this._offset+=this.count();this._data=null}}};function countSimply(){return this._data.length}function getItemSimply(a){return this._data[a]}function appendDataSimply(b){for(var a=0;a<b.length;a++){this._data.push(b[a])}}var ld={arrayRows:getRawValueSimply,objectRows:function(a,e,b,c){return b!=null?a[c]:a},keyedColumns:getRawValueSimply,original:function(c,e,b,f){var a=getDataItemValue(c);return b==null||!(a instanceof Array)?a:a[b]},typedArray:getRawValueSimply};function getRawValueSimply(a,c,b,e){return b!=null?a[b]:a}var gi={arrayRows:getDimValueSimply,objectRows:function(b,a,c,e){return converDataValue(b[a],this._dimensionInfos[a])},keyedColumns:getDimValueSimply,original:function(a,e,f,c){var b=a&&(a.value==null?a:a.value);if(!this._rawData.pure&&isDataItemOption(a)){this.hasItemOption=!0}return converDataValue(b instanceof Array?b[c]:b,this._dimensionInfos[e])},typedArray:function(a,e,c,b){return a[b]}};function getDimValueSimply(a,c,e,b){return converDataValue(a[b],this._dimensionInfos[c])}function converDataValue(a,b){var e=b&&b.type;if(e==='ordinal'){var c=b&&b.ordinalMeta;return c?c.parseAndCollect(a):a}if(e==='time'&&typeof a!=='number'&&a!=null&&a!=='-'){a=+parseDate(a)}return a==null||a===''?NaN:+a}function retrieveRawValue(a,c,i){if(!a){return}var e=a.getRawDataItem(c);if(e==null){return}var h=a.getProvider().getSource().sourceFormat;var g;var f;var b=a.getDimensionInfo(i);if(b){g=b.name;f=b.index}return ld[h](e,c,f,g)}function retrieveRawAttr(c,e,f){if(!c){return}var b=c.getProvider().getSource().sourceFormat;if(b!==aP&&b!==cx){return}var a=c.getRawDataItem(e);if(b===aP&&!isObject$1(a)){a=null}if(a){return a[f]}}var j2=/\{@(.+?)\}/g;var eq={getDataParams:function(a,e){var b=this.getData(e);var n=this.getRawValue(a,e);var k=b.getRawIndex(a);var p=b.getName(a);var o=b.getRawDataItem(a);var i=b.getItemVisual(a,'color');var l=b.getItemVisual(a,'borderColor');var g=this.ecModel.getComponent('tooltip');var j=g&&g.get('renderMode');var m=getTooltipRenderMode(j);var h=this.mainType;var f=h==='series';var c=b.userOutput;return {componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:p,dataIndex:k,data:o,dataType:e,value:n,color:i,borderColor:l,dimensionNames:c?c.dimensionNames:null,encode:c?c.encode:null,marker:getTooltipMarker({color:i,renderMode:m}),$vars:['seriesName','name','value']}},getFormattedLabel:function(e,b,h,f,g){b=b||'normal';var i=this.getData(h);var j=i.getItemModel(e);var a=this.getDataParams(e,h);if(f!=null&&a.value instanceof Array){a.value=a.value[f]}var c=j.get(b==='normal'?[g||'label','formatter']:[b,g||'label','formatter']);if(typeof c==='function'){a.status=b;a.dimensionIndex=f;return c(a)}else {if(typeof c==='string'){var k=formatTpl(c,a);return k.replace(j2,function(j,a){var c=a.length;if(a.charAt(0)==='['&&a.charAt(c-1)===']'){a=+a.slice(1,c-1)}return retrieveRawValue(i,e,a)})}}},getRawValue:function(b,a){return retrieveRawValue(this.getData(a),b)},formatTooltip:function(){}};function createTask(a){return new Task(a)}function Task(a){a=a||{};this._reset=a.reset;this._plan=a.plan;this._count=a.count;this._onDirty=a.onDirty;this._dirty=!0;this.context}var aE=Task.prototype;aE.perform=function(b){var c=this._upstream;var k=b&&b.skip;if(this._dirty&&c){var o=this.context;o.data=o.outputData=c.context.outputData}if(this.__pipeline){this.__pipeline.currentTask=this}var i;if(this._plan&&!k){i=this._plan(this.context)}var r=normalizeModBy(this._modBy);var q=this._modDataCount||0;var h=normalizeModBy(b&&b.modBy);var f=b&&b.modDataCount||0;if(r!==h||q!==f){i='reset'}function normalizeModBy(a){!(a>=1)&&(a=1);return a}var m;if(this._dirty||i==='reset'){this._dirty=!1;m=reset(this,k)}this._modBy=h;this._modDataCount=f;var p=b&&b.step;if(c){if(a){assert$1(c._outputDueEnd!=null)}this._dueEnd=c._outputDueEnd}else {if(a){assert$1(!this._progress||this._count)}this._dueEnd=this._count?this._count(this.context):Infinity}if(this._progress){var j=this._dueIndex;var e=Math.min(p!=null?this._dueIndex+p:Infinity,this._dueEnd);if(!k&&(m||j<e)){var g=this._progress;if(isArray(g)){for(var l=0;l<g.length;l++){doProgress(this,g[l],j,e,h,f)}}else {doProgress(this,g,j,e,h,f)}}this._dueIndex=e;var n=this._settedOutputEnd!=null?this._settedOutputEnd:e;if(a){assert$1(n>=this._outputDueEnd)}this._outputDueEnd=n}else {this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd}return this.unfinished()};var it=function(){var f;var a;var c;var b;var e;var g={reset:function(k,j,i,h){a=k;f=j;c=i;b=h;e=Math.ceil(b/c);g.next=c>1&&b>0?modNext:sequentialNext}};return g;function sequentialNext(){return a<f?a++:null}function modNext(){var g=a%e*c+Math.ceil(a/e);var h=a>=f?null:g<b?g:a;a++;return h}}();aE.dirty=function(){this._dirty=!0;this._onDirty&&this._onDirty(this.context)};function doProgress(a,f,b,c,g,e){it.reset(b,c,g,e);a._callingProgress=f;a._callingProgress({start:b,end:c,count:c-b,next:it.next},a.context)}function reset(a,f){a._dueIndex=a._outputDueEnd=a._dueEnd=0;a._settedOutputEnd=null;var b;var c;if(!f&&a._reset){b=a._reset(a.context);if(b&&b.progress){c=b.forceFirstProgress;b=b.progress}if(isArray(b)&&!b.length){b=null}}a._progress=b;a._modBy=a._modDataCount=null;var e=a._downstream;e&&e.dirty();return c}aE.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd};aE.pipe=function(b){if(a){assert$1(b&&!b._disposed&&b!==this)}if(this._downstream!==b||this._dirty){this._downstream=b;b._upstream=this;b.dirty()}};aE.dispose=function(){if(this._disposed){return}this._upstream&&(this._upstream._downstream=null);this._downstream&&(this._downstream._upstream=null);this._dirty=!1;this._disposed=!0};aE.getUpstream=function(){return this._upstream};aE.getDownstream=function(){return this._downstream};aE.setOutputEnd=function(a){this._outputDueEnd=this._settedOutputEnd=a};var ci=makeInner();var l=g.extend({type:'series.__base__',seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:'itemStyle.color',visualBorderColorAccessPath:'itemStyle.borderColor',layoutMode:null,init:function(e,f,c,g){this.seriesIndex=this.componentIndex;this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset});this.dataTask.context={model:this};this.mergeDefaultAndTheme(e,c);prepareSource(this);var b=this.getInitialData(e,c);wrapData(b,this);this.dataTask.context.data=b;if(a){assert$1(b,'getInitialData returned invalid data.')}ci(this).dataBeforeProcessed=b;autoSeriesName(this)},mergeDefaultAndTheme:function(a,f){var b=this.layoutMode;var e=b?getLayoutParams(a):{};var c=this.subType;if(g.hasClass(c)){c+='Series'}merge(a,f.getTheme().get(this.subType));merge(a,this.getDefaultOption());defaultEmphasis(a,'label',['show']);this.fillDataTextStyle(a.data);if(b){mergeLayoutParam(a,e,b)}},mergeOption:function(a,e){a=merge(this.option,a,!0);this.fillDataTextStyle(a.data);var c=this.layoutMode;if(c){mergeLayoutParam(this.option,a,c)}prepareSource(this);var b=this.getInitialData(a,e);wrapData(b,this);this.dataTask.dirty();this.dataTask.context.data=b;ci(this).dataBeforeProcessed=b;autoSeriesName(this)},fillDataTextStyle:function(a){if(a&&!isTypedArray(a)){var c=['show'];for(var b=0;b<a.length;b++){if(a[b]&&a[b].label){defaultEmphasis(a[b],'label',c)}}}},getInitialData:function(){},appendData:function(a){var b=this.getRawData();b.appendData(a.data)},getData:function(a){var c=getCurrentTask(this);if(c){var b=c.context.data;return a==null?b:b.getLinkedData(a)}else {return ci(this).data}},setData:function(a){var b=getCurrentTask(this);if(b){var c=b.context;if(c.data!==a&&b.modifyOutputEnd){b.setOutputEnd(a.count())}c.outputData=a;if(b!==this.dataTask){c.data=a}}ci(this).data=a},getSource:function(){return getSource(this)},getRawData:function(){return ci(this).dataBeforeProcessed},getBaseAxis:function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},formatTooltip:function(f,k,x,b){var s=this;b=b||'html';var v=b==='html'?'<br/>':'\n';var o=b==='richText';var g={};var i=0;function formatArrayValue(m){var e=reduce(m,function(e,h,g){var a=c.getDimensionInfo(g);return e|=a&&a.tooltip!==!1&&a.displayName!=null},0);var l=[];h.length?each$1(h,function(a){setEachItem(retrieveRawValue(c,f,a),a)}):each$1(m,setEachItem);function setEachItem(n,u){var h=c.getDimensionInfo(u);if(!h||h.otherDims.tooltip===!1){return}var q=h.type;var p='sub'+s.seriesIndex+'at'+i;var j=getTooltipMarker({color:a,type:'subItem',renderMode:b,markerId:p});var t=typeof j==='string'?j:j.content;var r=(e?t+encodeHTML(h.displayName||'-')+': ':'')+encodeHTML(q==='ordinal'?n+'':q==='time'?k?'':formatTime('yyyy/MM/dd hh:mm:ss',n):addCommas(n));r&&l.push(r);if(o){g[p]=a;++i}}var j=e?o?'\n':'<br/>':'';var n=j+l.join(j||', ');return {renderMode:b,content:n,style:g}}function formatSingleValue(a){return {renderMode:b,content:encodeHTML(addCommas(a)),style:g}}var c=this.getData();var h=c.mapDimension('defaultedTooltip',!0);var l=h.length;var j=this.getRawValue(f);var p=isArray(j);var a=c.getItemVisual(f,'color');if(isObject$1(a)&&a.colorStops){a=(a.colorStops[0]||{}).color}a=a||'transparent';var u=l>1||p&&!l?formatArrayValue(j):l?formatSingleValue(retrieveRawValue(c,f,h[0])):formatSingleValue(p?j[0]:j);var n=u.content;var r=s.seriesIndex+'at'+i;var m=getTooltipMarker({color:a,type:'item',renderMode:b,markerId:r});g[r]=a;++i;var t=c.getName(f);var e=this.name;if(!isNameSpecified(this)){e=''}e=e?encodeHTML(e)+(!k?v:': '):'';var q=typeof m==='string'?m:m.content;var w=!k?e+q+(t?encodeHTML(t)+': '+n:n):q+e+n;return {html:w,markers:g}},isAnimationEnabled:function(){if(f.node){return !1}var a=this.getShallow('animation');if(a){if(this.getData().count()>this.getShallow('animationThreshold')){a=!1}}return a},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,c,b){var f=this.ecModel;var a=d9.getColorFromPalette.call(this,e,c,b);if(!a){a=f.getColorFromPalette(e,c,b)}return a},coordDimToDataDim:function(a){return this.getRawData().mapDimension(a,!0)},getProgressive:function(){return this.get('progressive')},getProgressiveThreshold:function(){return this.get('progressiveThreshold')},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});mixin(l,eq);mixin(l,d9);function autoSeriesName(a){var b=a.name;if(!isNameSpecified(a)){a.name=getSeriesAutoName(a)||b}}function getSeriesAutoName(c){var b=c.getRawData();var e=b.mapDimension('seriesName',!0);var a=[];each$1(e,function(f){var e=b.getDimensionInfo(f);e.displayName&&a.push(e.displayName)});return a.join(' ')}function dataTaskCount(a){return a.model.getRawData().count()}function dataTaskReset(b){var a=b.model;a.setData(a.getRawData().cloneShallow());return dataTaskProgress}function dataTaskProgress(b,a){if(b.end>a.outputData.count()){a.model.getRawData().cloneShallow(a.outputData)}}function wrapData(a,b){each$1(a.CHANGABLE_METHODS,function(c){a.wrapMethod(c,curry(onDataSelfChange,b))})}function onDataSelfChange(b){var a=getCurrentTask(b);if(a){a.setOutputEnd(this.count())}}function getCurrentTask(b){var e=(b.ecModel||{}).scheduler;var f=e&&e.getPipeline(b.uid);if(f){var a=f.currentTask;if(a){var c=a.agentStubMap;if(c){a=c.get(b.uid)}}return a}}var W=function(){this.group=new b();this.uid=getUID('viewComponent')};W.prototype={constructor:W,init:function(a,b){},render:function(a,b,e,c){},dispose:function(){},filterForExposedEvent:null};var ey=W.prototype;ey.updateView=ey.updateLayout=ey.updateVisual=function(a,b,e,c){};enableClassExtend(W);enableClassManagement(W,{registerWhenExtend:!0});var bh=function(){var a=makeInner();return function(e){var b=a(e);var c=e.pipelineContext;var g=b.large;var f=b.progressiveRender;var i=b.large=c.large;var h=b.progressiveRender=c.progressiveRender;return !!(g^i||f^h)&&'reset'}};var iJ=makeInner();var lT=bh();function Chart(){this.group=new b();this.uid=getUID('viewChart');this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset});this.renderTask.context={view:this}}Chart.prototype={type:'chart',init:function(a,b){},render:function(a,b,e,c){},highlight:function(a,c,e,b){toggleHighlight(a.getData(),b,'emphasis')},downplay:function(a,c,e,b){toggleHighlight(a.getData(),b,'normal')},remove:function(a,b){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var e2=Chart.prototype;e2.updateView=e2.updateLayout=e2.updateVisual=function(a,b,e,c){this.render(a,b,e,c)};function elSetState(a,e,c){if(a){a.trigger(e,c);if(a.isGroup&&!isHighDownDispatcher(a)){for(var b=0,f=a.childCount();b<f;b++){elSetState(a.childAt(b),e,c)}}}}function toggleHighlight(b,a,f){var e=queryDataIndex(b,a);var c=a&&a.highlightKey!=null?getHighlightDigit(a.highlightKey):null;if(e!=null){each$1(normalizeToArray(e),function(e){elSetState(b.getItemGraphicEl(e),f,c)})}else {b.eachItemGraphicEl(function(e){elSetState(e,f,c)})}}enableClassExtend(Chart,['dispose']);enableClassManagement(Chart,{registerWhenExtend:!0});Chart.markUpdateMethod=function(b,a){iJ(b).updateMethod=a};function renderTaskPlan(a){return lT(a.model)}function renderTaskReset(a){var f=a.model;var i=a.ecModel;var j=a.api;var e=a.payload;var h=f.pipelineContext.progressiveRender;var g=a.view;var b=e&&iJ(e).updateMethod;var c=h?'incrementalPrepareRender':b&&g[b]?b:'render';if(c!=='render'){g[c](f,i,j,e)}return kF[c]}var kF={incrementalPrepareRender:{progress:function(b,a){a.view.incrementalRender(b,a.model,a.ecModel,a.api,a.payload)}},render:{forceFirstProgress:!0,progress:function(b,a){a.view.render(a.model,a.ecModel,a.api,a.payload)}}};var cT='\x00__throttleOriginMethod';var ja='\x00__throttleRate';var hm='\x00__throttleType';function throttle(m,e,l){var c;var h=0;var i=0;var a=null;var f;var j;var k;var b;e=e||0;function exec(){i=(new Date()).getTime();a=null;m.apply(j,k||[])}var g=function(){c=(new Date()).getTime();j=this;k=arguments;var n=b||e;var g=b||l;b=null;f=c-(g?h:i)-n;clearTimeout(a);if(g){a=setTimeout(exec,n)}else {if(f>=0){exec()}else {a=setTimeout(exec,-f)}}h=c};g.clear=function(){if(a){clearTimeout(a);a=null}};g.debounceNextCall=function(a){b=a};return g}function createOrUpdate(g,f,c,b){var a=g[f];if(!a){return}var e=a[cT]||a;var h=a[hm];var i=a[ja];if(i!==c||h!==b){if(c==null||!b){return g[f]=e}a=g[f]=throttle(e,c,b==='debounce');a[cT]=e;a[hm]=b;a[ja]=c}return a}function clear(c,b){var a=c[b];if(a&&a[cT]){c[b]=a[cT]}}var mU={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,g){var b=a.getData();var f=(a.visualColorAccessPath||'itemStyle.color').split('.');var c=a.get(f)||a.getColorFromPalette(a.name,null,g.getSeriesCount());b.setVisual('color',c);var e=(a.visualBorderColorAccessPath||'itemStyle.borderColor').split('.');var h=a.get(e);b.setVisual('borderColor',h);if(!g.isSeriesFiltered(a)){if(typeof c==='function'&&!(c instanceof X)){b.each(function(e){b.setItemVisual(e,'color',c(a.getDataParams(e)))})}var i=function(b,c){var i=b.getItemModel(c);var j=i.get(f,!0);var h=i.get(e,!0);if(j!=null){b.setItemVisual(c,'color',j)}if(h!=null){b.setItemVisual(c,'borderColor',h)}};return {dataEach:b.hasItemOption?i:null}}}};var aq={legend:{selector:{all:'',inverse:''}},toolbox:{brush:{title:{rect:'',polygon:'',lineX:'',lineY:'',keep:'',clear:''}},dataView:{title:'',lang:['','','']},dataZoom:{title:{zoom:'',back:''}},magicType:{title:{line:'',bar:'',stack:'',tiled:''}},restore:{title:''},saveAsImage:{title:'',lang:['']}},series:{typeNames:{pie:'',bar:'',line:'',scatter:'',effectScatter:'',radar:'',tree:'',treemap:'',boxplot:'',candlestick:'K',k:'K',heatmap:'',map:'',parallel:'',lines:'',graph:'',sankey:'',funnel:'',gauge:'',pictorialBar:'',themeRiver:'',sunburst:''}},aria:{general:{withTitle:'\u201c{title}\u201d',withoutTitle:''},series:{single:{prefix:'',withName:'{seriesType}{seriesName}',withoutName:'{seriesType}'},multiple:{prefix:'{seriesCount}',withName:'{seriesId}{seriesName}{seriesType}',withoutName:'{seriesId}{seriesType}',separator:{middle:'',end:''}}},data:{allData:'\u2014\u2014',partialData:'{displayCnt}\u2014\u2014',withName:'{name}{value}',withoutName:'{value}',separator:{middle:'',end:''}}}};var oJ=function(i,e){var a=e.getModel('aria');if(!a.get('show')){return}else {if(a.get('description')){i.setAttribute('aria-label',a.get('description'));return}}var b=0;e.eachSeries(function(a,c){++b},this);var f=a.get('data.maxCount')||10;var k=a.get('series.maxCount')||10;var j=Math.min(b,k);var c;if(b<1){return}else {var h=getTitle();if(h){c=replace(getConfig('general.withTitle'),{title:h})}else {c=getConfig('general.withoutTitle')}var g=[];var l=b>1?'series.multiple.prefix':'series.single.prefix';c+=replace(getConfig(l),{seriesCount:b});e.eachSeries(function(c,q){if(q<j){var a;var o=c.get('name');var m='series.'+(b>1?'multiple':'single')+'.';a=getConfig(o?m+'withName':m+'withoutName');a=replace(a,{seriesId:c.seriesIndex,seriesName:c.get('name'),seriesType:getSeriesTypeName(c.subType)});var h=c.getData();window.data=h;if(h.count()>f){a+=replace(getConfig('data.partialData'),{displayCnt:f})}else {a+=getConfig('data.allData')}var l=[];for(var k=0;k<h.count();k++){if(k<f){var n=h.getName(k);var p=retrieveRawValue(h,k);l.push(replace(n?getConfig('data.withName'):getConfig('data.withoutName'),{name:n,value:p}))}}a+=l.join(getConfig('data.separator.middle'))+getConfig('data.separator.end');g.push(a)}});c+=g.join(getConfig('series.multiple.separator.middle'))+getConfig('series.multiple.separator.end');i.setAttribute('aria-label',c)}function replace(b,c){if(typeof b!=='string'){return b}var a=b;each$1(c,function(f,g){a=a.replace(new RegExp('\\{\\s*'+g+'\\s*\\}','g'),f)});return a}function getConfig(h){var f=a.get(h);if(f==null){var g=h.split('.');var b=aq.aria;for(var c=0;c<g.length;++c){b=b[g[c]]}return b}else {return f}}function getTitle(){var a=e.getModel('title').option;if(a&&a.length){a=a[0]}return a&&a.text}function getSeriesTypeName(a){return aq.series.typeNames[a]||''}};var dM=Math.PI;var lx=function(f,a){a=a||{};defaults(a,{text:'loading',color:'#c23531',textColor:'#000',maskColor:'rgba(255, 255, 255, 0.8)',zlevel:0});var i=new h({style:{fill:a.maskColor},zlevel:a.zlevel,z:10000});var e=new fR({shape:{startAngle:-dM/2,endAngle:-dM/2+0.1,r:10},style:{stroke:a.color,lineCap:'round',lineWidth:5},zlevel:a.zlevel,z:10001});var g=new h({style:{fill:'none',text:a.text,textPosition:'right',textDistance:10,textFill:a.textColor},zlevel:a.zlevel,z:10001});e.animateShape(!0).when(1000,{endAngle:dM*3/2}).start('circularInOut');e.animateShape(!0).when(1000,{startAngle:dM*3/2}).delay(300).start('circularInOut');var c=new b();c.add(e);c.add(g);c.add(i);c.resize=function(){var c=f.getWidth()/2;var h=f.getHeight()/2;e.setShape({cx:c,cy:h});var b=e.shape.r;g.setShape({x:c-b,y:h-b,width:b*2,height:b*2});i.setShape({x:0,y:0,width:f.getWidth(),height:f.getHeight()})};c.resize();return c};function Scheduler(c,e,a,b){this.ecInstance=c;this.api=e;this.unfinished;var a=this._dataProcessorHandlers=a.slice();var b=this._visualHandlers=b.slice();this._allHandlers=a.concat(b);this._stageTaskMap=createHashMap()}var N=Scheduler.prototype;N.restoreData=function(a,b){a.restoreData(b);this._stageTaskMap.each(function(e){var c=e.overallTask;c&&c.dirty()})};N.getPerformArgs=function(e,h){if(!e.__pipeline){return}var a=this._pipelineMap.get(e.__pipeline.id);var b=a.context;var g=!h&&a.progressiveEnabled&&(!b||b.progressiveRender)&&e.__idxInPipeline>a.blockIndex;var f=g?a.step:null;var c=b&&b.modDataCount;var i=c!=null?Math.ceil(c/f):null;return {step:f,modBy:i,modDataCount:c}};N.getPipeline=function(a){return this._pipelineMap.get(a)};N.updateStreamModes=function(a,i){var b=this._pipelineMap.get(a.uid);var h=a.getData();var c=h.count();var e=b.progressiveEnabled&&i.incrementalPrepareRender&&c>=b.threshold;var g=a.get('large')&&c>=a.get('largeThreshold');var f=a.get('progressiveChunkMode')==='mod'?c:null;a.pipelineContext=b.context={progressiveRender:e,modDataCount:f,large:g}};N.restorePipelines=function(c){var a=this;var b=a._pipelineMap=createHashMap();c.eachSeries(function(e){var f=e.getProgressive();var g=e.uid;b.set(g,{id:g,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:f&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(f||700),count:0});pipe(a,e,e.dataTask)})};N.prepareStageTasks=function(){var a=this._stageTaskMap;var b=this.ecInstance.getModel();var c=this.api;each$1(this._allHandlers,function(e){var f=a.get(e.uid)||a.set(e.uid,[]);e.reset&&createSeriesStageTask(this,e,f,b,c);e.overallReset&&createOverallStageTask(this,e,f,b,c)},this)};N.prepareView=function(e,c,f,g){var a=e.renderTask;var b=a.context;b.model=c;b.ecModel=f;b.api=g;a.__block=!e.incrementalPrepareRender;pipe(this,c,a)};N.performDataProcessorTasks=function(a,b){performStageTasks(this,this._dataProcessorHandlers,a,b,{block:!0})};N.performVisualTasks=function(a,b,c){performStageTasks(this,this._visualHandlers,a,b,c)};function performStageTasks(b,f,g,e,a){a=a||{};var c;each$1(f,function(i,o){if(a.visualType&&a.visualType!==i.visualType){return}var j=b._stageTaskMap.get(i.uid);var l=j.seriesTaskMap;var h=j.overallTask;if(h){var k;var m=h.agentStubMap;m.each(function(c){if(needSetDirty(a,c)){c.dirty();k=!0}});k&&h.dirty();hx(h,e);var n=b.getPerformArgs(h,a.block);m.each(function(c){c.perform(n)});c|=h.perform(n)}else {if(l){l.each(function(h,k){if(needSetDirty(a,h)){h.dirty()}var j=b.getPerformArgs(h,a.block);j.skip=!i.performRawSeries&&g.isSeriesFiltered(h.context.model);hx(h,e);c|=h.perform(j)})}}});function needSetDirty(c,h){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(h.__pipeline.id))}b.unfinished|=c}N.performSeriesTasks=function(b){var a;b.eachSeries(function(c){a|=c.dataTask.perform()});this.unfinished|=a};N.plan=function(){this._pipelineMap.each(function(b){var a=b.tail;do{if(a.__block){b.blockIndex=a.__idxInPipeline;break}a=a.getUpstream()}while(a)})};var hx=N.updatePayload=function(b,a){a!=='remain'&&(b.context.payload=a)};function createSeriesStageTask(e,a,f,c,i){var b=f.seriesTaskMap||(f.seriesTaskMap=createHashMap());var h=a.seriesType;var g=a.getTargetSeries;if(a.createOnAllSeries){c.eachRawSeries(create)}else {if(h){c.eachRawSeriesByType(h,create)}else {if(g){g(c,i).each(create)}}}function create(g){var h=g.uid;var j=b.get(h)||b.set(h,createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));j.context={model:g,ecModel:c,api:i,useClearVisual:a.isVisual&&!a.isLayout,plan:a.plan,reset:a.reset,scheduler:e};pipe(e,g,j)}var j=e._pipelineMap;b.each(function(h,g){if(!j.get(g)){h.dispose();b.removeKey(g)}})}function createOverallStageTask(g,c,h,e,k){var a=h.overallTask=h.overallTask||createTask({reset:overallTaskReset});a.context={ecModel:e,api:k,overallReset:c.overallReset,scheduler:g};var b=a.agentStubMap=a.agentStubMap||createHashMap();var j=c.seriesType;var i=c.getTargetSeries;var f=!0;var l=c.modifyOutputEnd;if(j){e.eachRawSeriesByType(j,createStub)}else {if(i){i(e,k).each(createStub)}else {f=!1;each$1(e.getSeries(),createStub)}}function createStub(j){var m=j.uid;var i=b.get(m);if(!i){i=b.set(m,createTask({reset:stubReset,onDirty:stubOnDirty}));a.dirty()}i.context={model:j,overallProgress:f,modifyOutputEnd:l};i.agent=a;i.__block=f;pipe(g,j,i)}var m=g._pipelineMap;b.each(function(i,f){if(!m.get(f)){i.dispose();a.dirty();b.removeKey(f)}})}function overallTaskReset(a){a.overallReset(a.ecModel,a.api,a.payload)}function stubReset(a,b){return a.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty();this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(a){return a.plan&&a.plan(a.model,a.ecModel,a.api,a.payload)}function seriesTaskReset(a){if(a.useClearVisual){a.data.clearAllVisual()}var b=a.resetDefines=normalizeToArray(a.reset(a.model,a.ecModel,a.api,a.payload));return b.length>1?map(b,function(c,b){return makeSeriesTaskProgress(b)}):jG}var jG=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(a){return function(c,f){var g=f.data;var b=f.resetDefines[a];if(b&&b.dataEach){for(var e=c.start;e<c.end;e++){b.dataEach(g,e)}}else {if(b&&b.progress){b.progress(c,g)}}}}function seriesTaskCount(a){return a.data.count()}function pipe(f,c,b){var e=c.uid;var a=f._pipelineMap.get(e);!a.head&&(a.head=b);a.tail&&a.tail.pipe(b);a.tail=b;b.__idxInPipeline=a.count++;b.__pipeline=a}Scheduler.wrapStageHandler=function(a,b){if(isFunction$1(a)){a={overallReset:a,seriesType:detectSeriseType(a)}}a.uid=getUID('stageHandler');b&&(a.visualType=b);return a};function detectSeriseType(a){c6=null;try{a(b1,iA)}catch(o3){}return c6}var b1={};var iA={};var c6;mockMethods(b1,eV);mockMethods(iA,ExtensionAPI);b1.eachSeriesByType=b1.eachRawSeriesByType=function(a){c6=a};b1.eachComponent=function(a){if(a.mainType==='series'&&a.subType){c6=a.subType}};function mockMethods(a,c){for(var b in c.prototype){a[b]=noop}}var ir=['#37A2DA','#32C5E9','#67E0E3','#9FE6B8','#FFDB5C','#ff9f7f','#fb7293','#E062AE','#E690D1','#e7bcf3','#9d96f5','#8378EA','#96BFFF'];var nc={color:ir,colorLayer:[['#37A2DA','#ffd85c','#fd7b5f'],['#37A2DA','#67E0E3','#FFDB5C','#ff9f7f','#E062AE','#9d96f5'],['#37A2DA','#32C5E9','#9FE6B8','#FFDB5C','#ff9f7f','#fb7293','#e7bcf3','#8378EA','#96BFFF'],ir]};var u='#eee';var c3=function(){return {axisLine:{lineStyle:{color:u}},axisTick:{lineStyle:{color:u}},axisLabel:{textStyle:{color:u}},splitLine:{lineStyle:{type:'dashed',color:'#aaa'}},splitArea:{areaStyle:{color:u}}}};var eP=['#dd6b66','#759aa0','#e69d87','#8dc1a9','#ea7e53','#eedd78','#73a373','#73b9bc','#7289ab','#91ca8c','#f49f42'];var i6={color:eP,backgroundColor:'#333',tooltip:{axisPointer:{lineStyle:{color:u},crossStyle:{color:u}}},legend:{textStyle:{color:u}},textStyle:{color:u},title:{textStyle:{color:u}},toolbox:{iconStyle:{normal:{borderColor:u}}},dataZoom:{textStyle:{color:u}},visualMap:{textStyle:{color:u}},timeline:{lineStyle:{color:u},itemStyle:{normal:{color:eP[1]}},label:{normal:{textStyle:{color:u}}},controlStyle:{normal:{color:u,borderColor:u}}},timeAxis:c3(),logAxis:c3(),valueAxis:c3(),categoryAxis:c3(),line:{symbol:'circle'},graph:{color:eP},gauge:{title:{textStyle:{color:u}}},candlestick:{itemStyle:{normal:{color:'#FD1050',color0:'#0CF49B',borderColor:'#FD1050',borderColor0:'#0CF49B'}}}};i6.categoryAxis.splitLine.show=!1;g.extend({type:'dataset',defaultOption:{seriesLayoutBy:gb,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){detectSourceFormat(this)}});W.extend({type:'dataset'});var n5=Path.extend({type:'ellipse',shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(f,g){var j=0.5522848;var a=g.cx;var b=g.cy;var c=g.rx;var e=g.ry;var h=c*j;var i=e*j;f.moveTo(a-c,b);f.bezierCurveTo(a-c,b-i,a-h,b-e,a,b-e);f.bezierCurveTo(a+h,b-e,a+c,b-i,a+c,b);f.bezierCurveTo(a+c,b+i,a+h,b+e,a,b+e);f.bezierCurveTo(a-h,b+e,a-c,b+i,a-c,b);f.closePath()}});var av=/[\s,]+/;function parseXML(a){if(isString(a)){var b=new DOMParser();a=b.parseFromString(a,'text/xml')}if(a.nodeType===9){a=a.firstChild}while(a.nodeName.toLowerCase()!=='svg'||a.nodeType!==1){a=a.nextSibling}return a}function SVGParser(){this._defs={};this._root=null;this._isDefine=!1;this._isText=!1}SVGParser.prototype.parse=function(o,f){f=f||{};var g=parseXML(o);if(!g){throw new Error('Illegal svg')}var a=new b();this._root=a;var n=g.getAttribute('viewBox')||'';var e=parseFloat(g.getAttribute('width')||f.width);var c=parseFloat(g.getAttribute('height')||f.height);isNaN(e)&&(e=null);isNaN(c)&&(c=null);parseAttributes(g,a,null,!0);var l=g.firstChild;while(l){this._parseNode(l,a);l=l.nextSibling}var k;var j;if(n){var i=trim(n).split(av);if(i.length>=4){k={x:parseFloat(i[0]||0),y:parseFloat(i[1]||0),width:parseFloat(i[2]),height:parseFloat(i[3])}}}if(k&&e!=null&&c!=null){j=makeViewBoxTransform(k,e,c);if(!f.ignoreViewBox){var m=a;a=new b();a.add(m);m.scale=j.scale.slice();m.position=j.position.slice()}}if(!f.ignoreRootClip&&e!=null&&c!=null){a.setClipPath(new h({shape:{x:0,y:0,width:e,height:c}}))}return {root:a,width:e,height:c,viewBoxRect:k,viewBoxTransform:j}};SVGParser.prototype._parseNode=function(c,g){var b=c.nodeName.toLowerCase();if(b==='defs'){this._isDefine=!0}else {if(b==='text'){this._isText=!0}}var f;if(this._isDefine){var e=lL[b];if(e){var i=e.call(this,c);var h=c.getAttribute('id');if(h){this._defs[h]=i}}}else {var e=mQ[b];if(e){f=e.call(this,c,g);g.add(f)}}var a=c.firstChild;while(a){if(a.nodeType===1){this._parseNode(a,f)}if(a.nodeType===3&&this._isText){this._parseText(a,f)}a=a.nextSibling}if(b==='defs'){this._isDefine=!1}else {if(b==='text'){this._isText=!1}}};SVGParser.prototype._parseText=function(b,f){if(b.nodeType===1){var h=b.getAttribute('dx')||0;var i=b.getAttribute('dy')||0;this._textX+=parseFloat(h);this._textY+=parseFloat(i)}var a=new e({style:{text:b.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});inheritStyle(f,a);parseAttributes(b,a,this._defs);var c=a.style.fontSize;if(c&&c<9){a.style.fontSize=9;a.scale=a.scale||[1,1];a.scale[0]*=c/9;a.scale[1]*=c/9}var g=a.getBoundingRect();this._textX+=g.width;f.add(a);return a};var mQ={'g':function(e,c){var a=new b();inheritStyle(c,a);parseAttributes(e,a,this._defs);return a},'rect':function(a,c){var b=new h();inheritStyle(c,b);parseAttributes(a,b,this._defs);b.setShape({x:parseFloat(a.getAttribute('x')||0),y:parseFloat(a.getAttribute('y')||0),width:parseFloat(a.getAttribute('width')||0),height:parseFloat(a.getAttribute('height')||0)});return b},'circle':function(a,c){var b=new ao();inheritStyle(c,b);parseAttributes(a,b,this._defs);b.setShape({cx:parseFloat(a.getAttribute('cx')||0),cy:parseFloat(a.getAttribute('cy')||0),r:parseFloat(a.getAttribute('r')||0)});return b},'line':function(a,c){var b=new B();inheritStyle(c,b);parseAttributes(a,b,this._defs);b.setShape({x1:parseFloat(a.getAttribute('x1')||0),y1:parseFloat(a.getAttribute('y1')||0),x2:parseFloat(a.getAttribute('x2')||0),y2:parseFloat(a.getAttribute('y2')||0)});return b},'ellipse':function(a,c){var b=new n5();inheritStyle(c,b);parseAttributes(a,b,this._defs);b.setShape({cx:parseFloat(a.getAttribute('cx')||0),cy:parseFloat(a.getAttribute('cy')||0),rx:parseFloat(a.getAttribute('rx')||0),ry:parseFloat(a.getAttribute('ry')||0)});return b},'polygon':function(c,e){var a=c.getAttribute('points');if(a){a=parsePoints(a)}var b=new I({shape:{points:a||[]}});inheritStyle(e,b);parseAttributes(c,b,this._defs);return b},'polyline':function(b,e){var c=new Path();inheritStyle(e,c);parseAttributes(b,c,this._defs);var a=b.getAttribute('points');if(a){a=parsePoints(a)}var f=new L({shape:{points:a||[]}});return f},'image':function(a,c){var b=new ZImage();inheritStyle(c,b);parseAttributes(a,b,this._defs);b.setStyle({image:a.getAttribute('xlink:href'),x:a.getAttribute('x'),y:a.getAttribute('y'),width:a.getAttribute('width'),height:a.getAttribute('height')});return b},'text':function(a,e){var h=a.getAttribute('x')||0;var i=a.getAttribute('y')||0;var f=a.getAttribute('dx')||0;var g=a.getAttribute('dy')||0;this._textX=parseFloat(h)+parseFloat(f);this._textY=parseFloat(i)+parseFloat(g);var c=new b();inheritStyle(e,c);parseAttributes(a,c,this._defs);return c},'tspan':function(a,g){var e=a.getAttribute('x');var f=a.getAttribute('y');if(e!=null){this._textX=parseFloat(e)}if(f!=null){this._textY=parseFloat(f)}var h=a.getAttribute('dx')||0;var i=a.getAttribute('dy')||0;var c=new b();inheritStyle(g,c);parseAttributes(a,c,this._defs);this._textX+=h;this._textY+=i;return c},'path':function(b,c){var e=b.getAttribute('d')||'';var a=createFromString(e);inheritStyle(c,a);parseAttributes(b,a,this._defs);return a}};var lL={'lineargradient':function(a){var c=parseInt(a.getAttribute('x1')||0,10);var f=parseInt(a.getAttribute('y1')||0,10);var e=parseInt(a.getAttribute('x2')||10,10);var g=parseInt(a.getAttribute('y2')||0,10);var b=new aV(c,f,e,g);_parseGradientColorStops(a,b);return b},'radialgradient':function(a){}};function _parseGradientColorStops(f,e){var b=f.firstChild;while(b){if(b.nodeType===1){var a=b.getAttribute('offset');if(a.indexOf('%')>0){a=parseInt(a,10)/100}else {if(a){a=parseFloat(a)}else {a=0}}var c=b.getAttribute('stop-color')||'#000000';e.addColorStop(a,c)}b=b.nextSibling}}function inheritStyle(a,b){if(a&&a.__inheritedStyle){if(!b.__inheritedStyle){b.__inheritedStyle={}}defaults(b.__inheritedStyle,a.__inheritedStyle)}}function parsePoints(e){var b=trim(e).split(av);var c=[];for(var a=0;a<b.length;a+=2){var f=parseFloat(b[a]);var g=parseFloat(b[a+1]);c.push([f,g])}return c}var bq={'fill':'fill','stroke':'stroke','stroke-width':'lineWidth','opacity':'opacity','fill-opacity':'fillOpacity','stroke-opacity':'strokeOpacity','stroke-dasharray':'lineDash','stroke-dashoffset':'lineDashOffset','stroke-linecap':'lineCap','stroke-linejoin':'lineJoin','stroke-miterlimit':'miterLimit','font-family':'fontFamily','font-size':'fontSize','font-style':'fontStyle','font-weight':'fontWeight','text-align':'textAlign','alignment-baseline':'textBaseline'};function parseAttributes(f,b,j,k){var a=b.__inheritedStyle||{};var h=b.type==='text';if(f.nodeType===1){parseTransformAttribute(f,b);extend(a,parseStyleAttribute(f));if(!k){for(var g in bq){if(bq.hasOwnProperty(g)){var i=f.getAttribute(g);if(i!=null){a[bq[g]]=i}}}}}var l=h?'textFill':'fill';var e=h?'textStroke':'stroke';b.style=b.style||new aK();var c=b.style;a.fill!=null&&c.set(l,getPaint(a.fill,j));a.stroke!=null&&c.set(e,getPaint(a.stroke,j));each$1(['lineWidth','opacity','fillOpacity','strokeOpacity','miterLimit','fontSize'],function(e){var g=e==='lineWidth'&&h?'textStrokeWidth':e;a[e]!=null&&c.set(g,parseFloat(a[e]))});if(!a.textBaseline||a.textBaseline==='auto'){a.textBaseline='alphabetic'}if(a.textBaseline==='alphabetic'){a.textBaseline='bottom'}if(a.textAlign==='start'){a.textAlign='left'}if(a.textAlign==='end'){a.textAlign='right'}each$1(['lineDashOffset','lineCap','lineJoin','fontWeight','fontFamily','fontStyle','textAlign','textBaseline'],function(e){a[e]!=null&&c.set(e,a[e])});if(a.lineDash){b.style.lineDash=trim(a.lineDash).split(av)}if(c[e]&&c[e]!=='none'){b[e]=!0}b.__inheritedStyle=a}var n1=/url\(\s*#(.*?)\)/;function getPaint(a,c){var b=c&&a&&a.match(n1);if(b){var f=trim(b[1]);var e=c[f];return e}return a}var lE=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;function parseTransformAttribute(g,h){var e=g.getAttribute('transform');if(e){e=e.replace(/,/g,' ');var b=null;var c=[];e.replace(lE,function(e,b,a){c.push(b,a)});for(var f=c.length-1;f>0;f-=2){var a=c[f];var i=c[f-1];b=b||create$1();switch(i){case 'translate':a=trim(a).split(av);translate(b,b,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case 'scale':a=trim(a).split(av);scale$1(b,b,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case 'rotate':a=trim(a).split(av);rotate(b,b,parseFloat(a[0]));break;case 'skew':a=trim(a).split(av);console.warn('Skew transform is not supported yet');break;case 'matrix':var a=trim(a).split(av);b[0]=parseFloat(a[0]);b[1]=parseFloat(a[1]);b[2]=parseFloat(a[2]);b[3]=parseFloat(a[3]);b[4]=parseFloat(a[4]);b[5]=parseFloat(a[5]);break;}}h.setLocalTransform(b)}}var h_=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseStyleAttribute(g){var f=g.getAttribute('style');var e={};if(!f){return e}var c={};h_.lastIndex=0;var b;while((b=h_.exec(f))!=null){c[b[1]]=b[2]}for(var a in bq){if(bq.hasOwnProperty(a)&&c[a]!=null){e[bq[a]]=c[a]}}return e}function makeViewBoxTransform(a,e,c){var h=e/a.width;var i=c/a.height;var b=Math.min(h,i);var g=[b,b];var f=[-(a.x+a.width/2)*b+e/2,-(a.y+a.height/2)*b+c/2];return {scale:g,position:f}}function parseSVG(c,b){var a=new SVGParser();return a.parse(c,b)}var iS=createHashMap();var cQ={registerMap:function(f,b,e){var c;if(isArray(b)){c=b}else {if(b.svg){c=[{type:'svg',source:b.svg,specialAreas:b.specialAreas}]}else {if(b.geoJson&&!b.features){e=b.specialAreas;b=b.geoJson}c=[{type:'geoJSON',source:b,specialAreas:e}]}}each$1(c,function(g){var c=g.type;c==='geoJson'&&(c=g.type='geoJSON');var h=od[c];if(a){assert$1(h,'Illegal map type: '+c)}h(g)});return iS.set(f,c)},retrieveMap:function(a){return iS.get(a)}};var od={geoJSON:function(b){var a=b.source;b.geoJSON=!isString(a)?a:typeof JSON!=='undefined'&&JSON.parse?JSON.parse(a):(new Function('return ('+a+');'))()},svg:function(a){a.svgXML=parseXML(a.source)}};var bI=assert$1;var t=each$1;var nb=isFunction$1;var cf=isObject$1;var eC=g.parseClassType;var iV='4.5.0';var eR={zrender:'4.1.2'};var jQ=1;var f4=1000;var jp=800;var jq=900;var jr=5000;var gf=1000;var jn=1100;var ge=2000;var gj=3000;var jo=3500;var jx=4000;var jT=5000;var Y={PROCESSOR:{FILTER:f4,SERIES_FILTER:jp,STATISTIC:jr},VISUAL:{LAYOUT:gf,PROGRESSIVE_LAYOUT:jn,GLOBAL:ge,CHART:gj,POST_CHART_LAYOUT:jo,COMPONENT:jx,BRUSH:jT}};var K='__flagInMainProcess';var au='__optionUpdated';var hS=/^[a-zA-Z0-9_]+$/;function createRegisterEventWithLowercaseName(b,a){return function(c,f,e){if(!a&&this._disposed){disposedWarning(this.id);return}c=c&&c.toLowerCase();r.prototype[b].call(this,c,f,e)}}function MessageCenter(){r.call(this)}MessageCenter.prototype.on=createRegisterEventWithLowercaseName('on',!0);MessageCenter.prototype.off=createRegisterEventWithLowercaseName('off',!0);MessageCenter.prototype.one=createRegisterEventWithLowercaseName('one',!0);mixin(MessageCenter,r);function ECharts(g,b,c){c=c||{};if(typeof b==='string'){b=hG[b]}this.id;this.group;this._dom=g;var f='canvas';if(a){f=(typeof window==='undefined'?global:window).__ECHARTS__DEFAULT__RENDERER__||f}var e=this._zr=init$1(g,{renderer:c.renderer||f,devicePixelRatio:c.devicePixelRatio,width:c.width,height:c.height});this._throttledZrFlush=throttle(bind(e.flush,e),17);var b=clone(b);b&&hb(b,!0);this._theme=b;this._chartsViews=[];this._chartsMap={};this._componentsViews=[];this._componentsMap={};this._coordSysMgr=new CoordinateSystemManager();var h=this._api=createExtensionAPI(this);function prioritySortFunc(a,e){return a.__prio-e.__prio}sort(c_,prioritySortFunc);sort(d2,prioritySortFunc);this._scheduler=new Scheduler(this,h,d2,c_);r.call(this,this._ecEventProcessor=new EventProcessor());this._messageCenter=new MessageCenter();this._initEvents();this.resize=bind(this.resize,this);this._pendingActions=[];e.animation.on('frame',this._onframe,this);bindRenderedEvent(e,this);setAsPrimitive(this)}var i=ECharts.prototype;i._onframe=function(){if(this._disposed){return}var a=this._scheduler;if(this[au]){var e=this[au].silent;this[K]=!0;prepare(this);ax.update.call(this);this[K]=!1;this[au]=!1;flushPendingActions.call(this,e);triggerUpdatedEvent.call(this,e)}else {if(a.unfinished){var c=jQ;var b=this._model;var g=this._api;a.unfinished=!1;do{var f=+new Date();a.performSeriesTasks(b);a.performDataProcessorTasks(b);updateStreamModes(this,b);a.performVisualTasks(b);renderSeries(this,this._model,g,'remain');c-=+new Date()-f}while(c>0&&a.unfinished);if(!a.unfinished){this._zr.flush()}}}};i.getDom=function(){return this._dom};i.getZr=function(){return this._zr};i.setOption=function(i,b,e){if(a){bI(!this[K],'`setOption` should not be called during main process.')}if(this._disposed){disposedWarning(this.id);return}var c;if(cf(b)){e=b.lazyUpdate;c=b.silent;b=b.notMerge}this[K]=!0;if(!this._model||b){var g=new OptionManager(this._api);var h=this._theme;var f=this._model=new eV();f.scheduler=this._scheduler;f.init(null,null,h,g)}this._model.setOption(i,gd);if(e){this[au]={silent:c};this[K]=!1}else {prepare(this);ax.update.call(this);this._zr.flush();this[au]=!1;this[K]=!1;flushPendingActions.call(this,c);triggerUpdatedEvent.call(this,c)}};i.setTheme=function(){console.error('ECharts#setTheme() is DEPRECATED in ECharts 3.0')};i.getModel=function(){return this._model};i.getOption=function(){return this._model&&this._model.getOption()};i.getWidth=function(){return this._zr.getWidth()};i.getHeight=function(){return this._zr.getHeight()};i.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1};i.getRenderedCanvas=function(a){if(!f.canvasSupported){return}a=a||{};a.pixelRatio=a.pixelRatio||1;a.backgroundColor=a.backgroundColor||this._model.get('backgroundColor');var b=this._zr;return b.painter.getRenderedCanvas(a)};i.getSvgDataUrl=function(){if(!f.svgSupported){return}var a=this._zr;var b=a.storage.getDisplayList();each$1(b,function(a){a.stopAnimation(!0)});return a.painter.pathToDataUrl()};i.getDataURL=function(a){if(this._disposed){disposedWarning(this.id);return}a=a||{};var c=a.excludeComponents;var e=this._model;var b=[];var f=this;t(c,function(c){e.eachComponent({mainType:c},function(g){var e=f._componentsMap[g.__viewId];if(!e.group.ignore){b.push(e);e.group.ignore=!0}})});var g=this._zr.painter.getType()==='svg'?this.getSvgDataUrl():this.getRenderedCanvas(a).toDataURL('image/'+(a&&a.type||'png'));t(b,function(b){b.group.ignore=!1});return g};i.getConnectedDataURL=function(a){if(this._disposed){disposedWarning(this.id);return}if(!f.canvasSupported){return}var n=this.group;var p=Math.min;var o=Math.max;var i=Infinity;if(cI[n]){var c=i;var e=i;var k=-i;var j=-i;var m=[];var b=a&&a.pixelRatio||1;each$1(a3,function(f,h){if(f.group===n){var g=f.getRenderedCanvas(clone(a));var b=f.getDom().getBoundingClientRect();c=p(b.left,c);e=p(b.top,e);k=o(b.right,k);j=o(b.bottom,j);m.push({dom:g,left:b.left,top:b.top})}});c*=b;e*=b;k*=b;j*=b;var r=k-c;var q=j-e;var g=bu();g.width=r;g.height=q;var l=init$1(g);if(a.connectedBackgroundColor){l.add(new h({shape:{x:0,y:0,width:r,height:q},style:{fill:a.connectedBackgroundColor}}))}t(m,function(f){var g=new ZImage({style:{x:f.left*b-c,y:f.top*b-e,image:f.dom}});l.add(g)});l.refreshImmediately();return g.toDataURL('image/'+(a&&a.type||'png'))}else {return this.getDataURL(a)}};i.convertToPixel=curry(doConvertPixel,'convertToPixel');i.convertFromPixel=curry(doConvertPixel,'convertFromPixel');function doConvertPixel(b,c,j){if(this._disposed){disposedWarning(this.id);return}var h=this._model;var f=this._coordSysMgr.getCoordinateSystems();var i;c=parseFinder(h,c);for(var e=0;e<f.length;e++){var g=f[e];if(g[b]&&(i=g[b](h,c,j))!=null){return i}}if(a){console.warn('No coordinate system that supports '+b+' found by the given finder.')}}i.containPixel=function(b,e){if(this._disposed){disposedWarning(this.id);return}var f=this._model;var c;b=parseFinder(f,b);each$1(b,function(g,f){f.indexOf('Models')>=0&&each$1(g,function(j){var i=j.coordinateSystem;if(i&&i.containPoint){c|=!!i.containPoint(e)}else {if(f==='seriesModels'){var h=this._chartsMap[j.__viewId];if(h&&h.containPoint){c|=h.containPoint(e,j)}else {if(a){console.warn(f+': '+(h?'The found component do not support containPoint.':'No view mapping to the found component.'))}}}else {if(a){console.warn(f+': containPoint is not supported')}}}},this)},this);return !!c};i.getVisual=function(b,g){var h=this._model;b=parseFinder(h,b,{defaultMainType:'series'});var f=b.seriesModel;if(a){if(!f){console.warn('There is no specified seires model')}}var c=f.getData();var e=b.hasOwnProperty('dataIndexInside')?b.dataIndexInside:b.hasOwnProperty('dataIndex')?c.indexOfRawIndex(b.dataIndex):null;return e!=null?c.getItemVisual(e,g):c.getVisual(g)};i.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]};i.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]};var ax={prepareAndUpdate:function(a){prepare(this);ax.update.call(this,a)},update:function(e){var a=this._model;var g=this._api;var j=this._zr;var h=this._coordSysMgr;var c=this._scheduler;if(!a){return}c.restoreData(a,e);c.performSeriesTasks(a);h.create(a,g);c.performDataProcessorTasks(a,e);updateStreamModes(this,a);h.update(a,g);clearColorPalette(a);c.performVisualTasks(a,e);render(this,a,g,e);var b=a.get('backgroundColor')||'transparent';if(!f.canvasSupported){var i=parse(b);b=stringify(i,'rgb');if(i[3]===0){b='transparent'}}else {j.setBackgroundColor(b)}performPostUpdateFuncs(a,g)},updateTransform:function(c){var a=this._model;var e=this;var f=this._api;if(!a){return}var g=[];a.eachComponent(function(j,h){var b=e.getViewOfComponentModel(h);if(b&&b.__alive){if(b.updateTransform){var i=b.updateTransform(h,a,f,c);i&&i.update&&g.push(b)}else {g.push(b)}}});var b=createHashMap();a.eachSeries(function(g){var h=e._chartsMap[g.__viewId];if(h.updateTransform){var i=h.updateTransform(g,a,f,c);i&&i.update&&b.set(g.uid,1)}else {b.set(g.uid,1)}});clearColorPalette(a);this._scheduler.performVisualTasks(a,c,{setDirty:!0,dirtyMap:b});renderSeries(e,a,f,c,b);performPostUpdateFuncs(a,this._api)},updateView:function(b){var a=this._model;if(!a){return}Chart.markUpdateMethod(b,'updateView');clearColorPalette(a);this._scheduler.performVisualTasks(a,b,{setDirty:!0});render(this,this._model,this._api,b);performPostUpdateFuncs(a,this._api)},updateVisual:function(a){ax.update.call(this,a)},updateLayout:function(a){ax.update.call(this,a)}};function prepare(b){var c=b._model;var a=b._scheduler;a.restorePipelines(c);a.prepareStageTasks();prepareView(b,'component',c,a);prepareView(b,'chart',c,a);a.plan()}function updateDirectly(b,j,e,a,i){var g=b._model;if(!a){t(b._componentsViews.concat(b._chartsViews),callView);return}var f={};f[a+'Id']=e[a+'Id'];f[a+'Index']=e[a+'Index'];f[a+'Name']=e[a+'Name'];var h={mainType:a,query:f};i&&(h.subType=i);var c=e.excludeSeriesId;if(c!=null){c=createHashMap(normalizeToArray(c))}g&&g.eachComponent(h,function(f){if(!c||c.get(f.id)==null){callView(b[a==='series'?'_chartsMap':'_componentsMap'][f.__viewId])}},b);function callView(c){c&&c.__alive&&c[j]&&c[j](c.__model,g,b._api,e)}}i.resize=function(b){if(a){bI(!this[K],'`resize` should not be called during main process.')}if(this._disposed){disposedWarning(this.id);return}this._zr.resize(b);var c=this._model;this._loadingFX&&this._loadingFX.resize();if(!c){return}var f=c.resetOption('media');var e=b&&b.silent;this[K]=!0;f&&prepare(this);ax.update.call(this);this[K]=!1;flushPendingActions.call(this,e);triggerUpdatedEvent.call(this,e)};function updateStreamModes(a,e){var b=a._chartsMap;var c=a._scheduler;e.eachSeries(function(f){c.updateStreamModes(f,b[f.__viewId])})}i.showLoading=function(b,c){if(this._disposed){disposedWarning(this.id);return}if(cf(b)){c=b;b=''}b=b||'default';this.hideLoading();if(!eB[b]){if(a){console.warn('Loading effects '+b+' not exists.')}return}var e=eB[b](this._api,c);var f=this._zr;this._loadingFX=e;f.add(e)};i.hideLoading=function(){if(this._disposed){disposedWarning(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX);this._loadingFX=null};i.makeActionFromEvent=function(a){var b=extend({},a);b.type=cO[a.type];return b};i.dispatchAction=function(b,a){if(this._disposed){disposedWarning(this.id);return}if(!cf(a)){a={silent:!!a}}if(!dr[b.type]){return}if(!this._model){return}if(this[K]){this._pendingActions.push(b);return}doDispatchAction.call(this,b,a.silent);if(a.flush){this._zr.flush(!0)}else {if(a.flush!==!1&&f.browser.weChat){this._throttledZrFlush()}}flushPendingActions.call(this,a.silent);triggerUpdatedEvent.call(this,a.silent)};function doDispatchAction(c,n){var f=c.type;var m=c.escapeConnect;var i=dr[f];var h=i.actionInfo;var b=(h.update||'update').split(':');var e=b.pop();b=b[0]!=null&&eC(b[0]);this[K]=!0;var k=[c];var l=!1;if(c.batch){l=!0;k=map(c.batch,function(a){a=defaults(extend({},a),c);a.batch=null;return a})}var g=[];var a;var j=f==='highlight'||f==='downplay';t(k,function(f){a=i.action(f,this._model,this._api);a=a||extend({},f);a.type=h.event||a.type;g.push(a);if(j){updateDirectly(this,e,f,'series')}else {if(b){updateDirectly(this,e,f,b.main,b.sub)}}},this);if(e!=='none'&&!j&&!b){if(this[au]){prepare(this);ax.update.call(this,c);this[au]=!1}else {ax[e].call(this,c)}}if(l){a={type:h.event||f,escapeConnect:m,batch:g}}else {a=g[0]}this[K]=!1;!n&&this._messageCenter.trigger(a.type,a)}function flushPendingActions(c){var a=this._pendingActions;while(a.length){var b=a.shift();doDispatchAction.call(this,b,c)}}function triggerUpdatedEvent(a){!a&&this.trigger('updated')}function bindRenderedEvent(b,a){b.on('rendered',function(){a.trigger('rendered');if(b.animation.isFinished()&&!a[au]&&!a._scheduler.unfinished&&!a._pendingActions.length){a.trigger('finished')}})}i.appendData=function(b){if(this._disposed){disposedWarning(this.id);return}var e=b.seriesIndex;var f=this.getModel();var c=f.getSeriesByIndex(e);if(a){bI(b.data&&c)}c.appendData(b);this._scheduler.unfinished=!0};i.on=createRegisterEventWithLowercaseName('on',!1);i.off=createRegisterEventWithLowercaseName('off',!1);i.one=createRegisterEventWithLowercaseName('one',!1);function prepareView(g,m,h,l){var e=m==='component';var f=e?g._componentsViews:g._chartsViews;var i=e?g._componentsMap:g._chartsMap;var k=g._zr;var j=g._api;for(var b=0;b<f.length;b++){f[b].__alive=!1}e?h.eachComponent(function(a,b){a!=='series'&&doPrepare(b)}):h.eachSeries(doPrepare);function doPrepare(c){var o='_ec_'+c.id+'_'+c.type;var b=i[o];if(!b){var n=eC(c.type);var p=e?W.getClass(n.main,n.sub):Chart.getClass(n.sub);if(a){bI(p,n.sub+' does not exist.')}b=new p();b.init(h,j);i[o]=b;f.push(b);k.add(b.group)}c.__viewId=b.__id=o;b.__alive=!0;b.__model=c;b.group.__ecComponentInfo={mainType:c.mainType,index:c.componentIndex};!e&&l.prepareView(b,c,h,j)}for(var b=0;b<f.length;){var c=f[b];if(!c.__alive){!e&&c.renderTask.dispose();k.remove(c.group);c.dispose(h,j);f.splice(b,1);delete i[c.__id];c.__id=c.group.__ecComponentInfo=null}else {b++}}}function clearColorPalette(a){a.clearColorPalette();a.eachSeries(function(b){b.clearColorPalette()})}function render(a,b,c,e){renderComponents(a,b,c,e);t(a._chartsViews,function(f){f.__alive=!1});renderSeries(a,b,c,e);t(a._chartsViews,function(f){if(!f.__alive){f.remove(b,c)}})}function renderComponents(e,b,f,c,a){t(a||e._componentsViews,function(g){var h=g.__model;g.render(h,b,f,c);updateZ(h,g)})}function renderSeries(a,c,h,g,f){var b=a._scheduler;var e;c.eachSeries(function(i){var j=a._chartsMap[i.__viewId];j.__alive=!0;var k=j.renderTask;b.updatePayload(k,g);if(f&&f.get(i.uid)){k.dirty()}e|=k.perform(b.getPerformArgs(k));j.group.silent=!!i.get('silent');updateZ(i,j);updateBlend(i,j)});b.unfinished|=e;updateHoverLayerStatus(a,c);oJ(a._zr.dom,c)}function performPostUpdateFuncs(a,b){t(g0,function(c){c(a,b)})}var kt=['click','dblclick','mouseover','mouseout','mousemove','mousedown','mouseup','globalout','contextmenu'];i._initEvents=function(){t(kt,function(b){var c=function(m){var k=this.getModel();var e=m.target;var c;var i=b==='globalout';if(i){c={}}else {if(e&&e.dataIndex!=null){var j=e.dataModel||k.getSeriesByIndex(e.seriesIndex);c=j&&j.getDataParams(e.dataIndex,e.dataType,e)||{}}else {if(e&&e.eventData){c=extend({},e.eventData)}}}if(c){var f=c.componentType;var h=c.componentIndex;if(f==='markLine'||f==='markPoint'||f==='markArea'){f='series';h=c.seriesIndex}var g=f&&h!=null&&k.getComponent(f,h);var l=g&&this[g.mainType==='series'?'_chartsMap':'_componentsMap'][g.__viewId];if(a){if(!i&&!(g&&l)){console.warn('model or view can not be found by params')}}c.event=m;c.type=b;this._ecEventProcessor.eventInfo={targetEl:e,packedEvent:c,model:g,view:l};this.trigger(b,c)}};c.zrEventfulCallAtLast=!0;this._zr.on(b,c,this)},this);t(cO,function(b,a){this._messageCenter.on(a,function(c){this.trigger(a,c)},this)},this)};i.isDisposed=function(){return this._disposed};i.clear=function(){if(this._disposed){disposedWarning(this.id);return}this.setOption({series:[]},!0)};i.dispose=function(){if(this._disposed){disposedWarning(this.id);return}this._disposed=!0;setAttribute(this.getDom(),d5,'');var b=this._api;var a=this._model;t(this._componentsViews,function(c){c.dispose(a,b)});t(this._chartsViews,function(c){c.dispose(a,b)});this._zr.dispose();delete a3[this.id]};mixin(ECharts,r);function disposedWarning(b){if(a){console.warn('Instance '+b+' has been disposed')}}function updateHoverLayerStatus(c,a){var g=c._zr;var e=g.storage;var b=0;e.traverse(function(e){b++});if(b>a.get('hoverLayerThreshold')&&!f.node){a.eachSeries(function(b){if(b.preventUsingHoverLayer){return}var e=c._chartsMap[b.__viewId];if(e.__alive){e.group.traverse(function(e){e.useHoverLayer=!0})}})}}function updateBlend(c,e){var b=c.get('blendMode')||null;if(a){if(!f.canvasSupported&&b&&b!=='source-over'){console.warn('Only canvas support blendMode')}}e.group.traverse(function(a){if(!a.isGroup){if(a.style.blend!==b){a.setStyle('blend',b)}}if(a.eachPendingDisplayable){a.eachPendingDisplayable(function(f){f.setStyle('blend',b)})}})}function updateZ(b,e){var c=b.get('z');var a=b.get('zlevel');e.group.traverse(function(f){if(f.type!=='group'){c!=null&&(f.z=c);a!=null&&(f.zlevel=a)}})}function createExtensionAPI(a){var b=a._coordSysMgr;return extend(new ExtensionAPI(a),{getCoordinateSystems:bind(b.getCoordinateSystems,b),getComponentByElement:function(b){while(b){var c=b.__ecComponentInfo;if(c!=null){return a._model.getComponent(c.mainType,c.index)}b=b.parent}}})}function EventProcessor(){this.eventInfo}EventProcessor.prototype={constructor:EventProcessor,normalizeQuery:function(b){var a={};var f={};var e={};if(isString(b)){var c=eC(b);a.mainType=c.main||null;a.subType=c.sub||null}else {var g=['Index','Name','Id'];var h={name:1,dataIndex:1,dataType:1};each$1(b,function(l,c){var k=!1;for(var m=0;m<g.length;m++){var i=g[m];var j=c.lastIndexOf(i);if(j>0&&j===c.length-i.length){var n=c.slice(0,j);if(n!=='data'){a.mainType=n;a[i.toLowerCase()]=l;k=!0}}}if(h.hasOwnProperty(c)){f[c]=l;k=!0}if(!k){e[c]=l}})}return {cptQuery:a,dataQuery:f,otherQuery:e}},filter:function(i,g,k){var b=this.eventInfo;if(!b){return !0}var j=b.targetEl;var e=b.packedEvent;var a=b.model;var h=b.view;if(!a||!h){return !0}var c=g.cptQuery;var f=g.dataQuery;return check(c,a,'mainType')&&check(c,a,'subType')&&check(c,a,'index','componentIndex')&&check(c,a,'name')&&check(c,a,'id')&&check(f,e,'name')&&check(f,e,'dataIndex')&&check(f,e,'dataType')&&(!h.filterForExposedEvent||h.filterForExposedEvent(i,g.otherQuery,j,e));function check(b,e,a,c){return b[a]==null||e[c||a]===b[a]}},afterTrigger:function(){this.eventInfo=null}};var dr={};var cO={};var d2=[];var gd=[];var g0=[];var c_=[];var hG={};var eB={};var a3={};var cI={};var or=new Date()-0;var mK=new Date()-0;var d5='_echarts_instance_';function enableConnect(a){var c=0;var e=1;var f=2;var b='__connectUpdateStatus';function updateConnectedChartsStatus(e,g){for(var c=0;c<e.length;c++){var f=e[c];f[b]=g}}t(cO,function(h,g){a._messageCenter.on(g,function(j){if(cI[a.group]&&a[b]!==c){if(j&&j.escapeConnect){return}var k=a.makeActionFromEvent(j);var i=[];t(a3,function(b){if(b!==a&&b.group===a.group){i.push(b)}});updateConnectedChartsStatus(i,c);t(i,function(c){if(c[b]!==e){c.dispatchAction(k)}});updateConnectedChartsStatus(i,f)}})})}function init(b,g,e){if(a){if(fi.replace('.','')-0<eR.zrender.replace('.','')-0){throw new Error('zrender/src '+fi+' is too old for ECharts '+iV+'. Current version need ZRender '+eR.zrender+'+')}if(!b){throw new Error('Initialize failed: invalid dom.')}}var f=getInstanceByDom(b);if(f){if(a){console.warn('There is a chart instance already initialized on the dom.')}return f}if(a){if(isDom(b)&&b.nodeName.toUpperCase()!=='CANVAS'&&(!b.clientWidth&&(!e||e.width==null)||!b.clientHeight&&(!e||e.height==null))){console.warn("Can't get DOM width or height. Please check "+'dom.clientWidth and dom.clientHeight. They should not be 0.'+'For example, you may need to call this in the callback '+'of window.onload.')}}var c=new ECharts(b,g,e);c.id='ec_'+or++;a3[c.id]=c;setAttribute(b,d5,c.id);enableConnect(c);return c}function connect(a){if(isArray(a)){var b=a;a=null;t(b,function(b){if(b.group!=null){a=b.group}});a=a||'g_'+mK++;t(b,function(b){b.group=a})}cI[a]=!0;return a}function disConnect(a){cI[a]=!1}var m7=disConnect;function dispose(a){if(typeof a==='string'){a=a3[a]}else {if(!(a instanceof ECharts)){a=getInstanceByDom(a)}}if(a instanceof ECharts&&!a.isDisposed()){a.dispose()}}function getInstanceByDom(a){return a3[getAttribute(a,d5)]}function getInstanceById(a){return a3[a]}function registerTheme(b,a){hG[b]=a}function registerPreprocessor(a){gd.push(a)}function registerProcessor(b,a){normalizeRegister(d2,b,a,f4)}function registerPostUpdate(a){g0.push(a)}function registerAction(a,b,e){if(typeof b==='function'){e=b;b=''}var c=cf(a)?a.type:[a,a={event:b}][0];a.event=(a.event||c).toLowerCase();b=a.event;bI(hS.test(c)&&hS.test(b));if(!dr[c]){dr[c]={action:e,actionInfo:a}}cO[b]=c}function registerCoordinateSystem(b,a){CoordinateSystemManager.register(b,a)}function getCoordinateSystemDimensions(b){var a=CoordinateSystemManager.get(b);if(a){return a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice()}}function registerLayout(b,a){normalizeRegister(c_,b,a,gf,'layout')}function registerVisual(b,a){normalizeRegister(c_,b,a,gj,'visual')}function normalizeRegister(f,b,e,g,h){if(nb(b)||cf(b)){e=b;b=g}if(a){if(isNaN(b)||b==null){throw new Error('Illegal priority')}t(f,function(a){bI(a.__raw!==e)})}var c=Scheduler.wrapStageHandler(e,h);c.__prio=b;c.__raw=e;f.push(c);return c}function registerLoading(b,a){eB[b]=a}function extendComponentModel(a){return g.extend(a)}function extendComponentView(a){return W.extend(a)}function extendSeriesModel(a){return l.extend(a)}function extendChartView(a){return Chart.extend(a)}function setCanvasCreator(a){$override('createCanvas',a)}function registerMap(c,b,a){cQ.registerMap(c,b,a)}function getMap(b){var a=cQ.retrieveMap(b);return a&&a[0]&&{geoJson:a[0].geoJSON,specialAreas:a[0].specialAreas}}registerVisual(ge,mU);registerPreprocessor(hb);registerProcessor(jq,nD);registerLoading('default',lx);registerAction({type:'highlight',event:'highlight',update:'highlight'},noop);registerAction({type:'downplay',event:'downplay',update:'downplay'},noop);registerTheme('light',nc);registerTheme('dark',i6);var nW={};function defaultKeyGetter(a){return a}function DataDiffer(f,e,b,a,c){this._old=f;this._new=e;this._oldKeyGetter=b||defaultKeyGetter;this._newKeyGetter=a||defaultKeyGetter;this.context=c}DataDiffer.prototype={constructor:DataDiffer,add:function(a){this._add=a;return this},update:function(a){this._update=a;return this},remove:function(a){this._remove=a;return this},execute:function(){var j=this._old;var l=this._new;var k={};var c={};var i=[];var g=[];var b;initIndexMap(j,k,i,'_oldKeyGetter',this);initIndexMap(l,c,g,'_newKeyGetter',this);for(b=0;b<j.length;b++){var e=i[b];var a=c[e];if(a!=null){var f=a.length;if(f){f===1&&(c[e]=null);a=a.shift()}else {c[e]=null}this._update&&this._update(a,b)}else {this._remove&&this._remove(b)}}for(var b=0;b<g.length;b++){var e=g[b];if(c.hasOwnProperty(e)){var a=c[e];if(a==null){continue}if(!a.length){this._add&&this._add(a)}else {for(var h=0,f=a.length;h<f;h++){this._add&&this._add(a[h])}}}}}};function initIndexMap(f,e,i,g,h){for(var a=0;a<f.length;a++){var c='_ec_'+h[g](f[a],a);var b=e[c];if(b==null){i.push(c);e[c]=a}else {if(!b.length){e[c]=b=[b]}b.push(a)}}}var ee=createHashMap(['tooltip','label','itemName','itemId','seriesName']);function summarizeDimensions(j){var e={};var b=e.encode={};var l=createHashMap();var f=[];var c=[];var m=e.userOutput={dimensionNames:j.dimensions.slice(),encode:{}};each$1(j.dimensions,function(h){var e=j.getDimensionInfo(h);var g=e.coordDim;if(g){if(a){assert$1(ee.get(g)==null)}var i=e.coordDimIndex;getOrCreateEncodeArr(b,g)[i]=h;if(!e.isExtraCoord){l.set(g,1);if(mayLabelDimType(e.type)){f[0]=h}getOrCreateEncodeArr(m.encode,g)[i]=e.index}if(e.defaultTooltip){c.push(h)}}ee.each(function(g,c){var f=getOrCreateEncodeArr(b,c);var a=e.otherDims[c];if(a!=null&&a!==!1){f[a]=e.name}})});var g=[];var k={};l.each(function(e,a){var c=b[a];k[a]=c[0];g=g.concat(c)});e.dataDimsOnCoord=g;e.encodeFirstDimNotExtra=k;var i=b.label;if(i&&i.length){f=i.slice()}var h=b.tooltip;if(h&&h.length){c=h.slice()}else {if(!c.length){c=f.slice()}}b.defaultedLabel=f;b.defaultedTooltip=c;return e}function getOrCreateEncodeArr(a,b){if(!a.hasOwnProperty(b)){a[b]=[]}return a[b]}function getDimensionTypeByAxis(a){return a==='category'?'ordinal':a==='time'?'time':'float'}function mayLabelDimType(a){return !(a==='ordinal'||a==='time')}var c4=isObject$1;var b8='undefined';var gW=-1;var no='e\x00\x00';var nC={'float':typeof Float64Array===b8?Array:Float64Array,'int':typeof Int32Array===b8?Array:Int32Array,'ordinal':Array,'number':Array,'time':Array};var k_=typeof Uint32Array===b8?Array:Uint32Array;var lf=typeof Int32Array===b8?Array:Int32Array;var k$=typeof Uint16Array===b8?Array:Uint16Array;function getIndicesCtor(a){return a._rawCount>65535?k_:k$}function cloneChunk(a){var b=a.constructor;return b===Array?a.slice():new b(a)}var jJ=['hasItemOption','_nameList','_idList','_invertedIndicesMap','_rawData','_chunkSize','_chunkCount','_dimValueGetter','_count','_rawCount','_nameDimIdx','_idDimIdx'];var kH=['_extent','_approximateExtent','_rawExtent'];function transferProperties(b,a){each$1(jJ.concat(a.__wrappedMethods||[]),function(c){if(a.hasOwnProperty(c)){b[c]=a[c]}});b.__wrappedMethods=a.__wrappedMethods;each$1(kH,function(c){b[c]=clone(a[c])});b._calculationInfo=extend(a._calculationInfo)}var s=function(c,i){c=c||['x','y'];var g={};var h=[];var f={};for(var e=0;e<c.length;e++){var a=c[e];if(isString(a)){a={name:a}}var b=a.name;a.type=a.type||'float';if(!a.coordDim){a.coordDim=b;a.coordDimIndex=0}a.otherDims=a.otherDims||{};h.push(b);g[b]=a;a.index=e;if(a.createInvertedIndices){f[b]=[]}}this.dimensions=h;this._dimensionInfos=g;this.hostModel=i;this.dataType;this._indices=null;this._count=0;this._rawCount=0;this._storage={};this._nameList=[];this._idList=[];this._optionModels=[];this._visual={};this._layout={};this._itemVisuals=[];this.hasItemVisual={};this._itemLayouts=[];this._graphicEls=[];this._chunkSize=100000;this._chunkCount=0;this._rawData;this._rawExtent={};this._extent={};this._approximateExtent={};this._dimensionsSummary=summarizeDimensions(this);this._invertedIndicesMap=f;this._calculationInfo={};this.userOutput=this._dimensionsSummary.userOutput};var c=s.prototype;c.type='list';c.hasItemOption=!0;c.getDimension=function(a){if(typeof a==='number'||!isNaN(a)&&!this._dimensionInfos.hasOwnProperty(a)){a=this.dimensions[a]}return a};c.getDimensionInfo=function(a){return this._dimensionInfos[this.getDimension(a)]};c.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()};c.mapDimension=function(e,b){var c=this._dimensionsSummary;if(b==null){return c.encodeFirstDimNotExtra[e]}var a=c.encode[e];return b===!0?(a||[]).slice():a&&a[b]};c.initData=function(b,f,c){var e=Source.isInstance(b)||isArrayLike(b);if(e){b=new DefaultDataProvider(b,this.dimensions.length)}if(a){if(!e&&(typeof b.getItem!=='function'||typeof b.count!=='function')){throw new Error('Inavlid data provider.')}}this._rawData=b;this._storage={};this._indices=null;this._nameList=f||[];this._idList=[];this._nameRepeatCount={};if(!c){this.hasItemOption=!1}this.defaultDimValueGetter=gi[this._rawData.getSource().sourceFormat];this._dimValueGetter=c=c||this.defaultDimValueGetter;this._dimValueGetterArrayRows=gi.arrayRows;this._rawExtent={};this._initDataFromProvider(0,b.count());if(b.pure){this.hasItemOption=!1}};c.getProvider=function(){return this._rawData};c.appendData=function(f){if(a){assert$1(!this._indices,'appendData can only be called on raw data.')}var b=this._rawData;var c=this.count();b.appendData(f);var e=b.count();if(!b.persistent){e+=c}this._initDataFromProvider(c,e)};c.appendValues=function(q,g){var j=this._chunkSize;var c=this._storage;var i=this.dimensions;var m=i.length;var k=this._rawExtent;var n=this.count();var o=n+Math.max(q.length,g?g.length:0);var r=this._chunkCount;for(var p=0;p<m;p++){var a=i[p];if(!k[a]){k[a]=getInitialExtent()}if(!c[a]){c[a]=[]}prepareChunks(c,this._dimensionInfos[a],j,r,o);this._chunkCount=c[a].length}var s=new Array(m);for(var b=n;b<o;b++){var l=b-n;var u=Math.floor(b/j);var t=b%j;for(var h=0;h<m;h++){var a=i[h];var e=this._dimValueGetterArrayRows(q[l]||s,a,l,h);c[a][u][t]=e;var f=k[a];e<f[0]&&(f[0]=e);e>f[1]&&(f[1]=e)}if(g){this._nameList[b]=g[l]}}this._rawCount=this._count=o;this._extent={};prepareInvertedIndex(this)};c._initDataFromProvider=function(B,n){if(B>=n){return}var r=this._chunkSize;var h=this._rawData;var f=this._storage;var m=this.dimensions;var u=m.length;var v=this._dimensionInfos;var z=this._nameList;var E=this._idList;var s=this._rawExtent;var g=this._nameRepeatCount={};var q;var C=this._chunkCount;for(var k=0;k<u;k++){var b=m[k];if(!s[b]){s[b]=getInitialExtent()}var t=v[b];if(t.otherDims.itemName===0){q=this._nameDimIdx=k}if(t.otherDims.itemId===0){this._idDimIdx=k}if(!f[b]){f[b]=[]}prepareChunks(f,t,r,C,n);this._chunkCount=f[b].length}var e=new Array(u);for(var c=B;c<n;c++){e=h.getItem(c,e);var y=Math.floor(c/r);var x=c%r;for(var o=0;o<u;o++){var b=m[o];var D=f[b][y];var i=this._dimValueGetter(e,b,c,o);D[x]=i;var l=s[b];i<l[0]&&(l[0]=i);i>l[1]&&(l[1]=i)}if(!h.pure){var a=z[c];if(e&&a==null){if(e.name!=null){z[c]=a=e.name}else {if(q!=null){var A=m[q];var w=f[A][y];if(w){a=w[x];var p=v[A].ordinalMeta;if(p&&p.categories.length){a=p.categories[a]}}}}}var j=e==null?null:e.id;if(j==null&&a!=null){g[a]=g[a]||0;j=a;if(g[a]>0){j+='__ec__'+g[a]}g[a]++}j!=null&&(E[c]=j)}}if(!h.persistent&&h.clean){h.clean()}this._rawCount=this._count=n;this._extent={};prepareInvertedIndex(this)};function prepareChunks(f,m,a,j,h){var k=nC[m.type];var e=j-1;var g=m.name;var b=f[g][e];if(b&&b.length<a){var l=new k(Math.min(h-e*a,a));for(var c=0;c<b.length;c++){l[c]=b[c]}f[g][e]=l}for(var i=j*a;i<h;i+=a){f[g].push(new k(Math.min(h-i,a)))}}function prepareInvertedIndex(a){var b=a._invertedIndicesMap;each$1(b,function(e,f){var h=a._dimensionInfos[f];var g=h.ordinalMeta;if(g){e=b[f]=new lf(g.categories.length);for(var c=0;c<e.length;c++){e[c]=gW}for(var c=0;c<a._count;c++){e[a.get(f,c)]=c}}})}function getRawValueFromStore(a,f,g){var b;if(f!=null){var e=a._chunkSize;var k=Math.floor(g/e);var j=g%e;var i=a.dimensions[f];var h=a._storage[i][k];if(h){b=h[j];var c=a._dimensionInfos[i].ordinalMeta;if(c&&c.categories.length){b=c.categories[b]}}}return b}c.count=function(){return this._count};c.getIndices=function(){var b;var e=this._indices;if(e){var c=e.constructor;var f=this._count;if(c===Array){b=new c(f);for(var a=0;a<f;a++){b[a]=e[a]}}else {b=new c(e.buffer,0,f)}}else {var c=getIndicesCtor(this);var b=new c(this.count());for(var a=0;a<b.length;a++){b[a]=a}}return b};c.get=function(c,a){if(!(a>=0&&a<this._count)){return NaN}var b=this._storage;if(!b[c]){return NaN}a=this.getRawIndex(a);var f=Math.floor(a/this._chunkSize);var e=a%this._chunkSize;var g=b[c][f];var h=g[e];return h};c.getByRawIndex=function(g,a){if(!(a>=0&&a<this._rawCount)){return NaN}var b=this._storage[g];if(!b){return NaN}var e=Math.floor(a/this._chunkSize);var c=a%this._chunkSize;var f=b[e];return f[c]};c._getFast=function(f,a){var c=Math.floor(a/this._chunkSize);var b=a%this._chunkSize;var e=this._storage[f][c];return e[b]};c.getValues=function(a,e){var c=[];if(!isArray(a)){e=a;a=this.dimensions}for(var b=0,f=a.length;b<f;b++){c.push(this.get(a[b],e))}return c};c.hasValue=function(c){var b=this._dimensionsSummary.dataDimsOnCoord;for(var a=0,e=b.length;a<e;a++){if(isNaN(this.get(b[a],c))){return !1}}return !0};c.getDataExtent=function(b){b=this.getDimension(b);var j=this._storage[b];var h=getInitialExtent();if(!j){return h}var i=this.count();var k=!this._indices;var a;if(k){return this._rawExtent[b].slice()}a=this._extent[b];if(a){return a.slice()}a=h;var f=a[0];var e=a[1];for(var g=0;g<i;g++){var c=this._getFast(b,this.getRawIndex(g));c<f&&(f=c);c>e&&(e=c)}a=[f,e];this._extent[b]=a;return a};c.getApproximateExtent=function(a){a=this.getDimension(a);return this._approximateExtent[a]||this.getDataExtent(a)};c.setApproximateExtent=function(b,a){a=this.getDimension(a);this._approximateExtent[a]=b.slice()};c.getCalculationInfo=function(a){return this._calculationInfo[a]};c.setCalculationInfo=function(a,b){c4(a)?extend(this._calculationInfo,a):this._calculationInfo[a]=b};c.getSum=function(c){var f=this._storage[c];var e=0;if(f){for(var a=0,g=this.count();a<g;a++){var b=this.get(c,a);if(!isNaN(b)){e+=b}}}return e};c.getMedian=function(e){var c=[];this.each(e,function(a,b){if(!isNaN(a)){c.push(a)}});var b=[].concat(c).sort(function(a,b){return a-b});var a=this.count();return a===0?0:a%2===1?b[(a-1)/2]:(b[a/2]+b[a/2-1])/2};c.rawIndexOf=function(e,f){var c=e&&this._invertedIndicesMap[e];if(a){if(!c){throw new Error('Do not supported yet')}}var b=c[f];if(b==null||isNaN(b)){return gW}return b};c.indexOfName=function(b){for(var a=0,c=this.count();a<c;a++){if(this.getName(a)===b){return a}}return -1};c.indexOfRawIndex=function(a){if(a>=this._rawCount||a<0){return -1}if(!this._indices){return a}var e=this._indices;var c=e[a];if(c!=null&&c<this._count&&c===a){return a}var g=0;var f=this._count-1;while(g<=f){var b=(g+f)/2|0;if(e[b]<a){g=b+1}else {if(e[b]>a){f=b-1}else {return b}}}return -1};c.indicesOfNearest=function(i,l,e){var k=this._storage;var j=k[i];var a=[];if(!j){return a}if(e==null){e=Infinity}var f=Number.MAX_VALUE;var h=-1;for(var c=0,m=this.count();c<m;c++){var b=l-this.get(i,c);var g=Math.abs(b);if(b<=e&&g<=f){if(g<f||b>=0&&h<0){f=g;h=b;a.length=0}a.push(c)}}return a};c.getRawIndex=getRawIndexWithoutIndices;function getRawIndexWithoutIndices(a){return a}function getRawIndexWithIndices(a){if(a<this._count&&a>=0){return this._indices[a]}return -1}c.getRawDataItem=function(b){if(!this._rawData.persistent){var c=[];for(var a=0;a<this.dimensions.length;a++){var e=this.dimensions[a];c.push(this.get(e,b))}return c}else {return this._rawData.getItem(this.getRawIndex(b))}};c.getName=function(b){var a=this.getRawIndex(b);return this._nameList[a]||getRawValueFromStore(this,this._nameDimIdx,a)||''};c.getId=function(a){return getId(this,this.getRawIndex(a))};function getId(c,b){var a=c._idList[b];if(a==null){a=getRawValueFromStore(c,c._idDimIdx,b)}if(a==null){a=no+b}return a}function normalizeDimensions(a){if(!isArray(a)){a=[a]}return a}function validateDimensions(c,b){for(var a=0;a<b.length;a++){if(!c._dimensionInfos[b[a]]){console.error('Unkown dimension '+b[a])}}}c.each=function(b,f,e,i){if(!this._count){return}if(typeof b==='function'){i=e;e=f;f=b;b=[]}e=e||i||this;b=map(normalizeDimensions(b),this.getDimension,this);if(a){validateDimensions(this,b)}var j=b.length;for(var c=0;c<this.count();c++){switch(j){case 0:f.call(e,c);break;case 1:f.call(e,this.get(b[0],c),c);break;case 2:f.call(e,this.get(b[0],c),this.get(b[1],c),c);break;default:var g=0;var h=[];for(;g<j;g++){h[g]=this.get(b[g],c)};h[g]=c;f.apply(e,h);}}};c.filterSelf=function(b,f,c,n){if(!this._count){return}if(typeof b==='function'){n=c;c=f;f=b;b=[]}c=c||n||this;b=map(normalizeDimensions(b),this.getDimension,this);if(a){validateDimensions(this,b)}var l=this.count();var q=getIndicesCtor(this);var o=new q(l);var m=[];var i=b.length;var j=0;var p=b[0];for(var e=0;e<l;e++){var g;var k=this.getRawIndex(e);if(i===0){g=f.call(c,e)}else {if(i===1){var r=this._getFast(p,k);g=f.call(c,r,e)}else {for(var h=0;h<i;h++){m[h]=this._getFast(p,k)}m[h]=e;g=f.apply(c,m)}}if(g){o[j++]=k}}if(j<l){this._indices=o}this._count=j;this._extent={};this.getRawIndex=this._indices?getRawIndexWithIndices:getRawIndexWithoutIndices;return this};c.selectRange=function(g){if(!this._count){return}var f=[];for(var s in g){if(g.hasOwnProperty(s)){f.push(s)}}if(a){validateDimensions(this,f)}var j=f.length;if(!j){return}var k=this.count();var A=getIndicesCtor(this);var i=new A(k);var h=0;var m=f[0];var v=g[m][0];var u=g[m][1];var o=!1;if(!this._indices){var n=0;if(j===1){var q=this._storage[f[0]];for(var e=0;e<this._chunkCount;e++){var p=q[e];var t=Math.min(this._count-e*this._chunkSize,this._chunkSize);for(var b=0;b<t;b++){var c=p[b];if(c>=v&&c<=u||isNaN(c)){i[h++]=n}n++}}o=!0}else {if(j===2){var q=this._storage[m];var z=this._storage[f[1]];var C=g[f[1]][0];var B=g[f[1]][1];for(var e=0;e<this._chunkCount;e++){var p=q[e];var y=z[e];var t=Math.min(this._count-e*this._chunkSize,this._chunkSize);for(var b=0;b<t;b++){var c=p[b];var r=y[b];if((c>=v&&c<=u||isNaN(c))&&(r>=C&&r<=B||isNaN(r))){i[h++]=n}n++}}o=!0}}}if(!o){if(j===1){for(var b=0;b<k;b++){var l=this.getRawIndex(b);var c=this._getFast(m,l);if(c>=v&&c<=u||isNaN(c)){i[h++]=l}}}else {for(var b=0;b<k;b++){var x=!0;var l=this.getRawIndex(b);for(var e=0;e<j;e++){var w=f[e];var c=this._getFast(s,l);if(c<g[w][0]||c>g[w][1]){x=!1}}if(x){i[h++]=this.getRawIndex(b)}}}}if(h<k){this._indices=i}this._count=h;this._extent={};this.getRawIndex=this._indices?getRawIndexWithIndices:getRawIndexWithoutIndices;return this};c.mapArray=function(b,c,a,e){if(typeof b==='function'){e=a;a=c;c=b;b=[]}a=a||e||this;var f=[];this.each(b,function(){f.push(c&&c.apply(this,arguments))},a);return f};function cloneListForMapAndSample(b,i){var f=b.dimensions;var c=new s(map(f,b.getDimensionInfo,b),b.hostModel);transferProperties(c,b);var h=c._storage={};var e=b._storage;for(var g=0;g<f.length;g++){var a=f[g];if(e[a]){if(indexOf(i,a)>=0){h[a]=cloneDimStore(e[a]);c._rawExtent[a]=getInitialExtent();c._extent[a]=null}else {h[a]=e[a]}}}return c}function cloneDimStore(b){var c=new Array(b.length);for(var a=0;a<b.length;a++){c[a]=cloneChunk(b[a])}return c}function getInitialExtent(){return [Infinity,-Infinity]}c.map=function(b,s,k,t){k=k||t||this;b=map(normalizeDimensions(b),this.getDimension,this);if(a){validateDimensions(this,b)}var e=cloneListForMapAndSample(this,b);e._indices=this._indices;e.getRawIndex=e._indices?getRawIndexWithIndices:getRawIndexWithoutIndices;var y=e._storage;var m=[];var n=this._chunkSize;var q=b.length;var w=this.count();var l=[];var x=e._rawExtent;for(var f=0;f<w;f++){for(var i=0;i<q;i++){l[i]=this.get(b[i],f)}l[q]=f;var c=s&&s.apply(k,l);if(c!=null){if(typeof c!=='object'){m[0]=c;c=m}var p=this.getRawIndex(f);var v=Math.floor(p/n);var u=p%n;for(var j=0;j<c.length;j++){var r=b[j];var g=c[j];var h=x[r];var o=y[r];if(o){o[v][u]=g}if(g<h[0]){h[0]=g}if(g>h[1]){h[1]=g}}}}return e};c.downSample=function(l,x,w,v){var b=cloneListForMapAndSample(this,[l]);var u=b._storage;var h=[];var e=Math.floor(1/x);var n=u[l];var f=this.count();var i=this._chunkSize;var g=b._rawExtent[l];var m=new (getIndicesCtor(this))(f);var p=0;for(var c=0;c<f;c+=e){if(e>f-c){e=f-c;h.length=e}for(var j=0;j<e;j++){var o=this.getRawIndex(c+j);var r=Math.floor(o/i);var q=o%i;h[j]=n[r][q]}var a=w(h);var k=this.getRawIndex(Math.min(c+v(h,a)||0,f-1));var t=Math.floor(k/i);var s=k%i;n[t][s]=a;if(a<g[0]){g[0]=a}if(a>g[1]){g[1]=a}m[p++]=k}b._count=p;b._indices=m;b.getRawIndex=getRawIndexWithIndices;return b};c.getItemModel=function(b){var a=this.hostModel;return new Model(this.getRawDataItem(b),a,a&&a.ecModel)};c.diff=function(a){var b=this;return new DataDiffer(a?a.getIndices():[],this.getIndices(),function(b){return getId(a,b)},function(c){return getId(b,c)})};c.getVisual=function(b){var a=this._visual;return a&&a[b]};c.setVisual=function(a,c){if(c4(a)){for(var b in a){if(a.hasOwnProperty(b)){this.setVisual(b,a[b])}}return}this._visual=this._visual||{};this._visual[a]=c};c.setLayout=function(a,c){if(c4(a)){for(var b in a){if(a.hasOwnProperty(b)){this.setLayout(b,a[b])}}return}this._layout[a]=c};c.getLayout=function(a){return this._layout[a]};c.getItemLayout=function(a){return this._itemLayouts[a]};c.setItemLayout=function(b,a,c){this._itemLayouts[b]=c?extend(this._itemLayouts[b]||{},a):a};c.clearItemLayouts=function(){this._itemLayouts.length=0};c.getItemVisual=function(f,b,e){var a=this._itemVisuals[f];var c=a&&a[b];if(c==null&&!e){return this.getVisual(b)}return c};c.setItemVisual=function(f,a,g){var c=this._itemVisuals[f]||{};var e=this.hasItemVisual;this._itemVisuals[f]=c;if(c4(a)){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b];e[b]=!0}}return}c[a]=g;e[a]=!0};c.clearAllVisual=function(){this._visual={};this._itemVisuals=[];this.hasItemVisual={}};var jz=function(a){a.seriesIndex=this.seriesIndex;a.dataIndex=this.dataIndex;a.dataType=this.dataType};c.setItemGraphicEl=function(c,a){var b=this.hostModel;if(a){a.dataIndex=c;a.dataType=this.dataType;a.seriesIndex=b&&b.seriesIndex;if(a.type==='group'){a.traverse(jz,a)}}this._graphicEls[c]=a};c.getItemGraphicEl=function(a){return this._graphicEls[a]};c.eachItemGraphicEl=function(a,b){each$1(this._graphicEls,function(c,e){if(c){a&&a.call(b,c,e)}})};c.cloneShallow=function(a){if(!a){var b=map(this.dimensions,this.getDimensionInfo,this);a=new s(b,this.hostModel)}a._storage=this._storage;transferProperties(a,this);if(this._indices){var c=this._indices.constructor;a._indices=new c(this._indices)}else {a._indices=null}a.getRawIndex=a._indices?getRawIndexWithIndices:getRawIndexWithoutIndices;return a};c.wrapMethod=function(a,c){var b=this[a];if(typeof b!=='function'){return}this.__wrappedMethods=this.__wrappedMethods||[];this.__wrappedMethods.push(a);this[a]=function(){var e=b.apply(this,arguments);return c.apply(this,[e].concat(slice(arguments)))}};c.TRANSFERABLE_METHODS=['cloneShallow','downSample','map'];c.CHANGABLE_METHODS=['filterSelf','selectRange'];function completeDimensions(o,k,e){if(!Source.isInstance(k)){k=Source.seriesDataToSource(k)}e=e||{};o=(o||[]).slice();var j=(e.dimsDef||[]).slice();var n=createHashMap(e.encodeDef);var l=createHashMap();var r=createHashMap();var b=[];var q=getDimCount(k,o,j,e.dimCount);for(var c=0;c<q;c++){var i=j[c]=extend({},isObject$1(j[c])?j[c]:{name:j[c]});var m=i.name;var a=b[c]={otherDims:{}};if(m!=null&&l.get(m)==null){a.name=a.displayName=m;l.set(m,c)}i.type!=null&&(a.type=i.type);i.displayName!=null&&(a.displayName=i.displayName)}n.each(function(a,c){a=normalizeToArray(a).slice();if(a.length===1&&!isString(a[0])&&a[0]<0){n.set(c,!1);return}var f=n.set(c,[]);each$1(a,function(g,h){isString(g)&&(g=l.get(g));if(g!=null&&g<q){f[h]=g;applyDim(b[g],c,h)}})});var h=0;each$1(o,function(a,m){var g;var a;var f;var i;if(isString(a)){g=a;a={}}else {g=a.name;var l=a.ordinalMeta;a.ordinalMeta=null;a=clone(a);a.ordinalMeta=l;f=a.dimsDef;i=a.otherDims;a.name=a.coordDim=a.coordDimIndex=a.dimsDef=a.otherDims=null}var c=n.get(g);if(c===!1){return}var c=normalizeToArray(c);if(!c.length){for(var j=0;j<(f&&f.length||1);j++){while(h<b.length&&b[h].coordDim!=null){h++}h<b.length&&c.push(h++)}}each$1(c,function(l,j){var c=b[l];applyDim(defaults(c,a),g,j);if(c.name==null&&f){var h=f[j];!isObject$1(h)&&(h={name:h});c.name=c.displayName=h.name;c.defaultTooltip=h.defaultTooltip}i&&defaults(c.otherDims,i)})});function applyDim(b,a,c){if(ee.get(a)!=null){b.otherDims[a]=c}else {b.coordDim=a;b.coordDimIndex=c;r.set(a,!0)}}var p=e.generateCoord;var f=e.generateCoordCount;var t=f!=null;f=p?f||1:0;var u=p||'value';for(var g=0;g<q;g++){var a=b[g]=b[g]||{};var s=a.coordDim;if(s==null){a.coordDim=genName(u,r,t);a.coordDimIndex=0;if(!p||f<=0){a.isExtraCoord=!0}f--}a.name==null&&(a.name=genName(a.coordDim,l));if(a.type==null&&guessOrdinal(k,g,a.name)){a.type='ordinal'}}return b}function getDimCount(f,b,e,c){var a=Math.max(f.dimensionsDetectCount||1,b.length,e.length,c||0);each$1(b,function(h){var g=h.dimsDef;g&&(a=Math.max(a,g.length))});return a}function genName(a,b,e){if(e||b.get(a)!=null){var c=0;while(b.get(a+c)!=null){c++}a+=c}b.set(a,!0);return a}var bl=function(b,a){a=a||{};return completeDimensions(a.coordDimensions||[],b,{dimsDef:a.dimensionsDefine||b.dimensionsDefine,encodeDef:a.encodeDefine||b.encodeDefine,dimCount:a.dimensionsCount,generateCoord:a.generateCoord,generateCoordCount:a.generateCoordCount})};function enableDataStack(m,c,h){h=h||{};var g=h.byIndex;var j=h.stackedCoordDimension;var n=!!(m&&m.get('stack'));var b;var a;var i;var f;each$1(c,function(e,f){if(isString(e)){c[f]=e={name:e}}if(n&&!e.isExtraCoord){if(!g&&!b&&e.ordinalMeta){b=e}if(!a&&e.type!=='ordinal'&&e.type!=='time'&&(!j||j===e.coordDim)){a=e}}});if(a&&!g&&!b){g=!0}if(a){i='__\x00ecstackresult';f='__\x00ecstackedover';if(b){b.createInvertedIndices=!0}var k=a.coordDim;var l=a.type;var e=0;each$1(c,function(a){if(a.coordDim===k){e++}});c.push({name:i,coordDim:k,coordDimIndex:e,type:l,isExtraCoord:!0,isCalculationCoord:!0});e++;c.push({name:f,coordDim:f,coordDimIndex:e,type:l,isExtraCoord:!0,isCalculationCoord:!0})}return {stackedDimension:a&&a.name,stackedByDimension:b&&b.name,isStackedByIndex:g,stackedOverDimension:f,stackResultDimension:i}}function isDimensionStacked(b,a){return !!a&&a===b.getCalculationInfo('stackedDimension')}function getStackedDimension(b,a){return isDimensionStacked(b,a)?b.getCalculationInfo('stackResultDimension'):a}function createListFromArray(b,h,j){j=j||{};if(!Source.isInstance(b)){b=Source.seriesDataToSource(b)}var n=h.get('coordinateSystem');var e=CoordinateSystemManager.get(n);var c=getCoordSysDefineBySeries(h);var f;if(c){f=map(c.coordSysDims,function(f){var e={name:f};var a=c.axisMap.get(f);if(a){var g=a.get('type');e.type=getDimensionTypeByAxis(g)}return e})}if(!f){f=e&&(e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice())||['x','y']}var g=bl(b,{coordDimensions:f,generateCoord:j.generateCoord});var a;var k;c&&each$1(g,function(e,i){var g=e.coordDim;var f=c.categoryAxisMap.get(g);if(f){if(a==null){a=i}e.ordinalMeta=f.getOrdinalMeta()}if(e.otherDims.itemName!=null){k=!0}});if(!k&&a!=null){g[a].otherDims.itemName=0}var l=enableDataStack(h,g);var i=new s(g,h);i.setCalculationInfo(l);var m=a!=null&&isNeedCompleteOrdinalData(b)?function(g,f,c,e){return e===a?c:this.defaultDimValueGetter(g,f,c,e)}:null;i.hasItemOption=!1;i.initData(b,null,m);return i}function isNeedCompleteOrdinalData(b){if(b.sourceFormat===aP){var a=firstDataNotNull(b.data||[]);return a!=null&&!isArray(getDataItemValue(a))}}function firstDataNotNull(b){var a=0;while(a<b.length&&b[a]==null){a++}return b[a]}function Scale(a){this._setting=a||{};this._extent=[Infinity,-Infinity];this._interval=0;this.init&&this.init.apply(this,arguments)}Scale.prototype.parse=function(a){return a};Scale.prototype.getSetting=function(a){return this._setting[a]};Scale.prototype.contain=function(b){var a=this._extent;return b>=a[0]&&b<=a[1]};Scale.prototype.normalize=function(b){var a=this._extent;if(a[1]===a[0]){return 0.5}return (b-a[0])/(a[1]-a[0])};Scale.prototype.scale=function(b){var a=this._extent;return b*(a[1]-a[0])+a[0]};Scale.prototype.unionExtent=function(b){var a=this._extent;b[0]<a[0]&&(a[0]=b[0]);b[1]>a[1]&&(a[1]=b[1])};Scale.prototype.unionExtentFromData=function(a,b){this.unionExtent(a.getApproximateExtent(b))};Scale.prototype.getExtent=function(){return this._extent.slice()};Scale.prototype.setExtent=function(b,c){var a=this._extent;if(!isNaN(b)){a[0]=b}if(!isNaN(c)){a[1]=c}};Scale.prototype.isBlank=function(){return this._isBlank},Scale.prototype.setBlank=function(a){this._isBlank=a};Scale.prototype.getLabel=null;enableClassExtend(Scale);enableClassManagement(Scale,{registerWhenExtend:!0});function OrdinalMeta(a){this.categories=a.categories||[];this._needCollect=a.needCollect;this._deduplication=a.deduplication;this._map}OrdinalMeta.createByAxisModel=function(e){var b=e.option;var c=b.data;var a=c&&map(c,getName);return new OrdinalMeta({categories:a,needCollect:!a,deduplication:b.dedplication!==!1})};var iO=OrdinalMeta.prototype;iO.getOrdinal=function(a){return getOrCreateMap(this).get(a)};iO.parseAndCollect=function(b){var a;var c=this._needCollect;if(typeof b!=='string'&&!c){return b}if(c&&!this._deduplication){a=this.categories.length;this.categories[a]=b;return a}var e=getOrCreateMap(this);a=e.get(b);if(a==null){if(c){a=this.categories.length;this.categories[a]=b;e.set(b,a)}else {a=NaN}}return a};function getOrCreateMap(a){return a._map||(a._map=createHashMap(a.categories))}function getName(a){if(isObject$1(a)&&a.value!=null){return a.value}else {return a+''}}var e3=Scale.prototype;var eN=Scale.extend({type:'ordinal',init:function(a,b){if(!a||isArray(a)){a=new OrdinalMeta({categories:a})}this._ordinalMeta=a;this._extent=b||[0,a.categories.length-1]},parse:function(a){return typeof a==='string'?this._ordinalMeta.getOrdinal(a):Math.round(a)},contain:function(a){a=this.parse(a);return e3.contain.call(this,a)&&this._ordinalMeta.categories[a]!=null},normalize:function(a){return e3.normalize.call(this,this.parse(a))},scale:function(a){return Math.round(e3.scale.call(this,a))},getTicks:function(){var c=[];var b=this._extent;var a=b[0];while(a<=b[1]){c.push(a);a++}return c},getLabel:function(a){if(!this.isBlank()){return this._ordinalMeta.categories[a]}},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(a,b){this.unionExtent(a.getApproximateExtent(b))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:noop,niceExtent:noop});eN.create=function(){return new eN()};var eI=round$1;function intervalScaleNiceTicks(c,i,f,e){var b={};var j=c[1]-c[0];var a=b.interval=nice(j/i,!0);if(f!=null&&a<f){a=b.interval=f}if(e!=null&&a>e){a=b.interval=e}var g=b.intervalPrecision=getIntervalPrecision(a);var h=b.niceTickExtent=[eI(Math.ceil(c[0]/a)*a,g),eI(Math.floor(c[1]/a)*a,g)];fixExtent(h,c);return b}function getIntervalPrecision(a){return getPrecisionSafe(a)+2}function clamp(a,c,b){a[c]=Math.max(Math.min(a[c],b[1]),b[0])}function fixExtent(a,b){!isFinite(a[0])&&(a[0]=b[0]);!isFinite(a[1])&&(a[1]=b[1]);clamp(a,0,b);clamp(a,1,b);if(a[0]>a[1]){a[0]=a[1]}}function intervalScaleGetTicks(f,e,c,g){var a=[];if(!f){return a}var h=10000;if(e[0]<c[0]){a.push(e[0])}var b=c[0];while(b<=c[1]){a.push(b);b=eI(b+f,g);if(b===a[a.length-1]){break}if(a.length>h){return []}}if(e[1]>(a.length?a[a.length-1]:c[1])){a.push(e[1])}return a}var eY=round$1;var U=Scale.extend({type:'interval',_interval:0,_intervalPrecision:2,setExtent:function(b,c){var a=this._extent;if(!isNaN(b)){a[0]=parseFloat(b)}if(!isNaN(c)){a[1]=parseFloat(c)}},unionExtent:function(b){var a=this._extent;b[0]<a[0]&&(a[0]=b[0]);b[1]>a[1]&&(a[1]=b[1]);U.prototype.setExtent.call(this,a[0],a[1])},getInterval:function(){return this._interval},setInterval:function(a){this._interval=a;this._niceExtent=this._extent.slice();this._intervalPrecision=getIntervalPrecision(a)},getTicks:function(){return intervalScaleGetTicks(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(b,c){if(b==null){return ''}var a=c&&c.precision;if(a==null){a=getPrecisionSafe(b)||0}else {if(a==='auto'){a=this._intervalPrecision}}b=eY(b,a,!0);return addCommas(b)},niceTicks:function(c,g,f){c=c||5;var a=this._extent;var b=a[1]-a[0];if(!isFinite(b)){return}if(b<0){b=-b;a.reverse()}var e=intervalScaleNiceTicks(a,c,g,f);this._intervalPrecision=e.intervalPrecision;this._interval=e.interval;this._niceExtent=e.niceTickExtent},niceExtent:function(b){var a=this._extent;if(a[0]===a[1]){if(a[0]!==0){var e=a[0];if(!b.fixMax){a[1]+=e/2;a[0]-=e/2}else {a[0]-=e/2}}else {a[1]=1}}var f=a[1]-a[0];if(!isFinite(f)){a[0]=0;a[1]=1}this.niceTicks(b.splitNumber,b.minInterval,b.maxInterval);var c=this._interval;if(!b.fixMin){a[0]=eY(Math.floor(a[0]/c)*c)}if(!b.fixMax){a[1]=eY(Math.ceil(a[1]/c)*c)}}});U.create=function(){return new U()};var eO='__ec_stack_';var gr=0.5;var im=typeof Float32Array!=='undefined'?Float32Array:Array;function getSeriesStackId(a){return a.get('stack')||eO+a.seriesIndex}function getAxisKey(a){return a.dim+a.index}function getLayoutOnAxis(c){var g=[];var e=c.axis;var f='axis0';if(e.type!=='category'){return}var j=e.getBandWidth();for(var a=0;a<c.count||0;a++){g.push(defaults({bandWidth:j,axisKey:f,stackId:eO+a},c))}var i=doCalBarWidthAndOffset(g);var h=[];for(var a=0;a<c.count;a++){var b=i[f][eO+a];b.offsetCenter=b.offset+b.width/2;h.push(b)}return h}function prepareLayoutBarSeries(b,c){var a=[];c.eachSeriesByType(b,function(e){if(isOnCartesian(e)&&!isInLargeMode(e)){a.push(e)}});return a}function getValueAxesMinGaps(i){var a={};each$1(i,function(g){var j=g.coordinateSystem;var b=j.getBaseAxis();if(b.type!=='time'&&b.type!=='value'){return}var c=g.getData();var e=b.dim+'_'+b.index;var l=c.mapDimension(b.dim);for(var f=0,k=c.count();f<k;++f){var h=c.get(l,f);if(!a[e]){a[e]=[h]}else {a[e].push(h)}}});var h=[];for(var g in a){if(a.hasOwnProperty(g)){var b=a[g];if(b){b.sort(function(a,b){return a-b});var c=null;for(var e=1;e<b.length;++e){var f=b[e]-b[e-1];if(f>0){c=c===null?f:Math.min(c,f)}}h[g]=c}}}return h}function makeColumnLayout(b){var c=getValueAxesMinGaps(b);var a=[];each$1(b,function(f){var o=f.coordinateSystem;var e=o.getBaseAxis();var h=e.getExtent();var g;if(e.type==='category'){g=e.getBandWidth()}else {if(e.type==='value'||e.type==='time'){var t=e.dim+'_'+e.index;var j=c[t];var i=Math.abs(h[1]-h[0]);var k=e.scale.getExtent();var p=Math.abs(k[1]-k[0]);g=j?i/p*j:i}else {var s=f.getData();g=Math.abs(h[1]-h[0])/s.count()}}var q=parsePercent$1(f.get('barWidth'),g);var m=parsePercent$1(f.get('barMaxWidth'),g);var n=parsePercent$1(f.get('barMinWidth')||1,g);var r=f.get('barGap');var l=f.get('barCategoryGap');a.push({bandWidth:g,barWidth:q,barMaxWidth:m,barMinWidth:n,barGap:r,barCategoryGap:l,axisKey:getAxisKey(e),stackId:getSeriesStackId(f)})});return doCalBarWidthAndOffset(a)}function doCalBarWidthAndOffset(c){var b={};each$1(c,function(a,o){var m=a.axisKey;var l=a.bandWidth;var e=b[m]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:'20%',gap:'30%',stacks:{}};var g=e.stacks;b[m]=e;var f=a.stackId;if(!g[f]){e.autoWidthCount++}g[f]=g[f]||{width:0,maxWidth:0};var h=a.barWidth;if(h&&!g[f].width){g[f].width=h;h=Math.min(e.remainedWidth,h);e.remainedWidth-=h}var j=a.barMaxWidth;j&&(g[f].maxWidth=j);var k=a.barMinWidth;k&&(g[f].minWidth=k);var n=a.barGap;n!=null&&(e.gap=n);var i=a.barCategoryGap;i!=null&&(e.categoryGap=i)});var a={};each$1(b,function(f,i){a[i]={};var l=f.stacks;var n=f.bandWidth;var m=parsePercent$1(f.categoryGap,n);var g=parsePercent$1(f.gap,1);var h=f.remainedWidth;var e=f.autoWidthCount;var b=(h-m)/(e+(e-1)*g);b=Math.max(b,0);each$1(l,function(g){var j=g.maxWidth;var k=g.minWidth;if(!g.width){var a=b;if(j&&j<a){a=Math.min(j,h)}if(k&&k>a){a=k}if(a!==b){g.width=a;h-=a;e--}}else {var a=g.width;if(j){a=Math.min(a,j)}if(k){a=Math.max(a,k)}g.width=a;h-=a;e--}});b=(h-m)/(e+(e-1)*g);b=Math.max(b,0);var k=0;var j;each$1(l,function(a,e){if(!a.width){a.width=b}j=a;k+=a.width*(1+g)});if(j){k-=j.width*g}var o=-k/2;each$1(l,function(e,b){a[i][b]=a[i][b]||{bandWidth:n,offset:o,width:e.width};o+=e.width*(1+g)})});return a}function retrieveColumnLayout(b,e,c){if(b&&e){var a=b[getAxisKey(e)];if(a!=null&&c!=null){a=a[getSeriesStackId(c)]}return a}}function layout(e,f){var b=prepareLayoutBarSeries(e,f);var c=makeColumnLayout(b);var a={};each$1(b,function(o){var h=o.getData();var p=o.coordinateSystem;var q=p.getBaseAxis();var g=getSeriesStackId(o);var t=c[getAxisKey(q)][g];var u=t.offset;var v=t.width;var x=p.getOtherAxis(q);var n=o.get('barMinHeight')||0;a[g]=a[g]||[];h.setLayout({bandWidth:t.bandWidth,offset:u,size:v});var B=h.mapDimension(x.dim);var D=h.mapDimension(q.dim);var r=isDimensionStacked(h,B);var C=x.isHorizontal();var k=getValueAxisStart(q,x,r);for(var m=0,E=h.count();m<E;m++){var s=h.get(B,m);var b=h.get(D,m);if(isNaN(s)||isNaN(b)){continue}var y=s>=0?'p':'n';var w=k;if(r){if(!a[g][b]){a[g][b]={p:k,n:k}}w=a[g][b][y]}var z;var A;var j;var i;if(C){var l=p.dataToPoint([s,b]);z=w;A=l[1]+u;j=l[0]-k;i=v;if(Math.abs(j)<n){j=(j<0?-1:1)*n}r&&(a[g][b][y]+=j)}else {var l=p.dataToPoint([b,s]);z=l[0]+u;A=w;j=v;i=l[1]-k;if(Math.abs(i)<n){i=(i<=0?-1:1)*n}r&&(a[g][b][y]+=i)}h.setItemLayout(m,{x:z,y:A,width:j,height:i})}},this)}var mM={seriesType:'bar',plan:bh(),reset:function(a){if(!isOnCartesian(a)||!isInLargeMode(a)){return}var i=a.getData();var c=a.coordinateSystem;var b=c.getBaseAxis();var e=c.getOtherAxis(b);var j=i.mapDimension(e.dim);var k=i.mapDimension(b.dim);var g=e.isHorizontal();var h=g?0:1;var f=retrieveColumnLayout(makeColumnLayout([a]),b,a).width;if(!(f>gr)){f=gr}return {progress:progress};function progress(r,o){var s=r.count;var m=new im(s*2);var p=new im(s);var i;var l=[];var n=[];var q=0;var t=0;while((i=r.next())!=null){n[h]=o.get(j,i);n[1-h]=o.get(k,i);l=c.dataToPoint(n,null,l);m[q++]=l[0];m[q++]=l[1];p[t++]=i}o.setLayout({largePoints:m,largeDataIndices:p,barWidth:f,valueAxisStart:getValueAxisStart(b,e,!1),valueAxisHorizontal:g})}}};function isOnCartesian(a){return a.coordinateSystem&&a.coordinateSystem.type==='cartesian2d'}function isInLargeMode(a){return a.pipelineContext&&a.pipelineContext.large}function getValueAxisStart(b,a,c){return a.toGlobalCoord(a.dataToCoord(a.type==='log'?1:0))}var kj=U.prototype;var iv=Math.ceil;var ia=Math.floor;var bx=1000;var bw=bx*60;var ce=bw*60;var m=ce*24;var ol=function(e,f,a,c){while(a<c){var b=a+c>>>1;if(e[b][1]<f){a=b+1}else {c=b}}return a};var e7=U.extend({type:'time',getLabel:function(c){var a=this._stepLvl;var b=new Date(c);return formatTime(a[0],b,this.getSetting('useUTC'))},niceExtent:function(b){var a=this._extent;if(a[0]===a[1]){a[0]-=m;a[1]+=m}if(a[1]===-Infinity&&a[0]===Infinity){var e=new Date();a[1]=+new Date(e.getFullYear(),e.getMonth(),e.getDate());a[0]=a[1]-m}this.niceTicks(b.splitNumber,b.minInterval,b.maxInterval);var c=this._interval;if(!b.fixMin){a[0]=round$1(ia(a[0]/c)*c)}if(!b.fixMax){a[1]=round$1(iv(a[1]/c)*c)}},niceTicks:function(f,h,g){f=f||10;var b=this._extent;var l=b[1]-b[0];var c=l/f;if(h!=null&&c<h){c=h}if(g!=null&&c>g){c=g}var j=eZ.length;var o=ol(eZ,c,0,j);var i=eZ[Math.min(o,j-1)];var a=i[1];if(i[0]==='year'){var m=l/a;var n=nice(m/f,!0);a*=n}var e=this.getSetting('useUTC')?0:(new Date(+b[0]||+b[1])).getTimezoneOffset()*60*1000;var k=[Math.round(iv((b[0]-e)/a)*a+e),Math.round(ia((b[1]-e)/a)*a+e)];fixExtent(k,b);this._stepLvl=i;this._interval=a;this._niceExtent=k},parse:function(a){return +parseDate(a)}});each$1(['contain','normalize'],function(a){e7.prototype[a]=function(b){return kj[a].call(this,this.parse(b))}});var eZ=[['hh:mm:ss',bx],['hh:mm:ss',bx*5],['hh:mm:ss',bx*10],['hh:mm:ss',bx*15],['hh:mm:ss',bx*30],['hh:mm\nMM-dd',bw],['hh:mm\nMM-dd',bw*5],['hh:mm\nMM-dd',bw*10],['hh:mm\nMM-dd',bw*15],['hh:mm\nMM-dd',bw*30],['hh:mm\nMM-dd',ce],['hh:mm\nMM-dd',ce*2],['hh:mm\nMM-dd',ce*6],['hh:mm\nMM-dd',ce*12],['MM-dd\nyyyy',m],['MM-dd\nyyyy',m*2],['MM-dd\nyyyy',m*3],['MM-dd\nyyyy',m*4],['MM-dd\nyyyy',m*5],['MM-dd\nyyyy',m*6],['week',m*7],['MM-dd\nyyyy',m*10],['week',m*14],['week',m*21],['month',m*31],['week',m*42],['month',m*62],['week',m*70],['quarter',m*95],['month',m*31*4],['month',m*31*5],['half-year',m*380/2],['month',m*31*8],['month',m*31*10],['year',m*380]];e7.create=function(a){return new e7({useUTC:a.ecModel.get('useUTC')})};var cY=Scale.prototype;var cy=U.prototype;var ki=getPrecisionSafe;var kU=round$1;var mP=Math.floor;var ne=Math.ceil;var dm=Math.pow;var _=Math.log;var dn=Scale.extend({type:'log',base:10,$constructor:function(){Scale.apply(this,arguments);this._originalScale=new U()},getTicks:function(){var a=this._originalScale;var c=this._extent;var b=a.getExtent();return map(cy.getTicks.call(this),function(f){var e=round$1(dm(this.base,f));e=f===c[0]&&a.__fixMin?fixRoundingError(e,b[0]):e;e=f===c[1]&&a.__fixMax?fixRoundingError(e,b[1]):e;return e},this)},getLabel:cy.getLabel,scale:function(a){a=cY.scale.call(this,a);return dm(this.base,a)},setExtent:function(a,b){var c=this.base;a=_(a)/_(c);b=_(b)/_(c);cy.setExtent.call(this,a,b)},getExtent:function(){var e=this.base;var a=cY.getExtent.call(this);a[0]=dm(e,a[0]);a[1]=dm(e,a[1]);var b=this._originalScale;var c=b.getExtent();b.__fixMin&&(a[0]=fixRoundingError(a[0],c[0]));b.__fixMax&&(a[1]=fixRoundingError(a[1],c[1]));return a},unionExtent:function(a){this._originalScale.unionExtent(a);var b=this.base;a[0]=_(a[0])/_(b);a[1]=_(a[1])/_(b);cY.unionExtent.call(this,a)},unionExtentFromData:function(a,b){this.unionExtent(a.getApproximateExtent(b))},niceTicks:function(e){e=e||10;var b=this._extent;var c=b[1]-b[0];if(c===Infinity||c<=0){return}var a=quantity(c);var g=e/c*a;if(g<=0.5){a*=10}while(!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0){a*=10}var f=[round$1(ne(b[0]/a)*a),round$1(mP(b[1]/a)*a)];this._interval=a;this._niceExtent=f},niceExtent:function(a){cy.niceExtent.call(this,a);var b=this._originalScale;b.__fixMin=a.fixMin;b.__fixMax=a.fixMax}});each$1(['contain','normalize'],function(a){dn.prototype[a]=function(b){b=_(b)/_(this.base);return cY[a].call(this,b)}});dn.create=function(){return new dn()};function fixRoundingError(b,a){return kU(b,ki(a))}function getScaleExtent(j,g){var h=j.type;var c=g.getMin();var b=g.getMax();var r=c!=null;var q=b!=null;var f=j.getExtent();var i;var e;var k;if(h==='ordinal'){i=g.getCategories().length}else {e=g.get('boundaryGap');if(!isArray(e)){e=[e||0,e||0]}if(typeof e[0]==='boolean'){if(a){console.warn('Boolean type for boundaryGap is only '+'allowed for ordinal axis. Please use string in '+'percentage instead, e.g., "20%". Currently, '+'boundaryGap is set to be 0.')}e=[0,0]}e[0]=parsePercent$1(e[0],1);e[1]=parsePercent$1(e[1],1);k=f[1]-f[0]||Math.abs(f[0])}if(c==null){c=h==='ordinal'?i?0:NaN:f[0]-e[0]*k}if(b==null){b=h==='ordinal'?i?i-1:NaN:f[1]+e[1]*k}if(c==='dataMin'){c=f[0]}else {if(typeof c==='function'){c=c({min:f[0],max:f[1]})}}if(b==='dataMax'){b=f[1]}else {if(typeof b==='function'){b=b({min:f[0],max:f[1]})}}(c==null||!isFinite(c))&&(c=NaN);(b==null||!isFinite(b))&&(b=NaN);j.setBlank(eqNaN(c)||eqNaN(b)||h==='ordinal'&&!j.getOrdinalMeta().categories.length);if(g.getNeedCrossZero()){if(c>0&&b>0&&!r){c=0}if(c<0&&b<0&&!q){b=0}}var o=g.ecModel;if(o&&h==='time'){var m=prepareLayoutBarSeries('bar',o);var l;each$1(m,function(a){l|=a.getBaseAxis()===g.axis});if(l){var p=makeColumnLayout(m);var n=adjustScaleForOverflow(c,b,g,p);c=n.min;b=n.max}}return [c,b]}function adjustScaleForOverflow(e,c,k,m){var i=k.axis.getExtent();var n=i[1]-i[0];var f=retrieveColumnLayout(m,k.axis);if(f===undefined){return {min:e,max:c}}var b=Infinity;each$1(f,function(a){b=Math.min(a.offset,b)});var a=-Infinity;each$1(f,function(b){a=Math.max(b.offset+b.width,a)});b=Math.abs(b);a=Math.abs(a);var h=b+a;var j=c-e;var l=1-(b+a)/n;var g=j/l-j;c+=g*(a/h);e-=g*(b/h);return {min:e,max:c}}function niceScaleExtent(b,a){var f=getScaleExtent(b,a);var i=a.getMin()!=null;var h=a.getMax()!=null;var g=a.get('splitNumber');if(b.type==='log'){b.base=a.get('logBase')}var c=b.type;b.setExtent(f[0],f[1]);b.niceExtent({splitNumber:g,fixMin:i,fixMax:h,minInterval:c==='interval'||c==='time'?a.get('minInterval'):null,maxInterval:c==='interval'||c==='time'?a.get('maxInterval'):null});var e=a.get('interval');if(e!=null){b.setInterval&&b.setInterval(e)}}function createScaleByModel(b,a){a=a||b.get('type');if(a){switch(a){case 'category':return new eN(b.getOrdinalMeta?b.getOrdinalMeta():b.getCategories(),[Infinity,-Infinity]);case 'value':return new U();default:return (Scale.getClass(a)||U).create(b);}}}function ifAxisCrossZero(e){var a=e.scale.getExtent();var c=a[0];var b=a[1];return !(c>0&&b>0||c<0&&b<0)}function makeLabelFormatter(b){var a=b.getLabelModel().get('formatter');var c=b.type==='category'?b.scale.getExtent()[0]:null;if(typeof a==='string'){a=function(a){return function(c){c=b.scale.getLabel(c);return a.replace('{value}',c!=null?c:'')}}(a);return a}else {if(typeof a==='function'){return function(e,f){if(c!=null){f=e-c}return a(getAxisRawValue(b,e),f)}}else {return function(a){return b.scale.getLabel(a)}}}}function getAxisRawValue(b,a){return b.type==='category'?b.scale.getLabel(a):a}function estimateLabelUnionRect(b){var o=b.model;var e=b.scale;if(!o.get('axisLabel.show')||e.isBlank()){return}var n=b.type==='category';var c;var a;var k=e.getExtent();if(n){a=e.count()}else {c=e.getTicks();a=c.length}var h=b.getLabelModel();var m=makeLabelFormatter(b);var f;var j=1;if(a>40){j=Math.ceil(a/40)}for(var g=0;g<a;g+=j){var p=c?c[g]:k[0]+g;var q=m(p);var l=h.getTextRect(q);var i=rotateTextRect(l,h.get('rotate')||0);f?f.union(i):f=i}return f}function rotateTextRect(i,j){var a=j*Math.PI/180;var b=i.plain();var e=b.width;var c=b.height;var h=e*Math.cos(a)+c*Math.sin(a);var f=e*Math.sin(a)+c*Math.cos(a);var g=new BoundingRect(b.x,b.y,h,f);return g}function getOptionCategoryInterval(b){var a=b.get('interval');return a==null?'auto':a}function shouldShowAllLabels(a){return a.type==='category'&&getOptionCategoryInterval(a.getLabelModel())===0}var aQ={getMin:function(c){var b=this.option;var a=!c&&b.rangeStart!=null?b.rangeStart:b.min;if(this.axis&&a!=null&&a!=='dataMin'&&typeof a!=='function'&&!eqNaN(a)){a=this.axis.scale.parse(a)}return a},getMax:function(c){var b=this.option;var a=!c&&b.rangeEnd!=null?b.rangeEnd:b.max;if(this.axis&&a!=null&&a!=='dataMax'&&typeof a!=='function'&&!eqNaN(a)){a=this.axis.scale.parse(a)}return a},getNeedCrossZero:function(){var a=this.option;return a.rangeStart!=null||a.rangeEnd!=null?!1:!a.scale},getCoordSysModel:noop,setRange:function(a,b){this.option.rangeStart=a;this.option.rangeEnd=b},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};var nU=extendShape({type:'triangle',shape:{cx:0,cy:0,width:0,height:0},buildPath:function(b,a){var e=a.cx;var f=a.cy;var g=a.width/2;var c=a.height/2;b.moveTo(e,f-c);b.lineTo(e+g,f+c);b.lineTo(e-g,f+c);b.closePath()}});var n4=extendShape({type:'diamond',shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,b){var c=b.cx;var e=b.cy;var g=b.width/2;var f=b.height/2;a.moveTo(c,e-f);a.lineTo(c+g,e);a.lineTo(c,e+f);a.lineTo(c-g,e);a.closePath()}});var oM=extendShape({type:'pin',shape:{x:0,y:0,width:0,height:0},buildPath:function(f,i){var b=i.x;var k=i.y;var p=i.width/5*3;var o=Math.max(p,i.height);var a=p/2;var c=a*a/(o-a);var g=k-o+a+c;var e=Math.asin(c/a);var j=Math.cos(e)*a;var m=Math.sin(e);var n=Math.cos(e);var h=a*0.6;var l=a*0.7;f.moveTo(b-j,g+c);f.arc(b,g,a,Math.PI-e,Math.PI*2+e);f.bezierCurveTo(b+j-m*h,g+c+n*h,b,k-l,b,k);f.bezierCurveTo(b,k-l,b-j+m*h,g+c+n*h,b-j,g+c);f.closePath()}});var oB=extendShape({type:'arrow',shape:{x:0,y:0,width:0,height:0},buildPath:function(a,e){var f=e.height;var h=e.width;var b=e.x;var c=e.y;var g=h/3*2;a.moveTo(b,c);a.lineTo(b+g,c+f);a.lineTo(b,c+f/4*3);a.lineTo(b-g,c+f);a.lineTo(b,c);a.closePath()}});var mV={line:B,rect:h,roundRect:h,square:h,circle:ao,diamond:n4,pin:oM,arrow:oB,triangle:nU};var kG={line:function(c,e,f,b,a){a.x1=c;a.y1=e+b/2;a.x2=c+f;a.y2=e+b/2},rect:function(e,f,c,b,a){a.x=e;a.y=f;a.width=c;a.height=b},roundRect:function(e,f,c,b,a){a.x=e;a.y=f;a.width=c;a.height=b;a.r=Math.min(c,b)/4},square:function(f,g,e,c,a){var b=Math.min(e,c);a.x=f;a.y=g;a.width=b;a.height=b},circle:function(e,f,c,b,a){a.cx=e+c/2;a.cy=f+b/2;a.r=Math.min(c,b)/2},diamond:function(e,f,c,b,a){a.cx=e+c/2;a.cy=f+b/2;a.width=c;a.height=b},pin:function(e,f,c,b,a){a.x=e+c/2;a.y=f+b/2;a.width=c;a.height=b},arrow:function(e,f,c,b,a){a.x=e+c/2;a.y=f+b/2;a.width=c;a.height=b},triangle:function(e,f,c,b,a){a.cx=e+c/2;a.cy=f+b/2;a.width=c;a.height=b}};var d3={};each$1(mV,function(a,b){d3[b]=new a()});var nt=extendShape({type:'symbol',shape:{symbolType:'',x:0,y:0,width:0,height:0},calculateTextPosition:function(f,c,a){var e=calculateTextPosition(f,c,a);var b=this.shape;if(b&&b.symbolType==='pin'&&c.textPosition==='inside'){e.y=a.y+a.height*0.4}return e},buildPath:function(f,c,e){var b=c.symbolType;if(b!=='none'){var a=d3[b];if(!a){b='rect';a=d3[b]}kG[b](c.x,c.y,c.width,c.height,a.shape);a.buildPath(f,a.shape,e)}}});function symbolPathSetColor(b,e){if(this.type!=='image'){var a=this.style;var c=this.shape;if(c&&c.symbolType==='line'){a.stroke=b}else {if(this.__isEmptyBrush){a.stroke=b;a.fill=e||'#fff'}else {a.fill&&(a.fill=b);a.stroke&&(a.stroke=b)}}this.dirty(!1)}}function createSymbol(a,f,g,e,c,j,h){var i=a.indexOf('empty')===0;if(i){a=a.substr(5,1).toLowerCase()+a.substr(6)}var b;if(a.indexOf('image://')===0){b=makeImage(a.slice(8),new BoundingRect(f,g,e,c),h?'center':'cover')}else {if(a.indexOf('path://')===0){b=makePath(a.slice(7),{},new BoundingRect(f,g,e,c),h?'center':'cover')}else {b=new nt({shape:{symbolType:a,x:f,y:g,width:e,height:c}})}}b.__isEmptyBrush=i;b.setColor=symbolPathSetColor;b.setColor(j);return b}function createList(a){return createListFromArray(a.getSource(),a)}var mF={isDimensionStacked:isDimensionStacked,enableDataStack:enableDataStack,getStackedDimension:getStackedDimension};function createScale(e,b){var a=b;if(!Model.isInstance(b)){a=new Model(b);mixin(a,aQ)}var c=createScaleByModel(a);c.setExtent(e[0],e[1]);niceScaleExtent(c,a);return c}function mixinAxisModelCommonMethods(a){mixin(a,aQ)}var oq=(Object.freeze||Object)({createList:createList,getLayoutRect:getLayoutRect,dataStack:mF,createScale:createScale,mixinAxisModelCommonMethods:mixinAxisModelCommonMethods,completeDimensions:completeDimensions,createDimensions:bl,createSymbol:createSymbol});var nn=1.0E-8;function isAroundEqual$1(a,b){return Math.abs(a-b)<nn}function contain$1(b,h,i){var g=0;var a=b[0];if(!a){return !1}for(var f=1;f<b.length;f++){var e=b[f];g+=windingLine(a[0],a[1],e[0],e[1],h,i);a=e}var c=b[0];if(!isAroundEqual$1(a[0],c[0])||!isAroundEqual$1(a[1],c[1])){g+=windingLine(a[0],a[1],c[0],c[1],h,i)}return g!==0}function Region(e,c,a){this.name=e;this.geometries=c;if(!a){var b=this.getBoundingRect();a=[b.x+b.width/2,b.y+b.height/2]}else {a=[a[0],a[1]]}this.center=a}Region.prototype={constructor:Region,properties:null,getBoundingRect:function(){var i=this._rect;if(i){return i}var e=Number.MAX_VALUE;var a=[e,e];var b=[-e,-e];var h=[];var g=[];var f=this.geometries;for(var c=0;c<f.length;c++){if(f[c].type!=='polygon'){continue}var j=f[c].exterior;fromPoints(j,h,g);min(a,a,h);max(b,b,g)}if(c===0){a[0]=a[1]=b[0]=b[1]=0}return this._rect=new BoundingRect(a[0],a[1],b[0]-a[0],b[1]-a[1])},contain:function(c){var i=this.getBoundingRect();var b=this.geometries;if(!i.contain(c[0],c[1])){return !1}j: for(var a=0,h=b.length;a<h;a++){if(b[a].type!=='polygon'){continue}var g=b[a].exterior;var e=b[a].interiors;if(contain$1(g,c[0],c[1])){for(var f=0;f<(e?e.length:0);f++){if(contain$1(e[f])){continue j}}return !0}}return !1},transformTo:function(n,o,i,h){var a=this.getBoundingRect();var l=a.width/a.height;if(!i){i=l*h}else {if(!h){h=i/l}}var m=new BoundingRect(n,o,i,h);var k=a.calculateTransform(m);var g=this.geometries;for(var f=0;f<g.length;f++){if(g[f].type!=='polygon'){continue}var j=g[f].exterior;var c=g[f].interiors;for(var b=0;b<j.length;b++){applyTransform(j[b],j[b],k)}for(var e=0;e<(c?c.length:0);e++){for(var b=0;b<c[e].length;b++){applyTransform(c[e][b],c[e][b],k)}}}a=this._rect;a.copy(m);this.center=[a.x+a.width/2,a.y+a.height/2]},cloneShallow:function(b){b==null&&(b=this.name);var a=new Region(b,this.geometries,this.center);a._rect=this._rect;a.transformTo=null;return a}};function decode(a){if(!a.UTF8Encoding){return a}var e=a.UTF8Scale;if(e==null){e=1024}var k=a.features;for(var i=0;i<k.length;i++){var l=k[i];var g=l.geometry;var h=g.coordinates;var j=g.encodeOffsets;for(var b=0;b<h.length;b++){var f=h[b];if(g.type==='Polygon'){h[b]=decodePolygon(f,j[b],e)}else {if(g.type==='MultiPolygon'){for(var c=0;c<f.length;c++){var m=f[c];f[c]=decodePolygon(m,j[b][c],e)}}}}}a.UTF8Encoding=!1;return a}function decodePolygon(e,f,g){var h=[];var i=f[0];var j=f[1];for(var c=0;c<e.length;c+=2){var a=e.charCodeAt(c)-64;var b=e.charCodeAt(c+1)-64;a=a>>1^-(a&1);b=b>>1^-(b&1);a+=i;b+=j;i=a;j=b;h.push([a/g,b/g])}return h}var eD=function(a){decode(a);return map(filter(a.features,function(b){return b.geometry&&b.properties&&b.geometry.coordinates.length>0}),function(g){var e=g.properties;var f=g.geometry;var b=f.coordinates;var c=[];if(f.type==='Polygon'){c.push({type:'polygon',exterior:b[0],interiors:b.slice(1)})}if(f.type==='MultiPolygon'){each$1(b,function(b){if(b[0]){c.push({type:'polygon',exterior:b[0],interiors:b.slice(1)})}})}var h=new Region(e.name,c,e.cp);h.properties=e;return h})};var cj=makeInner();function createAxisLabels(a){return a.type==='category'?makeCategoryLabels(a):makeRealNumberLabels(a)}function createAxisTicks(a,b){return a.type==='category'?makeCategoryTicks(a,b):{ticks:a.scale.getTicks()}}function makeCategoryLabels(a){var b=a.getLabelModel();var c=makeCategoryLabelsActually(a,b);return !b.get('show')||a.scale.isBlank()?{labels:[],labelCategoryInterval:c.labelCategoryInterval}:c}function makeCategoryLabelsActually(b,h){var f=getListCache(b,'labels');var a=getOptionCategoryInterval(h);var g=listCacheGet(f,a);if(g){return g}var e;var c;if(isFunction$1(a)){e=makeLabelsByCustomizedCategoryInterval(b,a)}else {c=a==='auto'?makeAutoCategoryInterval(b):a;e=makeLabelsByNumericCategoryInterval(b,c)}return listCacheSet(f,a,{labels:e,labelCategoryInterval:c})}function makeCategoryTicks(b,h){var g=getListCache(b,'ticks');var a=getOptionCategoryInterval(h);var i=listCacheGet(g,a);if(i){return i}var c;var e;if(!h.get('show')||b.scale.isBlank()){c=[]}if(isFunction$1(a)){c=makeLabelsByCustomizedCategoryInterval(b,a,!0)}else {if(a==='auto'){var f=makeCategoryLabelsActually(b,b.getLabelModel());e=f.labelCategoryInterval;c=map(f.labels,function(a){return a.tickValue})}else {e=a;c=makeLabelsByNumericCategoryInterval(b,e,!0)}}return listCacheSet(g,a,{ticks:c,tickCategoryInterval:e})}function makeRealNumberLabels(a){var c=a.scale.getTicks();var b=makeLabelFormatter(a);return {labels:map(c,function(c,e){return {formattedLabel:b(c,e),rawLabel:a.scale.getLabel(c),tickValue:c}})}}function getListCache(a,b){return cj(a)[b]||(cj(a)[b]=[])}function listCacheGet(b,c){for(var a=0;a<b.length;a++){if(b[a].key===c){return b[a].value}}}function listCacheSet(b,c,a){b.push({key:c,value:a});return a}function makeAutoCategoryInterval(a){var b=cj(a).autoInterval;return b!=null?b:cj(a).autoInterval=a.calculateCategoryInterval()}function calculateCategoryInterval(b){var j=fetchAutoCategoryIntervalCalculationParams(b);var w=makeLabelFormatter(b);var q=(j.axisRotate-j.labelRotate)/180*Math.PI;var p=b.scale;var g=p.getExtent();var i=p.count();if(g[1]-g[0]<1){return 0}var v=1;if(i>40){v=Math.max(1,Math.floor(i/40))}var c=g[0];var r=b.dataToCoord(c+1)-b.dataToCoord(c);var y=Math.abs(r*Math.cos(q));var x=Math.abs(r*Math.sin(q));var l=0;var k=0;for(;c<=g[1];c+=v){var t=0;var s=0;var u=getBoundingRect(w(c),j.font,'center','top');t=u.width*1.3;s=u.height*1.3;l=Math.max(l,t,7);k=Math.max(k,s,7)}var n=l/y;var m=k/x;isNaN(n)&&(n=Infinity);isNaN(m)&&(m=Infinity);var e=Math.max(0,Math.floor(Math.min(n,m)));var a=cj(b.model);var h=b.getExtent();var f=a.lastAutoInterval;var o=a.lastTickCount;if(f!=null&&o!=null&&Math.abs(f-e)<=1&&Math.abs(o-i)<=1&&f>e&&a.axisExtend0===h[0]&&a.axisExtend1===h[1]){e=f}else {a.lastTickCount=i;a.lastAutoInterval=e;a.axisExtend0=h[0];a.axisExtend1=h[1]}return e}function fetchAutoCategoryIntervalCalculationParams(a){var b=a.getLabelModel();return {axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:b.get('rotate')||0,font:b.getFont()}}function makeLabelsByNumericCategoryInterval(f,k,p){var n=makeLabelFormatter(f);var g=f.scale;var a=g.getExtent();var i=f.getLabelModel();var j=[];var b=Math.max((k||0)+1,1);var c=a[0];var o=g.count();if(c!==0&&b>1&&o/b>2){c=Math.round(Math.ceil(c/b)*b)}var h=shouldShowAllLabels(f);var m=i.get('showMinLabel')||h;var l=i.get('showMaxLabel')||h;if(m&&c!==a[0]){addItem(a[0])}var e=c;for(;e<=a[1];e+=b){addItem(e)}if(l&&e-b!==a[1]){addItem(a[1])}function addItem(a){j.push(p?a:{formattedLabel:n(a),rawLabel:g.getLabel(a),tickValue:a})}return j}function makeLabelsByCustomizedCategoryInterval(c,e,g){var a=c.scale;var f=makeLabelFormatter(c);var b=[];each$1(a.getTicks(),function(h){var i=a.getLabel(h);if(e(h,i)){b.push(g?h:{formattedLabel:f(h),rawLabel:i,tickValue:h})}});return b}var gH=[0,1];var q=function(c,b,a){this.dim=c;this.scale=b;this._extent=a||[0,0];this.inverse=!1;this.onBand=!1};q.prototype={constructor:q,contain:function(b){var a=this._extent;var e=Math.min(a[0],a[1]);var c=Math.max(a[0],a[1]);return b>=e&&b<=c},containData:function(a){return this.contain(this.dataToCoord(a))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(a){return getPixelPrecision(a||this.scale.getExtent(),this._extent)},setExtent:function(b,c){var a=this._extent;a[0]=b;a[1]=c},dataToCoord:function(c,e){var a=this._extent;var b=this.scale;c=b.normalize(c);if(this.onBand&&b.type==='ordinal'){a=a.slice();fixExtentWithBands(a,b.count())}return linearMap(c,gH,a,e)},coordToData:function(e,c){var a=this._extent;var b=this.scale;if(this.onBand&&b.type==='ordinal'){a=a.slice();fixExtentWithBands(a,b.count())}var f=linearMap(e,a,gH,c);return this.scale.scale(f)},pointToData:function(b,a){},getTicksCoords:function(a){a=a||{};var c=a.tickModel||this.getTickModel();var f=createAxisTicks(this,c);var g=f.ticks;var b=map(g,function(b){return {coord:this.dataToCoord(b),tickValue:b}},this);var e=c.get('alignWithLabel');fixOnBandTicksCoords(this,b,e,a.clamp);return b},getViewLabels:function(){return createAxisLabels(this).labels},getLabelModel:function(){return this.model.getModel('axisLabel')},getTickModel:function(){return this.model.getModel('axisTick')},getBandWidth:function(){var b=this._extent;var c=this.scale.getExtent();var a=c[1]-c[0]+(this.onBand?1:0);a===0&&(a=1);var e=Math.abs(b[1]-b[0]);return Math.abs(e)/a},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return calculateCategoryInterval(this)}};function fixExtentWithBands(a,c){var e=a[1]-a[0];var f=c;var b=e/f/2;a[0]+=b;a[1]-=b}function fixOnBandTicksCoords(g,a,j,f){var c=a.length;if(!g.onBand||j||!c){return}var b=g.getExtent();var e;var h;if(c===1){a[0].coord=b[0];e=a[1]={coord:b[0]}}else {var l=a[c-1].tickValue-a[0].tickValue;var i=(a[c-1].coord-a[0].coord)/l;each$1(a,function(b){b.coord-=i/2});var k=g.scale.getExtent();h=1+k[1]-a[c-1].tickValue;e={coord:a[c-1].coord+i*h};a.push(e)}var m=b[0]>b[1];if(littleThan(a[0].coord,b[0])){f?a[0].coord=b[0]:a.shift()}if(f&&littleThan(b[0],a[0].coord)){a.unshift({coord:b[0]})}if(littleThan(b[1],e.coord)){f?e.coord=b[1]:a.pop()}if(f&&littleThan(e.coord,b[1])){a.push({coord:b[1]})}function littleThan(b,c){b=round$1(b);c=round$1(c);return m?b>c:b<c}}var ml=eD;var i0={};each$1(['map','each','filter','indexOf','inherits','reduce','filter','bind','curry','isArray','isString','isObject','isFunction','extend','defaults','clone','merge'],function(a){i0[a]=oA[a]});var h6={};each$1(['extendShape','extendPath','makePath','makeImage','mergePath','resizePath','createIcon','setHoverStyle','setLabelStyle','setTextStyle','setText','getFont','updateProps','initProps','getTransform','clipPointsByRect','clipRectByRect','registerShape','getShapeClass','Group','Image','Text','Circle','Sector','Ring','Polygon','Polyline','Rect','Line','BezierCurve','Arc','IncrementalDisplayable','CompoundPath','LinearGradient','RadialGradient','BoundingRect'],function(a){h6[a]=an[a]});l.extend({type:'series.line',dependencies:['grid','polar'],getInitialData:function(c,e){if(a){var b=c.coordinateSystem;if(b!=='polar'&&b!=='cartesian2d'){throw new Error('Line not support coordinateSystem besides cartesian and polar')}}return createListFromArray(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:'cartesian2d',legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:'top'},lineStyle:{width:2,type:'solid'},step:!1,smooth:!1,smoothMonotone:null,symbol:'emptyCircle',symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:'auto',connectNulls:!1,sampling:'none',animationEasing:'linear',progressive:0,hoverLayerThreshold:Infinity}});function getDefaultLabel(b,e){var a=b.mapDimension('defaultedLabel',!0);var g=a.length;if(g===1){return retrieveRawValue(b,e,a[0])}else {if(g){var f=[];for(var c=0;c<a.length;c++){var h=retrieveRawValue(b,e,a[c]);f.push(h)}return f.join(' ')}}}function SymbolClz$1(c,e,a){b.call(this);this.updateData(c,e,a)}var S=SymbolClz$1.prototype;var lO=SymbolClz$1.getSymbolSize=function(b,c){var a=b.getItemVisual(c,'symbolSize');return a instanceof Array?a.slice():[+a,+a]};function getScale(a){return [a[0]/2,a[1]/2]}function driftSymbol(a,b){this.parent.drift(a,b)}S._createSymbol=function(b,g,h,e,c){this.removeAll();var f=g.getItemVisual(h,'color');var a=createSymbol(b,-1,-1,2,2,f,c);a.attr({z2:100,culling:!0,scale:getScale(e)});a.drift=driftSymbol;this._symbolType=b;this.add(a)};S.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(a)};S.getSymbolPath=function(){return this.childAt(0)};S.getScale=function(){return this.childAt(0).scale};S.highlight=function(){this.childAt(0).trigger('emphasis')};S.downplay=function(){this.childAt(0).trigger('normal')};S.setZ=function(b,c){var a=this.childAt(0);a.zlevel=b;a.z=c};S.setDraggable=function(b){var a=this.childAt(0);a.draggable=b;a.cursor=b?'move':a.cursor};S.updateData=function(c,b,f){this.silent=!1;var h=c.getItemVisual(b,'symbol')||'circle';var e=c.hostModel;var g=lO(c,b);var j=h!==this._symbolType;if(j){var l=c.getItemVisual(b,'symbolKeepAspect');this._createSymbol(h,c,b,g,l)}else {var a=this.childAt(0);a.silent=!1;updateProps(a,{scale:getScale(g)},e,b)}this._updateCommon(c,b,g,f);if(j){var a=this.childAt(0);var i=f&&f.fadeIn;var k={scale:a.scale.slice()};i&&(k.style={opacity:a.style.opacity});a.scale=[0,0];i&&(a.style.opacity=0);initProps(a,k,e,b)}this._seriesModel=e};var jW=['itemStyle'];var jL=['emphasis','itemStyle'];var jV=['label'];var jK=['emphasis','label'];S._updateCommon=function(e,g,j,a){var b=this.childAt(0);var o=e.hostModel;var t=e.getItemVisual(g,'color');if(b.type!=='image'){b.useStyle({strokeNoScale:!0})}else {b.setStyle({opacity:null,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null})}var q=a&&a.itemStyle;var f=a&&a.hoverItemStyle;var n=a&&a.symbolRotate;var h=a&&a.symbolOffset;var p=a&&a.labelModel;var l=a&&a.hoverLabelModel;var m=a&&a.hoverAnimation;var i=a&&a.cursorStyle;if(!a||e.hasItemOption){var c=a&&a.itemModel?a.itemModel:e.getItemModel(g);q=c.getModel(jW).getItemStyle(['color']);f=c.getModel(jL).getItemStyle();n=c.getShallow('symbolRotate');h=c.getShallow('symbolOffset');p=c.getModel(jV);l=c.getModel(jK);m=c.getShallow('hoverAnimation');i=c.getShallow('cursor')}else {f=extend({},f)}var r=b.style;b.attr('rotation',(n||0)*Math.PI/180||0);if(h){b.attr('position',[parsePercent$1(h[0],j[0]),parsePercent$1(h[1],j[1])])}i&&b.attr('cursor',i);b.setColor(t,a&&a.symbolInnerColor);b.setStyle(q);var s=e.getItemVisual(g,'opacity');if(s!=null){r.opacity=s}var u=e.getItemVisual(g,'liftZ');var k=b.__z2Origin;if(u!=null){if(k==null){b.__z2Origin=b.z2;b.z2+=u}}else {if(k!=null){b.z2=k;b.__z2Origin=null}}var v=a&&a.useNameLabel;setLabelStyle(r,f,p,l,{labelFetcher:o,labelDataIndex:g,defaultText:getLabelDefaultText,isRectText:!0,autoColor:t});function getLabelDefaultText(b,c){return v?e.getName(b):getDefaultLabel(e,b)}b.__symbolOriginalScale=getScale(j);b.hoverStyle=f;b.highDownOnUpdate=m&&o.isAnimationEnabled()?highDownOnUpdate:null;setHoverStyle(b)};function highDownOnUpdate(f,b){if(this.incremental||this.useHoverLayer){return}if(b==='emphasis'){var a=this.__symbolOriginalScale;var e=a[1]/a[0];var c={scale:[Math.max(a[0]*1.1,a[0]+3),Math.max(a[1]*1.1,a[1]+3*e)]};this.animateTo(c,400,'elasticOut')}else {if(b==='normal'){this.animateTo({scale:this.__symbolOriginalScale},400,'elasticOut')}}}S.fadeOut=function(c,b){var a=this.childAt(0);this.silent=a.silent=!0;!(b&&b.keepLabel)&&(a.style.text=null);updateProps(a,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,c)};inherits(SymbolClz$1,b);function SymbolDraw(a){this.group=new b();this._symbolCtor=a||SymbolClz$1}var bp=SymbolDraw.prototype;function symbolNeedsDraw(e,a,c,b){return a&&!isNaN(a[0])&&!isNaN(a[1])&&!(b.isIgnore&&b.isIgnore(c))&&!(b.clipShape&&!b.clipShape.contain(a[0],a[1]))&&e.getItemVisual(c,'symbol')!=='none'}bp.updateData=function(a,e){e=normalizeUpdateOpt(e);var b=this.group;var h=a.hostModel;var c=this._data;var g=this._symbolCtor;var f=makeSeriesScope(a);if(!c){b.removeAll()}a.diff(c).add(function(c){var i=a.getItemLayout(c);if(symbolNeedsDraw(a,i,c,e)){var h=new g(a,c,f);h.attr('position',i);a.setItemGraphicEl(c,h);b.add(h)}}).update(function(j,l){var i=c.getItemGraphicEl(l);var k=a.getItemLayout(j);if(!symbolNeedsDraw(a,k,j,e)){b.remove(i);return}if(!i){i=new g(a,j);i.attr('position',k)}else {i.updateData(a,j,f);updateProps(i,{position:k},h)}b.add(i);a.setItemGraphicEl(j,i)}).remove(function(g){var f=c.getItemGraphicEl(g);f&&f.fadeOut(function(){b.remove(f)})}).execute();this._data=a};bp.isPersistent=function(){return !0};bp.updateLayout=function(){var a=this._data;if(a){a.eachItemGraphicEl(function(e,c){var b=a.getItemLayout(c);e.attr('position',b)})}};bp.incrementalPrepareUpdate=function(a){this._seriesScope=makeSeriesScope(a);this._data=null;this.group.removeAll()};bp.incrementalUpdate=function(f,b,e){e=normalizeUpdateOpt(e);function updateIncrementalAndHover(a){if(!a.isGroup){a.incremental=a.useHoverLayer=!0}}for(var a=f.start;a<f.end;a++){var g=b.getItemLayout(a);if(symbolNeedsDraw(b,g,a,e)){var c=new this._symbolCtor(b,a,this._seriesScope);c.traverse(updateIncrementalAndHover);c.attr('position',g);this.group.add(c);b.setItemGraphicEl(a,c)}}};function normalizeUpdateOpt(a){if(a!=null&&!isObject$1(a)){a={isIgnore:a}}return a||{}}bp.remove=function(c){var a=this.group;var b=this._data;if(b&&c){b.eachItemGraphicEl(function(b){b.fadeOut(function(){a.remove(b)})})}else {a.removeAll()}};function makeSeriesScope(b){var a=b.hostModel;return {itemStyle:a.getModel('itemStyle').getItemStyle(['color']),hoverItemStyle:a.getModel('emphasis.itemStyle').getItemStyle(),symbolRotate:a.get('symbolRotate'),symbolOffset:a.get('symbolOffset'),hoverAnimation:a.get('hoverAnimation'),labelModel:a.getModel('label'),hoverLabelModel:a.getModel('emphasis.label'),cursorStyle:a.get('cursor')}}function prepareDataCoordInfo(e,a,l){var j=e.getBaseAxis();var i=e.getOtherAxis(j);var m=getValueStart(i,l);var h=j.dim;var c=i.dim;var n=a.mapDimension(c);var o=a.mapDimension(h);var k=c==='x'||c==='radius'?1:0;var b=map(e.dimensions,function(b){return a.mapDimension(b)});var f;var g=a.getCalculationInfo('stackResultDimension');if(f|=isDimensionStacked(a,b[0])){b[0]=g}if(f|=isDimensionStacked(a,b[1])){b[1]=g}return {dataDimsForPoint:b,valueStart:m,valueAxisDim:c,baseAxisDim:h,stacked:!!f,valueDim:n,baseDim:o,baseDataOffset:k,stackedOverDimension:a.getCalculationInfo('stackedOverDimension')}}function getValueStart(e,c){var b=0;var a=e.scale.getExtent();if(c==='start'){b=a[0]}else {if(c==='end'){b=a[1]}else {if(a[0]>0){b=a[0]}else {if(a[1]<0){b=a[1]}}}}return b}function getStackedOnPoint(a,h,e,g){var b=NaN;if(a.stacked){b=e.get(e.getCalculationInfo('stackedOverDimension'),g)}if(isNaN(b)){b=a.valueStart}var f=a.baseDataOffset;var c=[];c[f]=e.get(a.baseDim,g);c[1-f]=b;return h.dataToPoint(c)}function diffData(c,b){var a=[];b.diff(c).add(function(e){a.push({cmd:'+',idx:e})}).update(function(e,f){a.push({cmd:'=',idx:f,idx1:e})}).remove(function(e){a.push({cmd:'-',idx:e})}).execute();return a}var kz=function(f,e,u,t,q,p,E,D){var C=diffData(f,e);var k=[];var l=[];var i=[];var j=[];var B=[];var g=[];var h=[];var n=prepareDataCoordInfo(q,e,E);var o=prepareDataCoordInfo(p,f,D);for(var b=0;b<C.length;b++){var c=C[b];var y=!0;switch(c.cmd){case '=':var m=f.getItemLayout(c.idx);var A=e.getItemLayout(c.idx1);if(isNaN(m[0])||isNaN(m[1])){m=A.slice()};k.push(m);l.push(A);i.push(u[c.idx]);j.push(t[c.idx1]);h.push(e.getRawIndex(c.idx1));break;case '+':var a=c.idx;k.push(q.dataToPoint([e.get(n.dataDimsForPoint[0],a),e.get(n.dataDimsForPoint[1],a)]));l.push(e.getItemLayout(a).slice());i.push(getStackedOnPoint(n,q,e,a));j.push(t[a]);h.push(e.getRawIndex(a));break;case '-':var a=c.idx;var z=f.getRawIndex(a);if(z!==a){k.push(f.getItemLayout(a));l.push(p.dataToPoint([f.get(o.dataDimsForPoint[0],a),f.get(o.dataDimsForPoint[1],a)]));i.push(u[a]);j.push(getStackedOnPoint(o,p,f,a));h.push(z)}else {y=!1};}if(y){B.push(c);g.push(g.length)}}g.sort(function(a,b){return h[a]-h[b]});var v=[];var w=[];var r=[];var s=[];var x=[];for(var b=0;b<g.length;b++){var a=g[b];v[b]=k[a];w[b]=l[a];r[b]=i[a];s[b]=j[a];x[b]=B[a]}return {current:v,next:w,stackedOnCurrent:r,stackedOnNext:s,status:x}};var iU=min;var iT=max;var hw=scaleAndAdd;var dH=copy;var f$=[];var P=[];var Q=[];function isPointNull(a){return isNaN(a[0])||isNaN(a[1])}function drawSegment(k,g,j,h,f,l,e,c,i,a,b){if(a==='none'||!a){return drawNonMono.apply(this,arguments)}else {return drawMono.apply(this,arguments)}}function drawMono(f,k,m,q,p,g,s,r,l,n,o){var j=0;var b=m;for(var h=0;h<q;h++){var a=k[b];if(b>=p||b<0){break}if(isPointNull(a)){if(o){b+=g;continue}break}if(b===m){f[g>0?'moveTo':'lineTo'](a[0],a[1])}else {if(l>0){var e=k[j];var c=n==='y'?1:0;var i=(a[c]-e[c])*l;dH(P,e);P[c]=e[c]+i;dH(Q,a);Q[c]=a[c]-i;f.bezierCurveTo(P[0],P[1],Q[0],Q[1],a[0],a[1])}else {f.lineTo(a[0],a[1])}}j=b;b+=g}return h}function drawNonMono(p,e,u,w,v,g,s,r,n,j,k){var t=0;var c=u;for(var q=0;q<w;q++){var a=e[c];if(c>=v||c<0){break}if(isPointNull(a)){if(k){c+=g;continue}break}if(c===u){p[g>0?'moveTo':'lineTo'](a[0],a[1]);dH(P,a)}else {if(n>0){var f=c+g;var b=e[f];if(k){while(b&&isPointNull(e[f])){f+=g;b=e[f]}}var l=0.5;var o=e[t];var b=e[f];if(!b||isPointNull(b)){dH(Q,a)}else {if(isPointNull(b)&&!k){b=a}sub(f$,b,o);var m;var h;if(j==='x'||j==='y'){var i=j==='x'?0:1;m=Math.abs(a[i]-o[i]);h=Math.abs(a[i]-b[i])}else {m=bd(a,o);h=bd(a,b)}l=h/(h+m);hw(Q,a,f$,-n*(1-l))}iU(P,P,r);iT(P,P,s);iU(Q,Q,r);iT(Q,Q,s);p.bezierCurveTo(P[0],P[1],Q[0],Q[1],a[0],a[1]);hw(P,a,f$,n*l)}else {p.lineTo(a[0],a[1])}}t=c;c+=g}return q}function getBoundingBox(g,e){var c=[Infinity,Infinity];var b=[-Infinity,-Infinity];if(e){for(var f=0;f<g.length;f++){var a=g[f];if(a[0]<c[0]){c[0]=a[0]}if(a[1]<c[1]){c[1]=a[1]}if(a[0]>b[0]){b[0]=a[0]}if(a[1]>b[1]){b[1]=a[1]}}}return {min:e?c:b,max:e?b:c}}var m2=Path.extend({type:'ec-polyline',shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:'#000'},brush:ea(Path.prototype.brush),buildPath:function(g,b){var e=b.points;var c=0;var a=e.length;var f=getBoundingBox(e,b.smoothConstraint);if(b.connectNulls){for(;a>0;a--){if(!isPointNull(e[a-1])){break}}for(;c<a;c++){if(!isPointNull(e[c])){break}}}while(c<a){c+=drawSegment(g,e,c,a,a,1,f.min,f.max,b.smooth,b.smoothMonotone,b.connectNulls)+1}}});var h3=Path.extend({type:'ec-polygon',shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:ea(Path.prototype.brush),buildPath:function(f,a){var e=a.points;var h=a.stackedOnPoints;var c=0;var b=e.length;var i=a.smoothMonotone;var k=getBoundingBox(e,a.smoothConstraint);var j=getBoundingBox(h,a.smoothConstraint);if(a.connectNulls){for(;b>0;b--){if(!isPointNull(e[b-1])){break}}for(;c<b;c++){if(!isPointNull(e[c])){break}}}while(c<b){var g=drawSegment(f,e,c,b,b,1,k.min,k.max,a.smooth,i,a.connectNulls);drawSegment(f,h,c+g-1,g,b,-1,j.min,j.max,a.stackedOnSmooth,i,a.connectNulls);c+=g+1;f.closePath()}}});function createGridClipPath(i,l,g){var b=i.getArea();var m=i.getBaseAxis().isHorizontal();var j=b.x;var k=b.y;var f=b.width;var e=b.height;var a=g.get('lineStyle.width')||2;j-=a/2;k-=a/2;f+=a;e+=a;var c=new h({shape:{x:j,y:k,width:f,height:e}});if(l){c.shape[m?'width':'height']=0;initProps(c,{shape:{width:f,height:e}},g)}return c}function createPolarClipPath(c,e,f){var a=c.getArea();var b=new aa({shape:{cx:round$1(c.cx,1),cy:round$1(c.cy,1),r0:round$1(a.r0,1),r:round$1(a.r,1),startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(e){b.shape.endAngle=a.startAngle;initProps(b,{shape:{endAngle:a.endAngle}},f)}return b}function createClipPath(a,b,c){if(!a){return null}else {if(a.type==='polar'){return createPolarClipPath(a,b,c)}else {if(a.type==='cartesian2d'){return createGridClipPath(a,b,c)}}}return null}function isPointsSame(b,c){if(b.length!==c.length){return}for(var a=0;a<b.length;a++){var e=b[a];var f=c[a];if(e[0]!==f[0]||e[1]!==f[1]){return}}return !0}function getSmooth(a){return typeof a==='number'?a:a?0.5:0}function getStackedOnPoints(f,e,b){if(!b.valueDim){return []}var c=[];for(var a=0,g=e.count();a<g;a++){c.push(getStackedOnPoint(b,f,e,a))}return c}function turnPointsIntoStep(f,l,k){var j=l.getBaseAxis();var a=j.dim==='x'||j.dim==='radius'?0:1;var c=[];for(var e=0;e<f.length-1;e++){var h=f[e+1];var g=f[e];c.push(g);var b=[];switch(k){case 'end':b[a]=h[a];b[1-a]=g[1-a];c.push(b);break;case 'middle':var m=(g[a]+h[a])/2;var i=[];b[a]=i[a]=m;b[1-a]=g[1-a];i[1-a]=h[1-a];c.push(b);c.push(i);break;default:b[a]=g[a];b[1-a]=h[1-a];c.push(b);}}f[e]&&c.push(f[e]);return c}function getVisualGradient(h,o){var f=h.getVisual('visualMeta');if(!f||!f.length||!h.count()){return}if(o.type!=='cartesian2d'){if(a){console.warn('Visual map on line style is only supported on cartesian2d.')}return}var c;var g;for(var i=f.length-1;i>=0;i--){var s=f[i].dimension;var t=h.dimensions[s];var q=h.getDimensionInfo(t);c=q&&q.coordDim;if(c==='x'||c==='y'){g=f[i];break}}if(!g){if(a){console.warn('Visual map on line style only support x or y dimension.')}return}var r=o.getAxis(c);var b=map(g.stops,function(a){return {coord:r.toGlobalCoord(r.dataToCoord(a.value)),color:a.color}});var e=b.length;var j=g.outerColors.slice();if(e&&b[0].coord>b[e-1].coord){b.reverse();j.reverse()}var m=10;var l=b[0].coord-m;var p=b[e-1].coord+m;var n=p-l;if(n<0.001){return 'transparent'}each$1(b,function(a){a.offset=(a.coord-l)/n});b.push({offset:e?b[e-1].offset:0.5,color:j[1]||'transparent'});b.unshift({offset:e?b[0].offset:0.5,color:j[0]||'transparent'});var k=new aV(0,0,0,0,b,!0);k[c]=l;k[c+'2']=p;return k}function getIsIgnoreFunc(h,b,i){var c=h.get('showAllSymbol');var f=c==='auto';if(c&&!f){return}var a=i.getAxesByScale('ordinal')[0];if(!a){return}if(f&&canShowAllSymbolForCategory(a,b)){return}var g=b.mapDimension(a.dim);var e={};each$1(a.getViewLabels(),function(a){e[a.tickValue]=1});return function(a){return !e.hasOwnProperty(b.get(g,a))}}function canShowAllSymbolForCategory(a,g){var e=a.getExtent();var b=Math.abs(e[1]-e[0])/a.scale.count();isNaN(b)&&(b=0);var f=g.count();var h=Math.max(1,Math.round(f/5));for(var c=0;c<f;c+=h){if(SymbolClz$1.getSymbolSize(g,c)[a.isHorizontal()?1:0]*1.5>b){return !1}}return !0}function createLineClipPath(c,f,e){if(c.type==='cartesian2d'){var h=c.getBaseAxis().isHorizontal();var g=createGridClipPath(c,f,e);if(!e.get('clip',!0)){var a=g.shape;var b=Math.max(a.width,a.height);if(h){a.y-=b;a.height+=b*2}else {a.x-=b;a.width+=b*2}}return g}else {return createPolarClipPath(c,f,e)}}Chart.extend({type:'line',init:function(){var c=new b();var a=new SymbolDraw();this.group.add(a.group);this._symbolDraw=a;this._lineGroup=c},render:function(b,D,C){var a=b.coordinateSystem;var y=this.group;var c=b.getData();var z=b.getModel('lineStyle');var n=b.getModel('areaStyle');var g=c.mapArray(c.getItemLayout);var t=a.type==='polar';var B=this._coordSys;var q=this._symbolDraw;var j=this._polyline;var f=this._polygon;var m=this._lineGroup;var k=b.get('animation');var o=!n.isEmpty();var p=n.get('origin');var A=prepareDataCoordInfo(a,c,p);var h=getStackedOnPoints(a,c,A);var l=b.get('showSymbol');var w=l&&!t&&getIsIgnoreFunc(b,c,a);var r=this._data;r&&r.eachItemGraphicEl(function(a,c){if(a.__temp){y.remove(a);r.setItemGraphicEl(c,null)}});if(!l){q.remove()}y.add(m);var i=!t&&b.get('step');var e;if(a&&a.getArea){e=a.getArea();if(e.width!=null){e.x-=0.1;e.y-=0.1;e.width+=0.2;e.height+=0.2}else {if(e.r0){e.r0-=0.5;e.r1+=0.5}}}if(!(j&&B.type===a.type&&i===this._step)){l&&q.updateData(c,{isIgnore:w,clipShape:e});if(i){g=turnPointsIntoStep(g,a,i);h=turnPointsIntoStep(h,a,i)}j=this._newPolyline(g,a,k);if(o){f=this._newPolygon(g,h,a,k)}m.setClipPath(createLineClipPath(a,!0,b))}else {if(o&&!f){f=this._newPolygon(g,h,a,k)}else {if(f&&!o){m.remove(f);f=this._polygon=null}}m.setClipPath(createLineClipPath(a,!1,b));l&&q.updateData(c,{isIgnore:w,clipShape:e});c.eachItemGraphicEl(function(a){a.stopAnimation(!0)});if(!isPointsSame(this._stackedOnPoints,h)||!isPointsSame(this._points,g)){if(k){this._updateAnimation(c,h,a,C,i,p)}else {if(i){g=turnPointsIntoStep(g,a,i);h=turnPointsIntoStep(h,a,i)}j.setShape({points:g});f&&f.setShape({points:g,stackedOnPoints:h})}}}var x=getVisualGradient(c,a)||c.getVisual('color');j.useStyle(defaults(z.getLineStyle(),{fill:'none',stroke:x,lineJoin:'bevel'}));var s=b.get('smooth');s=getSmooth(b.get('smooth'));j.setShape({smooth:s,smoothMonotone:b.get('smoothMonotone'),connectNulls:b.get('connectNulls')});if(f){var u=c.getCalculationInfo('stackedOnSeries');var v=0;f.useStyle(defaults(n.getAreaStyle(),{fill:x,opacity:0.7,lineJoin:'bevel'}));if(u){v=getSmooth(u.get('smooth'))}f.setShape({smooth:s,stackedOnSmooth:v,smoothMonotone:b.get('smoothMonotone'),connectNulls:b.get('connectNulls')})}this._data=c;this._coordSys=a;this._stackedOnPoints=h;this._points=g;this._step=i;this._valueOrigin=p},dispose:function(){},highlight:function(e,h,i,g){var c=e.getData();var b=queryDataIndex(c,g);if(!(b instanceof Array)&&b!=null&&b>=0){var a=c.getItemGraphicEl(b);if(!a){var f=c.getItemLayout(b);if(!f){return}a=new SymbolClz$1(c,b);a.position=f;a.setZ(e.get('zlevel'),e.get('z'));a.ignore=isNaN(f[0])||isNaN(f[1]);a.__temp=!0;c.setItemGraphicEl(b,a);a.stopSymbolAnimation(!0);this.group.add(a)}a.highlight()}else {Chart.prototype.highlight.call(this,e,h,i,g)}},downplay:function(e,g,h,f){var c=e.getData();var a=queryDataIndex(c,f);if(a!=null&&a>=0){var b=c.getItemGraphicEl(a);if(b){if(b.__temp){c.setItemGraphicEl(a,null);this.group.remove(b)}else {b.downplay()}}}else {Chart.prototype.downplay.call(this,e,g,h,f)}},_newPolyline:function(b){var a=this._polyline;if(a){this._lineGroup.remove(a)}a=new m2({shape:{points:b},silent:!0,z2:10});this._lineGroup.add(a);this._polyline=a;return a},_newPolygon:function(c,b){var a=this._polygon;if(a){this._lineGroup.remove(a)}a=new h3({shape:{points:c,stackedOnPoints:b},silent:!0});this._lineGroup.add(a);this._polygon=a;return a},_updateAnimation:function(k,q,c,t,e,r){var b=this._polyline;var j=this._polygon;var o=k.hostModel;var a=kz(this._data,k,this._stackedOnPoints,q,this._coordSys,c,this._valueOrigin,r);var i=a.current;var m=a.stackedOnCurrent;var l=a.next;var n=a.stackedOnNext;if(e){i=turnPointsIntoStep(a.current,c,e);m=turnPointsIntoStep(a.stackedOnCurrent,c,e);l=turnPointsIntoStep(a.next,c,e);n=turnPointsIntoStep(a.stackedOnNext,c,e)}b.shape.__points=a.current;b.shape.points=i;updateProps(b,{shape:{points:l}},o);if(j){j.setShape({points:i,stackedOnPoints:m});updateProps(j,{shape:{points:l,stackedOnPoints:n}},o)}var g=[];var h=a.status;for(var f=0;f<h.length;f++){var s=h[f].cmd;if(s==='='){var p=k.getItemGraphicEl(h[f].idx1);if(p){g.push({el:p,ptIdx:f})}}}if(b.animators&&b.animators.length){b.animators[0].during(function(){for(var a=0;a<g.length;a++){var f=g[a].el;f.attr('position',b.shape.__points[g[a].ptIdx])}})}},remove:function(c){var b=this.group;var a=this._data;this._lineGroup.removeAll();this._symbolDraw.remove(!0);a&&a.eachItemGraphicEl(function(e,f){if(e.__temp){b.remove(e);a.setItemGraphicEl(f,null)}});this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var a$=function(c,a,b){return {seriesType:c,performRawSeries:!0,reset:function(e,o,p){var l=e.getData();var f=e.get('symbol');var i=e.get('symbolSize');var n=e.get('symbolKeepAspect');var h=isFunction$1(f);var g=isFunction$1(i);var k=h||g;var j=!h&&f?f:a;var m=!g?i:null;l.setVisual({legendSymbol:b||j,symbol:j,symbolSize:m,symbolKeepAspect:n});if(o.isSeriesFiltered(e)){return}function dataEach(l,j){if(k){var s=e.getRawValue(j);var t=e.getDataParams(j);h&&l.setItemVisual(j,'symbol',f(s,t));g&&l.setItemVisual(j,'symbolSize',i(s,t))}if(l.hasItemOption){var m=l.getItemModel(j);var r=m.getShallow('symbol',!0);var q=m.getShallow('symbolSize',!0);var n=m.getShallow('symbolKeepAspect',!0);if(r!=null){l.setItemVisual(j,'symbol',r)}if(q!=null){l.setItemVisual(j,'symbolSize',q)}if(n!=null){l.setItemVisual(j,'symbolKeepAspect',n)}}}return {dataEach:l.hasItemOption||k?dataEach:null}}}};var b_=function(a){return {seriesType:a,plan:bh(),reset:function(g){var e=g.getData();var c=g.coordinateSystem;var j=g.pipelineContext;var f=j.large;if(!c){return}var b=map(c.dimensions,function(b){return e.mapDimension(b)}).slice(0,2);var h=b.length;var i=e.getCalculationInfo('stackResultDimension');if(isDimensionStacked(e,b[0])){b[0]=i}if(isDimensionStacked(e,b[1])){b[1]=i}function progress(k,j){var q=k.end-k.start;var m=f&&new Float32Array(q*h);for(var i=k.start,o=0,n=[],p=[];i<k.end;i++){var e;if(h===1){var l=j.get(b[0],i);e=!isNaN(l)&&c.dataToPoint(l,null,p)}else {var l=n[0]=j.get(b[0],i);var r=n[1]=j.get(b[1],i);e=!isNaN(l)&&!isNaN(r)&&c.dataToPoint(n,null,p)}if(f){m[o++]=e?e[0]:NaN;m[o++]=e?e[1]:NaN}else {j.setItemLayout(i,e&&e.slice()||[NaN,NaN])}}f&&j.setLayout('symbolPoints',m)}return h&&{progress:progress}}}};var n0={average:function(c){var e=0;var b=0;for(var a=0;a<c.length;a++){if(!isNaN(c[a])){e+=c[a];b++}}return b===0?NaN:e/b},sum:function(b){var c=0;for(var a=0;a<b.length;a++){c+=b[a]||0}return c},max:function(c){var a=-Infinity;for(var b=0;b<c.length;b++){c[b]>a&&(a=c[b])}return isFinite(a)?a:NaN},min:function(c){var a=Infinity;for(var b=0;b<c.length;b++){c[b]<a&&(a=c[b])}return isFinite(a)?a:NaN},nearest:function(a){return a[0]}};var mg=function(a,b){return Math.round(a.length/2)};var m6=function(a){return {seriesType:a,modifyOutputEnd:!0,reset:function(c,m,n){var g=c.getData();var b=c.get('sampling');var f=c.coordinateSystem;if(f.type==='cartesian2d'&&b){var h=f.getBaseAxis();var k=f.getOtherAxis(h);var i=h.getExtent();var l=i[1]-i[0];var j=Math.round(g.count()/l);if(j>1){var e;if(typeof b==='string'){e=n0[b]}else {if(typeof b==='function'){e=b}}if(e){c.setData(g.downSample(g.mapDimension(k.dim),1/j,e,mg))}}}}}};function dimAxisMapper(a){return this._axes[a]}var c8=function(a){this._axes={};this._dimList=[];this.name=a||''};c8.prototype={constructor:c8,type:'cartesian',getAxis:function(a){return this._axes[a]},getAxes:function(){return map(this._dimList,dimAxisMapper,this)},getAxesByScale:function(a){a=a.toLowerCase();return filter(this.getAxes(),function(b){return b.scale.type===a})},addAxis:function(a){var b=a.dim;this._axes[b]=a;this._dimList.push(b)},dataToCoord:function(a){return this._dataCoordConvert(a,'dataToCoord')},coordToData:function(a){return this._dataCoordConvert(a,'coordToData')},_dataCoordConvert:function(f,g){var c=this._dimList;var e=f instanceof Array?[]:{};for(var b=0;b<c.length;b++){var a=c[b];var h=this._axes[a];e[a]=h[g](f[a])}return e}};function Cartesian2D(a){c8.call(this,a)}Cartesian2D.prototype={constructor:Cartesian2D,type:'cartesian2d',dimensions:['x','y'],getBaseAxis:function(){return this.getAxesByScale('ordinal')[0]||this.getAxesByScale('time')[0]||this.getAxis('x')},containPoint:function(c){var a=this.getAxis('x');var b=this.getAxis('y');return a.contain(a.toLocalCoord(c[0]))&&b.contain(b.toLocalCoord(c[1]))},containData:function(a){return this.getAxis('x').containData(a[0])&&this.getAxis('y').containData(a[1])},dataToPoint:function(e,f,a){var b=this.getAxis('x');var c=this.getAxis('y');a=a||[];a[0]=b.toGlobalCoord(b.dataToCoord(e[0]));a[1]=c.toGlobalCoord(c.dataToCoord(e[1]));return a},clampData:function(g,a){var e=this.getAxis('x').scale;var f=this.getAxis('y').scale;var b=e.getExtent();var c=f.getExtent();var h=e.parse(g[0]);var i=f.parse(g[1]);a=a||[];a[0]=Math.min(Math.max(Math.min(b[0],b[1]),h),Math.max(b[0],b[1]));a[1]=Math.min(Math.max(Math.min(c[0],c[1]),i),Math.max(c[0],c[1]));return a},pointToData:function(b,a){var c=this.getAxis('x');var e=this.getAxis('y');a=a||[];a[0]=c.coordToData(c.toLocalCoord(b[0]));a[1]=e.coordToData(e.toLocalCoord(b[1]));return a},getOtherAxis:function(a){return this.getAxis(a.dim==='x'?'y':'x')},getArea:function(){var a=this.getAxis('x').getGlobalExtent();var b=this.getAxis('y').getGlobalExtent();var c=Math.min(a[0],a[1]);var e=Math.min(b[0],b[1]);var g=Math.max(a[0],a[1])-c;var f=Math.max(b[0],b[1])-e;var h=new BoundingRect(c,e,g,f);return h}};inherits(Cartesian2D,c8);var dB=function(f,e,a,b,c){q.call(this,f,e,a);this.type=b||'value';this.position=c||'bottom'};dB.prototype={constructor:dB,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var a=this.position;return a==='top'||a==='bottom'},getGlobalExtent:function(b){var a=this.getExtent();a[0]=this.toGlobalCoord(a[0]);a[1]=this.toGlobalCoord(a[1]);b&&a[0]>a[1]&&a.reverse();return a},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(b,a){return this.coordToData(this.toLocalCoord(b[this.dim==='x'?0:1]),a)},toLocalCoord:null,toGlobalCoord:null};inherits(dB,q);var hq={show:!0,zlevel:0,z:0,inverse:!1,name:'',nameLocation:'end',nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:'...',placeholder:'.'},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:'#333',width:1,type:'solid'},symbol:['none','none'],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:['#ccc'],width:1,type:'solid'}},splitArea:{show:!1,areaStyle:{color:['rgba(250,250,250,0.3)','rgba(200,200,200,0.3)']}}};var ay={};ay.categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:'auto'},axisLabel:{interval:'auto'}},hq);ay.valueAxis=merge({boundaryGap:[0,0],splitNumber:5},hq);ay.timeAxis=defaults({scale:!0,min:'dataMin',max:'dataMax'},ay.valueAxis);ay.logAxis=defaults({scale:!0,logBase:10},ay.valueAxis);var mW=['value','category','time','log'];var bk=function(a,c,b,e){each$1(mW,function(f){c.extend({type:a+'Axis.'+f,mergeDefaultAndTheme:function(g,k){var h=this.layoutMode;var i=h?getLayoutParams(g):{};var j=k.getTheme();merge(g,j.get(f+'Axis'));merge(g,this.getDefaultOption());g.type=b(a,g);if(h){mergeLayoutParam(g,i,h)}},optionUpdated:function(){var g=this.option;if(g.type==='category'){this.__ordinalMeta=OrdinalMeta.createByAxisModel(this)}},getCategories:function(h){var g=this.option;if(g.type==='category'){if(h){return g.data}return this.__ordinalMeta.categories}},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:mergeAll([{},ay[f+'Axis'],e],!0)})});g.registerSubTypeDefaulter(a+'Axis',curry(b,a))};var bz=g.extend({type:'cartesian2dAxis',axis:null,init:function(){bz.superApply(this,'init',arguments);this.resetRange()},mergeOption:function(){bz.superApply(this,'mergeOption',arguments);this.resetRange()},restoreData:function(){bz.superApply(this,'restoreData',arguments);this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:'grid',index:this.option.gridIndex,id:this.option.gridId})[0]}});function getAxisType(b,a){return a.type||(a.data?'category':'value')}merge(bz.prototype,aQ);var hO={offset:0};bk('x',bz,getAxisType,hO);bk('y',bz,getAxisType,hO);g.extend({type:'grid',dependencies:['xAxis','yAxis'],layoutMode:'box',coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:'10%',top:60,right:'10%',bottom:60,containLabel:!1,backgroundColor:'rgba(0,0,0,0)',borderWidth:1,borderColor:'#ccc'}});function isAxisUsedInTheGrid(a,b,c){return a.getCoordSysModel()===b}function Grid(a,b,c){this._coordsMap={};this._coordsList=[];this._axesMap={};this._axesList=[];this._initCartesian(a,b,c);this.model=a}var v=Grid.prototype;v.type='grid';v.axisPointerEnabled=!0;v.getRect=function(){return this._rect};v.update=function(c,e){var a=this._axesMap;this._updateScale(c,this.model);each$1(a.x,function(a){niceScaleExtent(a.scale,a.model)});each$1(a.y,function(a){niceScaleExtent(a.scale,a.model)});var b={};each$1(a.x,function(f){fixAxisOnZero(a,'y',f,b)});each$1(a.y,function(f){fixAxisOnZero(a,'x',f,b)});this.resize(this.model,e)};function fixAxisOnZero(j,i,h,f){h.getAxesOnZeroOf=function(){return b?[b]:[]};var a=j[i];var b;var g=h.model;var k=g.get('axisLine.onZero');var e=g.get('axisLine.onZeroAxisIndex');if(!k){return}if(e!=null){if(canOnZeroToAxis(a[e])){b=a[e]}}else {for(var c in a){if(a.hasOwnProperty(c)&&canOnZeroToAxis(a[c])&&!f[getOnZeroRecordKey(a[c])]){b=a[c];break}}}if(b){f[getOnZeroRecordKey(b)]=!0}function getOnZeroRecordKey(a){return a.dim+'_'+a.index}}function canOnZeroToAxis(a){return a&&a.type!=='category'&&a.type!=='time'&&ifAxisCrossZero(a)}v.resize=function(b,e,f){var a=getLayoutRect(b.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=a;var c=this._axesList;adjustAxes();if(!f&&b.get('containLabel')){each$1(c,function(c){if(!c.model.get('axisLabel.inside')){var g=estimateLabelUnionRect(c);if(g){var i=c.isHorizontal()?'height':'width';var h=c.model.get('axisLabel.margin');a[i]-=g[i]+h;if(c.position==='top'){a.y+=g.height+h}else {if(c.position==='left'){a.x+=g.width+h}}}}});adjustAxes()}function adjustAxes(){each$1(c,function(c){var g=c.isHorizontal();var h=g?[0,a.width]:[0,a.height];var i=c.inverse?1:0;c.setExtent(h[i],h[1-i]);updateAxisTransform(c,g?a.x:a.y)})}};v.getAxis=function(e,b){var a=this._axesMap[e];if(a!=null){if(b==null){for(var c in a){if(a.hasOwnProperty(c)){return a[c]}}}return a[b]}};v.getAxes=function(){return this._axesList.slice()};v.getCartesian=function(a,c){if(a!=null&&c!=null){var f='x'+a+'y'+c;return this._coordsMap[f]}if(isObject$1(a)){c=a.yAxisIndex;a=a.xAxisIndex}for(var b=0,e=this._coordsList;b<e.length;b++){if(e[b].getAxis('x').index===a||e[b].getAxis('y').index===c){return e[b]}}};v.getCartesians=function(){return this._coordsList.slice()};v.convertToPixel=function(c,e,b){var a=this._findConvertTarget(c,e);return a.cartesian?a.cartesian.dataToPoint(b):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(b)):null};v.convertFromPixel=function(c,e,b){var a=this._findConvertTarget(c,e);return a.cartesian?a.cartesian.pointToData(b):a.axis?a.axis.coordToData(a.axis.toLocalCoord(b)):null};v._findConvertTarget=function(k,f){var a=f.seriesModel;var c=f.xAxisModel||a&&a.getReferringComponents('xAxis')[0];var e=f.yAxisModel||a&&a.getReferringComponents('yAxis')[0];var h=f.gridModel;var i=this._coordsList;var b;var g;if(a){b=a.coordinateSystem;indexOf(i,b)<0&&(b=null)}else {if(c&&e){b=this.getCartesian(c.componentIndex,e.componentIndex)}else {if(c){g=this.getAxis('x',c.componentIndex)}else {if(e){g=this.getAxis('y',e.componentIndex)}else {if(h){var j=h.coordinateSystem;if(j===this){b=this._coordsList[0]}}}}}}return {cartesian:b,axis:g}};v.containPoint=function(b){var a=this._coordsList[0];if(a){return a.containPoint(b)}};v._initCartesian=function(f,e,g){var b={left:!1,right:!1,top:!1,bottom:!1};var a={x:{},y:{}};var c={x:0,y:0};e.eachComponent('xAxis',createAxisCreator('x'),this);e.eachComponent('yAxis',createAxisCreator('y'),this);if(!c.x||!c.y){this._axesMap={};this._axesList=[];return}this._axesMap=a;each$1(a.x,function(c,b){each$1(a.y,function(j,i){var h='x'+b+'y'+i;var a=new Cartesian2D(h);a.grid=this;a.model=f;this._coordsMap[h]=a;this._coordsList.push(a);a.addAxis(c);a.addAxis(j)},this)},this);function createAxisCreator(h){return function(k,l){if(!isAxisUsedInTheGrid(k,f,e)){return}var j=k.get('position');if(h==='x'){if(j!=='top'&&j!=='bottom'){j=b.bottom?'top':'bottom'}}else {if(j!=='left'&&j!=='right'){j=b.left?'right':'left'}}b[j]=!0;var i=new dB(h,createScaleByModel(k),[0,0],k.get('type'),j);var m=i.type==='category';i.onBand=m&&k.get('boundaryGap');i.inverse=k.get('inverse');k.axis=i;i.model=k;i.grid=this;i.index=l;this._axesList.push(i);a[h][l]=i;c[h]++}}};v._updateScale=function(a,b){each$1(this._axesList,function(c){c.scale.setExtent(Infinity,-Infinity)});a.eachSeries(function(c){if(isCartesian2D(c)){var f=findAxesModels(c,a);var g=f[0];var h=f[1];if(!isAxisUsedInTheGrid(g,b,a)||!isAxisUsedInTheGrid(h,b,a)){return}var i=this.getCartesian(g.componentIndex,h.componentIndex);var e=c.getData();var j=i.getAxis('x');var k=i.getAxis('y');if(e.type==='list'){unionExtent(e,j,c);unionExtent(e,k,c)}}},this);function unionExtent(c,e,f){each$1(c.mapDimension(e.dim,!0),function(g){e.scale.unionExtentFromData(c,getStackedDimension(c,g))})}};v.getTooltipAxes=function(c){var b=[];var a=[];each$1(this.getCartesians(),function(e){var f=c!=null&&c!=='auto'?e.getAxis(c):e.getBaseAxis();var g=e.getOtherAxis(f);indexOf(b,f)<0&&b.push(f);indexOf(a,g)<0&&a.push(g)});return {baseAxes:b,otherAxes:a}};function updateAxisTransform(a,b){var e=a.getExtent();var c=e[0]+e[1];a.toGlobalCoord=a.dim==='x'?function(c){return c+b}:function(e){return c-e+b};a.toLocalCoord=a.dim==='x'?function(c){return c-b}:function(e){return c-e+b}}var nz=['xAxis','yAxis'];function findAxesModels(b,c){return map(nz,function(e){var f=b.getReferringComponents(e)[0];if(a){if(!f){throw new Error(e+' "'+retrieve(b.get(e+'Index'),b.get(e+'Id'),0)+'" not found')}}return f})}function isCartesian2D(a){return a.get('coordinateSystem')==='cartesian2d'}Grid.create=function(b,e){var c=[];b.eachComponent('grid',function(f,g){var a=new Grid(f,b,e);a.name='grid_'+g;a.resize(f,e,!0);f.coordinateSystem=a;c.push(a)});b.eachSeries(function(f){if(!isCartesian2D(f)){return}var g=findAxesModels(f,b);var c=g[0];var h=g[1];var i=c.getCoordSysModel();if(a){if(!i){throw new Error('Grid "'+retrieve(c.get('gridIndex'),c.get('gridId'),0)+'" not found')}if(c.getCoordSysModel()!==h.getCoordSysModel()){throw new Error('xAxis and yAxis must use the same grid')}}var j=i.coordinateSystem;f.coordinateSystem=j.getCartesian(c.componentIndex,h.componentIndex)});return c};Grid.dimensions=Grid.prototype.dimensions=Cartesian2D.prototype.dimensions;CoordinateSystemManager.register('cartesian2d',Grid);var aM=Math.PI;var x=function(e,a){this.opt=a;this.axisModel=e;defaults(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0});this.group=new b();var c=new b({position:a.position.slice(),rotation:a.rotation});c.updateTransform();this._transform=c.transform;this._dumbGroup=c};x.prototype={constructor:x,hasBuilder:function(a){return !!iq[a]},add:function(a){iq[a].call(this)},getGroup:function(){return this.group}};var iq={axisLine:function(){var h=this.opt;var g=this.axisModel;if(!g.get('axisLine.show')){return}var m=this.axisModel.axis.getExtent();var i=this._transform;var a=[m[0],0];var c=[m[1],0];if(i){applyTransform(a,a,i);applyTransform(c,c,i)}var l=extend({lineCap:'round'},g.getModel('axisLine.lineStyle').getLineStyle());this.group.add(new B({anid:'line',subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:c[0],y2:c[1]},style:l,strokeContainThreshold:h.strokeContainThreshold||5,silent:!0,z2:1}));var b=g.get('axisLine.symbol');var e=g.get('axisLine.symbolSize');var f=g.get('axisLine.symbolOffset')||0;if(typeof f==='number'){f=[f,f]}if(b!=null){if(typeof b==='string'){b=[b,b]}if(typeof e==='string'||typeof e==='number'){e=[e,e]}var k=e[0];var j=e[1];each$1([{rotate:h.rotation+Math.PI/2,offset:f[0],r:0},{rotate:h.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((a[0]-c[0])*(a[0]-c[0])+(a[1]-c[1])*(a[1]-c[1]))}],function(e,c){if(b[c]!=='none'&&b[c]!=null){var f=createSymbol(b[c],-k/2,-j/2,k,j,l.stroke,!0);var g=e.r+e.offset;var i=[a[0]+g*Math.cos(h.rotation),a[1]-g*Math.sin(h.rotation)];f.attr({rotation:e.rotate,position:i,silent:!0,z2:11});this.group.add(f)}},this)}},axisTickLabel:function(){var a=this.axisModel;var b=this.opt;var e=buildAxisTick(this,a,b);var c=buildAxisLabel(this,a,b);fixMinMaxLabelShow(a,c,e)},axisName:function(){var f=this.opt;var a=this.axisModel;var c=retrieve(f.axisName,a.get('name'));if(!c){return}var l=a.get('nameLocation');var q=f.nameDirection;var k=a.getModel('nameTextStyle');var o=a.get('nameGap')||0;var h=this.axisModel.axis.getExtent();var s=h[0]>h[1]?-1:1;var x=[l==='start'?h[0]-s*o:l==='end'?h[1]+s*o:(h[0]+h[1])/2,isNameLocationCenter(l)?f.labelOffset+q*o:0];var j;var i=a.get('nameRotate');if(i!=null){i=i*aM/180}var g;if(isNameLocationCenter(l)){j=g_(f.rotation,i!=null?i:f.rotation,q)}else {j=endTextLayout(f,l,i||0,h);g=f.axisNameAvailableWidth;if(g!=null){g=Math.abs(g/Math.sin(j.rotation));!isFinite(g)&&(g=null)}}var w=k.getFont();var m=a.get('nameTruncate',!0)||{};var t=m.ellipsis;var v=retrieve(f.nameTruncateMaxWidth,m.maxWidth,g);var r=t!=null&&v!=null?hj(c,v,w,t,{minChar:2,placeholder:m.placeholder}):c;var n=a.get('tooltip',!0);var u=a.mainType;var p={componentType:u,name:c,$vars:['name']};p[u+'Index']=a.componentIndex;var b=new e({anid:'name',__fullText:c,__truncatedText:r,position:x,rotation:j.rotation,silent:ht(a),z2:1,tooltip:n&&n.show?extend({content:c,formatter:function(){return c},formatterParams:p},n):null});setTextStyle(b.style,k,{text:r,textFont:w,textFill:k.getTextColor()||a.get('axisLine.lineStyle.color'),textAlign:k.get('align')||j.textAlign,textVerticalAlign:k.get('verticalAlign')||j.textVerticalAlign});if(a.get('triggerEvent')){b.eventData=go(a);b.eventData.targetType='axisName';b.eventData.name=c}this._dumbGroup.add(b);b.updateTransform();this.group.add(b);b.decomposeTransform()}};var go=x.makeAxisEventDataBase=function(a){var b={componentType:a.mainType,componentIndex:a.componentIndex};b[a.mainType+'Index']=a.componentIndex;return b};var g_=x.innerTextLayout=function(f,g,e){var a=remRadian(g-f);var b;var c;if(isRadianAroundZero(a)){c=e>0?'top':'bottom';b='center'}else {if(isRadianAroundZero(a-aM)){c=e>0?'bottom':'top';b='center'}else {c='middle';if(a>0&&a<aM){b=e>0?'right':'left'}else {b=e>0?'left':'right'}}}return {rotation:a,textAlign:b,textVerticalAlign:c}};function endTextLayout(j,f,i,h){var a=remRadian(i-j.rotation);var b;var c;var g=h[0]>h[1];var e=f==='start'&&!g||f!=='start'&&g;if(isRadianAroundZero(a-aM/2)){c=e?'bottom':'top';b='center'}else {if(isRadianAroundZero(a-aM*1.5)){c=e?'top':'bottom';b='center'}else {c='middle';if(a<aM*1.5&&a>aM/2){b=e?'left':'right'}else {b=e?'right':'left'}}}return {rotation:a,textAlign:b,textVerticalAlign:c}}var ht=x.isLabelSilent=function(a){var b=a.get('tooltip');return a.get('silent')||!(a.get('triggerEvent')||b&&b.show)};function fixMinMaxLabelShow(e,a,b){if(shouldShowAllLabels(e.axis)){return}var h=e.get('axisLabel.showMinLabel');var g=e.get('axisLabel.showMaxLabel');a=a||[];b=b||[];var c=a[0];var j=a[1];var f=a[a.length-1];var k=a[a.length-2];var i=b[0];var m=b[1];var l=b[b.length-1];var n=b[b.length-2];if(h===!1){ignoreEl(c);ignoreEl(i)}else {if(isTwoLabelOverlapped(c,j)){if(h){ignoreEl(j);ignoreEl(m)}else {ignoreEl(c);ignoreEl(i)}}}if(g===!1){ignoreEl(f);ignoreEl(l)}else {if(isTwoLabelOverlapped(k,f)){if(g){ignoreEl(k);ignoreEl(n)}else {ignoreEl(f);ignoreEl(l)}}}}function ignoreEl(a){a&&(a.ignore=!0)}function isTwoLabelOverlapped(b,f,g){var c=b&&b.getBoundingRect().clone();var e=f&&f.getBoundingRect().clone();if(!c||!e){return}var a=identity([]);rotate(a,a,-b.rotation);c.applyTransform(mul$1([],a,b.getLocalTransform()));e.applyTransform(mul$1([],a,f.getLocalTransform()));return c.intersect(e)}function isNameLocationCenter(a){return a==='middle'||a==='center'}function buildAxisTick(h,c,p){var m=c.axis;if(!c.get('axisTick.show')||m.scale.isBlank()){return}var j=c.getModel('axisTick');var n=j.getModel('lineStyle');var o=j.get('length');var f=m.getTicksCoords();var a=[];var b=[];var g=h._transform;var k=[];for(var e=0;e<f.length;e++){var i=f[e].coord;a[0]=i;a[1]=0;b[0]=i;b[1]=p.tickDirection*o;if(g){applyTransform(a,a,g);applyTransform(b,b,g)}var l=new B({anid:'tick_'+f[e].tickValue,subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:b[0],y2:b[1]},style:defaults(n.getLineStyle(),{stroke:c.get('axisLine.lineStyle.color')}),z2:2,silent:!0});h.group.add(l);k.push(l)}return k}function buildAxisLabel(i,a,b){var c=a.axis;var p=retrieve(b.axisLabelShow,a.get('axisLabel.show'));if(!p||c.scale.isBlank()){return}var g=a.getModel('axisLabel');var m=g.get('margin');var n=c.getViewLabels();var k=(retrieve(b.labelRotate,g.get('rotate'))||0)*aM/180;var h=g_(b.rotation,k,b.labelDirection);var f=a.getCategories&&a.getCategories(!0);var j=[];var o=ht(a);var l=a.get('triggerEvent');each$1(n,function(q,v){var n=q.tickValue;var t=q.formattedLabel;var s=q.rawLabel;var p=g;if(f&&f[n]&&f[n].textStyle){p=new Model(f[n].textStyle,g,a.ecModel)}var r=p.getTextColor()||a.get('axisLine.lineStyle.color');var u=c.dataToCoord(n);var w=[u,b.labelOffset+b.labelDirection*m];var k=new e({anid:'label_'+n,position:w,rotation:h.rotation,silent:o,z2:10});setTextStyle(k.style,p,{text:t,textAlign:p.getShallow('align',!0)||h.textAlign,textVerticalAlign:p.getShallow('verticalAlign',!0)||p.getShallow('baseline',!0)||h.textVerticalAlign,textFill:typeof r==='function'?r(c.type==='category'?s:c.type==='value'?n+'':n,v):r});if(l){k.eventData=go(a);k.eventData.targetType='axisLabel';k.eventData.value=s}i._dumbGroup.add(k);k.updateTransform();j.push(k);i.group.add(k);k.decomposeTransform()});return j}var bK=each$1;var fw=curry;function collect(b,c){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};collectAxesInfo(a,b,c);a.seriesInvolved&&collectSeriesInfo(a,b);return a}function collectAxesInfo(a,c,h){var e=c.getComponent('tooltip');var b=c.getComponent('axisPointer');var f=b.get('link',!0)||[];var g=[];bK(h.getCoordinateSystems(),function(i){if(!i.axisPointerEnabled){return}var l=makeKey(i.model);var o=a.coordSysAxesInfo[l]={};a.coordSysMap[l]=i;var p=i.model;var j=p.getModel('tooltip',e);bK(i.getAxes(),fw(saveTooltipAxisInfo,!1,null));if(i.getTooltipAxes&&e&&j.get('show')){var n=j.get('trigger')==='axis';var k=j.get('axisPointer.type')==='cross';var m=i.getTooltipAxes(j.get('axisPointer.axis'));if(n||k){bK(m.baseAxes,fw(saveTooltipAxisInfo,k?'cross':!0,n))}if(k){bK(m.otherAxes,fw(saveTooltipAxisInfo,'cross',!1))}}function saveTooltipAxisInfo(p,l,k){var e=k.model.getModel('axisPointer',b);var s=e.get('show');if(!s||s==='auto'&&!p&&!isHandleTrigger(e)){return}if(l==null){l=e.get('triggerTooltip')}e=p?makeAxisPointerModel(k,j,b,c,p,l):e;var u=e.get('snap');var n=makeKey(k.model);var t=l||u||k.type==='category';var r=a.axesInfo[n]={key:n,axis:k,coordSys:i,axisPointerModel:e,triggerTooltip:l,involveSeries:t,snap:u,useHandle:isHandleTrigger(e),seriesModels:[]};o[n]=r;a.seriesInvolved|=t;var m=getLinkGroupIndex(f,k);if(m!=null){var q=g[m]||(g[m]={axesInfo:{}});q.axesInfo[n]=r;q.mapper=f[m].mapper;r.linkGroup=q}}})}function makeAxisPointerModel(h,j,i,l,k,f){var b=j.getModel('axisPointer');var a={};bK(['type','snap','lineStyle','shadowStyle','label','animation','animationDurationUpdate','animationEasingUpdate','z'],function(c){a[c]=clone(b.get(c))});a.snap=h.type!=='category'&&!!f;if(b.get('type')==='cross'){a.type='line'}var c=a.label||(a.label={});c.show==null&&(c.show=!1);if(k==='cross'){var e=b.get('label.show');c.show=e!=null?e:!0;if(!f){var g=a.lineStyle=b.get('crossStyle');g&&defaults(c,g.textStyle)}}return h.model.getModel('axisPointer',new Model(a,i,l))}function collectSeriesInfo(b,a){a.eachSeries(function(c){var f=c.coordinateSystem;var e=c.get('tooltip.trigger',!0);var g=c.get('tooltip.show',!0);if(!f||e==='none'||e===!1||e==='item'||g===!1||c.get('axisPointer.show',!0)===!1){return}bK(b.coordSysAxesInfo[makeKey(f.model)],function(e){var g=e.axis;if(f.getAxis(g.dim)===g){e.seriesModels.push(c);e.seriesDataCount==null&&(e.seriesDataCount=0);e.seriesDataCount+=c.getData().count()}})},this)}function getLinkGroupIndex(f,g){var c=g.model;var e=g.dim;for(var a=0;a<f.length;a++){var b=f[a]||{};if(checkPropInLink(b[e+'AxisId'],c.id)||checkPropInLink(b[e+'AxisIndex'],c.componentIndex)||checkPropInLink(b[e+'AxisName'],c.name)){return a}}}function checkPropInLink(a,b){return a==='all'||isArray(a)&&indexOf(a,b)>=0||a===b}function fixValue(i){var e=getAxisInfo(i);if(!e){return}var c=e.axisPointerModel;var h=e.axis.scale;var f=c.option;var j=c.get('status');var a=c.get('value');if(a!=null){a=h.parse(a)}var g=isHandleTrigger(c);if(j==null){f.status=g?'show':'hide'}var b=h.getExtent().slice();b[0]>b[1]&&b.reverse();if(a==null||a>b[1]){a=b[1]}if(a<b[0]){a=b[0]}f.value=a;if(g){f.status=e.axis.scale.isBlank()?'hide':'show'}}function getAxisInfo(b){var a=(b.ecModel.getComponent('axisPointer')||{}).coordSysAxesInfo;return a&&a.axesInfo[makeKey(b)]}function getAxisPointerModel(b){var a=getAxisInfo(b);return a&&a.axisPointerModel}function isHandleTrigger(a){return !!a.get('handle.show')}function makeKey(a){return a.type+'||'+a.id}var G=extendComponentView({type:'axis',_axisPointer:null,axisPointerClass:null,render:function(a,b,e,c){this.axisPointerClass&&fixValue(a);G.superApply(this,'render',arguments);updateAxisPointer(this,a,b,e,c,!0)},updateAxisPointer:function(a,b,e,c,f){updateAxisPointer(this,a,b,e,c,!1)},remove:function(c,b){var a=this._axisPointer;a&&a.remove(b);G.superApply(this,'remove',arguments)},dispose:function(b,a){disposeAxisPointer(this,a);G.superApply(this,'dispose',arguments)}});function updateAxisPointer(a,c,h,f,i,g){var e=G.getAxisPointerClass(a.axisPointerClass);if(!e){return}var b=getAxisPointerModel(c);b?(a._axisPointer||(a._axisPointer=new e())).render(c,b,f,g):disposeAxisPointer(a,f)}function disposeAxisPointer(b,c,e){var a=b._axisPointer;a&&a.dispose(c,e);b._axisPointer=null}var eh=[];G.registerAxisPointerClass=function(b,c){if(a){if(eh[b]){throw new Error('axisPointer '+b+' exists')}}eh[b]=c};G.getAxisPointerClass=function(a){return a&&eh[a]};function layout$1(q,g,n){n=n||{};var s=q.coordinateSystem;var m=g.axis;var a={};var f=m.getAxesOnZeroOf()[0];var k=m.position;var l=f?'onZero':k;var j=m.dim;var e=s.getRect();var c=[e.x,e.x+e.width,e.y,e.y+e.height];var h={left:0,right:1,top:0,bottom:1,onZero:2};var i=g.get('offset')||0;var b=j==='x'?[c[2]-i,c[3]+i]:[c[0]-i,c[1]+i];if(f){var p=f.toGlobalCoord(f.dataToCoord(0));b[h.onZero]=Math.max(Math.min(p,b[1]),b[0])}a.position=[j==='y'?b[h[l]]:c[0],j==='x'?b[h[l]]:c[3]];a.rotation=Math.PI/2*(j==='x'?0:1);var r={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=r[k];a.labelOffset=f?b[h[k]]-b[h.onZero]:0;if(g.get('axisTick.inside')){a.tickDirection=-a.tickDirection}if(retrieve(n.labelInside,g.get('axisLabel.inside'))){a.labelDirection=-a.labelDirection}var o=g.get('axisLabel.rotate');a.labelRotate=l==='top'?-o:o;a.z2=1;return a}var kM=['axisLine','axisTickLabel','axisName'];var kV=['splitArea','splitLine'];var d4=G.extend({type:'cartesianAxis',axisPointerClass:'CartesianAxisPointer',render:function(a,g,j,h){this.group.removeAll();var f=this._axisGroup;this._axisGroup=new b();this.group.add(this._axisGroup);if(!a.get('show')){return}var e=a.getCoordSysModel();var i=layout$1(e,a);var c=new x(a,i);each$1(kM,c.add,c);this._axisGroup.add(c.getGroup());each$1(kV,function(b){if(a.get(b+'.show')){this['_'+b](a,e)}},this);groupTransition(f,this._axisGroup,a);d4.superCall(this,'render',a,g,j,h)},remove:function(){this._splitAreaColors=null},_splitLine:function(l,o){var i=l.axis;if(i.scale.isBlank()){return}var k=l.getModel('splitLine');var j=k.getModel('lineStyle');var a=j.get('color');a=isArray(a)?a:[a];var b=o.coordinateSystem.getRect();var m=i.isHorizontal();var p=0;var g=i.getTicksCoords({tickModel:k});var c=[];var e=[];var q=j.getLineStyle();for(var f=0;f<g.length;f++){var h=i.toGlobalCoord(g[f].coord);if(m){c[0]=h;c[1]=b.y;e[0]=h;e[1]=b.y+b.height}else {c[0]=b.x;c[1]=h;e[0]=b.x+b.width;e[1]=h}var n=p++%a.length;var r=g[f].tickValue;this._axisGroup.add(new B({anid:r!=null?'line_'+g[f].tickValue:null,subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:e[0],y2:e[1]},style:defaults({stroke:a[n]},q),silent:!0}))}},_splitArea:function(t,x){var f=t.axis;if(f.scale.isBlank()){return}var s=t.getModel('splitArea');var r=s.getModel('areaStyle');var c=r.get('color');var k=x.coordinateSystem.getRect();var b=f.getTicksCoords({tickModel:s,clamp:!0});if(!b.length){return}var o=c.length;var p=this._splitAreaColors;var q=createHashMap();var e=0;if(p){for(var a=0;a<b.length;a++){var v=p.get(b[a].tickValue);if(v!=null){e=(v+(o-1)*a)%o;break}}}var n=f.toGlobalCoord(b[0].coord);var w=r.getAreaStyle();c=isArray(c)?c:[c];for(var a=1;a<b.length;a++){var u=f.toGlobalCoord(b[a].coord);var g;var i;var m;var l;if(f.isHorizontal()){g=n;i=k.y;m=u-g;l=k.height;n=g+m}else {g=k.x;i=n;m=k.width;l=u-i;n=i+l}var j=b[a-1].tickValue;j!=null&&q.set(j,e);this._axisGroup.add(new h({anid:j!=null?'area_'+j:null,shape:{x:g,y:i,width:m,height:l},style:defaults({fill:c[e]},w),silent:!0}));e=(e+1)%o}this._splitAreaColors=q}});d4.extend({type:'xAxis'});d4.extend({type:'yAxis'});extendComponentView({type:'grid',render:function(a,b){this.group.removeAll();if(a.get('show')){this.group.add(new h({shape:a.coordinateSystem.getRect(),style:defaults({fill:a.get('backgroundColor')},a.getItemStyle()),silent:!0,z2:-1}))}}});registerPreprocessor(function(a){if(a.xAxis&&a.yAxis&&!a.grid){a.grid={}}});registerVisual(a$('line','circle','line'));registerLayout(b_('line'));registerProcessor(Y.PROCESSOR.STATISTIC,m6('line'));var hk=l.extend({type:'series.__base_bar__',getInitialData:function(b,a){return createListFromArray(this.getSource(),this)},getMarkerPosition:function(g){var a=this.coordinateSystem;if(a){var c=a.dataToPoint(a.clampData(g));var b=this.getData();var f=b.getLayout('offset');var h=b.getLayout('size');var e=a.getBaseAxis().isHorizontal()?0:1;c[e]+=f+h/2;return c}return [NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:'cartesian2d',legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3000,progressiveChunkMode:'mod',itemStyle:{},emphasis:{}}});hk.extend({type:'series.bar',dependencies:['grid','polar'],brushSelector:'rect',getProgressive:function(){return this.get('large')?this.get('progressive'):!1},getProgressiveThreshold:function(){var a=this.get('progressiveThreshold');var b=this.get('largeThreshold');if(b>a){a=b}return a},defaultOption:{clip:!0,roundCap:!1}});function setLabel(a,c,f,i,b,e,j){var h=f.getModel('label');var g=f.getModel('emphasis.label');setLabelStyle(a,c,h,g,{labelFetcher:b,labelDataIndex:e,defaultText:getDefaultLabel(b.getData(),e),isRectText:!0,autoColor:i});fixPosition(a);fixPosition(c)}function fixPosition(a,b){if(a.textPosition==='outside'){a.textPosition=b}}var k9=bo([['fill','color'],['stroke','borderColor'],['lineWidth','borderWidth'],['stroke','barBorderColor'],['lineWidth','barBorderWidth'],['opacity'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor']]);var l5={getBarItemStyle:function(c){var b=k9(this,c);if(this.getBorderLineDash){var a=this.getBorderLineDash();a&&(b.lineDash=a)}return b}};var n6=extendShape({type:'sausage',shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},buildPath:function(c,f){var g=f.cx;var h=f.cy;var e=Math.max(f.r0||0,0);var k=Math.max(f.r,0);var n=(k-e)*0.5;var j=e+n;var a=f.startAngle;var b=f.endAngle;var i=f.clockwise;var l=Math.cos(a);var o=Math.sin(a);var p=Math.cos(b);var m=Math.sin(b);var q=i?b-a<Math.PI*2:a-b<Math.PI*2;if(q){c.moveTo(l*e+g,o*e+h);c.arc(l*j+g,o*j+h,n,-Math.PI+a,a,!i)}c.arc(g,h,k,a,b,!i);c.moveTo(p*k+g,m*k+h);c.arc(p*j+g,m*j+h,n,b-Math.PI*2,b-Math.PI,!i);if(e!==0){c.arc(g,h,e,b,a,i);c.moveTo(l*e+g,m*e+h)}c.closePath()}});var jM=['itemStyle','barBorderWidth'];var de=[0,0];extend(Model.prototype,l5);function getClipArea(c,f){var a=c.getArea&&c.getArea();if(c.type==='cartesian2d'){var e=c.getBaseAxis();if(e.type!=='category'||!e.onBand){var b=f.getLayout('bandWidth');if(e.isHorizontal()){a.x-=b;a.width+=b*2}else {a.y-=b;a.height+=b*2}}}return a}extendChartView({type:'bar',render:function(b,e,f){this._updateDrawMode(b);var c=b.get('coordinateSystem');if(c==='cartesian2d'||c==='polar'){this._isLargeDraw?this._renderLarge(b,e,f):this._renderNormal(b,e,f)}else {if(a){console.warn('Only cartesian2d and polar supported for bar.')}}return this.group},incrementalPrepareRender:function(a,b,c){this._clear();this._updateDrawMode(a)},incrementalRender:function(b,a,c,e){this._incrementalRenderLarge(b,a)},_updateDrawMode:function(b){var a=b.pipelineContext.large;if(this._isLargeDraw==null||a^this._isLargeDraw){this._isLargeDraw=a;this._clear()}},_renderNormal:function(c,m,n){var f=this.group;var b=c.getData();var h=this._data;var a=c.coordinateSystem;var k=a.getBaseAxis();var e;if(a.type==='cartesian2d'){e=k.isHorizontal()}else {if(a.type==='polar'){e=k.dim==='angle'}}var g=c.isAnimationEnabled()?c:null;var j=c.get('clip',!0);var i=getClipArea(a,b);f.removeClipPath();var l=c.get('roundCap',!0);b.diff(h).add(function(h){if(!b.hasValue(h)){return}var p=b.getItemModel(h);var o=h5[a.type](b,h,p);if(j){var q=jb[a.type](i,o);if(q){f.remove(k);return}}var k=hc[a.type](h,o,e,g,!1,l);b.setItemGraphicEl(h,k);f.add(k);updateStyle(k,b,h,p,o,c,e,a.type==='polar')}).update(function(o,s){var k=h.getItemGraphicEl(s);if(!b.hasValue(o)){f.remove(k);return}var q=b.getItemModel(o);var p=h5[a.type](b,o,q);if(j){var r=jb[a.type](i,p);if(r){f.remove(k);return}}if(k){updateProps(k,{shape:p},g,o)}else {k=hc[a.type](o,p,e,g,!0,l)}b.setItemGraphicEl(o,k);f.add(k);updateStyle(k,b,o,q,p,c,e,a.type==='polar')}).remove(function(e){var b=h.getItemGraphicEl(e);if(a.type==='cartesian2d'){b&&removeRect(e,g,b)}else {b&&removeSector(e,g,b)}}).execute();this._data=b},_renderLarge:function(a,c,e){this._clear();createLarge(a,this.group);var b=a.get('clip',!0)?createClipPath(a.coordinateSystem,!1,a):null;if(b){this.group.setClipPath(b)}else {this.group.removeClipPath()}},_incrementalRenderLarge:function(b,a){createLarge(a,this.group,!0)},dispose:noop,remove:function(a){this._clear(a)},_clear:function(a){var c=this.group;var b=this._data;if(a&&a.get('animation')&&b&&!this._isLargeDraw){b.eachItemGraphicEl(function(b){if(b.type==='sector'){removeSector(b.dataIndex,a,b)}else {removeRect(b.dataIndex,a,b)}})}else {c.removeAll()}this._data=null}});var ic=Math.max;var ig=Math.min;var jb={cartesian2d:function(b,a){var e=a.width<0?-1:1;var c=a.height<0?-1:1;if(e<0){a.x+=a.width;a.width=-a.width}if(c<0){a.y+=a.height;a.height=-a.height}var f=ic(a.x,b.x);var i=ig(a.x+a.width,b.x+b.width);var g=ic(a.y,b.y);var j=ig(a.y+a.height,b.y+b.height);a.x=f;a.y=g;a.width=i-f;a.height=j-g;var h=a.width<0||a.height<0;if(e<0){a.x+=a.width;a.width=-a.width}if(c<0){a.y+=a.height;a.height=-a.height}return h},polar:function(a){return !1}};var hc={cartesian2d:function(i,f,g,c,k){var b=new h({shape:extend({},f)});if(c){var j=b.shape;var a=g?'height':'width';var e={};j[a]=0;e[a]=f[a];an[k?'updateProps':'initProps'](b,{shape:e},c,i)}return b},polar:function(k,a,c,f,l,m){var j=a.startAngle<a.endAngle;var i=!c&&m?n6:aa;var e=new i({shape:defaults({clockwise:j},a)});if(f){var h=e.shape;var b=c?'r':'endAngle';var g={};h[b]=c?0:a.startAngle;g[b]=a[b];an[l?'updateProps':'initProps'](e,{shape:g},f,k)}return e}};function removeRect(c,b,a){a.style.text=null;updateProps(a,{shape:{width:0}},b,c,function(){a.parent&&a.parent.remove(a)})}function removeSector(c,b,a){a.style.text=null;updateProps(a,{shape:{r:a.shape.r0}},b,c,function(){a.parent&&a.parent.remove(a)})}var h5={cartesian2d:function(h,f,g){var a=h.getItemLayout(f);var b=getLineWidth(g,a);var c=a.width>0?1:-1;var e=a.height>0?1:-1;return {x:a.x+c*b/2,y:a.y+e*b/2,width:a.width-c*b,height:a.height-e*b}},polar:function(c,b,e){var a=c.getItemLayout(b);return {cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle}}};function updateStyle(a,k,c,b,i,n,m,h){var j=k.getItemVisual(c,'color');var o=k.getItemVisual(c,'opacity');var e=b.getModel('itemStyle');var g=b.getModel('emphasis.itemStyle').getBarItemStyle();if(!h){a.setShape('r',e.get('barBorderRadius')||0)}a.useStyle(defaults({fill:j,opacity:o},e.getBarItemStyle()));var f=b.getShallow('cursor');f&&a.attr('cursor',f);var l=m?i.height>0?'bottom':'top':i.width>0?'left':'right';if(!h){setLabel(a.style,g,b,j,n,c,l)}setHoverStyle(a,g)}function getLineWidth(b,a){var c=b.get(jM)||0;return Math.min(c,Math.abs(a.width),Math.abs(a.height))}var nq=Path.extend({type:'largeBar',shape:{points:[]},buildPath:function(f,g){var b=g.points;var c=this.__startPoint;var e=this.__baseDimIdx;for(var a=0;a<b.length;a+=2){c[e]=b[a+e];f.moveTo(c[0],c[1]);f.lineTo(b[a],b[a+1])}}});function createLarge(c,h,g){var a=c.getData();var f=[];var e=a.getLayout('valueAxisHorizontal')?1:0;f[1-e]=a.getLayout('valueAxisStart');var b=new nq({shape:{points:a.getLayout('largePoints')},incremental:!!g,__startPoint:f,__baseDimIdx:e,__largeDataIndices:a.getLayout('largeDataIndices'),__barWidth:a.getLayout('barWidth')});h.add(b);setLargeStyle(b,c,a);b.seriesIndex=c.seriesIndex;if(!c.get('silent')){b.on('mousedown',ga);b.on('mousemove',ga)}}var ga=throttle(function(c){var b=this;var a=largePathFindDataIndex(b,c.offsetX,c.offsetY);b.dataIndex=a>=0?a:null},30,!1);function largePathFindDataIndex(a,r,s){var c=a.__baseDimIdx;var k=1-c;var h=a.shape.points;var n=a.__largeDataIndices;var j=Math.abs(a.__barWidth/2);var f=a.__startPoint[k];de[0]=r;de[1]=s;var i=de[c];var b=de[1-c];var o=i-j;var p=i+j;for(var e=0,q=h.length/2;e<q;e++){var m=e*2;var l=h[m+c];var g=h[m+k];if(l>=o&&l<=p&&(f<=g?b>=f&&b<=g:b>=g&&b<=f)){return n[e]}}return -1}function setLargeStyle(a,e,b){var c=b.getVisual('borderColor')||b.getVisual('color');var f=e.getModel('itemStyle').getItemStyle(['color','borderColor']);a.useStyle(f);a.style.fill=null;a.style.stroke=c;a.style.lineWidth=b.getLayout('barWidth')}registerLayout(Y.VISUAL.LAYOUT,curry(layout,'bar'));registerLayout(Y.VISUAL.PROGRESSIVE_LAYOUT,mM);registerVisual({seriesType:'bar',reset:function(a){a.getData().setVisual('legendSymbol','roundRect')}});var bm=function(b,a,g){a=isArray(a)&&{coordDimensions:a}||extend({},a);var c=b.getSource();var f=bl(c,a);var e=new s(f,b);e.initData(c,g);return e};var et={updateSelectedMap:function(a){this._targetList=isArray(a)?a.slice():[];this._selectTargetMap=reduce(a||[],function(b,c){b.set(c.name,c);return b},createHashMap())},select:function(e,b){var a=b!=null?this._targetList[b]:this._selectTargetMap.get(e);var c=this.get('selectedMode');if(c==='single'){this._selectTargetMap.each(function(a){a.selected=!1})}a&&(a.selected=!0)},unSelect:function(c,b){var a=b!=null?this._targetList[b]:this._selectTargetMap.get(c);a&&(a.selected=!1)},toggleSelected:function(c,b){var a=b!=null?this._targetList[b]:this._selectTargetMap.get(c);if(a!=null){this[a.selected?'unSelect':'select'](c,b);return a.selected}},isSelected:function(c,b){var a=b!=null?this._targetList[b]:this._selectTargetMap.get(c);return a&&a.selected}};var dd=extendSeriesModel({type:'series.pie',init:function(a){dd.superApply(this,'init',arguments);this.legendDataProvider=function(){return this.getRawData()};this.updateSelectedMap(this._createSelectableList());this._defaultLabelLine(a)},mergeOption:function(a){dd.superCall(this,'mergeOption',a);this.updateSelectedMap(this._createSelectableList())},getInitialData:function(b,a){return bm(this,['value'])},_createSelectableList:function(){var a=this.getRawData();var e=a.mapDimension('value');var c=[];for(var b=0,f=a.count();b<f;b++){c.push({name:a.getName(b),value:a.get(e,b),selected:retrieveRawAttr(a,b,'selected')})}return c},getDataParams:function(c){var b=this.getData();var a=dd.superCall(this,'getDataParams',c);var e=[];b.each(b.mapDimension('value'),function(a){e.push(a)});a.percent=getPercentWithPrecision(e,c,b.hostModel.get('percentPrecision'));a.$vars.push('percent');return a},_defaultLabelLine:function(a){defaultEmphasis(a,'labelLine',['show']);var c=a.labelLine;var b=a.emphasis.labelLine;c.show=c.show&&a.label.show;b.show=b.show&&a.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:['50%','50%'],radius:[0,'75%'],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{rotate:!1,show:!0,position:'outer'},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:'solid'}},itemStyle:{borderWidth:1},animationType:'expansion',animationTypeUpdate:'transition',animationEasing:'cubicOut'}});mixin(dd,et);function updateDataSelected(i,b,e,h){var a=b.getData();var f=this.dataIndex;var g=a.getName(f);var c=b.get('selectedOffset');h.dispatchAction({type:'pieToggleSelect',from:i,name:g,seriesId:b.id});a.each(function(f){toggleItemSelected(a.getItemGraphicEl(f),a.getItemLayout(f),b.isSelected(a.getName(f)),c,e)})}function toggleItemSelected(f,c,i,g,h){var a=(c.startAngle+c.endAngle)/2;var j=Math.cos(a);var k=Math.sin(a);var e=i?g:0;var b=[j*e,k*e];h?f.animate().when(200,{position:b}).start('bounceOut'):f.attr('position',b)}function PiePiece(f,h){b.call(this);var c=new aa({z2:2});var a=new L();var g=new e();this.add(c);this.add(a);this.add(g);this.updateData(f,h,!0)}var hu=PiePiece.prototype;hu.updateData=function(f,c,m){var a=this.childAt(0);var i=this.childAt(1);var j=this.childAt(2);var b=f.hostModel;var h=f.getItemModel(c);var e=f.getItemLayout(c);var g=extend({},e);g.label=null;var k=b.getShallow('animationTypeUpdate');if(m){a.setShape(g);var n=b.getShallow('animationType');if(n==='scale'){a.shape.r=e.r0;initProps(a,{shape:{r:e.r}},b,c)}else {a.shape.endAngle=e.startAngle;updateProps(a,{shape:{endAngle:e.endAngle}},b,c)}}else {if(k==='expansion'){a.setShape(g)}else {updateProps(a,{shape:g},b,c)}}var p=f.getItemVisual(c,'color');a.useStyle(defaults({lineJoin:'bevel',fill:p},h.getModel('itemStyle').getItemStyle()));a.hoverStyle=h.getModel('emphasis.itemStyle').getItemStyle();var l=h.getShallow('cursor');l&&a.attr('cursor',l);toggleItemSelected(this,f.getItemLayout(c),b.isSelected(null,c),b.get('selectedOffset'),b.get('animation'));var o=!m&&k==='transition';this._updateLabel(f,c,o);this.highDownOnUpdate=h.get('hoverAnimation')&&b.isAnimationEnabled()?function(h,g){if(g==='emphasis'){i.ignore=i.hoverIgnore;j.ignore=j.hoverIgnore;a.stopAnimation(!0);a.animateTo({shape:{r:e.r+b.get('hoverOffset')}},300,'elasticOut')}else {i.ignore=i.normalIgnore;j.ignore=j.normalIgnore;a.stopAnimation(!0);a.animateTo({shape:{r:e.r}},300,'elasticOut')}}:null;setHoverStyle(this)};hu._updateLabel=function(f,e,q){var b=this.childAt(1);var c=this.childAt(2);var o=f.hostModel;var g=f.getItemModel(e);var r=f.getItemLayout(e);var a=r.label;var j=f.getItemVisual(e,'color');if(!a||isNaN(a.x)||isNaN(a.y)){c.ignore=c.normalIgnore=c.hoverIgnore=b.ignore=b.normalIgnore=b.hoverIgnore=!0;return}var m={points:a.linePoints||[[a.x,a.y],[a.x,a.y],[a.x,a.y]]};var n={x:a.x,y:a.y};if(q){updateProps(b,{shape:m},o,e);updateProps(c,{style:n},o,e)}else {b.attr({shape:m});c.attr({style:n})}c.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var p=g.getModel('label');var l=g.getModel('emphasis.label');var i=g.getModel('labelLine');var k=g.getModel('emphasis.labelLine');var j=f.getItemVisual(e,'color');setLabelStyle(c.style,c.hoverStyle={},p,l,{labelFetcher:f.hostModel,labelDataIndex:e,defaultText:f.getName(e),autoColor:j,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign,opacity:f.getItemVisual(e,'opacity')});c.ignore=c.normalIgnore=!p.get('show');c.hoverIgnore=!l.get('show');b.ignore=b.normalIgnore=!i.get('show');b.hoverIgnore=!k.get('show');b.setStyle({stroke:j,opacity:f.getItemVisual(e,'opacity')});b.setStyle(i.getModel('lineStyle').getLineStyle());b.hoverStyle=k.getModel('lineStyle').getLineStyle();var h=i.get('smooth');if(h&&h===!0){h=0.4}b.setShape({smooth:h})};inherits(PiePiece,b);var o0=Chart.extend({type:'pie',init:function(){var a=new b();this._sectorGroup=a},render:function(c,q,h,o){if(o&&o.from===this.uid){return}var a=c.getData();var g=this._data;var b=this.group;var m=q.get('animation');var f=!g;var k=c.get('animationType');var j=c.get('animationTypeUpdate');var l=curry(updateDataSelected,this.uid,c,m,h);var n=c.get('selectedMode');a.diff(g).add(function(g){var e=new PiePiece(a,g);if(f&&k!=='scale'){e.eachChild(function(a){a.stopAnimation(!0)})}n&&e.on('click',l);a.setItemGraphicEl(g,e);b.add(e)}).update(function(i,k){var e=g.getItemGraphicEl(k);if(!f&&j!=='transition'){e.eachChild(function(a){a.stopAnimation(!0)})}e.updateData(a,i);e.off('click');n&&e.on('click',l);b.add(e);a.setItemGraphicEl(i,e)}).remove(function(e){var a=g.getItemGraphicEl(e);b.remove(a)}).execute();if(m&&a.count()>0&&(f?k!=='scale':j!=='transition')){var e=a.getItemLayout(0);for(var i=1;isNaN(e.startAngle)&&i<a.count();++i){e=a.getItemLayout(i)}var r=Math.max(h.getWidth(),h.getHeight())/2;var p=bind(b.removeClipPath,b);b.setClipPath(this._createClipPath(e.cx,e.cy,r,e.startAngle,e.clockwise,p,c,f))}else {b.removeClipPath()}this._data=a},dispose:function(){},_createClipPath:function(i,j,k,a,b,h,g,e){var c=new aa({shape:{cx:i,cy:j,r0:0,r:k,startAngle:a,endAngle:a,clockwise:b}});var f=e?initProps:updateProps;f(c,{shape:{endAngle:a+(b?1:-1)*Math.PI*2}},g,h);return c},containPoint:function(c,g){var h=g.getData();var a=h.getItemLayout(0);if(a){var e=c[0]-a.cx;var f=c[1]-a.cy;var b=Math.sqrt(e*e+f*f);return b<=a.r&&b>=a.r0}}});var gh=function(b,a){each$1(a,function(c){c.update='updateView';registerAction(c,function(e,g){var f={};g.eachComponent({mainType:'series',subType:b,query:e},function(h){if(h[c.method]){h[c.method](e.name,e.dataIndex)}var i=h.getData();i.each(function(k){var j=i.getName(k);f[j]=h.isSelected(j)||!1})});return {name:e.name,selected:f,seriesId:e.seriesId}})})};var df=function(a){return {getTargetSeries:function(e){var c={};var b=createHashMap();e.eachSeriesByType(a,function(f){f.__paletteScope=c;b.set(f.uid,f)});return b},reset:function(e,g){var b=e.getRawData();var f={};var c=e.getData();c.each(function(b){var h=c.getRawIndex(b);f[h]=b});b.each(function(i){var h=f[i];var k=h!=null&&c.getItemVisual(h,'color',!0);var j=h!=null&&c.getItemVisual(h,'borderColor',!0);var l;if(!k||!j){l=b.getItemModel(i)}if(!k){var n=l.get('itemStyle.color')||e.getColorFromPalette(b.getName(i)||i+'',e.__paletteScope,b.count());b.setItemVisual(i,'color',n);if(h!=null){c.setItemVisual(h,'color',n)}}else {b.setItemVisual(i,'color',k)}if(!j){var m=l.get('itemStyle.borderColor');b.setItemVisual(i,'borderColor',m);if(h!=null){c.setItemVisual(h,'borderColor',m)}}else {b.setItemVisual(i,'borderColor',j)}})}}};var nS=Math.PI/180;function adjustSingleSide(a,l,h,m,g,n,i){a.sort(function(b,c){return b.y-c.y});function shiftDown(f,e,c,j){for(var b=f;b<e;b++){a[b].y+=c;if(b>f&&b+1<e&&a[b+1].y>a[b].y+a[b].height){shiftUp(b,c/2);return}}shiftUp(e-1,c/2)}function shiftUp(e,c){for(var b=e;b>=0;b--){a[b].y-=c;if(b>0&&a[b].y>a[b-1].y+a[b-1].height){break}}}function changeX(e,j,s,t,p,r){var f=r>0?j?Number.MAX_VALUE:0:j?Number.MAX_VALUE:0;for(var b=0,u=e.length;b<u;b++){var k=Math.abs(e[b].y-t);var o=e[b].len;var q=e[b].len2;var c=k<p+o?Math.sqrt((p+o+q)*(p+o+q)-k*k):Math.abs(e[b].x-s);if(j&&c>=f){c=f-10}if(!j&&c<=f){c=f+10}e[b].x=s+c*r;f=c}}var c=0;var f;var e=a.length;var k=[];var j=[];for(var b=0;b<e;b++){f=a[b].y-c;if(f<0){shiftDown(b,e,-f,g)}c=a[b].y+a[b].height}if(i-c<0){shiftUp(e-1,c-i)}for(var b=0;b<e;b++){if(a[b].y>=h){j.push(a[b])}else {k.push(a[b])}}changeX(k,!1,l,h,m,g);changeX(j,!0,l,h,m,g)}function avoidOverlap(b,e,j,k,h,f){var i=[];var g=[];for(var a=0;a<b.length;a++){if(isPositionCenter(b[a])){continue}if(b[a].x<e){i.push(b[a])}else {g.push(b[a])}}adjustSingleSide(g,e,j,k,1,h,f);adjustSingleSide(i,e,j,k,-1,h,f);for(var a=0;a<b.length;a++){if(isPositionCenter(b[a])){continue}var c=b[a].linePoints;if(c){var l=c[1][0]-c[2][0];if(b[a].x<e){c[2][0]=b[a].x+3}else {c[2][0]=b[a].x-3}c[1][1]=c[2][1]=b[a].y;c[1][0]=c[2][0]+l}}}function isPositionCenter(a){return a.position==='center'}var mL=function(a,f,k,j,l){var b=a.getData();var g=[];var c;var e;var h=!1;var i=(a.get('minShowLabelAngle')||0)*nS;b.each(function(v){var m=b.getItemLayout(v);var z=b.getItemModel(v);var y=z.getModel('label');var p=y.get('position')||z.get('emphasis.label.position');var D=z.getModel('labelLine');var x=D.get('length');var E=D.get('length2');if(m.angle<i){return}var s=(m.startAngle+m.endAngle)/2;var n=Math.cos(s);var w=Math.sin(s);var t;var u;var F;var r;c=m.cx;e=m.cy;var o=p==='inside'||p==='inner';if(p==='center'){t=m.cx;u=m.cy;r='center'}else {var B=(o?(m.r+m.r0)/2*n:m.r*n)+c;var C=(o?(m.r+m.r0)/2*w:m.r*w)+e;t=B+n*3;u=C+w*3;if(!o){var G=B+n*(x+f-m.r);var I=C+w*(x+f-m.r);var H=G+(n<0?-1:1)*E;var J=I;t=H+(n<0?-5:5);u=J;F=[[B,C],[G,I],[H,J]]}r=o?'center':n>0?'left':'right'}var L=y.getFont();var q;var A=y.get('rotate');if(typeof A==='number'){q=A*(Math.PI/180)}else {q=A?n<0?-s+Math.PI:-s:0}var M=a.getFormattedLabel(v,'normal')||b.getName(v);var K=getBoundingRect(M,L,r,'top');h=!!q;m.label={x:t,y:u,position:p,height:K.height,len:x,len2:E,linePoints:F,textAlign:r,verticalAlign:'middle',rotation:q,inside:o};if(!o){g.push(m.label)}});if(!h&&a.get('avoidLabelOverlap')){avoidOverlap(g,c,e,f,k,j)}};var dI=Math.PI*2;var iY=Math.PI/180;var nO=function(b,c,a,e){c.eachSeriesByType(b,function(g){var f=g.getData();var i=f.mapDimension('value');var j=g.get('center');var m=g.get('radius');if(!isArray(m)){m=[0,m]}if(!isArray(j)){j=[j,j]}var w=a.getWidth();var u=a.getHeight();var A=Math.min(w,u);var C=parsePercent$1(j[0],w);var D=parsePercent$1(j[1],u);var x=parsePercent$1(m[0],A/2);var r=parsePercent$1(m[1],A/2);var o=-g.get('startAngle')*iY;var l=g.get('minAngle')*iY;var k=0;f.each(i,function(f){!isNaN(f)&&k++});var B=f.getSum(i);var p=Math.PI/(B||k)*2;var s=g.get('clockwise');var t=g.get('roseType');var E=g.get('stillShowZeroSum');var z=f.getDataExtent(i);z[0]=0;var q=dI;var y=0;var h=o;var n=s?1:-1;f.each(i,function(j,o){var i;if(isNaN(j)){f.setItemLayout(o,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:s,cx:C,cy:D,r0:x,r:t?NaN:r});return}if(t!=='area'){i=B===0&&E?p:j*p}else {i=dI/k}if(i<l){i=l;q-=l}else {y+=j}var m=h+n*i;f.setItemLayout(o,{angle:i,startAngle:h,endAngle:m,clockwise:s,cx:C,cy:D,r0:x,r:t?linearMap(j,z,[x,r]):r});h=m});if(q<dI&&k){if(q<=0.001){var v=dI/k;f.each(i,function(j,i){if(!isNaN(j)){var h=f.getItemLayout(i);h.angle=v;h.startAngle=o+n*i*v;h.endAngle=o+n*(i+1)*v}})}else {p=q/y;h=o;f.each(i,function(k,m){if(!isNaN(k)){var i=f.getItemLayout(m);var j=i.angle===l?l:k*p;i.startAngle=h;i.endAngle=h+n*j;h+=n*j}})}}mL(g,r,w,u)})};var b6=function(a){return {seriesType:a,reset:function(e,f){var b=f.findComponents({mainType:'legend'});if(!b||!b.length){return}var c=e.getData();c.filterSelf(function(i){var h=c.getName(i);for(var g=0;g<b.length;g++){if(!b[g].isSelected(h)){return !1}}return !0})}}};gh('pie',[{type:'pieToggleSelect',event:'pieselectchanged',method:'toggleSelected'},{type:'pieSelect',event:'pieselected',method:'select'},{type:'pieUnSelect',event:'pieunselected',method:'unSelect'}]);registerVisual(df('pie'));registerLayout(curry(nO,'pie'));registerProcessor(b6('pie'));l.extend({type:'series.scatter',dependencies:['grid','polar','geo','singleAxis','calendar'],getInitialData:function(b,a){return createListFromArray(this.getSource(),this)},brushSelector:'point',getProgressive:function(){var a=this.option.progressive;if(a==null){return this.option.large?5000:this.get('progressive')}return a},getProgressiveThreshold:function(){var a=this.option.progressiveThreshold;if(a==null){return this.option.large?10000:this.get('progressiveThreshold')}return a},defaultOption:{coordinateSystem:'cartesian2d',zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2000,itemStyle:{opacity:0.8},clip:!0}});var dU=4;var eo=extendShape({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(c,j){var e=j.points;var b=j.size;var i=this.symbolProxy;var a=i.shape;var l=c.getContext?c.getContext():c;var k=l&&b[0]<dU;if(k){return}for(var f=0;f<e.length;){var g=e[f++];var h=e[f++];if(isNaN(g)||isNaN(h)){continue}if(this.softClipShape&&!this.softClipShape.contain(g,h)){continue}a.x=g-b[0]/2;a.y=h-b[1]/2;a.width=b[0];a.height=b[1];i.buildPath(c,a,!0)}},afterBrush:function(c){var h=this.shape;var b=h.points;var a=h.size;var i=a[0]<dU;if(!i){return}this.setTransform(c);for(var e=0;e<b.length;){var f=b[e++];var g=b[e++];if(isNaN(f)||isNaN(g)){continue}if(this.softClipShape&&!this.softClipShape.contain(f,g)){continue}c.fillRect(f-a[0]/2,g-a[1]/2,a[0],a[1])}this.restoreTransform(c)},findDataIndex:function(k,l){var c=this.shape;var b=c.points;var e=c.size;var j=Math.max(e[0],4);var h=Math.max(e[1],4);for(var a=b.length/2-1;a>=0;a--){var i=a*2;var f=b[i]-j/2;var g=b[i+1]-h/2;if(k>=f&&l>=g&&k<=f+j&&l<=g+h){return a}}return -1}});function LargeSymbolDraw(){this.group=new b()}var ar=LargeSymbolDraw.prototype;ar.isPersistent=function(){return !this._incremental};ar.updateData=function(b,c){this.group.removeAll();var a=new eo({rectHover:!0,cursor:'default'});a.setShape({points:b.getLayout('symbolPoints')});this._setCommon(a,b,!1,c);this.group.add(a);this._incremental=null};ar.updateLayout=function(b){if(this._incremental){return}var a=b.getLayout('symbolPoints');this.group.eachChild(function(c){if(c.startIndex!=null){var f=(c.endIndex-c.startIndex)*2;var e=c.startIndex*4*2;a=new Float32Array(a.buffer,e,f)}c.setShape('points',a)})};ar.incrementalPrepareUpdate=function(a){this.group.removeAll();this._clearIncremental();if(a.count()>2000000){if(!this._incremental){this._incremental=new IncrementalDisplayble({silent:!0})}this.group.add(this._incremental)}else {this._incremental=null}};ar.incrementalUpdate=function(b,c,e){var a;if(this._incremental){a=new eo();this._incremental.addDisplayable(a,!0)}else {a=new eo({rectHover:!0,cursor:'default',startIndex:b.start,endIndex:b.end});a.incremental=!0;this.group.add(a)}a.setShape({points:c.getLayout('symbolPoints')});this._setCommon(a,c,!!this._incremental,e)};ar._setCommon=function(a,b,i,e){var g=b.hostModel;e=e||{};var c=b.getVisual('symbolSize');a.setShape('size',c instanceof Array?c:[c,c]);a.softClipShape=e.clipShape||null;a.symbolProxy=createSymbol(b.getVisual('symbol'),0,0,0,0);a.setColor=a.symbolProxy.setColor;var h=a.shape.size[0]<dU;a.useStyle(g.getModel('itemStyle').getItemStyle(h?['color','shadowBlur','shadowColor']:['color']));var f=b.getVisual('color');if(f){a.setColor(f)}if(!i){a.seriesIndex=g.seriesIndex;a.on('mousemove',function(f){a.dataIndex=null;var c=a.findDataIndex(f.offsetX,f.offsetY);if(c>=0){a.dataIndex=c+(a.startIndex||0)}})}};ar.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};ar._clearIncremental=function(){var a=this._incremental;if(a){a.clearDisplaybles()}};extendChartView({type:'scatter',render:function(a,e,f){var b=a.getData();var c=this._updateSymbolDraw(b,a);c.updateData(b,{clipShape:this._getClipShape(a)});this._finished=!0},incrementalPrepareRender:function(a,e,f){var b=a.getData();var c=this._updateSymbolDraw(b,a);c.incrementalPrepareUpdate(b);this._finished=!1},incrementalRender:function(b,a,c){this._symbolDraw.incrementalUpdate(b,a.getData(),{clipShape:this._getClipShape(a)});this._finished=b.end===a.getData().count()},updateTransform:function(b,e,f){var a=b.getData();this.group.dirty();if(!this._finished||a.count()>10000||!this._symbolDraw.isPersistent()){return {update:!0}}else {var c=b_().reset(b);if(c.progress){c.progress({start:0,end:a.count()},a)}this._symbolDraw.updateLayout(a)}},_getClipShape:function(b){var a=b.coordinateSystem;var c=a&&a.getArea&&a.getArea();return b.get('clip',!0)?c:null},_updateSymbolDraw:function(f,e){var a=this._symbolDraw;var c=e.pipelineContext;var b=c.large;if(!a||b!==this._isLargeDraw){a&&a.remove();a=this._symbolDraw=b?new LargeSymbolDraw():new SymbolDraw();this._isLargeDraw=b;this.group.removeAll()}this.group.add(a.group);return a},remove:function(a,b){this._symbolDraw&&this._symbolDraw.remove(!0);this._symbolDraw=null},dispose:function(){}});registerVisual(a$('scatter','circle'));registerLayout(b_('scatter'));function IndicatorAxis(c,b,a){q.call(this,c,b,a);this.type='value';this.angle=0;this.name='';this.model}inherits(IndicatorAxis,q);function Radar(a,c,b){this._model=a;this.dimensions=[];this._indicatorAxes=map(a.getIndicatorModels(),function(e,h){var g='indicator_'+h;var f=new IndicatorAxis(g,e.get('axisType')==='log'?new dn():new U());f.name=e.get('name');f.model=e;e.axis=f;this.dimensions.push(g);return f},this);this.resize(a,b);this.cx;this.cy;this.r;this.r0;this.startAngle}Radar.prototype.getIndicatorAxes=function(){return this._indicatorAxes};Radar.prototype.dataToPoint=function(c,a){var b=this._indicatorAxes[a];return this.coordToPoint(b.dataToCoord(c),a)};Radar.prototype.coordToPoint=function(b,c){var e=this._indicatorAxes[c];var a=e.angle;var f=this.cx+b*Math.cos(a);var g=this.cy-b*Math.sin(a);return [f,g]};Radar.prototype.pointToData=function(k){var a=k[0]-this.cx;var b=k[1]-this.cy;var f=Math.sqrt(a*a+b*b);a/=f;b/=f;var l=Math.atan2(-b,a);var i=Infinity;var e;var g=-1;for(var c=0;c<this._indicatorAxes.length;c++){var h=this._indicatorAxes[c];var j=Math.abs(l-h.angle);if(j<i){e=h;g=c;i=j}}return [g,+(e&&e.coordToData(f))]};Radar.prototype.resize=function(b,h){var g=b.get('center');var e=h.getWidth();var c=h.getHeight();var f=Math.min(e,c)/2;this.cx=parsePercent$1(g[0],e);this.cy=parsePercent$1(g[1],c);this.startAngle=b.get('startAngle')*Math.PI/180;var a=b.get('radius');if(typeof a==='string'||typeof a==='number'){a=[0,a]}this.r0=parsePercent$1(a[0],f);this.r=parsePercent$1(a[1],f);each$1(this._indicatorAxes,function(c,e){c.setExtent(this.r0,this.r);var a=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;a=Math.atan2(Math.sin(a),Math.cos(a));c.angle=a},this)};Radar.prototype.update=function(e,f){var b=this._indicatorAxes;var c=this._model;each$1(b,function(a){a.scale.setExtent(Infinity,-Infinity)});e.eachSeriesByType('radar',function(a,h){if(a.get('coordinateSystem')!=='radar'||e.getComponent('radar',a.get('radarIndex'))!==c){return}var g=a.getData();each$1(b,function(b){b.scale.unionExtentFromData(g,g.mapDimension(b.dim))})},this);var a=c.get('splitNumber');function increaseInterval(b){var c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10));var a=b/c;if(a===2){a=5}else {a*=2}return a*c}each$1(b,function(g,q){var h=getScaleExtent(g.scale,g.model);niceScaleExtent(g.scale,g.model);var n=g.model;var c=g.scale;var j=n.getMin();var i=n.getMax();var b=c.getInterval();if(j!=null&&i!=null){c.setExtent(+j,+i);c.setInterval((i-j)/a)}else {if(j!=null){var k;do{k=j+b*a;c.setExtent(+j,k);c.setInterval(b);b=increaseInterval(b)}while(k<h[1]&&isFinite(k)&&isFinite(h[1]))}else {if(i!=null){var l;do{l=i-b*a;c.setExtent(l,+i);c.setInterval(b);b=increaseInterval(b)}while(l>h[0]&&isFinite(l)&&isFinite(h[0]))}else {var p=c.getTicks().length-1;if(p>a){b=increaseInterval(b)}var o=Math.round((h[0]+h[1])/2/b)*b;var m=Math.round(a/2);c.setExtent(round$1(o-m*b),round$1(o+(a-m)*b));c.setInterval(b)}}}})};Radar.dimensions=[];Radar.create=function(b,c){var a=[];b.eachComponent('radar',function(e){var f=new Radar(e,b,c);a.push(f);e.coordinateSystem=f});b.eachSeriesByType('radar',function(e){if(e.get('coordinateSystem')==='radar'){e.coordinateSystem=a[e.get('radarIndex')||0]}});return a};CoordinateSystemManager.register('radar',Radar);var bX=ay.valueAxis;function defaultsShow(b,a){return defaults({show:a},b)}var oZ=extendComponentModel({type:'radar',optionUpdated:function(){var f=this.get('boundaryGap');var g=this.get('splitNumber');var n=this.get('scale');var i=this.get('axisLine');var j=this.get('axisTick');var k=this.get('axisType');var h=this.get('axisLabel');var b=this.get('name');var l=this.get('name.show');var a=this.get('name.formatter');var m=this.get('nameGap');var e=this.get('triggerEvent');var c=map(this.get('indicator')||[],function(c){if(c.max!=null&&c.max>0&&!c.min){c.min=0}else {if(c.min!=null&&c.min<0&&!c.max){c.max=0}}var p=b;if(c.color!=null){p=defaults({color:c.color},b)}c=merge(clone(c),{boundaryGap:f,splitNumber:g,scale:n,axisLine:i,axisTick:j,axisType:k,axisLabel:h,name:c.text,nameLocation:'end',nameGap:m,nameTextStyle:p,triggerEvent:e},!1);if(!l){c.name=''}if(typeof a==='string'){var q=c.name;c.name=a.replace('{value}',q!=null?q:'')}else {if(typeof a==='function'){c.name=a(c.name,c)}}var o=extend(new Model(c,null,this.ecModel),aQ);o.mainType='radar';o.componentIndex=this.componentIndex;return o},this);this.getIndicatorModels=function(){return c}},defaultOption:{zlevel:0,z:0,center:['50%','50%'],radius:'75%',startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:'polygon',axisLine:merge({lineStyle:{color:'#bbb'}},bX.axisLine),axisLabel:defaultsShow(bX.axisLabel,!1),axisTick:defaultsShow(bX.axisTick,!1),axisType:'interval',splitLine:defaultsShow(bX.splitLine,!0),splitArea:defaultsShow(bX.splitArea,!0),indicator:[]}});var kf=['axisLine','axisTickLabel','axisName'];extendComponentView({type:'radar',render:function(a,c,e){var b=this.group;b.removeAll();this._buildAxes(a);this._buildSplitLineAndArea(a)},_buildAxes:function(e){var a=e.coordinateSystem;var b=a.getIndicatorAxes();var c=map(b,function(b){var c=new x(b.model,{position:[a.cx,a.cy],rotation:b.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return c});each$1(c,function(a){each$1(kf,a.add,a);this.group.add(a.getGroup())},this)},_buildSplitLineAndArea:function(m){var n=m.coordinateSystem;var l=n.getIndicatorAxes();if(!l.length){return}var B=m.get('shape');var t=m.getModel('splitLine');var s=m.getModel('splitArea');var r=t.getModel('lineStyle');var q=s.getModel('areaStyle');var v=t.get('show');var u=s.get('show');var e=r.get('color');var c=q.get('color');e=isArray(e)?e:[e];c=isArray(c)?c:[c];var j=[];var i=[];function getColorIndex(b,c,e){var a=e%c.length;b[a]=b[a]||[];return a}if(B==='circle'){var h=l[0].getTicksCoords();var w=n.cx;var x=n.cy;for(var b=0;b<h.length;b++){if(v){var f=getColorIndex(j,e,b);j[f].push(new ao({shape:{cx:w,cy:x,r:h[b].coord}}))}if(u&&b<h.length-1){var f=getColorIndex(i,c,b);i[f].push(new dN({shape:{cx:w,cy:x,r0:h[b].coord,r:h[b+1].coord}}))}}}else {var k;var y=map(l,function(b,c){var a=b.getTicksCoords();k=k==null?a.length-1:Math.min(a.length-1,k);return map(a,function(a){return n.coordToPoint(a.coord,c)})});var o=[];for(var b=0;b<=k;b++){var g=[];for(var p=0;p<l.length;p++){g.push(y[p][b])}if(g[0]){g.push(g[0].slice())}else {if(a){console.error("Can't draw value axis "+b)}}if(v){var f=getColorIndex(j,e,b);j[f].push(new L({shape:{points:g}}))}if(u&&o){var f=getColorIndex(i,c,b-1);i[f].push(new I({shape:{points:g.concat(o)}}))}o=g.slice().reverse()}}var A=r.getLineStyle();var z=q.getAreaStyle();each$1(i,function(a,b){this.group.add(ak(a,{style:defaults({stroke:'none',fill:c[b%c.length]},z),silent:!0}))},this);each$1(j,function(a,b){this.group.add(ak(a,{style:defaults({fill:'none',stroke:e[b%e.length]},A),silent:!0}))},this)}});var mz=l.extend({type:'series.radar',dependencies:['radar'],init:function(a){mz.superApply(this,'init',arguments);this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(b,a){return bm(this,{generateCoord:'indicator_',generateCoordCount:Infinity})},formatTooltip:function(a){var b=this.getData();var f=this.coordinateSystem;var e=f.getIndicatorAxes();var c=this.getData().getName(a);return encodeHTML(c===''?this.name:c)+'<br/>'+map(e,function(c,f){var e=b.get(b.mapDimension(c.dim),a);return encodeHTML(c.name+' : '+e)}).join('<br />')},defaultOption:{zlevel:0,z:2,coordinateSystem:'radar',legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:'solid'},label:{position:'top'},symbol:'emptyCircle',symbolSize:4}});function normalizeSymbolSize(a){if(!isArray(a)){a=[+a,+a]}return a}extendChartView({type:'radar',render:function(c,h,i){var g=c.coordinateSystem;var f=this.group;var a=c.getData();var e=this._data;function createSymbol$$1(a,b){var g=a.getItemVisual(b,'symbol')||'circle';var j=a.getItemVisual(b,'color');if(g==='none'){return}var f=normalizeSymbolSize(a.getItemVisual(b,'symbolSize'));var e=createSymbol(g,-1,-1,2,2,j);e.attr({style:{strokeNoScale:!0},z2:100,scale:[f[0]/2,f[1]/2]});return e}function updateSymbols(g,e,f,l,j,k){f.removeAll();for(var a=0;a<e.length-1;a++){var b=createSymbol$$1(l,j);if(b){b.__dimIdx=a;if(g[a]){b.attr('position',g[a]);an[k?'initProps':'updateProps'](b,{position:e[a]},c,j)}else {b.attr('position',e[a])}f.add(b)}}}function getInitialPoints(a){return map(a,function(b){return [g.cx,g.cy]})}a.diff(e).add(function(f){var e=a.getItemLayout(f);if(!e){return}var k=new I();var j=new L();var m={shape:{points:e}};k.shape.points=getInitialPoints(e);j.shape.points=getInitialPoints(e);initProps(k,m,c,f);initProps(j,m,c,f);var g=new b();var l=new b();g.add(j);g.add(k);g.add(l);updateSymbols(j.shape.points,e,l,a,f,!0);a.setItemGraphicEl(f,g)}).update(function(g,m){var b=e.getItemGraphicEl(m);var j=b.childAt(0);var l=b.childAt(1);var k=b.childAt(2);var f={shape:{points:a.getItemLayout(g)}};if(!f.shape.points){return}updateSymbols(j.shape.points,f.shape.points,k,a,g,!1);updateProps(j,f,c);updateProps(l,f,c);a.setItemGraphicEl(g,b)}).remove(function(a){f.remove(e.getItemGraphicEl(a))}).execute();a.eachItemGraphicEl(function(e,j){var b=a.getItemModel(j);var p=e.childAt(0);var g=e.childAt(1);var s=e.childAt(2);var o=a.getItemVisual(j,'color');f.add(e);p.useStyle(defaults(b.getModel('lineStyle').getLineStyle(),{fill:'none',stroke:o}));p.hoverStyle=b.getModel('emphasis.lineStyle').getLineStyle();var m=b.getModel('areaStyle');var k=b.getModel('emphasis.areaStyle');var n=m.isEmpty()&&m.parentModel.isEmpty();var l=k.isEmpty()&&k.parentModel.isEmpty();l=l&&n;g.ignore=n;g.useStyle(defaults(m.getAreaStyle(),{fill:o,opacity:0.7}));g.hoverStyle=k.getAreaStyle();var u=b.getModel('itemStyle').getItemStyle(['color']);var r=b.getModel('emphasis.itemStyle').getItemStyle();var t=b.getModel('label');var q=b.getModel('emphasis.label');s.eachChild(function(b){b.setStyle(u);b.hoverStyle=clone(r);var f=a.get(a.dimensions[b.__dimIdx],j);(f==null||isNaN(f))&&(f='');setLabelStyle(b.style,b.hoverStyle,t,q,{labelFetcher:a.hostModel,labelDataIndex:j,labelDimIndex:b.__dimIdx,defaultText:f,autoColor:o,isRectText:!0})});e.highDownOnUpdate=function(b,a){g.attr('ignore',a==='emphasis'?l:n)};setHoverStyle(e)});this._data=a},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});var mS=function(a){a.eachSeriesByType('radar',function(f){var e=f.getData();var b=[];var c=f.coordinateSystem;if(!c){return}var g=c.getIndicatorAxes();each$1(g,function(i,h){e.each(e.mapDimension(g[h].dim),function(j,e){b[e]=b[e]||[];var g=c.dataToPoint(j,h);b[e][h]=isValidPoint(g)?g:getValueMissingPoint(c)})});e.each(function(g){var h=find(b[g],function(b){return isValidPoint(b)})||getValueMissingPoint(c);b[g].push(h.slice());e.setItemLayout(g,b[g])})})};function isValidPoint(a){return !isNaN(a[0])&&!isNaN(a[1])}function getValueMissingPoint(a){return [a.cx,a.cy]}var kN=function(a){var b=a.polar;if(b){if(!isArray(b)){b=[b]}var c=[];each$1(b,function(b,e){if(b.indicator){if(b.type&&!b.shape){b.shape=b.type}a.radar=a.radar||[];if(!isArray(a.radar)){a.radar=[a.radar]}a.radar.push(b)}else {c.push(b)}});a.polar=c}each$1(a.series,function(b){if(b&&b.type==='radar'&&b.polarIndex){b.radarIndex=b.polarIndex}})};registerVisual(df('radar'));registerVisual(a$('radar','circle'));registerLayout(mS);registerProcessor(b6('radar'));registerPreprocessor(kN);var fn=[126,25];var a6=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,0.7],[52,0.7],[56,7.7],[59,0.7],[64,0.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var bg=0;bg<a6.length;bg++){for(var bQ=0;bQ<a6[bg].length;bQ++){a6[bg][bQ][0]/=10.5;a6[bg][bQ][1]/=-10.5/0.75;a6[bg][bQ][0]+=fn[0];a6[bg][bQ][1]+=fn[1]}}var nF=function(a,b){if(a==='china'){b.push(new Region('',map(a6,function(c){return {type:'polygon',exterior:c}}),fn))}};var k4={'':[32,80],'':[0,-10],'':[10,5],'':[-10,10],'':[5,5]};var l8=function(e,b){if(e==='china'){var a=k4[b.name];if(a){var c=b.center;c[0]+=a[0]/10.5;c[1]+=-a[1]/(10.5/0.75)}}};var mJ={'Russia':[100,60],'United States':[-99,38],'United States of America':[-99,38]};var mH=function(e,b){if(e==='world'){var a=mJ[b.name];if(a){var c=b.center;c[0]=a[0];c[1]=a[1]}}};var n_=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var k8=function(b,a){if(b==='china'&&a.name===''){a.geometries.push({type:'polygon',exterior:n_[0]})}};var iK=makeInner();var lN={load:function(c,b){var f=iK(b).parsed;if(f){return f}var g=b.specialAreas||{};var e=b.geoJSON;var a;try{a=e?eD(e):[]}catch(o3){throw new Error('Invalid geoJson format\n'+o3.message)}nF(c,a);each$1(a,function(e){var f=e.name;l8(c,e);mH(c,e);k8(c,e);var a=g[f];if(a){e.transformTo(a.left,a.top,a.width,a.height)}});return iK(b).parsed={regions:a,boundingRect:getBoundingRect$1(a)}}};function getBoundingRect$1(e){var a;for(var b=0;b<e.length;b++){var c=e[b].getBoundingRect();a=a||c.clone();a.union(c)}return a}var bE=makeInner();var ma={load:function(e,a){var c=bE(a).originRoot;if(c){return {root:c,boundingRect:bE(a).boundingRect}}var b=buildGraphic(a);bE(a).originRoot=b.root;bE(a).boundingRect=b.boundingRect;return b},makeGraphic:function(i,e,c){var a=bE(e);var f=a.rootMap||(a.rootMap=createHashMap());var b=f.get(c);if(b){return b}var h=a.originRoot;var g=a.boundingRect;if(!a.originRootHostKey){a.originRootHostKey=c;b=h}else {b=buildGraphic(e,g).root}return f.set(c,b)},removeGraphic:function(f,e,b){var a=bE(e);var c=a.rootMap;c&&c.removeKey(b);if(b===a.originRootHostKey){a.originRootHostKey=null}}};function buildGraphic(m,a){var l=m.svgXML;var e;var c;try{e=l&&parseSVG(l,{ignoreViewBox:!0,ignoreRootClip:!0})||{};c=e.root;assert$1(c!=null)}catch(o3){throw new Error('Invalid svg format\n'+o3.message)}var g=e.width;var f=e.height;var k=e.viewBoxRect;if(!a){a=g==null||f==null?c.getBoundingRect():new BoundingRect(0,0,0,0);if(g!=null){a.width=g}if(f!=null){a.height=f}}if(k){var j=makeViewBoxTransform(k,a.width,a.height);var i=c;c=new b();c.add(i);i.scale=j.scale;i.position=j.position}c.setClipPath(new h({shape:a.plain()}));return {root:c,boundingRect:a}}var iM={geoJSON:lN,svg:ma};var bW={load:function(f,b){var g=[];var e=createHashMap();var c=createHashMap();var a;var h=retrieveMap(f);each$1(h,function(j){var i=iM[j.type].load(f,j);each$1(i.regions,function(a){var h=a.name;if(b&&b.hasOwnProperty(h)){a=a.cloneShallow(h=b[h])}g.push(a);e.set(h,a);c.set(h,a.center)});var h=i.boundingRect;if(h){a?a.union(h):a=h.clone()}});return {regions:g,regionsMap:e,nameCoordMap:c,boundingRect:a||new BoundingRect(0,0,0,0)}},makeGraphic:makeInvoker('makeGraphic'),removeGraphic:makeInvoker('removeGraphic')};function makeInvoker(a){return function(b,f){var e=retrieveMap(b);var c=[];each$1(e,function(g){var e=iM[g.type][a];e&&c.push(e(b,g,f))});return c}}function mapNotExistsError(b){if(a){console.error('Map '+b+' not exists. The GeoJSON of the map must be provided.')}}function retrieveMap(c){var b=cQ.retrieveMap(c)||[];if(a){if(!b.length){mapNotExistsError(c)}}return b}var nr=l.extend({type:'series.map',dependencies:['geo'],layoutMode:'box',needsDrawMap:!1,seriesGroup:[],getInitialData:function(k){var a=bm(this,['value']);var i=a.mapDimension('value');var f=createHashMap();var c=[];var e=[];for(var b=0,j=a.count();b<j;b++){var g=a.getName(b);f.set(g,!0);c.push({name:g,value:a.get(i,b),selected:retrieveRawAttr(a,b,'selected')})}var h=bW.load(this.getMapType(),this.option.nameMap);each$1(h.regions,function(b){var a=b.name;if(!f.get(a)){c.push({name:a});e.push(a)}});this.updateSelectedMap(c);a.appendValues([],e);return a},getHostGeoModel:function(){var a=this.option.geoIndex;return a!=null?this.dependentModels.geo[a]:null},getMapType:function(){return (this.getHostGeoModel()||this).option.map},getRawValue:function(b){var a=this.getData();return a.get(a.mapDimension('value'),b)},getRegionModel:function(b){var a=this.getData();return a.getItemModel(a.indexOfName(b))},formatTooltip:function(e){var f=this.getData();var h=addCommas(this.getRawValue(e));var g=f.getName(e);var b=this.seriesGroup;var c=[];for(var a=0;a<b.length;a++){var i=b[a].originalData.indexOfName(g);var j=f.mapDimension('value');if(!isNaN(b[a].originalData.get(j,i))){c.push(encodeHTML(b[a].name))}}return c.join(', ')+'<br />'+encodeHTML(g+' : '+h)},getTooltipPosition:function(a){if(a!=null){var e=this.getData().getName(a);var c=this.coordinateSystem;var b=c.getRegion(e);return b&&c.dataToPoint(b.center)}},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a},defaultOption:{zlevel:0,z:2,coordinateSystem:'geo',map:'',left:'center',top:'center',aspectScale:0.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:'#000'},itemStyle:{borderWidth:0.5,borderColor:'#444',areaColor:'#eee'},emphasis:{label:{show:!0,color:'rgb(100,0,0)'},itemStyle:{areaColor:'rgba(255,215,0,0.8)'}}}});mixin(nr,et);var i7='\x00_ec_interaction_mutex';function take(e,a,b){var c=getStore(e);c[a]=b}function release(f,a,c){var b=getStore(f);var e=b[a];if(e===c){b[a]=null}}function isTaken(b,a){return !!getStore(b)[a]}function getStore(a){return a[i7]||(a[i7]={})}registerAction({type:'takeGlobalCursor',event:'globalCursorTaken',update:'update'},function(){});function RoamController(a){this.pointerChecker;this._zr=a;this._opt={};var b=bind;var e=b(mousedown,this);var f=b(mousemove,this);var g=b(mouseup,this);var c=b(mousewheel,this);var h=b(pinch,this);r.call(this);this.setPointerChecker=function(b){this.pointerChecker=b};this.enable=function(b,i){this.disable();this._opt=defaults(clone(i)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0});if(b==null){b=!0}if(b===!0||(b==='move'||b==='pan')){a.on('mousedown',e);a.on('mousemove',f);a.on('mouseup',g)}if(b===!0||(b==='scale'||b==='zoom')){a.on('mousewheel',c);a.on('pinch',h)}};this.disable=function(){a.off('mousedown',e);a.off('mousemove',f);a.off('mouseup',g);a.off('mousewheel',c);a.off('pinch',h)};this.dispose=this.disable;this.isDragging=function(){return this._dragging};this.isPinching=function(){return this._pinching}}mixin(RoamController,r);function mousedown(a){if(isMiddleOrRightButtonOnMouseUpDown(a)||a.target&&a.target.draggable){return}var b=a.offsetX;var c=a.offsetY;if(this.pointerChecker&&this.pointerChecker(a,b,c)){this._x=b;this._y=c;this._dragging=!0}}function mousemove(a){if(!this._dragging||!isAvailableBehavior('moveOnMouseMove',a,this._opt)||a.gestureEvent==='pinch'||isTaken(this._zr,'globalPan')){return}var b=a.offsetX;var c=a.offsetY;var e=this._x;var f=this._y;var g=b-e;var h=c-f;this._x=b;this._y=c;this._opt.preventDefaultMouseMove&&aN(a.event);trigger(this,'pan','moveOnMouseMove',a,{dx:g,dy:h,oldX:e,oldY:f,newX:b,newY:c})}function mouseup(a){if(!isMiddleOrRightButtonOnMouseUpDown(a)){this._dragging=!1}}function mousewheel(a){var f=isAvailableBehavior('zoomOnMouseWheel',a,this._opt);var e=isAvailableBehavior('moveOnMouseWheel',a,this._opt);var b=a.wheelDelta;var c=Math.abs(b);var h=a.offsetX;var i=a.offsetY;if(b===0||!f&&!e){return}if(f){var j=c>3?1.4:c>1?1.2:1.1;var l=b>0?j:1/j;checkPointerAndTrigger(this,'zoom','zoomOnMouseWheel',a,{scale:l,originX:h,originY:i})}if(e){var g=Math.abs(b);var k=(b>0?1:-1)*(g>3?0.4:g>1?0.15:0.05);checkPointerAndTrigger(this,'scrollMove','moveOnMouseWheel',a,{scrollDelta:k,originX:h,originY:i})}}function pinch(a){if(isTaken(this._zr,'globalPan')){return}var b=a.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,'zoom',null,a,{scale:b,originX:a.pinchX,originY:a.pinchY})}function checkPointerAndTrigger(b,f,e,c,a){if(b.pointerChecker&&b.pointerChecker(c,a.originX,a.originY)){aN(c.event);trigger(b,f,e,c,a)}}function trigger(c,e,b,f,a){a.isAvailableBehavior=bind(isAvailableBehavior,null,b,f);c.trigger(e,a)}function isAvailableBehavior(b,e,c){var a=c[b];return !b||a&&(!isString(a)||e.event[a+'Key'])}function updateViewOnPan(c,e,f){var a=c.target;var b=a.position;b[0]+=e;b[1]+=f;a.dirty()}function updateViewOnZoom(a,i,l,m){var g=a.target;var f=a.zoomLimit;var e=g.position;var h=g.scale;var b=a.zoom=a.zoom||1;b*=i;if(f){var k=f.min||0;var j=f.max||Infinity;b=Math.max(Math.min(j,b),k)}var c=b/a.zoom;a.zoom=b;e[0]-=(l-e[0])*(c-1);e[1]-=(m-e[1])*(c-1);h[0]*=c;h[1]*=c;g.dirty()}var j3={'axisPointer':1,'tooltip':1,'brush':1};function onIrrelevantElement(f,e,b){var a=e.getComponentByElement(f.topTarget);var c=a&&a.coordinateSystem;return a&&a!==b&&!j3[a.mainType]&&(c&&c.model!==b)}function getFixedItemStyle(c){var b=c.getItemStyle();var a=c.get('areaColor');if(a!=null){b.fill=a}return b}function updateMapSelectHandler(c,a,b,f,e){b.off('click');b.off('mousedown');if(a.get('selectedMode')){b.on('mousedown',function(){c._mouseDownFlag=!0});b.on('click',function(i){if(!c._mouseDownFlag){return}c._mouseDownFlag=!1;var g=i.target;while(!g.__regions){g=g.parent}if(!g){return}var h={type:(a.mainType==='geo'?'geo':'map')+'ToggleSelect',batch:map(g.__regions,function(g){return {name:g.name,from:e.uid}})};h[a.mainType+'Id']=a.id;f.dispatchAction(h);updateMapSelected(a,b)})}}function updateMapSelected(a,b){b.eachChild(function(c){each$1(c.__regions,function(e){c.trigger(a.isSelected(e.name)?'emphasis':'normal')})})}function MapDraw(e,c){var a=new b();this.uid=getUID('ec_map_draw');this._controller=new RoamController(e.getZr());this._controllerHost={target:c?a:null};this.group=a;this._updateGroup=c;this._mouseDownFlag;this._mapName;this._initialized;a.add(this._regionsGroup=new b());a.add(this._backgroundGroup=new b())}MapDraw.prototype={constructor:MapDraw,draw:function(a,k,n,s,t){var i=a.mainType==='geo';var c=a.getData&&a.getData();i&&k.eachComponent({mainType:'series',subType:'map'},function(b){if(!c&&b.getHostGeoModel()===a){c=b.getData()}});var f=a.coordinateSystem;this._updateBackground(f);var g=this._regionsGroup;var h=this.group;if(f._roamTransformable.transform){h.transform=f._roamTransformable.transform.slice();h.decomposeTransform()}var m=f._rawTransformable.scale;var j=f._rawTransformable.position;g.removeAll();var q=['itemStyle'];var o=['emphasis','itemStyle'];var r=['label'];var p=['emphasis','label'];var l=createHashMap();each$1(f.regions,function(f){var u=l.get(f.name)||l.set(f.name,new b());var v=new hy({segmentIgnoreThreshold:1,shape:{paths:[]}});u.add(v);var w=a.getRegionModel(f.name)||a;var K=w.getModel(q);var G=w.getModel(o);var F=getFixedItemStyle(K);var H=getFixedItemStyle(G);var E=w.getModel(r);var A=w.getModel(p);var x;if(c){x=c.indexOfName(f.name);var C=c.getItemVisual(x,'color',!0);if(C){F.fill=C}}var y=function(b){return [b[0]*m[0]+j[0],b[1]*m[1]+j[1]]};each$1(f.geometries,function(c){if(c.type!=='polygon'){return}var e=[];for(var b=0;b<c.exterior.length;++b){e.push(y(c.exterior[b]))}v.shape.paths.push(new I({segmentIgnoreThreshold:1,shape:{points:e}}));for(var b=0;b<(c.interiors?c.interiors.length:0);++b){var h=c.interiors[b];var e=[];for(var g=0;g<h.length;++g){e.push(y(h[g]))}v.shape.paths.push(new I({segmentIgnoreThreshold:1,shape:{points:e}}))}});v.setStyle(F);v.style.strokeNoScale=!0;v.culling=!0;var N=E.get('show');var J=A.get('show');var M=c&&isNaN(c.get(c.mapDimension('value'),x));var D=c&&c.getItemLayout(x);if(i||M&&(N||J)||D&&D.showLabel){var O=!i?x:f.name;var B;if(!c||x>=0){B=a}var z=new e({position:y(f.center.slice()),scale:[1/h.scale[0],1/h.scale[1]],z2:10,silent:!0});setLabelStyle(z.style,z.hoverStyle={},E,A,{labelFetcher:B,labelDataIndex:O,defaultText:f.name,useInsideStyle:!1},{textAlign:'center',textVerticalAlign:'middle'});u.add(z)}if(c){c.setItemGraphicEl(x,u)}else {var w=a.getRegionModel(f.name);v.eventData={componentType:'geo',componentIndex:a.componentIndex,geoIndex:a.componentIndex,name:f.name,region:w&&w.option||{}}}var L=u.__regions||(u.__regions=[]);L.push(f);u.highDownSilentOnTouch=!!a.get('selectedMode');setHoverStyle(u,H);g.add(u)});this._updateController(a,k,n);updateMapSelectHandler(this,a,g,n,s);updateMapSelected(a,g)},remove:function(){this._regionsGroup.removeAll();this._backgroundGroup.removeAll();this._controller.dispose();this._mapName&&bW.removeGraphic(this._mapName,this.uid);this._mapName=null;this._controllerHost={}},_updateBackground:function(b){var a=b.map;if(this._mapName!==a){each$1(bW.makeGraphic(a,this.uid),function(a){this._backgroundGroup.add(a)},this)}this._mapName=a},_updateController:function(a,h,e){var g=a.coordinateSystem;var c=this._controller;var b=this._controllerHost;b.zoomLimit=a.get('scaleLimit');b.zoom=g.getZoom();c.enable(a.get('roam')||!1);var f=a.mainType;function makeActionBase(){var b={type:'geoRoam',componentType:f};b[f+'Id']=a.id;return b}c.off('pan').on('pan',function(c){this._mouseDownFlag=!1;updateViewOnPan(b,c.dx,c.dy);e.dispatchAction(extend(makeActionBase(),{dx:c.dx,dy:c.dy}))},this);c.off('zoom').on('zoom',function(c){this._mouseDownFlag=!1;updateViewOnZoom(b,c.scale,c.originX,c.originY);e.dispatchAction(extend(makeActionBase(),{zoom:c.scale,originX:c.originX,originY:c.originY}));if(this._updateGroup){var f=this.group.scale;this._regionsGroup.traverse(function(b){if(b.type==='text'){b.attr('scale',[1/f[0],1/f[1]])}})}},this);c.setPointerChecker(function(b,c,f){return g.getViewRectAfterRoam().contain(c,f)&&!onIrrelevantElement(b,e,a)})}};var ev='__seriesMapHighDown';var gs='__seriesMapCallKey';extendChartView({type:'map',render:function(b,e,g,a){if(a&&a.type==='mapToggleSelect'&&a.from===this.uid){return}var f=this.group;f.removeAll();if(b.getHostGeoModel()){return}if(!(a&&a.type==='geoRoam'&&a.componentType==='series'&&a.seriesId===b.id)){if(b.needsDrawMap){var c=this._mapDraw||new MapDraw(g,!0);f.add(c.group);c.draw(b,e,g,this,a);this._mapDraw=c}else {this._mapDraw&&this._mapDraw.remove();this._mapDraw=null}}else {var c=this._mapDraw;c&&f.add(c.group)}b.get('showLegendSymbol')&&e.getComponent('legend')&&this._renderSymbols(b,e,g)},remove:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null;this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null},_renderSymbols:function(b,e,f){var a=b.originalData;var c=this.group;a.each(a.mapDimension('value'),function(y,j){if(isNaN(y)){return}var i=a.getItemLayout(j);if(!i||!i.point){return}var t=i.point;var l=i.offset;var s=new ao({style:{fill:b.getData().getVisual('color')},shape:{cx:t[0]+l*9,cy:t[1],r:3},silent:!0,z2:8+(!l?bV+1:0)});if(!l){var q=b.mainSeries.getData();var u=a.getName(j);var k=q.indexOfName(u);var p=a.getItemModel(j);var x=p.getModel('label');var v=p.getModel('emphasis.label');var h=q.getItemGraphicEl(k);var n=retrieve2(b.getFormattedLabel(k,'normal'),u);var w=retrieve2(b.getFormattedLabel(k,'emphasis'),n);var g=h[ev];var m=Math.random();if(!g){g=h[ev]={};var o=curry(onRegionHighDown,!0);var r=curry(onRegionHighDown,!1);h.on('mouseover',o).on('mouseout',r).on('emphasis',o).on('normal',r)}h[gs]=m;extend(g,{recordVersion:m,circle:s,labelModel:x,hoverLabelModel:v,emphasisText:w,normalText:n});enterRegionHighDown(g,!1)}c.add(s)})}});function onRegionHighDown(b){var a=this[ev];if(a&&a.recordVersion===this[gs]){enterRegionHighDown(a,b)}}function enterRegionHighDown(b,g){var a=b.circle;var c=b.labelModel;var e=b.hoverLabelModel;var f=b.emphasisText;var h=b.normalText;if(g){a.style.extendFrom(setTextStyle({},e,{text:e.get('show')?f:null},{isRectText:!0,useInsideStyle:!1},!0));a.__mapOriginalZ2=a.z2;a.z2+=bV}else {setTextStyle(a.style,c,{text:c.get('show')?h:null,textPosition:c.getShallow('position')||'bottom'},{isRectText:!0,useInsideStyle:!1});a.dirty(!1);if(a.__mapOriginalZ2!=null){a.z2=a.__mapOriginalZ2;a.__mapOriginalZ2=null}}}function updateCenterAndZoom(a,c,i){var h=a.getZoom();var e=a.getCenter();var b=c.zoom;var g=a.dataToPoint(e);if(c.dx!=null&&c.dy!=null){g[0]-=c.dx;g[1]-=c.dy;var e=a.pointToData(g);a.setCenter(e)}if(b!=null){if(i){var k=i.min||0;var j=i.max||Infinity;b=Math.max(Math.min(h*b,j),k)/h}a.scale[0]*=b;a.scale[1]*=b;var f=a.position;var l=(c.originX-f[0])*(b-1);var m=(c.originY-f[1])*(b-1);f[0]-=l;f[1]-=m;a.updateTransform();var e=a.pointToData(g);a.setCenter(e);a.setZoom(b*h)}return {center:a.getCenter(),zoom:a.getZoom()}}registerAction({type:'geoRoam',event:'geoRoam',update:'updateTransform'},function(a,c){var b=a.componentType||'series';c.eachComponent({mainType:b,query:a},function(e){var g=e.coordinateSystem;if(g.type!=='geo'){return}var f=updateCenterAndZoom(g,a,e.get('scaleLimit'));e.setCenter&&e.setCenter(f.center);e.setZoom&&e.setZoom(f.zoom);if(b==='series'){each$1(e.seriesGroup,function(b){b.setCenter(f.center);b.setZoom(f.zoom)})}})});var gD=applyTransform;function TransformDummy(){V.call(this)}mixin(TransformDummy,V);function View(a){this.name=a;this.zoomLimit;V.call(this);this._roamTransformable=new TransformDummy();this._rawTransformable=new TransformDummy();this._center;this._zoom}View.prototype={constructor:View,type:'view',dimensions:['x','y'],setBoundingRect:function(c,e,b,a){this._rect=new BoundingRect(c,e,b,a);return this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(c,e,b,a){this.transformTo(c,e,b,a);this._viewRect=new BoundingRect(c,e,b,a)},transformTo:function(f,g,c,b){var e=this.getBoundingRect();var a=this._rawTransformable;a.transform=e.calculateTransform(new BoundingRect(f,g,c,b));a.decomposeTransform();this._updateTransform()},setCenter:function(a){if(!a){return}this._center=a;this._updateCenterAndZoom()},setZoom:function(a){a=a||1;var b=this.zoomLimit;if(b){if(b.max!=null){a=Math.min(b.max,a)}if(b.min!=null){a=Math.max(b.min,a)}}this._zoom=a;this._updateCenterAndZoom()},getDefaultCenter:function(){var a=this.getBoundingRect();var b=a.x+a.width/2;var c=a.y+a.height/2;return [b,c]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform();var c=this._roamTransformable;var b=this.getDefaultCenter();var a=this.getCenter();var f=this.getZoom();a=applyTransform([],a,e);b=applyTransform([],b,e);c.origin=a;c.position=[b[0]-a[0],b[1]-a[1]];c.scale=[f,f];this._updateTransform()},_updateTransform:function(){var b=this._roamTransformable;var a=this._rawTransformable;a.parent=b;b.updateTransform();a.updateTransform();copy$1(this.transform||(this.transform=[]),a.transform||create$1());this._rawTransform=a.getLocalTransform();this.invTransform=this.invTransform||[];invert(this.invTransform,this.transform);this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var a=this.getBoundingRect().clone();a.applyTransform(this.transform);return a},dataToPoint:function(c,e,a){var b=e?this._rawTransform:this.transform;a=a||[];return b?gD(a,c,b):copy(a,c)},pointToData:function(a){var b=this.invTransform;return b?gD([],a,b):[a[0],a[1]]},convertToPixel:curry(doConvert$1,'dataToPoint'),convertFromPixel:curry(doConvert$1,'pointToData'),containPoint:function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])}};mixin(View,V);function doConvert$1(c,g,e,f){var a=e.seriesModel;var b=a?a.coordinateSystem:null;return b===this?b[c](f):null}function Geo(f,c,e,b){View.call(this,f);this.map=c;var a=bW.load(c,e);this._nameCoordMap=a.nameCoordMap;this._regionsMap=a.regionsMap;this._invertLongitute=b==null?!0:b;this.regions=a.regions;this._rect=a.boundingRect}Geo.prototype={constructor:Geo,type:'geo',dimensions:['lng','lat'],containCoord:function(c){var b=this.regions;for(var a=0;a<b.length;a++){if(b[a].contain(c)){return !0}}return !1},transformTo:function(h,i,g,f){var a=this.getBoundingRect();var c=this._invertLongitute;a=a.clone();if(c){a.y=-a.y-a.height}var b=this._rawTransformable;b.transform=a.calculateTransform(new BoundingRect(h,i,g,f));b.decomposeTransform();if(c){var e=b.scale;e[1]=-e[1]}b.updateTransform();this._updateTransform()},getRegion:function(a){return this._regionsMap.get(a)},getRegionByCoord:function(c){var b=this.regions;for(var a=0;a<b.length;a++){if(b[a].contain(c)){return b[a]}}},addGeoCoord:function(b,a){this._nameCoordMap.set(b,a)},getGeoCoord:function(a){return this._nameCoordMap.get(a)},getBoundingRect:function(){return this._rect},dataToPoint:function(a,b,c){if(typeof a==='string'){a=this.getGeoCoord(a)}if(a){return View.prototype.dataToPoint.call(this,a,b,c)}},convertToPixel:curry(doConvert,'dataToPoint'),convertFromPixel:curry(doConvert,'pointToData')};mixin(Geo,View);function doConvert(f,h,e,g){var c=e.geoModel;var a=e.seriesModel;var b=c?c.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents('geo')[0]||{}).coordinateSystem:null;return b===this?b[f](g):null}function resizeGeo(f,p){var k=f.get('boundingCoords');if(k!=null){var g=k[0];var h=k[1];if(isNaN(g[0])||isNaN(g[1])||isNaN(h[0])||isNaN(h[1])){if(a){console.error('Invalid boundingCoords')}}else {this.setBoundingRect(g[0],g[1],h[0]-g[0],h[1]-g[1])}}var o=this.getBoundingRect();var j;var c=f.get('layoutCenter');var e=f.get('layoutSize');var m=p.getWidth();var l=p.getHeight();var i=o.width/o.height*this.aspectScale;var n=!1;if(c&&e){c=[parsePercent$1(c[0],m),parsePercent$1(c[1],l)];e=parsePercent$1(e,Math.min(m,l));if(!isNaN(c[0])&&!isNaN(c[1])&&!isNaN(e)){n=!0}else {if(a){console.warn('Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.')}}}var b;if(n){var b={};if(i>1){b.width=e;b.height=e/i}else {b.height=e;b.width=e*i}b.y=c[1]-b.height/2;b.x=c[0]-b.width/2}else {j=f.getBoxLayoutParams();j.aspect=i;b=getLayoutRect(j,{width:m,height:l})}this.setViewRect(b.x,b.y,b.width,b.height);this.setCenter(f.get('center'));this.setZoom(f.get('zoom'))}function setGeoCoords(b,a){each$1(a.get('geoCoord'),function(c,e){b.addGeoCoord(e,c)})}var hY={dimensions:Geo.prototype.dimensions,create:function(c,e){var b=[];c.eachComponent('geo',function(a,k){var i=a.get('map');var g=a.get('aspectScale');var j=!0;var h=cQ.retrieveMap(i);if(h&&h[0]&&h[0].type==='svg'){g==null&&(g=1);j=!1}else {g==null&&(g=0.75)}var f=new Geo(i+k,i,a.get('nameMap'),j);f.aspectScale=g;f.zoomLimit=a.get('scaleLimit');b.push(f);setGeoCoords(f,a);a.coordinateSystem=f;f.model=a;f.resize=resizeGeo;f.resize(a,e)});c.eachSeries(function(a){var f=a.get('coordinateSystem');if(f==='geo'){var g=a.get('geoIndex')||0;a.coordinateSystem=b[g]}});var a={};c.eachSeriesByType('map',function(b){if(!b.getHostGeoModel()){var f=b.getMapType();a[f]=a[f]||[];a[f].push(b)}});each$1(a,function(f,g){var h=map(f,function(a){return a.get('nameMap')});var a=new Geo(g,g,mergeAll(h));a.zoomLimit=retrieve.apply(null,map(f,function(a){return a.get('scaleLimit')}));b.push(a);a.resize=resizeGeo;a.aspectScale=f[0].get('aspectScale');a.resize(f[0],e);each$1(f,function(b){b.coordinateSystem=a;setGeoCoords(a,b)})});return b},getFilledRegions:function(e,f,g){var a=(e||[]).slice();var c=createHashMap();for(var b=0;b<a.length;b++){c.set(a[b].name,a[b])}var h=bW.load(f,g);each$1(h.regions,function(h){var b=h.name;!c.get(b)&&a.push({name:b})});return a}};registerCoordinateSystem('geo',hY);var la=function(b){var a={};b.eachSeriesByType('map',function(c){var g=c.getMapType();if(c.getHostGeoModel()||a[g]){return}var f={};each$1(c.seriesGroup,function(e){var g=e.coordinateSystem;var a=e.originalData;if(e.get('showLegendSymbol')&&b.getComponent('legend')){a.each(a.mapDimension('value'),function(m,k){var h=a.getName(k);var j=g.getRegion(h);if(!j||isNaN(m)){return}var i=f[h]||0;var l=g.dataToPoint(j.center);f[h]=i+1;a.setItemLayout(k,{point:l,offset:i})})}});var e=c.getData();e.each(function(a){var h=e.getName(a);var g=e.getItemLayout(a)||{};g.showLabel=!f[h];e.setItemLayout(a,g)});a[g]=!0})};var nJ=function(a){a.eachSeriesByType('map',function(b){var e=b.get('color');var c=b.getModel('itemStyle');var f=c.get('areaColor');var g=c.get('color')||e[b.seriesIndex%e.length];b.getData().setVisual({'areaColor':f,'color':g})})};function dataStatistics(b,c){var a={};each$1(b,function(e){e.each(e.mapDimension('value'),function(g,h){var f='ec-'+e.getName(h);a[f]=a[f]||[];if(!isNaN(g)){a[f].push(g)}})});return b[0].map(b[0].mapDimension('value'),function(m,l){var g='ec-'+b[0].getName(l);var k=0;var j=Infinity;var i=-Infinity;var h=a[g].length;for(var f=0;f<h;f++){j=Math.min(j,a[g][f]);i=Math.max(i,a[g][f]);k+=a[g][f]}var e;if(c==='min'){e=j}else {if(c==='max'){e=i}else {if(c==='average'){e=k/h}else {e=k}}}return h===0?NaN:e})}var kR=function(b){var a={};b.eachSeriesByType('map',function(c){var e=c.getHostGeoModel();var f=e?'o'+e.id:'i'+c.getMapType();(a[f]=a[f]||[]).push(c)});each$1(a,function(a,f){var e=dataStatistics(map(a,function(c){return c.getData()}),a[0].get('mapValueCalculation'));for(var c=0;c<a.length;c++){a[c].originalData=a[c].getData()}for(var c=0;c<a.length;c++){a[c].seriesGroup=a;a[c].needsDrawMap=c===0&&!a[c].getHostGeoModel();a[c].setData(e.cloneShallow());a[c].mainSeries=a[0]}})};var kO=function(b){var a=[];each$1(b.series,function(c){if(c&&c.type==='map'){a.push(c);c.map=c.map||c.mapType;defaults(c,c.mapLocation)}})};registerLayout(la);registerVisual(nJ);registerProcessor(Y.PROCESSOR.STATISTIC,kR);registerPreprocessor(kO);gh('map',[{type:'mapToggleSelect',event:'mapselectchanged',method:'toggleSelected'},{type:'mapSelect',event:'mapselected',method:'select'},{type:'mapUnSelect',event:'mapunselected',method:'unSelect'}]);var cl=each$1;var co='\x00__link_datas';var db='\x00__link_mainData';function linkList(a){var b=a.mainData;var c=a.datas;if(!c){c={main:b};a.datasAttr={main:'data'}}a.datas=a.mainData=null;linkAll(b,c,a);cl(c,function(c){cl(b.TRANSFERABLE_METHODS,function(b){c.wrapMethod(b,curry(transferInjection,a))})});b.wrapMethod('cloneShallow',curry(cloneShallowInjection,a));cl(b.CHANGABLE_METHODS,function(c){b.wrapMethod(c,curry(changeInjection,a))});assert$1(c[b.dataType]===b)}function transferInjection(c,a){if(isMainData(this)){var b=extend({},this[co]);b[this.dataType]=a;linkAll(a,b,c)}else {linkSingle(a,this.dataType,this[db],c)}return a}function changeInjection(a,b){a.struct&&a.struct.update(this);return b}function cloneShallowInjection(b,a){cl(a[co],function(c,e){c!==a&&linkSingle(c.cloneShallow(),e,a,b)});return a}function getLinkedData(b){var a=this[db];return b==null||a==null?a:a[co][b]}function isMainData(a){return a[db]===a}function linkAll(a,b,c){a[co]={};cl(b,function(f,e){linkSingle(f,e,a,c)})}function linkSingle(a,c,e,b){e[co][c]=a;a[db]=e;a.dataType=c;if(b.struct){a[b.structAttr]=b.struct;b.struct[b.datasAttr[c]]=a}a.getLinkedData=getLinkedData}var fl=function(b,a){this.name=b||'';this.depth=0;this.height=0;this.parentNode=null;this.dataIndex=-1;this.children=[];this.viewChildren=[];this.hostTree=a};fl.prototype={constructor:fl,isRemoved:function(){return this.dataIndex<0},eachNode:function(a,b,c){if(typeof a==='function'){c=b;b=a;a=null}a=a||{};if(isString(a)){a={order:a}}var h=a.order||'preorder';var g=this[a.attr||'children'];var f;h==='preorder'&&(f=b.call(c,this));for(var e=0;!f&&e<g.length;e++){g[e].eachNode(a,b,c)}h==='postorder'&&b.call(c,this)},updateDepthAndHeight:function(e){var a=0;this.depth=e;for(var c=0;c<this.children.length;c++){var b=this.children[c];b.updateDepthAndHeight(e+1);if(b.height>a){a=b.height}}this.height=a+1},getNodeById:function(e){if(this.getId()===e){return this}for(var a=0,b=this.children,f=b.length;a<f;a++){var c=b[a].getNodeById(e);if(c){return c}}},contains:function(c){if(c===this){return !0}for(var a=0,b=this.children,f=b.length;a<f;a++){var e=b[a].contains(c);if(e){return e}}},getAncestors:function(c){var b=[];var a=c?this:this.parentNode;while(a){b.push(a);a=a.parentNode}b.reverse();return b},getValue:function(b){var a=this.hostTree.data;return a.get(a.getDimension(b||'value'),this.dataIndex)},setLayout:function(b,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,b,a)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(this.dataIndex<0){return}var c=this.hostTree;var f=c.data.getItemModel(this.dataIndex);var b=this.getLevelModel();var a;if(!b&&(this.children.length===0||this.children.length!==0&&this.isExpand===!1)){a=this.getLeavesModel()}return f.getModel(e,(b||a||c.hostModel).getModel(e))},getLevelModel:function(){return (this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(b,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,b,a)},getVisual:function(b,a){return this.hostTree.data.getItemVisual(this.dataIndex,b,a)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(b){var a=b.parentNode;while(a){if(a===this){return !0}a=a.parentNode}return !1},isDescendantOf:function(a){return a!==this&&a.isAncestorOf(this)}};function Tree(a,c,b){this.root;this.data;this._nodes=[];this.hostModel=a;this.levelModels=map(c||[],function(e){return new Model(e,a,a.ecModel)});this.leavesModel=new Model(b||{},a,a.ecModel)}Tree.prototype={constructor:Tree,type:'tree',eachNode:function(b,c,a){this.root.eachNode(b,c,a)},getNodeByDataIndex:function(a){var b=this.data.getRawIndex(a);return this._nodes[b]},getNodeByName:function(a){return this.root.getNodeByName(a)},update:function(){var e=this.data;var b=this._nodes;for(var a=0,c=b.length;a<c;a++){b[a].dataIndex=-1}for(var a=0,c=e.count();a<c;a++){b[e.getRawIndex(a)].dataIndex=a}},clearLayouts:function(){this.data.clearItemLayouts()}};Tree.createTree=function(i,f,e){var a=new Tree(f,e.levels,e.leaves);var b=[];var c=1;buildHierarchy(i);function buildHierarchy(g,l){var m=g.value;c=Math.max(c,isArray(m)?m.length:1);b.push(g);var h=new fl(g.name,a);l?addChild(h,l):a.root=h;a._nodes.push(h);var j=g.children;if(j){for(var k=0;k<j.length;k++){buildHierarchy(j[k],h)}}}a.root.updateDepthAndHeight(0);var h=bl(b,{coordDimensions:['value'],dimensionsCount:c});var g=new s(h,f);g.initData(b);linkList({mainData:g,struct:a,structAttr:'tree'});a.update();return a};function addChild(a,b){var c=b.children;if(a.parentNode===b){return}c.push(a);a.parentNode=b}l.extend({type:'series.tree',layoutInfo:null,layoutMode:'box',getInitialData:function(a){var i={name:a.name,children:a.data};var h=a.leaves||{};var e={};e.leaves=h;var c=Tree.createTree(i,this,e);var b=0;c.eachNode('preorder',function(c){if(c.depth>b){b=c.depth}});var f=a.expandAndCollapse;var g=f&&a.initialTreeDepth>=0?a.initialTreeDepth:b;c.root.eachNode('preorder',function(b){var c=b.hostTree.data.getRawDataItem(b.dataIndex);b.isExpand=c&&c.collapsed!=null?!c.collapsed:b.depth<=g});return c.data},getOrient:function(){var a=this.get('orient');if(a==='horizontal'){a='LR'}else {if(a==='vertical'){a='TB'}}return a},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a},formatTooltip:function(f){var e=this.getData().tree;var g=e.root.children[0];var a=e.getNodeByDataIndex(f);var b=a.getValue();var c=a.name;while(a&&a!==g){c=a.parentNode.name+'.'+c;a=a.parentNode}return encodeHTML(c+(isNaN(b)||b==null?'':' : '+b))},defaultOption:{zlevel:0,z:2,coordinateSystem:'view',left:'12%',top:'12%',right:'12%',bottom:'12%',layout:'orthogonal',roam:!1,nodeScaleRatio:0.4,center:null,zoom:1,orient:'LR',symbol:'emptyCircle',symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:'#ccc',width:1.5,curveness:0.5},itemStyle:{color:'lightsteelblue',borderColor:'#c23531',borderWidth:1.5},label:{show:!0,color:'#555'},leaves:{label:{show:!0}},animationEasing:'linear',animationDuration:700,animationDurationUpdate:1000}});function init$2(f){f.hierNode={defaultAncestor:null,ancestor:f,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var g=[f];var e;var a;while(e=g.pop()){a=e.children;if(e.isExpand&&a.length){var h=a.length;for(var b=h-1;b>=0;b--){var c=a[b];c.hierNode={defaultAncestor:null,ancestor:c,prelim:0,modifier:0,change:0,shift:0,i:b,thread:null};g.push(c)}}}}function firstWalk(a,e){var c=a.isExpand?a.children:[];var g=a.parentNode.children;var b=a.hierNode.i?g[a.hierNode.i-1]:null;if(c.length){executeShifts(a);var f=(c[0].hierNode.prelim+c[c.length-1].hierNode.prelim)/2;if(b){a.hierNode.prelim=b.hierNode.prelim+e(a,b);a.hierNode.modifier=a.hierNode.prelim-f}else {a.hierNode.prelim=f}}else {if(b){a.hierNode.prelim=b.hierNode.prelim+e(a,b)}}a.parentNode.hierNode.defaultAncestor=apportion(a,b,a.parentNode.hierNode.defaultAncestor||g[0],e)}function secondWalk(a){var b=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:b},!0);a.hierNode.modifier+=a.parentNode.hierNode.modifier}function separation(a){return arguments.length?a:defaultSeparation}function radialCoordinate(b,c){var a={};b-=Math.PI/2;a.x=c*Math.cos(b);a.y=c*Math.sin(b);return a}function getViewRect(b,a){return getLayoutRect(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function executeShifts(g){var c=g.children;var f=c.length;var b=0;var e=0;while(--f>=0){var a=c[f];a.hierNode.prelim+=b;a.hierNode.modifier+=b;e+=a.hierNode.change;b+=a.hierNode.shift+e}}function apportion(f,m,k,n){if(m){var c=f;var a=f;var e=a.parentNode.children[0];var b=m;var i=c.hierNode.modifier;var g=a.hierNode.modifier;var l=e.hierNode.modifier;var j=b.hierNode.modifier;while(b=nextRight(b),a=nextLeft(a),b&&a){c=nextRight(c);e=nextLeft(e);c.hierNode.ancestor=f;var h=b.hierNode.prelim+j-a.hierNode.prelim-g+n(b,a);if(h>0){moveSubtree(nextAncestor(b,f,k),f,h);g+=h;i+=h}j+=b.hierNode.modifier;g+=a.hierNode.modifier;i+=c.hierNode.modifier;l+=e.hierNode.modifier}if(b&&!nextRight(c)){c.hierNode.thread=b;c.hierNode.modifier+=j-i}if(a&&!nextLeft(e)){e.hierNode.thread=a;e.hierNode.modifier+=g-l;k=f}}return k}function nextRight(b){var a=b.children;return a.length&&b.isExpand?a[a.length-1]:b.hierNode.thread}function nextLeft(a){var b=a.children;return b.length&&a.isExpand?b[0]:a.hierNode.thread}function nextAncestor(a,c,b){return a.hierNode.ancestor.parentNode===c.parentNode?a.hierNode.ancestor:b}function moveSubtree(e,a,b){var c=b/(a.hierNode.i-e.hierNode.i);a.hierNode.change-=c;a.hierNode.shift+=b;a.hierNode.modifier+=b;a.hierNode.prelim+=b;e.hierNode.change+=c}function defaultSeparation(a,b){return a.parentNode===b.parentNode?1:2}extendChartView({type:'tree',init:function(c,a){this._oldTree;this._mainGroup=new b();this._controller=new RoamController(a.getZr());this._controllerHost={target:this.group};this.group.add(this._mainGroup)},render:function(a,j,i,k){var c=a.getData();var b=a.layoutInfo;var e=this._mainGroup;var h=a.get('layout');if(h==='radial'){e.attr('position',[b.x+b.width/2,b.y+b.height/2])}else {e.attr('position',[b.x,b.y])}this._updateViewCoordSys(a,b,h);this._updateController(a,j,i);var g=this._data;var f={expandAndCollapse:a.get('expandAndCollapse'),layout:h,orient:a.getOrient(),curvature:a.get('lineStyle.curveness'),symbolRotate:a.get('symbolRotate'),symbolOffset:a.get('symbolOffset'),hoverAnimation:a.get('hoverAnimation'),useNameLabel:!0,fadeIn:!0};c.diff(g).add(function(b){if(symbolNeedsDraw$1(c,b)){updateNode(c,b,null,e,a,f)}}).update(function(h,l){var b=g.getItemGraphicEl(l);if(!symbolNeedsDraw$1(c,h)){b&&removeNode(g,l,b,e,a,f);return}updateNode(c,h,b,e,a,f)}).remove(function(c){var b=g.getItemGraphicEl(c);if(b){removeNode(g,c,b,e,a,f)}}).execute();this._nodeScaleRatio=a.get('nodeScaleRatio');this._updateNodeAndLinkScale(a);if(f.expandAndCollapse===!0){c.eachItemGraphicEl(function(c,b){c.off('click').on('click',function(){i.dispatchAction({type:'treeExpandAndCollapse',seriesId:a.id,dataIndex:b})})})}this._data=c},_updateViewCoordSys:function(e){var i=e.getData();var h=[];i.each(function(b){var a=i.getItemLayout(b);if(a&&!isNaN(a.x)&&!isNaN(a.y)){h.push([+a.x,+a.y])}});var a=[];var b=[];fromPoints(h,a,b);var g=this._min;var f=this._max;if(b[0]-a[0]===0){a[0]=g?g[0]:a[0]-1;b[0]=f?f[0]:b[0]+1}if(b[1]-a[1]===0){a[1]=g?g[1]:a[1]-1;b[1]=f?f[1]:b[1]+1}var c=e.coordinateSystem=new View();c.zoomLimit=e.get('scaleLimit');c.setBoundingRect(a[0],a[1],b[0]-a[0],b[1]-a[1]);c.setCenter(e.get('center'));c.setZoom(e.get('zoom'));this.group.attr({position:c.position,scale:c.scale});this._viewCoordSys=c;this._min=a;this._max=b},_updateController:function(a,g,e){var c=this._controller;var b=this._controllerHost;var f=this.group;c.setPointerChecker(function(c,h,i){var b=f.getBoundingRect();b.applyTransform(f.transform);return b.contain(h,i)&&!onIrrelevantElement(c,e,a)});c.enable(a.get('roam'));b.zoomLimit=a.get('scaleLimit');b.zoom=a.coordinateSystem.getZoom();c.off('pan').off('zoom').on('pan',function(c){updateViewOnPan(b,c.dx,c.dy);e.dispatchAction({seriesId:a.id,type:'treeRoam',dx:c.dx,dy:c.dy})},this).on('zoom',function(c){updateViewOnZoom(b,c.scale,c.originX,c.originY);e.dispatchAction({seriesId:a.id,type:'treeRoam',zoom:c.scale,originX:c.originX,originY:c.originY});this._updateNodeAndLinkScale(a)},this)},_updateNodeAndLinkScale:function(a){var e=a.getData();var b=this._getNodeGlobalScale(a);var c=[b,b];e.eachItemGraphicEl(function(b,e){b.attr('scale',c)})},_getNodeGlobalScale:function(e){var a=e.coordinateSystem;if(a.type!=='view'){return 1}var c=this._nodeScaleRatio;var b=a.scale;var f=b&&b[0]||1;var h=a.getZoom();var g=(h-1)*c+1;return g/f},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},remove:function(){this._mainGroup.removeAll();this._data=null}});function symbolNeedsDraw$1(c,b){var a=c.getItemLayout(b);return a&&!isNaN(a.x)&&!isNaN(a.y)&&c.getItemVisual(b,'symbol')!=='none'}function getTreeNodeStyle(c,b,a){a.itemModel=b;a.itemStyle=b.getModel('itemStyle').getItemStyle();a.hoverItemStyle=b.getModel('emphasis.itemStyle').getItemStyle();a.lineStyle=b.getModel('lineStyle').getLineStyle();a.labelModel=b.getModel('label');a.hoverLabelModel=b.getModel('emphasis.label');if(c.isExpand===!1&&c.children.length!==0){a.symbolInnerColor=a.itemStyle.fill}else {a.symbolInnerColor='#fff'}return a}function updateNode(j,n,a,v,r,f){var A=!a;var c=j.tree.getNodeByDataIndex(n);var z=c.getModel();var f=getTreeNodeStyle(c,z,f);var p=j.tree.root;var u=c.parentNode===p?c:c.parentNode||c;var k=j.getItemGraphicEl(u.dataIndex);var q=u.getLayout();var m=k?{x:k.position[0],y:k.position[1],rawX:k.__radialOldRawX,rawY:k.__radialOldRawY}:q;var e=c.getLayout();if(A){a=new SymbolClz$1(j,n,f);a.attr('position',[m.x,m.y])}else {a.updateData(j,n,f)}a.__radialOldRawX=a.__radialRawX;a.__radialOldRawY=a.__radialRawY;a.__radialRawX=e.rawX;a.__radialRawY=e.rawY;v.add(a);j.setItemGraphicEl(n,a);updateProps(a,{position:[e.x,e.y]},r);var y=a.getSymbolPath();if(f.layout==='radial'){var i=p.children[0];var g=i.getLayout();var s=i.children.length;var b;var h;if(e.x===g.x&&c.isExpand===!0){var l={};l.x=(i.children[0].getLayout().x+i.children[s-1].getLayout().x)/2;l.y=(i.children[0].getLayout().y+i.children[s-1].getLayout().y)/2;b=Math.atan2(l.y-g.y,l.x-g.x);if(b<0){b=Math.PI*2+b}h=l.x<g.x;if(h){b=b-Math.PI}}else {b=Math.atan2(e.y-g.y,e.x-g.x);if(b<0){b=Math.PI*2+b}if(c.children.length===0||c.children.length!==0&&c.isExpand===!1){h=e.x<g.x;if(h){b=b-Math.PI}}else {h=e.x>g.x;if(!h){b=b-Math.PI}}}var x=h?'left':'right';var t=f.labelModel.get('rotate');var w=t*(Math.PI/180);y.setStyle({textPosition:f.labelModel.get('position')||x,textRotation:t==null?-b:w,textOrigin:'center',verticalAlign:'middle'})}if(c.parentNode&&c.parentNode!==p){var o=a.__edge;if(!o){o=a.__edge=new cZ({shape:getEdgeShape(f,m,m),style:defaults({opacity:0,strokeNoScale:!0},f.lineStyle)})}updateProps(o,{shape:getEdgeShape(f,q,e),style:{opacity:1}},r);v.add(o)}}function removeNode(g,k,e,l,i,f){var c=g.tree.getNodeByDataIndex(k);var j=g.tree.root;var m=c.getModel();var f=getTreeNodeStyle(c,m,f);var b=c.parentNode===j?c:c.parentNode||c;var a;while(a=b.getLayout(),a==null){b=b.parentNode===j?b:b.parentNode||b}updateProps(e,{position:[a.x+1,a.y+1]},i,function(){l.remove(e);g.setItemGraphicEl(k,null)});e.fadeOut(null,{keepLabel:!0});var h=e.__edge;if(h){updateProps(h,{shape:getEdgeShape(f,a,a),style:{opacity:0}},i,function(){l.remove(h)})}}function getEdgeShape(f,g,h){var j;var l;var k;var m;var i=f.orient;var c;var e;var a;var b;if(f.layout==='radial'){c=g.rawX;a=g.rawY;e=h.rawX;b=h.rawY;var n=radialCoordinate(c,a);var o=radialCoordinate(c,a+(b-a)*f.curvature);var p=radialCoordinate(e,b+(a-b)*f.curvature);var q=radialCoordinate(e,b);return {x1:n.x,y1:n.y,x2:q.x,y2:q.y,cpx1:o.x,cpy1:o.y,cpx2:p.x,cpy2:p.y}}else {c=g.x;a=g.y;e=h.x;b=h.y;if(i==='LR'||i==='RL'){j=c+(e-c)*f.curvature;l=a;k=e+(c-e)*f.curvature;m=b}if(i==='TB'||i==='BT'){j=c;l=a+(b-a)*f.curvature;k=e;m=b+(a-b)*f.curvature}}return {x1:c,y1:a,x2:e,y2:b,cpx1:j,cpy1:l,cpx2:k,cpy2:m}}registerAction({type:'treeExpandAndCollapse',event:'treeExpandAndCollapse',update:'update'},function(a,b){b.eachComponent({mainType:'series',subType:'tree',query:a},function(e){var f=a.dataIndex;var g=e.getData().tree;var c=g.getNodeByDataIndex(f);c.isExpand=!c.isExpand})});registerAction({type:'treeRoam',event:'treeRoam',update:'none'},function(a,b){b.eachComponent({mainType:'series',subType:'tree',query:a},function(c){var f=c.coordinateSystem;var e=updateCenterAndZoom(f,a);c.setCenter&&c.setCenter(e.center);c.setZoom&&c.setZoom(e.zoom)})});function eachAfter(i,h,g){var e=[i];var f=[];var a;while(a=e.pop()){f.push(a);if(a.isExpand){var b=a.children;if(b.length){for(var c=0;c<b.length;c++){e.push(b[c])}}}}while(a=f.pop()){h(a,g)}}function eachBefore(g,f){var e=[g];var a;while(a=e.pop()){f(a);if(a.isExpand){var b=a.children;if(b.length){for(var c=b.length-1;c>=0;c--){e.push(b[c])}}}}}var nk=function(a,b){a.eachSeriesByType('tree',function(c){commonLayout(c,b)})};function commonLayout(l,t){var m=getViewRect(l,t);l.layoutInfo=m;var s=l.get('layout');var j=0;var h=0;var p=null;if(s==='radial'){j=2*Math.PI;h=Math.min(m.height,m.width)/2;p=separation(function(a,b){return (a.parentNode===b.parentNode?1:2)/a.depth})}else {j=m.width;h=m.height;p=separation()}var r=l.getData().tree.root;var a=r.children[0];if(a){init$2(r);eachAfter(a,firstWalk,p);r.hierNode.modifier=-a.hierNode.prelim;eachBefore(a,secondWalk);var o=a;var e=a;var n=a;eachBefore(a,function(a){var b=a.getLayout().x;if(b<o.getLayout().x){o=a}if(b>e.getLayout().x){e=a}if(a.depth>n.depth){n=a}});var q=o===e?1:p(o,e)/2;var k=q-o.getLayout().x;var f=0;var g=0;var b=0;var c=0;if(s==='radial'){f=j/(e.getLayout().x+q+k);g=h/(n.depth-1||1);eachBefore(a,function(a){b=(a.getLayout().x+k)*f;c=(a.depth-1)*g;var e=radialCoordinate(b,c);a.setLayout({x:e.x,y:e.y,rawX:b,rawY:c},!0)})}else {var i=l.getOrient();if(i==='RL'||i==='LR'){g=h/(e.getLayout().x+q+k);f=j/(n.depth-1||1);eachBefore(a,function(a){c=(a.getLayout().x+k)*g;b=i==='LR'?(a.depth-1)*f:j-(a.depth-1)*f;a.setLayout({x:b,y:c},!0)})}else {if(i==='TB'||i==='BT'){f=j/(e.getLayout().x+q+k);g=h/(n.depth-1||1);eachBefore(a,function(a){b=(a.getLayout().x+k)*f;c=i==='TB'?(a.depth-1)*g:h-(a.depth-1)*g;a.setLayout({x:b,y:c},!0)})}}}}}registerVisual(a$('tree','circle'));registerLayout(nk);function retrieveTargetInfo(b,f,g){if(b&&indexOf(f,b.type)>=0){var c=g.getData().tree.root;var a=b.targetNode;if(typeof a==='string'){a=c.getNodeById(a)}if(a&&c.contains(a)){return {node:a}}var e=b.targetNodeId;if(e!=null&&(a=c.getNodeById(e))){return {node:a}}}}function getPathToRoot(a){var b=[];while(a){a=a.parentNode;a&&b.push(a)}return b.reverse()}function aboveViewRoot(b,c){var a=getPathToRoot(b);return indexOf(a,c)>=0}function wrapTreePathInfo(a,e){var b=[];while(a){var c=a.dataIndex;b.push({name:a.name,dataIndex:c,value:e.getRawValue(c)});a=a.parentNode}b.reverse();return b}l.extend({type:'series.treemap',layoutMode:'box',dependencies:['grid','polar'],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:'center',top:'middle',right:null,bottom:null,width:'80%',height:'80%',sort:!0,clipWindow:'origin',squareRatio:0.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:'',zoomToNodeRatio:0.32*0.32,roam:!0,nodeClick:'zoomToNode',animation:!0,animationDurationUpdate:900,animationEasing:'quinticInOut',breadcrumb:{show:!0,height:22,left:'center',top:'bottom',emptyItemWidth:25,itemStyle:{color:'rgba(0,0,0,0.7)',borderColor:'rgba(255,255,255,0.7)',borderWidth:1,shadowColor:'rgba(150,150,150,1)',shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:'#fff'}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:'inside',color:'#fff',ellipsis:!0},upperLabel:{show:!1,position:[0,'50%'],height:20,color:'#fff',ellipsis:!0,verticalAlign:'middle'},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:'#fff',borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,'50%'],color:'#fff',ellipsis:!0,verticalAlign:'middle'}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:'index',visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(a,f){var e={name:a.name,children:a.data};completeTreeValue(e);var b=a.levels||[];b=a.levels=setDefault(b,f);var c={};c.levels=b;return Tree.createTree(e,this,c).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(b){var e=this.getData();var a=this.getRawValue(b);var c=isArray(a)?addCommas(a[0]):addCommas(a);var f=e.getName(b);return encodeHTML(f+': '+c)},getDataParams:function(b){var a=l.prototype.getDataParams.apply(this,arguments);var c=this.getData().tree.getNodeByDataIndex(b);a.treePathInfo=wrapTreePathInfo(c,this);return a},setLayoutInfo:function(a){this.layoutInfo=this.layoutInfo||{};extend(this.layoutInfo,a)},mapIdToIndex:function(c){var a=this._idIndexMap;if(!a){a=this._idIndexMap=createHashMap();this._idIndexMapCount=0}var b=a.get(c);if(b==null){a.set(c,b=this._idIndexMapCount++)}return b},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(a){a?this._viewRoot=a:a=this._viewRoot;var b=this.getRawData().tree.root;if(!a||a!==b&&!b.contains(a)){this._viewRoot=b}}});function completeTreeValue(b){var c=0;each$1(b.children,function(e){completeTreeValue(e);var a=e.value;isArray(a)&&(a=a[0]);c+=a});var a=b.value;if(isArray(a)){a=a[0]}if(a==null||isNaN(a)){a=c}if(a<0){a=0}isArray(b.value)?b.value[0]=a:b.value=a}function setDefault(a,e){var b=e.get('color');if(!b){return}a=a||[];var c;each$1(a,function(g){var f=new Model(g);var b=f.get('color');if(f.get('itemStyle.color')||b&&b!=='none'){c=!0}});if(!c){var f=a[0]||(a[0]={});f.color=b.slice()}return a}var l0=8;var il=8;var eK=5;function Breadcrumb(a){this.group=new b();a.add(this.group)}Breadcrumb.prototype={constructor:Breadcrumb,render:function(f,i,g,j){var a=f.getModel('breadcrumb');var h=this.group;h.removeAll();if(!a.get('show')||!g){return}var c=a.getModel('itemStyle');var e=c.getModel('textStyle');var b={pos:{left:a.get('left'),right:a.get('right'),top:a.get('top'),bottom:a.get('bottom')},box:{width:i.getWidth(),height:i.getHeight()},emptyItemWidth:a.get('emptyItemWidth'),totalWidth:0,renderList:[]};this._prepare(g,b,e);this._renderContent(f,b,c,e,j);positionElement(h,b.pos,b.box)},_prepare:function(g,b,f){for(var a=g;a;a=a.parentNode){var e=a.getModel().get('name');var h=f.getTextRect(e);var c=Math.max(h.width+l0*2,b.emptyItemWidth);b.totalWidth+=c+il;b.renderList.push({node:a,text:e,width:c})}},_renderContent:function(i,a,o,h,q){var l=0;var g=a.emptyItemWidth;var r=i.get('breadcrumb.height');var p=getAvailableSize(a.pos,a.box);var j=a.totalWidth;var e=a.renderList;for(var b=e.length-1;b>=0;b--){var f=e[b];var k=f.node;var c=f.width;var m=f.text;if(j>p.width){j-=c-g;c=g;m=null}var n=new I({shape:{points:makeItemPoints(l,0,c,r,b===e.length-1,b===0)},style:defaults(o.getItemStyle(),{lineJoin:'bevel',text:m,textFill:h.getTextColor(),textFont:h.getFont()}),z:10,onclick:curry(q,k)});this.group.add(n);packEventData(n,i,k);l+=c+il}},remove:function(){this.group.removeAll()}};function makeItemPoints(a,b,e,c,g,h){var f=[[g?a:a-eK,b],[a+e,b],[a+e,b+c],[g?a:a-eK,b+c]];!h&&f.splice(2,0,[a+e+eK,b+c/2]);!g&&f.push([a,b+c/2]);return f}function packEventData(c,b,a){c.eventData={componentType:'series',componentSubType:'treemap',componentIndex:b.componentIndex,seriesIndex:b.componentIndex,seriesName:b.name,seriesType:'treemap',selfType:'breadcrumb',nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&wrapTreePathInfo(a,b)}}function createWrap(){var a=[];var c={};var b;return {add:function(e,g,h,b,f){if(isString(b)){f=b;b=0}if(c[e.id]){return !1}c[e.id]=1;a.push({el:e,target:g,time:h,delay:b,easing:f});return !0},done:function(a){b=a;return this},start:function(){var g=a.length;for(var f=0,h=a.length;f<h;f++){var e=a[f];e.el.animateTo(e.target,e.time,e.delay,e.easing,done)}return this;function done(){g--;if(!g){a.length=0;c={};b&&b()}}}}}var dD=bind;var iy=b;var iZ=h;var ac=each$1;var g5=3;var ku=['label'];var j5=['emphasis','label'];var jP=['upperLabel'];var jD=['emphasis','upperLabel'];var oj=10;var oI=1;var nw=2;var dY=bo([['fill','color'],['stroke','strokeColor'],['lineWidth','strokeWidth'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor']]);var gz=function(b){var a=dY(b);a.stroke=a.fill=a.lineWidth=null;return a};extendChartView({type:'treemap',init:function(b,a){this._containerGroup;this._storage=createStorage();this._oldTree;this._breadcrumb;this._controller;this._state='ready'},render:function(a,j,f,b){var n=j.findComponents({mainType:'series',subType:'treemap',query:b});if(indexOf(n,a)<0){return}this.seriesModel=a;this.api=f;this.ecModel=j;var o=['treemapZoomToNode','treemapRootToNode'];var e=retrieveTargetInfo(b,o,a);var c=b&&b.type;var l=a.layoutInfo;var m=!this._oldTree;var i=this._storage;var k=c==='treemapRootToNode'&&e&&i?{rootNodeGroup:i.nodeGroup[e.node.getRawIndex()],direction:b.direction}:null;var g=this._giveContainerGroup(l);var h=this._doRender(g,a,k);!m&&(!c||c==='treemapZoomToNode'||c==='treemapRootToNode')?this._doAnimation(g,h,a,k):h.renderFinally();this._resetController(f);this._renderBreadcrumb(a,f,e)},_giveContainerGroup:function(b){var a=this._containerGroup;if(!a){a=this._containerGroup=new iy();this._initEvents(a);this.group.add(a)}a.attr('position',[b.x,b.y]);return a},_doRender:function(j,g,l){var b=g.getData().tree;var a=this._oldTree;var c=createStorage();var h=createStorage();var i=this._storage;var e=[];var k=curry(renderNode,g,h,i,l,c,e);dualTravel(b.root?[b.root]:[],a&&a.root?[a.root]:[],j,b===a||!a,0);var f=clearStorage(i);this._oldTree=b;this._storage=h;return {lastsForAnimation:c,willDeleteEls:f,renderFinally:renderFinally};function dualTravel(a,b,f,c,e){if(c){b=a;ac(a,function(i,h){!i.isRemoved()&&processNode(h,h)})}else {(new DataDiffer(b,a,getKey,getKey)).add(processNode).update(processNode).remove(curry(processNode,null)).execute()}function getKey(h){return h.getId()}function processNode(m,n){var h=m!=null?a[m]:null;var i=n!=null?b[n]:null;var o=k(h,i,f,e);o&&dualTravel(h&&h.viewChildren||[],i&&i.viewChildren||[],o,c,e+1)}}function clearStorage(b){var a=createStorage();b&&ac(b,function(f,c){var e=a[c];ac(f,function(a){a&&(e.push(a),a.__tmWillDelete=1)})});return a}function renderFinally(){ac(f,function(a){ac(a,function(b){b.parent&&b.parent.remove(b)})});ac(e,function(a){a.invisible=!0;a.dirty()})}},_doAnimation:function(h,b,c,e){if(!c.get('animation')){return}var f=c.get('animationDurationUpdate');var g=c.get('animationEasing');var a=createWrap();ac(b.willDeleteEls,function(j,i){ac(j,function(o,p){if(o.invisible){return}var k=o.parent;var l;if(e&&e.direction==='drillDown'){l=k===e.rootNodeGroup?{shape:{x:0,y:0,width:k.__tmNodeWidth,height:k.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}}}else {var m=0;var n=0;if(!k.__tmWillDelete){m=k.__tmNodeWidth/2;n=k.__tmNodeHeight/2}l=i==='nodeGroup'?{position:[m,n],style:{opacity:0}}:{shape:{x:m,y:n,width:0,height:0},style:{opacity:0}}}l&&a.add(o,l,f,g)})});ac(this._storage,function(j,i){ac(j,function(k,n){var l=b.lastsForAnimation[i][n];var m={};if(!l){return}if(i==='nodeGroup'){if(l.old){m.position=k.position.slice();k.attr('position',l.old)}}else {if(l.old){m.shape=extend({},k.shape);k.setShape(l.old)}if(l.fadein){k.setStyle('opacity',0);m.style={opacity:1}}else {if(k.style.opacity!==1){m.style={opacity:1}}}}a.add(k,m,f,g)})},this);this._state='animating';a.done(dD(function(){this._state='ready';b.renderFinally()},this)).start()},_resetController:function(b){var a=this._controller;if(!a){a=this._controller=new RoamController(b.getZr());a.enable(this.seriesModel.get('roam'));a.on('pan',dD(this._onPan,this));a.on('zoom',dD(this._onZoom,this))}var c=new BoundingRect(0,0,b.getWidth(),b.getHeight());a.setPointerChecker(function(f,a,e){return c.contain(a,e)})},_clearController:function(){var a=this._controller;if(a){a.dispose();a=null}},_onPan:function(b){if(this._state!=='animating'&&(Math.abs(b.dx)>g5||Math.abs(b.dy)>g5)){var c=this.seriesModel.getData().tree.root;if(!c){return}var a=c.getLayout();if(!a){return}this.api.dispatchAction({type:'treemapMove',from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+b.dx,y:a.y+b.dy,width:a.width,height:a.height}})}},_onZoom:function(e){var f=e.originX;var g=e.originY;if(this._state!=='animating'){var i=this.seriesModel.getData().tree.root;if(!i){return}var b=i.getLayout();if(!b){return}var c=new BoundingRect(b.x,b.y,b.width,b.height);var h=this.seriesModel.layoutInfo;f-=h.x;g-=h.y;var a=create$1();translate(a,a,[-f,-g]);scale$1(a,a,[e.scale,e.scale]);translate(a,a,[f,g]);c.applyTransform(a);this.api.dispatchAction({type:'treemapRender',from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x,y:c.y,width:c.width,height:c.height}})}},_initEvents:function(a){a.on('click',function(h){if(this._state!=='ready'){return}var c=this.seriesModel.get('nodeClick',!0);if(!c){return}var b=this.findTarget(h.offsetX,h.offsetY);if(!b){return}var e=b.node;if(e.getLayout().isLeafRoot){this._rootToNode(b)}else {if(c==='zoomToNode'){this._zoomToNode(b)}else {if(c==='link'){var f=e.hostTree.data.getItemModel(e.dataIndex);var g=f.get('link',!0);var i=f.get('target',!0)||'blank';g&&window.open(g,i)}}}},this)},_renderBreadcrumb:function(a,c,b){if(!b){b=a.get('leafDepth',!0)!=null?{node:a.getViewRoot()}:this.findTarget(c.getWidth()/2,c.getHeight()/2);if(!b){b={node:a.getData().tree.root}}}(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(a,c,b.node,dD(onSelect,this));function onSelect(e){if(this._state!=='animating'){aboveViewRoot(a.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e})}}},remove:function(){this._clearController();this._containerGroup&&this._containerGroup.removeAll();this._storage=createStorage();this._state='ready';this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(a){this.api.dispatchAction({type:'treemapZoomToNode',from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},_rootToNode:function(a){this.api.dispatchAction({type:'treemapRootToNode',from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},findTarget:function(c,e){var a;var b=this.seriesModel.getViewRoot();b.eachNode({attr:'viewChildren',order:'preorder'},function(h){var g=this._storage.background[h.getRawIndex()];if(g){var b=g.transformCoordToLocal(c,e);var f=g.shape;if(f.x<=b[0]&&b[0]<=f.x+f.width&&f.y<=b[1]&&b[1]<=f.y+f.height){a={node:h,offsetX:b[0],offsetY:b[1]}}else {return !1}}},this);return a}});function createStorage(){return {nodeGroup:[],background:[],content:[]}}function renderNode(f,z,r,l,n,x,a,u,y,v){if(!a){return}var b=a.getLayout();if(!b||!b.isInView){return}var g=b.width;var k=b.height;var e=b.borderWidth;var p=b.invisible;var i=a.getRawIndex();var j=u&&u.getRawIndex();var o=a.viewChildren;var q=b.upperHeight;var s=o&&o.length;var m=a.getModel('itemStyle');var h=a.getModel('emphasis.itemStyle');var c=giveGraphic('nodeGroup',iy);if(!c){return}y.add(c);c.attr('position',[b.x||0,b.y||0]);c.__tmNodeWidth=g;c.__tmNodeHeight=k;if(b.isAboveViewRoot){return c}var w=giveGraphic('background',iZ,v,oI);w&&renderBackground(c,w,s&&b.upperHeight);if(!s){var t=giveGraphic('content',iZ,v,nw);t&&renderContent(c,t)}return c;function renderBackground(o,b,j){b.dataIndex=a.dataIndex;b.seriesIndex=f.seriesIndex;b.setShape({x:0,y:0,width:g,height:k});var c=a.getVisual('borderColor',!0);var i=h.get('borderColor');updateStyle(b,function(){var p=gz(m);p.fill=c;var k=dY(h);k.fill=i;if(j){var s=g-2*e;prepareText(p,k,c,s,q,{x:e,y:0,width:s,height:q})}else {p.text=k.text=null}b.setStyle(p);setHoverStyle(b,k)});o.add(b)}function renderContent(o,b){b.dataIndex=a.dataIndex;b.seriesIndex=f.seriesIndex;var i=Math.max(g-2*e,0);var c=Math.max(k-2*e,0);b.culling=!0;b.setShape({x:e,y:e,width:i,height:c});var j=a.getVisual('color',!0);updateStyle(b,function(){var e=gz(m);e.fill=j;var g=dY(h);prepareText(e,g,j,i,c);b.setStyle(e);setHoverStyle(b,g)});o.add(b)}function updateStyle(b,c){if(!p){c();if(!b.__tmWillVisible){b.invisible=!1}}else {!b.invisible&&x.push(b)}}function prepareText(h,o,p,s,q,c){var i=a.getModel();var e=retrieve(f.getFormattedLabel(a.dataIndex,'normal',null,null,c?'upperLabel':'label'),i.get('name'));if(!c&&b.isLeafRoot){var j=f.get('drillDownIcon',!0);e=j?j+' '+e:e}var g=i.getModel(c?jP:ku);var m=i.getModel(c?jD:j5);var k=g.getShallow('show');setLabelStyle(h,o,g,m,{defaultText:k?e:null,autoColor:p,isRectText:!0});c&&(h.textRect=clone(c));h.truncate=k&&g.get('ellipsis')?{outerWidth:s,outerHeight:q,minChar:2}:null}function giveGraphic(b,h,e,k){var c=j!=null&&r[b][j];var g=n[b];if(c){r[b][j]=null;prepareAnimationWhenHasOld(g,c,b)}else {if(!p){c=new h({z:calculateZ(e,k)});c.__tmDepth=e;c.__tmStorageName=b;prepareAnimationWhenNoOld(g,c,b)}}return z[b][i]=c}function prepareAnimationWhenHasOld(g,b,c){var e=g[i]={};e.old=c==='nodeGroup'?b.position.slice():extend({},b.shape)}function prepareAnimationWhenNoOld(k,m,e){var j=k[i]={};var g=a.parentNode;if(g&&(!l||l.direction==='drillDown')){var h=0;var c=0;var b=n.background[g.getRawIndex()];if(!l&&b&&b.old){h=b.old.width;c=b.old.height}j.old=e==='nodeGroup'?[0,c]:{x:h,y:c,width:0,height:0}}j.fadein=e!=='nodeGroup'}}function calculateZ(c,b){var a=c*oj+b;return (a-1)/a}var ou=function(){};var hM=['treemapZoomToNode','treemapRender','treemapMove'];for(var fU=0;fU<hM.length;fU++){registerAction({type:hM[fU],update:'updateView'},ou)}registerAction({type:'treemapRootToNode',update:'updateView'},function(a,b){b.eachComponent({mainType:'series',subType:'treemap',query:a},handleRootToNode);function handleRootToNode(e,h){var g=['treemapZoomToNode','treemapRootToNode'];var c=retrieveTargetInfo(a,g,e);if(c){var f=e.getViewRoot();if(f){a.direction=aboveViewRoot(f,c.node)?'rollUp':'drillDown'}e.resetViewRoot(c.node)}}});var cm=each$1;var hZ=isObject$1;var cv=-1;var k=function(e){var b=e.mappingMethod;var f=e.type;var a=this.option=clone(e);this.type=f;this.mappingMethod=b;this._normalizeData=mR[b];var c=b$[f];this.applyVisual=c.applyVisual;this.getColorMapper=c.getColorMapper;this._doMap=c._doMap[b];if(b==='piecewise'){normalizeVisualRange(a);preprocessForPiecewise(a)}else {if(b==='category'){a.categories?preprocessForSpecifiedCategory(a):normalizeVisualRange(a,!0)}else {assert$1(b!=='linear'||a.dataExtent);normalizeVisualRange(a)}}};k.prototype={constructor:k,mapValueToVisual:function(a){var b=this._normalizeData(a);return this._doMap(b,a)},getNormalizer:function(){return bind(this._normalizeData,this)}};var b$=k.visualHandlers={color:{applyVisual:makeApplyVisual('color'),getColorMapper:function(){var a=this.option;return bind(a.mappingMethod==='category'?function(a,b){!b&&(a=this._normalizeData(a));return doMapCategory.call(this,a)}:function(c,f,b){var e=!!b;!f&&(c=this._normalizeData(c));b=fastLerp(c,a.parsedVisual,b);return e?b:stringify(b,'rgba')},this)},_doMap:{linear:function(a){return stringify(fastLerp(a,this.option.parsedVisual),'rgba')},category:doMapCategory,piecewise:function(b,c){var a=getSpecifiedVisual.call(this,c);if(a==null){a=stringify(fastLerp(b,this.option.parsedVisual),'rgba')}return a},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(a,b){return modifyHSL(a,b)}),colorSaturation:makePartialColorVisualHandler(function(a,b){return modifyHSL(a,null,b)}),colorLightness:makePartialColorVisualHandler(function(a,b){return modifyHSL(a,null,null,b)}),colorAlpha:makePartialColorVisualHandler(function(a,b){return modifyAlpha(a,b)}),opacity:{applyVisual:makeApplyVisual('opacity'),_doMap:makeDoMap([0,1])},liftZ:{applyVisual:makeApplyVisual('liftZ'),_doMap:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(e,f,c){var a=this.mapValueToVisual(e);if(isString(a)){c('symbol',a)}else {if(hZ(a)){for(var b in a){if(a.hasOwnProperty(b)){c(b,a[b])}}}}},_doMap:{linear:doMapToArray,category:doMapCategory,piecewise:function(b,c){var a=getSpecifiedVisual.call(this,c);if(a==null){a=doMapToArray.call(this,b)}return a},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual('symbolSize'),_doMap:makeDoMap([0,1])}};function preprocessForPiecewise(a){var b=a.pieceList;a.hasSpecialVisual=!1;each$1(b,function(b,c){b.originIndex=c;if(b.visual!=null){a.hasSpecialVisual=!0}})}function preprocessForSpecifiedCategory(c){var b=c.categories;var a=c.visual;var f=c.categoryMap={};cm(b,function(b,a){f[b]=a});if(!isArray(a)){var g=[];if(isObject$1(a)){cm(a,function(e,b){var a=f[b];g[a!=null?a:cv]=e})}else {g[cv]=a}a=setVisualToOption(c,g)}for(var e=b.length-1;e>=0;e--){if(a[e]==null){delete f[b[e]];b.pop()}}}function normalizeVisualRange(c,f){var b=c.visual;var a=[];if(isObject$1(b)){cm(b,function(b){a.push(b)})}else {if(b!=null){a.push(b)}}var e={color:1,symbol:1};if(!f&&a.length===1&&!e.hasOwnProperty(c.type)){a[1]=a[0]}setVisualToOption(c,a)}function makePartialColorVisualHandler(a){return {applyVisual:function(b,c,e){b=this.mapValueToVisual(b);e('color',a(c('color'),b))},_doMap:makeDoMap([0,1])}}function doMapToArray(b){var a=this.option.visual;return a[Math.round(linearMap(b,[0,1],[0,a.length-1],!0))]||{}}function makeApplyVisual(a){return function(c,e,b){b(a,this.mapValueToVisual(c))}}function doMapCategory(a){var b=this.option.visual;return b[this.option.loop&&a!==cv?a%b.length:a]}function doMapFixed(){return this.option.visual[0]}function makeDoMap(a){return {linear:function(b){return linearMap(b,a,this.option.visual,!0)},category:doMapCategory,piecewise:function(c,e){var b=getSpecifiedVisual.call(this,e);if(b==null){b=linearMap(c,a,this.option.visual,!0)}return b},fixed:doMapFixed}}function getSpecifiedVisual(f){var b=this.option;var c=b.pieceList;if(b.hasSpecialVisual){var e=k.findPieceIndex(f,c);var a=c[e];if(a&&a.visual){return a.visual[this.type]}}}function setVisualToOption(a,b){a.visual=b;if(a.type==='color'){a.parsedVisual=map(b,function(c){return parse(c)})}return b}var mR={linear:function(a){return linearMap(a,this.option.dataExtent,[0,1],!0)},piecewise:function(c){var b=this.option.pieceList;var a=k.findPieceIndex(c,b,!0);if(a!=null){return linearMap(a,[0,b.length-1],[0,1],!0)}},category:function(b){var a=this.option.categories?this.option.categoryMap[b]:b;return a==null?cv:a},fixed:noop};k.listVisualTypes=function(){var a=[];each$1(b$,function(c,b){a.push(b)});return a};k.addVisualHandler=function(b,a){b$[b]=a};k.isValidType=function(a){return b$.hasOwnProperty(a)};k.eachVisual=function(a,b,c){if(isObject$1(a)){each$1(a,b,c)}else {b.call(c,a)}};k.mapVisual=function(b,e,f){var c;var a=isArray(b)?[]:isObject$1(b)?{}:(c=!0,null);k.eachVisual(b,function(i,h){var g=e.call(f,i,h);c?a=g:a[h]=g});return a};k.retrieveVisuals=function(a){var c={};var b;a&&cm(b$,function(f,e){if(a.hasOwnProperty(e)){c[e]=a[e];b=!0}});return b?c:null};k.prepareVisualTypes=function(a){if(hZ(a)){var b=[];cm(a,function(e,c){b.push(c)});a=b}else {if(isArray(a)){a=a.slice()}else {return []}}a.sort(function(b,c){return c==='color'&&b!=='color'&&b.indexOf('color')===0?1:-1});return a};k.dependsOn=function(a,b){return b==='color'?!!(a&&a.indexOf(b)===0):a===b};k.findPieceIndex=function(c,f,g){var j;var l=Infinity;for(var a=0,i=f.length;a<i;a++){var e=f[a].value;if(e!=null){if(e===c||typeof e==='string'&&e===c+''){return a}g&&updatePossible(e,a)}}for(var a=0,i=f.length;a<i;a++){var k=f[a];var b=k.interval;var h=k.close;if(b){if(b[0]===-Infinity){if(littleThan(h[1],c,b[1])){return a}}else {if(b[1]===Infinity){if(littleThan(h[0],b[0],c)){return a}}else {if(littleThan(h[0],b[0],c)&&littleThan(h[1],c,b[1])){return a}}}g&&updatePossible(b[0],a);g&&updatePossible(b[1],a)}}if(g){return c===Infinity?f.length-1:c===-Infinity?0:j}function updatePossible(e,b){var a=Math.abs(e-c);if(a<l){l=a;j=b}}};function littleThan(c,a,b){return c?a<=b:a<b}var nH=isArray;var d6='itemStyle';var lX={seriesType:'treemap',reset:function(a,g,i,h){var c=a.getData().tree;var b=c.root;var e=a.getModel(d6);if(b.isRemoved()){return}var f=map(c.levelModels,function(b){return b?b.get(d6):null});travelTree(b,{},f,e,a.getViewRoot().getAncestors(),a)}};function travelTree(a,o,k,j,h,m){var n=a.getModel();var f=a.getLayout();if(!f||f.invisible||!f.isInView){return}var b=a.getModel(d6);var p=k[a.depth];var g=buildVisuals(b,o,p,j);var l=b.get('borderColor');var i=b.get('borderColorSaturation');var c;if(i!=null){c=calculateColor(g,a);l=calculateBorderColor(i,c)}a.setVisual('borderColor',l);var e=a.viewChildren;if(!e||!e.length){c=calculateColor(g,a);a.setVisual('color',c)}else {var q=buildVisualMapping(a,n,f,b,g,e);each$1(e,function(b,e){if(b.depth>=h.length||b===h[b.depth]){var c=mapVisual$1(n,g,b,e,q,m);travelTree(b,c,k,j,h,m)}})}}function buildVisuals(f,a,b,e){var c=extend({},a);each$1(['color','colorAlpha','colorSaturation'],function(h){var g=f.get(h,!0);g==null&&b&&(g=b[h]);g==null&&(g=a[h]);g==null&&(g=e.get(h));g!=null&&(c[h]=g)});return c}function calculateColor(b){var a=getValueVisualDefine(b,'color');if(a){var e=getValueVisualDefine(b,'colorAlpha');var c=getValueVisualDefine(b,'colorSaturation');if(c){a=modifyHSL(a,null,null,c)}if(e){a=modifyAlpha(a,e)}return a}}function calculateBorderColor(b,a){return a!=null?modifyHSL(a,null,null,b):null}function getValueVisualDefine(b,c){var a=b[c];if(a!=null&&a!=='none'){return a}}function buildVisualMapping(o,a,m,n,l,i){if(!i||!i.length){return}var f=getRangeVisual(a,'color')||l.color!=null&&l.color!=='none'&&(getRangeVisual(a,'colorAlpha')||getRangeVisual(a,'colorSaturation'));if(!f){return}var h=a.get('visualMin');var g=a.get('visualMax');var b=m.dataExtent.slice();h!=null&&h<b[0]&&(b[0]=h);g!=null&&g>b[1]&&(b[1]=g);var e=a.get('colorMappingBy');var c={type:f.name,dataExtent:b,visual:f.range};if(c.type==='color'&&(e==='index'||e==='id')){c.mappingMethod='category';c.loop=!0}else {c.mappingMethod='linear'}var j=new k(c);j.__drColorMappingBy=e;return j}function getRangeVisual(c,b){var a=c.get(b);return nH(a)&&a.length?{name:b,range:a}:null}function mapVisual$1(h,i,f,j,a,g){var c=extend({},i);if(a){var e=a.type;var b=e==='color'&&a.__drColorMappingBy;var k=b==='index'?j:b==='id'?g.mapIdToIndex(f.getId()):f.getValue(h.get('visualDimension'));c[e]=a.mapValueToVisual(k)}return c}var ca=Math.max;var dk=Math.min;var hv=retrieve;var fy=each$1;var gI=['itemStyle','borderWidth'];var li=['itemStyle','gapWidth'];var jS=['upperLabel','show'];var jI=['upperLabel','height'];var lW={seriesType:'treemap',reset:function(b,w,k,j){var s=k.getWidth();var q=k.getHeight();var f=b.option;var c=getLayoutRect(b.getBoxLayoutParams(),{width:k.getWidth(),height:k.getHeight()});var t=f.size||[];var o=parsePercent$1(hv(c.width,t[0]),s);var n=parsePercent$1(hv(c.height,t[1]),q);var g=j&&j.type;var v=['treemapZoomToNode','treemapRootToNode'];var p=retrieveTargetInfo(j,v,b);var h=g==='treemapRender'||g==='treemapMove'?j.rootRect:null;var a=b.getViewRoot();var m=getPathToRoot(a);if(g!=='treemapMove'){var i=g==='treemapZoomToNode'?estimateRootSize(b,p,a,o,n):h?[h.width,h.height]:[o,n];var e=f.sort;if(e&&e!=='asc'&&e!=='desc'){e='desc'}var u={squareRatio:f.squareRatio,sort:e,leafDepth:f.leafDepth};a.hostTree.clearLayouts();var l={x:0,y:0,width:i[0],height:i[1],area:i[0]*i[1]};a.setLayout(l);squarify(a,u,!1,0);var l=a.getLayout();fy(m,function(f,e){var c=(m[e+1]||a).getValue();f.setLayout(extend({dataExtent:[c,c],borderWidth:0,upperHeight:0},l))})}var r=b.getData().tree.root;r.setLayout(calculateRootPosition(c,h,p),!0);b.setLayoutInfo(c);prunning(r,new BoundingRect(-c.x,-c.y,s,q),m,a,0)}};function squarify(g,o,k,y){var f;var e;if(g.isRemoved()){return}var v=g.getLayout();f=v.width;e=v.height;var c=g.getModel();var n=c.get(gI);var j=c.get(li)/2;var t=getUpperLabelHeight(c);var u=Math.max(n,t);var m=n-j;var s=u-j;var c=g.getModel();g.setLayout({borderWidth:n,upperHeight:u,upperLabelHeight:t},!0);f=ca(f-2*m,0);e=ca(e-m-s,0);var w=f*e;var h=initChildren(g,c,w,o,k,y);if(!h.length){return}var l={x:m,y:s,width:f,height:e};var i=dk(f,e);var p=Infinity;var a=[];a.area=0;for(var b=0,q=h.length;b<q;){var x=h[b];a.push(x);a.area+=x.getLayout().area;var z=worst(a,i,o.squareRatio);if(z<=p){b++;p=z}else {a.area-=a.pop().getLayout().area;position(a,i,l,j,!1);i=dk(l.width,l.height);a.length=a.area=0;p=Infinity}}if(a.length){position(a,i,l,j,!0)}if(!k){var r=c.get('childrenVisibleMin');if(r!=null&&w<r){k=!0}}for(var b=0,q=h.length;b<q;b++){squarify(h[b],o,k,y+1)}}function initChildren(b,i,j,g,k,l){var a=b.children||[];var c=g.sort;c!=='asc'&&c!=='desc'&&(c=null);var h=g.leafDepth!=null&&g.leafDepth<=l;if(k&&!h){return b.viewChildren=[]}a=filter(a,function(a){return !a.isRemoved()});sort$1(a,c);var e=statistic(i,a,c);if(e.sum===0){return b.viewChildren=[]}e.sum=filterByThreshold(i,j,e.sum,c,a);if(e.sum===0){return b.viewChildren=[]}for(var f=0,n=a.length;f<n;f++){var m=a[f].getValue()/e.sum*j;a[f].setLayout({area:m})}if(h){a.length&&b.setLayout({isLeafRoot:!0},!0);a.length=0}b.viewChildren=a;b.setLayout({dataExtent:e.dataExtent},!0);return a}function filterByThreshold(j,k,f,g,c){if(!g){return f}var i=j.get('visibleMin');var a=c.length;var e=a;for(var b=a-1;b>=0;b--){var h=c[g==='asc'?a-b-1:b].getValue();if(h/f*k<i){e=b;f-=h}}g==='asc'?c.splice(0,a-e):c.splice(e,a-e);return f}function sort$1(b,a){if(a){b.sort(function(c,e){var f=a==='asc'?c.getValue()-e.getValue():e.getValue()-c.getValue();return f===0?a==='asc'?c.dataIndex-e.dataIndex:e.dataIndex-c.dataIndex:f})}return b}function statistic(h,b,f){var g=0;for(var c=0,i=b.length;c<i;c++){g+=b[c].getValue()}var e=h.get('visualDimension');var a;if(!b||!b.length){a=[NaN,NaN]}else {if(e==='value'&&f){a=[b[b.length-1].getValue(),b[0].getValue()];f==='asc'&&a.reverse()}else {var a=[Infinity,-Infinity];fy(b,function(g){var c=g.getValue(e);c<a[0]&&(a[0]=c);c>a[1]&&(a[1]=c)})}}return {sum:g,dataExtent:a}}function worst(b,h,j){var e=0;var f=Infinity;for(var g=0,a,k=b.length;g<k;g++){a=b[g].getLayout().area;if(a){a<f&&(f=a);a>e&&(e=a)}}var c=b.area*b.area;var i=h*h*j;return c?ca(i*e/c,c/(i*f)):Infinity}function position(m,k,a,i,s){var e=k===a.width?0:1;var c=1-e;var g=['x','y'];var f=['width','height'];var l=a[g[e]];var b=k?m.area/k:0;if(s||b>a[f[c]]){b=a[f[c]]}for(var j=0,o=m.length;j<o;j++){var q=m[j];var h={};var r=b?q.getLayout().area/b:0;var u=h[f[c]]=ca(b-2*i,0);var n=a[g[e]]+a[f[e]]-l;var p=j===o-1||n<r?n:r;var t=h[f[e]]=ca(p-2*i,0);h[g[c]]=a[g[c]]+dk(i,u/2);h[g[e]]=l+dk(i,t/2);l+=p;q.setLayout(h,!0)}a[g[c]]+=b;a[f[c]]-=b}function estimateRootSize(p,r,s,h,g){var c=(r||{}).node;var k=[h,g];if(!c||c===s){return k}var f;var e=h*g;var a=e*p.option.zoomToNodeRatio;while(f=c.parentNode){var o=0;var m=f.children;for(var i=0,t=m.length;i<t;i++){o+=m[i].getValue()}var j=c.getValue();if(j===0){return k}a*=o/j;var l=f.getModel();var b=l.get(gI);var q=Math.max(b,getUpperLabelHeight(l,b));a+=4*b*b+(3*b+q)*Math.pow(a,0.5);a>ec&&(a=ec);c=f}a<e&&(a=e);var n=Math.pow(a/e,0.5);return [h*n,g*n]}function calculateRootPosition(g,c,i){if(c){return {x:c.x,y:c.y}}var f={x:0,y:0};if(!i){return f}var j=i.node;var e=j.getLayout();if(!e){return f}var a=[e.width/2,e.height/2];var b=j;while(b){var h=b.getLayout();a[0]+=h.x;a[1]+=h.y;b=b.parentNode}return {x:g.width/2-a[0],y:g.height/2-a[1]}}function prunning(b,a,f,i,h){var g=b.getLayout();var c=f[h];var e=c&&c===b;if(c&&!e||h===f.length&&b!==i){return}b.setLayout({isInView:!0,invisible:!e&&!a.intersect(g),isAboveViewRoot:e},!0);var j=new BoundingRect(a.x-g.x,a.y-g.y,a.width,a.height);fy(b.viewChildren||[],function(c){prunning(c,j,f,i,h+1)})}function getUpperLabelHeight(a){return a.get(jS)?a.get(jI):0}registerVisual(lX);registerLayout(lW);function generateNodeKey(a){return '_EC_'+a}var cp=function(a){this._directed=a||!1;this.nodes=[];this.edges=[];this._nodesMap={};this._edgesMap={};this.data;this.edgeData};var F=cp.prototype;F.type='graph';F.isDirected=function(){return this._directed};F.addNode=function(b,e){b=b==null?''+e:''+b;var f=this._nodesMap;if(f[generateNodeKey(b)]){if(a){console.error('Graph nodes have duplicate name or id')}return}var c=new Node(b,e);c.hostGraph=this;this.nodes.push(c);f[generateNodeKey(b)]=c;return c};F.getNodeByIndex=function(a){var b=this.data.getRawIndex(a);return this.nodes[b]};F.getNodeById=function(a){return this._nodesMap[generateNodeKey(a)]};F.addEdge=function(a,b,h){var f=this._nodesMap;var e=this._edgesMap;if(typeof a==='number'){a=this.nodes[a]}if(typeof b==='number'){b=this.nodes[b]}if(!Node.isInstance(a)){a=f[generateNodeKey(a)]}if(!Node.isInstance(b)){b=f[generateNodeKey(b)]}if(!a||!b){return}var g=a.id+'-'+b.id;if(e[g]){return}var c=new Edge(a,b,h);c.hostGraph=this;if(this._directed){a.outEdges.push(c);b.inEdges.push(c)}a.edges.push(c);if(a!==b){b.edges.push(c)}this.edges.push(c);e[g]=c;return c};F.getEdgeByIndex=function(a){var b=this.edgeData.getRawIndex(a);return this.edges[b]};F.getEdge=function(a,b){if(Node.isInstance(a)){a=a.id}if(Node.isInstance(b)){b=b.id}var c=this._edgesMap;if(this._directed){return c[a+'-'+b]}else {return c[a+'-'+b]||c[b+'-'+a]}};F.eachNode=function(f,c){var b=this.nodes;var e=b.length;for(var a=0;a<e;a++){if(b[a].dataIndex>=0){f.call(c,b[a],a)}}};F.eachEdge=function(f,c){var b=this.edges;var e=b.length;for(var a=0;a<e;a++){if(b[a].dataIndex>=0&&b[a].node1.dataIndex>=0&&b[a].node2.dataIndex>=0){f.call(c,b[a],a)}}};F.breadthFirstTraverse=function(k,b,h,i){if(!Node.isInstance(b)){b=this._nodesMap[generateNodeKey(b)]}if(!b){return}var l=h==='out'?'outEdges':h==='in'?'inEdges':'edges';for(var a=0;a<this.nodes.length;a++){this.nodes[a].__visited=!1}if(k.call(i,b,null)){return}var f=[b];while(f.length){var e=f.shift();var j=e[l];for(var a=0;a<j.length;a++){var g=j[a];var c=g.node1===e?g.node2:g.node1;if(!c.__visited){if(k.call(i,c,e)){return}f.push(c);c.__visited=!0}}}};F.update=function(){var g=this.data;var c=this.edgeData;var f=this.nodes;var e=this.edges;for(var a=0,b=f.length;a<b;a++){f[a].dataIndex=-1}for(var a=0,b=g.count();a<b;a++){f[g.getRawIndex(a)].dataIndex=a}c.filterSelf(function(b){var a=e[c.getRawIndex(b)];return a.node1.dataIndex>=0&&a.node2.dataIndex>=0});for(var a=0,b=e.length;a<b;a++){e[a].dataIndex=-1}for(var a=0,b=c.count();a<b;a++){e[c.getRawIndex(a)].dataIndex=a}};F.clone=function(){var b=new cp(this._directed);var c=this.nodes;var f=this.edges;for(var a=0;a<c.length;a++){b.addNode(c[a].id,c[a].dataIndex)}for(var a=0;a<f.length;a++){var e=f[a];b.addEdge(e.node1.id,e.node2.id,e.dataIndex)}return b};function Node(b,a){this.id=b==null?'':b;this.inEdges=[];this.outEdges=[];this.edges=[];this.hostGraph;this.dataIndex=a==null?-1:a}Node.prototype={constructor:Node,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(c){if(this.dataIndex<0){return}var b=this.hostGraph;var a=b.data.getItemModel(this.dataIndex);return a.getModel(c)}};function Edge(b,c,a){this.node1=b;this.node2=c;this.dataIndex=a==null?-1:a}Edge.prototype.getModel=function(c){if(this.dataIndex<0){return}var b=this.hostGraph;var a=b.edgeData.getItemModel(this.dataIndex);return a.getModel(c)};var f6=function(b,a){return {getValue:function(e){var c=this[b][a];return c.get(c.getDimension(e||'value'),this.dataIndex)},setVisual:function(e,c){this.dataIndex>=0&&this[b][a].setItemVisual(this.dataIndex,e,c)},getVisual:function(e,c){return this[b][a].getItemVisual(this.dataIndex,e,c)},setLayout:function(e,c){this.dataIndex>=0&&this[b][a].setItemLayout(this.dataIndex,e,c)},getLayout:function(){return this[b][a].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[b][a].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[b][a].getRawIndex(this.dataIndex)}}};mixin(Node,f6('hostGraph','data'));mixin(Edge,f6('hostGraph','edgeData'));cp.Node=Node;cp.Edge=Edge;enableClassCheck(Node);enableClassCheck(Edge);var gc=function(c,r,f,u,m){var e=new cp(u);for(var a=0;a<c.length;a++){e.addNode(retrieve(c[a].id,c[a].name,a),a)}var l=[];var n=[];var o=0;for(var a=0;a<r.length;a++){var g=r[a];var p=g.source;var q=g.target;if(e.addEdge(p,q,o)){n.push(g);l.push(retrieve(g.id,p+' > '+q));o++}}var j=f.get('coordinateSystem');var b;if(j==='cartesian2d'||j==='polar'){b=createListFromArray(c,f)}else {var i=CoordinateSystemManager.get(j);var h=i&&i.type!=='view'?i.dimensions||[]:[];if(indexOf(h,'value')<0){h.concat(['value'])}var t=bl(c,{coordDimensions:h});b=new s(t,f);b.initData(c)}var k=new s(['value'],f);k.initData(n,l);m&&m(b,k);linkList({mainData:b,struct:e,structAttr:'graph',datas:{node:b,edge:k},datasAttr:{node:'data',edge:'edgeData'}});e.update();return e};var b0=extendSeriesModel({type:'series.graph',init:function(a){b0.superApply(this,'init',arguments);this.legendDataProvider=function(){return this._categoriesData};this.fillDataTextStyle(a.edges||a.links);this._updateCategoriesData()},mergeOption:function(a){b0.superApply(this,'mergeOption',arguments);this.fillDataTextStyle(a.edges||a.links);this._updateCategoriesData()},mergeDefaultAndTheme:function(a){b0.superApply(this,'mergeDefaultAndTheme',arguments);defaultEmphasis(a,['edgeLabel'],['show'])},getInitialData:function(a,c){var e=a.edges||a.links||[];var f=a.data||a.nodes||[];var b=this;if(f&&e){return gc(f,e,this,!0,beforeLink).data}function beforeLink(j,i){j.wrapMethod('getItemModel',function(e){var g=b._categoriesModels;var h=e.getShallow('category');var f=g[h];if(f){f.parentModel=e.parentModel;e.parentModel=f}return e});var f=b.getModel('edgeLabel');var h=new Model({label:f.option},f.parentModel,c);var e=b.getModel('emphasis.edgeLabel');var g=new Model({emphasis:{label:e.option}},e.parentModel,c);i.wrapMethod('getItemModel',function(b){b.customizeGetParent(edgeGetParent);return b});function edgeGetParent(b){b=this.parsePath(b);return b&&b[0]==='label'?h:b&&b[0]==='emphasis'&&b[1]==='label'?g:this.parentModel}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(f,j,g){if(g==='edge'){var b=this.getData();var h=this.getDataParams(f,g);var i=b.graph.getEdgeByIndex(f);var c=b.getName(i.node1.dataIndex);var e=b.getName(i.node2.dataIndex);var a=[];c!=null&&a.push(c);e!=null&&a.push(e);a=encodeHTML(a.join(' > '));if(h.value){a+=' : '+encodeHTML(h.value)}return a}else {return b0.superApply(this,'formatTooltip',arguments)}},_updateCategoriesData:function(){var b=map(this.option.categories||[],function(a){return a.value!=null?a:extend({value:0},a)});var a=new s(['value'],this);a.initData(b);this._categoriesData=a;this._categoriesModels=a.mapArray(function(b){return a.getItemModel(b,!0)})},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a},isAnimationEnabled:function(){return b0.superCall(this,'isAnimationEnabled')&&!(this.get('layout')==='force'&&this.get('force.layoutAnimation'))},defaultOption:{zlevel:0,z:2,coordinateSystem:'view',legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:0.1,friction:0.6,edgeLength:30,layoutAnimation:!0},left:'center',top:'center',symbol:'circle',symbolSize:10,edgeSymbol:['none','none'],edgeSymbolSize:10,edgeLabel:{position:'middle'},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:0.6,label:{show:!1,formatter:'{b}'},itemStyle:{},lineStyle:{color:'#aaa',width:1,curveness:0,opacity:0.5},emphasis:{label:{show:!0}}}});var gJ=B.prototype;var ei=cZ.prototype;function isLine(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var nR=extendShape({type:'ec-line',style:{stroke:'#000',fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(b,a){this[isLine(a)?'_buildPathLine':'_buildPathCurve'](b,a)},_buildPathLine:gJ.buildPath,_buildPathCurve:ei.buildPath,pointAt:function(a){return this[isLine(this.shape)?'_pointAtLine':'_pointAtCurve'](a)},_pointAtLine:gJ.pointAt,_pointAtCurve:ei.pointAt,tangentAt:function(c){var a=this.shape;var b=isLine(a)?[a.x2-a.x1,a.y2-a.y1]:this._tangentAtCurve(c);return normalize(b,b)},_tangentAtCurve:ei.tangentAt});var d8=['fromSymbol','toSymbol'];function makeSymbolTypeKey(a){return '_'+a+'Type'}function createSymbol$1(e,c,f){var h=c.getItemVisual(f,'color');var b=c.getItemVisual(f,e);var a=c.getItemVisual(f,e+'Size');if(!b||b==='none'){return}if(!isArray(a)){a=[a,a]}var g=createSymbol(b,-a[0]/2,-a[1]/2,a[0],a[1],h);g.name=e;return g}function createLine(b){var a=new nR({name:'line',subPixelOptimize:!0});setLinePoints(a.shape,b);return a}function setLinePoints(a,b){a.x1=b[0][0];a.y1=b[0][1];a.x2=b[1][0];a.y2=b[1][1];a.percent=1;var c=b[2];if(c){a.cpx1=c[0];a.cpy1=c[1]}else {a.cpx1=NaN;a.cpy1=NaN}}function updateSymbolAndLabelBeforeLineUpdate(){var q=this;var l=q.childOfName('fromSymbol');var m=q.childOfName('toSymbol');var c=q.childOfName('label');if(!l&&!m&&c.ignore){return}var e=1;var k=this.parent;while(k){if(k.scale){e/=k.scale[0]}k=k.parent}var f=q.childOfName('line');if(!this.__dirty&&!f.__dirty){return}var i=f.shape.percent;var n=f.pointAt(0);var j=f.pointAt(i);var a=sub([],j,n);normalize(a,a);if(l){l.attr('position',n);var b=f.tangentAt(0);l.attr('rotation',Math.PI/2-Math.atan2(b[1],b[0]));l.attr('scale',[e*i,e*i])}if(m){m.attr('position',j);var b=f.tangentAt(1);m.attr('rotation',-Math.PI/2-Math.atan2(b[1],b[0]));m.attr('scale',[e*i,e*i])}if(!c.ignore){c.attr('position',j);var p;var r;var o;var h=5*e;if(c.__position==='end'){p=[a[0]*h+j[0],a[1]*h+j[1]];r=a[0]>0.8?'left':a[0]<-0.8?'right':'center';o=a[1]>0.8?'top':a[1]<-0.8?'bottom':'middle'}else {if(c.__position==='middle'){var t=i/2;var b=f.tangentAt(t);var g=[b[1],-b[0]];var u=f.pointAt(t);if(g[1]>0){g[0]=-g[0];g[1]=-g[1]}p=[u[0]+g[0]*h,u[1]+g[1]*h];r='center';o='bottom';var s=-Math.atan2(b[1],b[0]);if(j[0]<n[0]){s=Math.PI+s}c.attr('rotation',s)}else {p=[-a[0]*h+n[0],-a[1]*h+n[1]];r=a[0]>0.8?'right':a[0]<-0.8?'left':'center';o=a[1]>0.8?'bottom':a[1]<-0.8?'top':'middle'}}c.attr({style:{textVerticalAlign:c.__verticalAlign||o,textAlign:c.__textAlign||r},position:p,scale:[e,e]})}}function Line$1(c,e,a){b.call(this);this._createLine(c,e,a)}var aD=Line$1.prototype;aD.beforeUpdate=updateSymbolAndLabelBeforeLineUpdate;aD._createLine=function(a,b,g){var f=a.hostModel;var h=a.getItemLayout(b);var c=createLine(h);c.shape.percent=0;initProps(c,{shape:{percent:1}},f,b);this.add(c);var i=new e({name:'label',lineLabelOriginalOpacity:1});this.add(i);each$1(d8,function(c){var e=createSymbol$1(c,a,b);this.add(e);this[makeSymbolTypeKey(c)]=a.getItemVisual(b,c)},this);this._updateCommonStl(a,b,g)};aD.updateData=function(a,b,f){var e=a.hostModel;var h=this.childOfName('line');var g=a.getItemLayout(b);var c={shape:{}};setLinePoints(c.shape,g);updateProps(h,c,e,b);each$1(d8,function(c){var e=a.getItemVisual(b,c);var g=makeSymbolTypeKey(c);if(this[g]!==e){this.remove(this.childOfName(c));var h=createSymbol$1(c,a,b);this.add(h)}this[g]=e},this);this._updateCommonStl(a,b,f)};aD._updateCommonStl=function(b,f,a){var m=b.hostModel;var v=this.childOfName('line');var o=a&&a.lineStyle;var r=a&&a.hoverLineStyle;var h=a&&a.labelModel;var e=a&&a.hoverLabelModel;if(!a||b.hasItemOption){var i=b.getItemModel(f);o=i.getModel('lineStyle').getLineStyle();r=i.getModel('emphasis.lineStyle').getLineStyle();h=i.getModel('label');e=i.getModel('emphasis.label')}var n=b.getItemVisual(f,'color');var s=retrieve3(b.getItemVisual(f,'opacity'),o.opacity,1);v.useStyle(defaults({strokeNoScale:!0,fill:'none',stroke:n,opacity:s},o));v.hoverStyle=r;each$1(d8,function(e){var c=this.childOfName(e);if(c){c.setColor(n);c.setStyle({opacity:s})}},this);var p=h.getShallow('show');var k=e.getShallow('show');var c=this.childOfName('label');var q;var g;if(p||k){q=n||'#000';g=m.getFormattedLabel(f,'normal',b.dataType);if(g==null){var j=m.getRawValue(f);g=j==null?b.getName(f):isFinite(j)?round$1(j):j}}var u=p?g:null;var l=k?retrieve2(m.getFormattedLabel(f,'emphasis',b.dataType),g):null;var t=c.style;if(u!=null||l!=null){setTextStyle(c.style,h,{text:u},{autoColor:q});c.__textAlign=t.textAlign;c.__verticalAlign=t.textVerticalAlign;c.__position=h.get('position')||'middle'}if(l!=null){c.hoverStyle={text:l,textFill:e.getTextColor(!0),fontStyle:e.getShallow('fontStyle'),fontWeight:e.getShallow('fontWeight'),fontSize:e.getShallow('fontSize'),fontFamily:e.getShallow('fontFamily')}}else {c.hoverStyle={text:null}}c.ignore=!p&&!k;setHoverStyle(this)};aD.highlight=function(){this.trigger('emphasis')};aD.downplay=function(){this.trigger('normal')};aD.updateLayout=function(a,b){this.setLinePoints(a.getItemLayout(b))};aD.setLinePoints=function(b){var a=this.childOfName('line');setLinePoints(a.shape,b);a.dirty()};inherits(Line$1,b);function LineDraw(a){this._ctor=a||Line$1;this.group=new b()}var aY=LineDraw.prototype;aY.isPersistent=function(){return !0};aY.updateData=function(a){var b=this;var f=b.group;var c=b._lineData;b._lineData=a;if(!c){f.removeAll()}var e=makeSeriesScope$1(a);a.diff(c).add(function(c){doAdd(b,a,c,e)}).update(function(f,g){doUpdate(b,c,a,g,f,e)}).remove(function(b){f.remove(c.getItemGraphicEl(b))}).execute()};function doAdd(c,a,b,f){var g=a.getItemLayout(b);if(!lineNeedsDraw(g)){return}var e=new c._ctor(a,b,f);a.setItemGraphicEl(b,e);c.group.add(e)}function doUpdate(e,g,b,h,c,f){var a=g.getItemGraphicEl(h);if(!lineNeedsDraw(b.getItemLayout(c))){e.group.remove(a);return}if(!a){a=new e._ctor(b,c,f)}else {a.updateData(b,c,f)}b.setItemGraphicEl(c,a);e.group.add(a)}aY.updateLayout=function(){var a=this._lineData;if(!a){return}a.eachItemGraphicEl(function(c,b){c.updateLayout(a,b)},this)};aY.incrementalPrepareUpdate=function(a){this._seriesScope=makeSeriesScope$1(a);this._lineData=null;this.group.removeAll()};aY.incrementalUpdate=function(e,b){function updateIncrementalAndHover(a){if(!a.isGroup){a.incremental=a.useHoverLayer=!0}}for(var a=e.start;a<e.end;a++){var f=b.getItemLayout(a);if(lineNeedsDraw(f)){var c=new this._ctor(b,a,this._seriesScope);c.traverse(updateIncrementalAndHover);this.group.add(c);b.setItemGraphicEl(a,c)}}};function makeSeriesScope$1(b){var a=b.hostModel;return {lineStyle:a.getModel('lineStyle').getLineStyle(),hoverLineStyle:a.getModel('emphasis.lineStyle').getLineStyle(),labelModel:a.getModel('label'),hoverLabelModel:a.getModel('emphasis.label')}}aY.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};aY._clearIncremental=function(){var a=this._incremental;if(a){a.clearDisplaybles()}};function isPointNaN(a){return isNaN(a[0])||isNaN(a[1])}function lineNeedsDraw(a){return !isPointNaN(a[0])&&!isPointNaN(a[1])}function getNodeGlobalScale(b){var a=b.coordinateSystem;if(a.type!=='view'){return 1}var e=b.option.nodeScaleRatio;var c=a.scale;var f=c&&c[0]||1;var h=a.getZoom();var g=(h-1)*e+1;return g/f}function getSymbolSize$1(b){var a=b.getVisual('symbolSize');if(a instanceof Array){a=(a[0]+a[1])/2}return +a}var fW=[];var fX=[];var fY=[];var br=quadraticAt;var eU=az;var h8=Math.abs;function intersectCurveCircle(j,k,m){var c=j[0];var e=j[1];var f=j[2];var o=Infinity;var a;var i=m*m;var b=0.1;for(var h=0.1;h<=0.9;h+=0.1){fW[0]=br(c[0],e[0],f[0],h);fW[1]=br(c[1],e[1],f[1],h);var g=h8(eU(fW,k)-i);if(g<o){o=g;a=h}}for(var p=0;p<32;p++){var n=a+b;fX[0]=br(c[0],e[0],f[0],a);fX[1]=br(c[1],e[1],f[1],a);fY[0]=br(c[0],e[0],f[0],n);fY[1]=br(c[1],e[1],f[1],n);var g=eU(fX,k)-i;if(h8(g)<0.01){break}var l=eU(fY,k)-i;b/=2;if(g<0){if(l>=0){a=a+b}else {a=a-b}}else {if(l>=0){a=a-b}else {a=a+b}}}return a}var e0=function(h,e){var b=[];var g=quadraticSubdivide;var a=[[],[],[]];var c=[[],[]];var f=[];e/=2;h.eachEdge(function(l,p){var i=l.getLayout();var n=l.getVisual('fromSymbol');var o=l.getVisual('toSymbol');if(!i.__original){i.__original=[clone$1(i[0]),clone$1(i[1])];if(i[2]){i.__original.push(clone$1(i[2]))}}var j=i.__original;if(i[2]!=null){copy(a[0],j[0]);copy(a[1],j[2]);copy(a[2],j[1]);if(n&&n!=='none'){var k=getSymbolSize$1(l.node1);var m=intersectCurveCircle(a,j[0],k*e);g(a[0][0],a[1][0],a[2][0],m,b);a[0][0]=b[3];a[1][0]=b[4];g(a[0][1],a[1][1],a[2][1],m,b);a[0][1]=b[3];a[1][1]=b[4]}if(o&&o!=='none'){var k=getSymbolSize$1(l.node2);var m=intersectCurveCircle(a,j[1],k*e);g(a[0][0],a[1][0],a[2][0],m,b);a[1][0]=b[1];a[2][0]=b[2];g(a[0][1],a[1][1],a[2][1],m,b);a[1][1]=b[1];a[2][1]=b[2]}copy(i[0],a[0]);copy(i[1],a[2]);copy(i[2],a[1])}else {copy(c[0],j[0]);copy(c[1],j[1]);sub(f,c[1],c[0]);normalize(f,f);if(n&&n!=='none'){var k=getSymbolSize$1(l.node1);scaleAndAdd(c[0],c[0],f,k*e)}if(o&&o!=='none'){var k=getSymbolSize$1(l.node2);scaleAndAdd(c[1],c[1],f,-k*e)}copy(i[0],c[0]);copy(i[1],c[1])}})};var bn='__focusNodeAdjacency';var bi='__unfocusNodeAdjacency';var aU=['itemStyle','opacity'];var cJ=['lineStyle','opacity'];function getItemOpacity(b,c){var a=b.getVisual('opacity');return a!=null?a:b.getModel().get(c)}function fadeOutItem(e,f,b){var c=e.getGraphicEl();var a=getItemOpacity(e,f);if(b!=null){a==null&&(a=1);a*=b}c.downplay&&c.downplay();c.traverse(function(c){if(!c.isGroup){var g=c.lineLabelOriginalOpacity;if(g==null||b!=null){g=a}c.setStyle('opacity',g)}})}function fadeInItem(b,c){var e=getItemOpacity(b,c);var a=b.getGraphicEl();a.traverse(function(a){!a.isGroup&&a.setStyle('opacity',e)});a.highlight&&a.highlight()}extendChartView({type:'graph',init:function(f,e){var b=new SymbolDraw();var c=new LineDraw();var a=this.group;this._controller=new RoamController(e.getZr());this._controllerHost={target:a};a.add(b.group);a.add(c.group);this._symbolDraw=b;this._lineDraw=c;this._firstRender=!0},render:function(a,o,e){var f=a.coordinateSystem;this._model=a;var l=this._symbolDraw;var n=this._lineDraw;var i=this.group;if(f.type==='view'){var h={position:f.position,scale:f.scale};if(this._firstRender){i.attr(h)}else {updateProps(i,h,a)}}e0(a.getGraph(),getNodeGlobalScale(a));var b=a.getData();l.updateData(b);var m=a.getEdgeData();n.updateData(m);this._updateNodeAndLinkScale();this._updateController(a,o,e);clearTimeout(this._layoutTimeout);var c=a.forceLayout;var g=a.get('force.layoutAnimation');if(c){this._startForceLayoutIteration(c,g)}b.eachItemGraphicEl(function(f,h){var j=b.getItemModel(h);f.off('drag').off('dragend');var i=j.get('draggable');if(i){f.on('drag',function(){if(c){c.warmUp();!this._layouting&&this._startForceLayoutIteration(c,g);c.setFixed(h);b.setItemLayout(h,f.position)}},this).on('dragend',function(){if(c){c.setUnfixed(h)}},this)}f.setDraggable(i&&c);f[bn]&&f.off('mouseover',f[bn]);f[bi]&&f.off('mouseout',f[bi]);if(j.get('focusNodeAdjacency')){f.on('mouseover',f[bn]=function(){e.dispatchAction({type:'focusNodeAdjacency',seriesId:a.id,dataIndex:f.dataIndex})});f.on('mouseout',f[bi]=function(){e.dispatchAction({type:'unfocusNodeAdjacency',seriesId:a.id})})}},this);b.graph.eachEdge(function(c){var b=c.getGraphicEl();b[bn]&&b.off('mouseover',b[bn]);b[bi]&&b.off('mouseout',b[bi]);if(c.getModel().get('focusNodeAdjacency')){b.on('mouseover',b[bn]=function(){e.dispatchAction({type:'focusNodeAdjacency',seriesId:a.id,edgeDataIndex:c.dataIndex})});b.on('mouseout',b[bi]=function(){e.dispatchAction({type:'unfocusNodeAdjacency',seriesId:a.id})})}});var k=a.get('layout')==='circular'&&a.get('circular.rotateLabel');var j=b.getLayout('cx');var p=b.getLayout('cy');b.eachItemGraphicEl(function(q,l){var n=b.getItemModel(l);var m=n.get('label.rotate')||0;var h=q.getSymbolPath();if(k){var f=b.getItemLayout(l);var c=Math.atan2(f[1]-p,f[0]-j);if(c<0){c=Math.PI*2+c}var i=f[0]<j;if(i){c=c-Math.PI}var g=i?'left':'right';modifyLabelStyle(h,{textRotation:-c,textPosition:g,textOrigin:'center'},{textPosition:g})}else {modifyLabelStyle(h,{textRotation:m*=Math.PI/180})}});this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},focusNodeAdjacency:function(i,j,k,e){var h=this._model.getData();var b=h.graph;var g=e.dataIndex;var f=e.edgeDataIndex;var c=b.getNodeByIndex(g);var a=b.getEdgeByIndex(f);if(!c&&!a){return}b.eachNode(function(a){fadeOutItem(a,aU,0.1)});b.eachEdge(function(a){fadeOutItem(a,cJ,0.1)});if(c){fadeInItem(c,aU);each$1(c.edges,function(a){if(a.dataIndex<0){return}fadeInItem(a,cJ);fadeInItem(a.node1,aU);fadeInItem(a.node2,aU)})}if(a){fadeInItem(a,cJ);fadeInItem(a.node1,aU);fadeInItem(a.node2,aU)}},unfocusNodeAdjacency:function(b,c,f,e){var a=this._model.getData().graph;a.eachNode(function(a){fadeOutItem(a,aU)});a.eachEdge(function(a){fadeOutItem(a,cJ)})},_startForceLayoutIteration:function(c,b){var a=this;(function step(){c.step(function(e){a.updateLayout(a._model);(a._layouting=!e)&&(b?a._layoutTimeout=setTimeout(step,16):step())})})()},_updateController:function(a,g,e){var c=this._controller;var b=this._controllerHost;var f=this.group;c.setPointerChecker(function(c,h,i){var b=f.getBoundingRect();b.applyTransform(f.transform);return b.contain(h,i)&&!onIrrelevantElement(c,e,a)});if(a.coordinateSystem.type!=='view'){c.disable();return}c.enable(a.get('roam'));b.zoomLimit=a.get('scaleLimit');b.zoom=a.coordinateSystem.getZoom();c.off('pan').off('zoom').on('pan',function(c){updateViewOnPan(b,c.dx,c.dy);e.dispatchAction({seriesId:a.id,type:'graphRoam',dx:c.dx,dy:c.dy})}).on('zoom',function(c){updateViewOnZoom(b,c.scale,c.originX,c.originY);e.dispatchAction({seriesId:a.id,type:'graphRoam',zoom:c.scale,originX:c.originX,originY:c.originY});this._updateNodeAndLinkScale();e0(a.getGraph(),getNodeGlobalScale(a));this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var a=this._model;var e=a.getData();var b=getNodeGlobalScale(a);var c=[b,b];e.eachItemGraphicEl(function(a,b){a.attr('scale',c)})},updateLayout:function(a){e0(a.getGraph(),getNodeGlobalScale(a));this._symbolDraw.updateLayout();this._lineDraw.updateLayout()},remove:function(a,b){this._symbolDraw&&this._symbolDraw.remove();this._lineDraw&&this._lineDraw.remove()}});registerAction({type:'focusNodeAdjacency',event:'focusNodeAdjacency',update:'series:focusNodeAdjacency'},function(){});registerAction({type:'unfocusNodeAdjacency',event:'unfocusNodeAdjacency',update:'series:unfocusNodeAdjacency'},function(){});var m3={type:'graphRoam',event:'graphRoam',update:'none'};registerAction(m3,function(a,b){b.eachComponent({mainType:'series',query:a},function(c){var f=c.coordinateSystem;var e=updateCenterAndZoom(f,a);c.setCenter&&c.setCenter(e.center);c.setZoom&&c.setZoom(e.zoom)})});var lq=function(b){var a=b.findComponents({mainType:'legend'});if(!a||!a.length){return}b.eachSeriesByType('graph',function(e){var c=e.getCategoriesData();var h=e.getGraph();var f=h.data;var g=c.mapArray(c.getName);f.filterSelf(function(j){var i=f.getItemModel(j);var c=i.getShallow('category');if(c!=null){if(typeof c==='number'){c=g[c]}for(var h=0;h<a.length;h++){if(!a[h].isSelected(c)){return !1}}}return !0})},this)};var lr=function(b){var a={};b.eachSeriesByType('graph',function(f){var c=f.getCategoriesData();var e=f.getData();var g={};c.each(function(e){var l=c.getName(e);g['ec-'+l]=e;var j=c.getItemModel(e);var m=j.get('itemStyle.color')||f.getColorFromPalette(l,a);c.setItemVisual(e,'color',m);var i=['opacity','symbol','symbolSize','symbolKeepAspect'];for(var h=0;h<i.length;h++){var k=j.getShallow(i[h],!0);if(k!=null){c.setItemVisual(e,i[h],k)}}});if(c.count()){e.each(function(j){var k=e.getItemModel(j);var a=k.getShallow('category');if(a!=null){if(typeof a==='string'){a=g['ec-'+a]}var i=['color','opacity','symbol','symbolSize','symbolKeepAspect'];for(var h=0;h<i.length;h++){if(e.getItemVisual(j,i[h],!0)==null){e.setItemVisual(j,i[h],c.getItemVisual(a,i[h]))}}}})}})};function normalize$1(a){if(!(a instanceof Array)){a=[a,a]}return a}var m9=function(a){a.eachSeriesByType('graph',function(c){var i=c.getGraph();var b=c.getEdgeData();var f=normalize$1(c.get('edgeSymbol'));var e=normalize$1(c.get('edgeSymbolSize'));var h='lineStyle.color'.split('.');var g='lineStyle.opacity'.split('.');b.setVisual('fromSymbol',f&&f[0]);b.setVisual('toSymbol',f&&f[1]);b.setVisual('fromSymbolSize',e&&e[0]);b.setVisual('toSymbolSize',e&&e[1]);b.setVisual('color',c.get(h));b.setVisual('opacity',c.get(g));b.each(function(m){var k=b.getItemModel(m);var e=i.getEdgeByIndex(m);var j=normalize$1(k.getShallow('symbol',!0));var f=normalize$1(k.getShallow('symbolSize',!0));var l=k.get(h);var n=k.get(g);switch(l){case 'source':l=e.node1.getVisual('color');break;case 'target':l=e.node2.getVisual('color');break;}j[0]&&e.setVisual('fromSymbol',j[0]);j[1]&&e.setVisual('toSymbol',j[1]);f[0]&&e.setVisual('fromSymbolSize',f[0]);f[1]&&e.setVisual('toSymbolSize',f[1]);e.setVisual('color',l);e.setVisual('opacity',n)})})};function simpleLayout$1(a){var b=a.coordinateSystem;if(b&&b.type!=='view'){return}var c=a.getGraph();c.eachNode(function(c){var b=c.getModel();c.setLayout([+b.get('x'),+b.get('y')])});simpleLayoutEdge(c)}function simpleLayoutEdge(a){a.eachEdge(function(e){var f=e.getModel().get('lineStyle.curveness')||0;var b=clone$1(e.node1.getLayout());var c=clone$1(e.node2.getLayout());var g=[b,c];if(+f){g.push([(b[0]+c[0])/2-(b[1]-c[1])*f,(b[1]+c[1])/2-(c[0]-b[0])*f])}e.setLayout(g)})}var mt=function(a,b){a.eachSeriesByType('graph',function(f){var k=f.get('layout');var h=f.coordinateSystem;if(h&&h.type!=='view'){var c=f.getData();var g=[];each$1(h.dimensions,function(e){g=g.concat(c.mapDimension(e,!0))});for(var e=0;e<c.count();e++){var l=[];var j=!1;for(var i=0;i<g.length;i++){var m=c.get(g[i],e);if(!isNaN(m)){j=!0}l.push(m)}if(j){c.setItemLayout(e,h.dataToPoint(l))}else {c.setItemLayout(e,[NaN,NaN])}}simpleLayoutEdge(c.graph)}else {if(!k||k==='none'){simpleLayout$1(f)}}})};var i8=Math.PI;var d1=[];function circularLayout$1(e,j){var b=e.coordinateSystem;if(b&&b.type!=='view'){return}var a=b.getBoundingRect();var c=e.getData();var i=c.graph;var f=a.width/2+a.x;var g=a.height/2+a.y;var k=Math.min(a.width,a.height)/2;var h=c.count();c.setLayout({cx:f,cy:g});if(!h){return}j8[j](e,b,i,c,k,f,g,h);i.eachEdge(function(b){var a=b.getModel().get('lineStyle.curveness')||0;var c=clone$1(b.node1.getLayout());var h=clone$1(b.node2.getLayout());var i;var k=(c[0]+h[0])/2;var l=(c[1]+h[1])/2;if(+a){a*=3;i=[f*a+k*(1-a),g*a+l*(1-a)]}b.setLayout([c,h,i])})}var j8={value:function(k,l,h,f,c,i,j,g){var a=0;var b=f.getSum('value');var e=Math.PI*2/(b||g);h.eachNode(function(n){var o=n.getValue('value');var m=e*(b?o:1)/2;a+=m;n.setLayout([c*Math.cos(a)+i,c*Math.sin(a)+j]);a+=m})},symbolSize:function(h,l,f,m,b,j,k,e){var c=0;d1.length=e;var i=getNodeGlobalScale(h);f.eachNode(function(n){var a=getSymbolSize$1(n);isNaN(a)&&(a=2);a<0&&(a=0);a*=i;var g=Math.asin(a/2/b);isNaN(g)&&(g=i8/2);d1[n.dataIndex]=g;c+=g*2});var g=(2*i8-c)/e/2;var a=0;f.eachNode(function(i){var c=g+d1[i.dataIndex];a+=c;i.setLayout([b*Math.cos(a)+j,b*Math.sin(a)+k]);a+=c})}};var ls=function(a){a.eachSeriesByType('graph',function(b){if(b.get('layout')==='circular'){circularLayout$1(b,'symbolSize')}})};var bs=scaleAndAdd;function forceLayout$1(a,h,c){var f=c.rect;var l=f.width;var k=f.height;var g=[f.x+l/2,f.y+k/2];var m=c.gravity==null?0.1:c.gravity;for(var i=0;i<a.length;i++){var e=a[i];if(!e.p){e.p=create(l*(Math.random()-0.5)+g[0],k*(Math.random()-0.5)+g[1])}e.pp=clone$1(e.p);e.edges=null}var j=c.friction==null?0.6:c.friction;var b=j;return {warmUp:function(){b=j*0.8},setFixed:function(b){a[b].fixed=!0},setUnfixed:function(b){a[b].fixed=!1},step:function(s){var f=[];var n=a.length;for(var e=0;e<h.length;e++){var o=h[e];if(o.ignoreForceLayout){continue}var k=o.n1;var i=o.n2;sub(f,i.p,k.p);var l=len(f)-o.d;var p=i.w/(k.w+i.w);if(isNaN(p)){p=0}normalize(f,f);!k.fixed&&bs(k.p,k.p,f,p*l*b);!i.fixed&&bs(i.p,i.p,f,-(1-p)*l*b)}for(var e=0;e<n;e++){var j=a[e];if(!j.fixed){sub(f,g,j.p);bs(j.p,j.p,f,m*b)}}for(var e=0;e<n;e++){var k=a[e];for(var q=e+1;q<n;q++){var i=a[q];sub(f,i.p,k.p);var l=len(f);if(l===0){set(f,Math.random()-0.5,Math.random()-0.5);l=1}var r=(k.rep+i.rep)/l/l;!k.fixed&&bs(k.pp,k.pp,f,r);!i.fixed&&bs(i.pp,i.pp,f,-r)}}var t=[];for(var e=0;e<n;e++){var j=a[e];if(!j.fixed){sub(t,j.p,j.pp);bs(j.p,j.p,t,b);copy(j.pp,j.p)}}b=b*0.992;s&&s(a,h,b<0.01)}}}var mI=function(a){a.eachSeriesByType('graph',function(b){var k=b.coordinateSystem;if(k&&k.type!=='view'){return}if(b.get('layout')==='force'){var l=b.preservedPoints||{};var g=b.getGraph();var e=g.data;var n=g.edgeData;var i=b.getModel('force');var m=i.get('initLayout');if(b.preservedPoints){e.each(function(c){var f=e.getId(c);e.setItemLayout(c,l[f]||[NaN,NaN])})}else {if(!m||m==='none'){simpleLayout$1(b)}else {if(m==='circular'){circularLayout$1(b,'value')}}}var p=e.getDataExtent('value');var o=n.getDataExtent('value');var f=i.get('repulsion');var c=i.get('edgeLength');if(!isArray(f)){f=[f,f]}if(!isArray(c)){c=[c,c]}c=[c[1],c[0]];var h=e.mapArray('value',function(i,h){var c=e.getItemLayout(h);var g=linearMap(i,p,f);if(isNaN(g)){g=(f[0]+f[1])/2}return {w:g,rep:g,fixed:e.getItemModel(h).get('fixed'),p:!c||isNaN(c[0])||isNaN(c[1])?null:c}});var r=n.mapArray('value',function(j,k){var e=g.getEdgeByIndex(k);var f=linearMap(j,o,c);if(isNaN(f)){f=(c[0]+c[1])/2}var i=e.getModel();return {n1:h[e.node1.dataIndex],n2:h[e.node2.dataIndex],d:f,curveness:i.get('lineStyle.curveness')||0,ignoreForceLayout:i.get('ignoreForceLayout')}});var k=b.coordinateSystem;var s=k.getBoundingRect();var j=forceLayout$1(h,r,{rect:s,gravity:i.get('gravity'),friction:i.get('friction')});var q=j.step;j.step=function(f){for(var c=0,i=h.length;c<i;c++){if(h[c].fixed){copy(h[c].p,g.getNodeByIndex(c).getLayout())}}q(function(m,o,q){for(var c=0,n=m.length;c<n;c++){if(!m[c].fixed){g.getNodeByIndex(c).setLayout(m[c].p)}l[e.getId(c)]=m[c].p}for(var c=0,n=o.length;c<n;c++){var k=o[c];var p=g.getEdgeByIndex(c);var i=k.n1.p;var j=k.n2.p;var h=p.getLayout();h=h?h.slice():[];h[0]=h[0]||[];h[1]=h[1]||[];copy(h[0],i);copy(h[1],j);if(+k.curveness){h[2]=[(i[0]+j[0])/2-(i[1]-j[1])*k.curveness,(i[1]+j[1])/2-(j[0]-i[0])*k.curveness]}p.setLayout(h)}f&&f(q)})};b.forceLayout=j;b.preservedPoints=l;j.step()}else {b.forceLayout=null}})};function getViewRect$1(c,b,e){var a=c.getBoxLayoutParams();a.aspect=e;return getLayoutRect(a,{width:b.getWidth(),height:b.getHeight()})}var m5=function(b,c){var a=[];b.eachSeriesByType('graph',function(h){var j=h.get('coordinateSystem');if(!j||j==='view'){var l=h.getData();var n=l.mapArray(function(e){var a=l.getItemModel(e);return [+a.get('x'),+a.get('y')]});var e=[];var g=[];fromPoints(n,e,g);if(g[0]-e[0]===0){g[0]+=1;e[0]-=1}if(g[1]-e[1]===0){g[1]+=1;e[1]-=1}var k=(g[0]-e[0])/(g[1]-e[1]);var f=getViewRect$1(h,c,k);if(isNaN(k)){e=[f.x,f.y];g=[f.x+f.width,f.y+f.height]}var q=g[0]-e[0];var p=g[1]-e[1];var o=f.width;var m=f.height;var i=h.coordinateSystem=new View();i.zoomLimit=h.get('scaleLimit');i.setBoundingRect(e[0],e[1],q,p);i.setViewRect(f.x,f.y,o,m);i.setCenter(h.get('center'));i.setZoom(h.get('zoom'));a.push(i)}});return a};registerProcessor(lq);registerVisual(a$('graph','circle',null));registerVisual(lr);registerVisual(m9);registerLayout(mt);registerLayout(Y.VISUAL.POST_CHART_LAYOUT,ls);registerLayout(mI);registerCoordinateSystem('graphView',{create:m5});var oW=l.extend({type:'series.gauge',getInitialData:function(b,a){return bm(this,['value'])},defaultOption:{zlevel:0,z:2,center:['50%','50%'],legendHoverLink:!0,radius:'75%',startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[0.2,'#91c7ae'],[0.8,'#63869e'],[1,'#c23531']],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:'#eee',width:2,type:'solid'}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:'#eee',width:1,type:'solid'}},axisLabel:{show:!0,distance:5,color:'auto'},pointer:{show:!0,length:'80%',width:8},itemStyle:{color:'auto'},title:{show:!0,offsetCenter:[0,'-40%'],color:'#333',fontSize:15},detail:{show:!0,backgroundColor:'rgba(0,0,0,0)',borderWidth:0,borderColor:'#ccc',width:100,height:null,padding:[5,10],offsetCenter:[0,'40%'],color:'auto',fontSize:30}}});var my=Path.extend({type:'echartsGaugePointer',shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,a){var f=Math.cos;var g=Math.sin;var h=a.r;var b=a.width;var c=a.angle;var i=a.x-f(c)*b*(b>=h/3?1:2);var j=a.y-g(c)*b*(b>=h/3?1:2);c=a.angle-Math.PI/2;e.moveTo(i,j);e.lineTo(a.x+f(c)*b,a.y+g(c)*b);e.lineTo(a.x+f(a.angle)*h,a.y+g(a.angle)*h);e.lineTo(a.x-f(c)*b,a.y-g(c)*b);e.lineTo(i,j);return}});function parsePosition(b,a){var c=b.get('center');var f=a.getWidth();var e=a.getHeight();var g=Math.min(f,e);var h=parsePercent$1(c[0],a.getWidth());var i=parsePercent$1(c[1],a.getHeight());var j=parsePercent$1(b.get('radius'),g/2);return {cx:h,cy:i,r:j}}function formatLabel(a,b){if(b){if(typeof b==='string'){a=b.replace('{value}',a!=null?a:'')}else {if(typeof b==='function'){a=b(a)}}}return a}var oC=Math.PI*2;var o_=Chart.extend({type:'gauge',render:function(a,e,b){this.group.removeAll();var c=a.get('axisLine.lineStyle.color');var f=parsePosition(a,b);this._renderMain(a,e,b,c,f)},dispose:function(){},_renderMain:function(b,i,j,a,e){var t=this.group;var n=b.getModel('axisLine');var m=n.getModel('lineStyle');var g=b.get('clockwise');var f=-b.get('startAngle')/180*Math.PI;var c=-b.get('endAngle')/180*Math.PI;var p=(c-f)%oC;var o=f;var q=m.get('width');var r=n.get('show');for(var k=0;r&&k<a.length;k++){var s=Math.min(Math.max(a[k][0],0),1);var c=f+p*s;var l=new aa({shape:{startAngle:o,endAngle:c,cx:e.cx,cy:e.cy,clockwise:g,r0:e.r-q,r:e.r},silent:!0});l.setStyle({fill:a[k][1]});l.setStyle(m.getLineStyle(['color','borderWidth','borderColor']));t.add(l);o=c}var h=function(f){if(f<=0){return a[0][1]}for(var c=0;c<a.length;c++){if(a[c][0]>=f&&(c===0?0:a[c-1][0])<f){return a[c][1]}}return a[c-1][1]};if(!g){var u=f;f=c;c=u}this._renderTicks(b,i,j,h,e,f,c,g);this._renderPointer(b,i,j,h,e,f,c,g);this._renderTitle(b,i,j,h,e);this._renderDetail(b,i,j,h,e)},_renderTicks:function(i,K,L,q,r,w,G,J){var s=this.group;var j=r.cx;var k=r.cy;var a=r.r;var D=+i.get('min');var H=+i.get('max');var o=i.getModel('splitLine');var n=i.getModel('axisTick');var m=i.getModel('axisLabel');var f=i.get('splitNumber');var p=n.get('splitNumber');var l=parsePercent$1(o.get('length'),a);var C=parsePercent$1(n.get('length'),a);var g=w;var E=(G-w)/f;var A=E/p;var u=o.getModel('lineStyle').getLineStyle();var v=n.getModel('lineStyle').getLineStyle();for(var h=0;h<=f;h++){var b=Math.cos(g);var c=Math.sin(g);if(o.get('show')){var x=new B({shape:{x1:b*a+j,y1:c*a+k,x2:b*(a-l)+j,y2:c*(a-l)+k},style:u,silent:!0});if(u.stroke==='auto'){x.setStyle({stroke:q(h/f)})}s.add(x)}if(m.get('show')){var I=formatLabel(round$1(h/f*(H-D)+D),m.get('formatter'));var y=m.get('distance');var F=q(h/f);s.add(new e({style:setTextStyle({},m,{text:I,x:b*(a-l-y)+j,y:c*(a-l-y)+k,textVerticalAlign:c<-0.4?'top':c>0.4?'bottom':'middle',textAlign:b<-0.4?'left':b>0.4?'right':'center'},{autoColor:F}),silent:!0}))}if(n.get('show')&&h!==f){for(var t=0;t<=p;t++){var b=Math.cos(g);var c=Math.sin(g);var z=new B({shape:{x1:b*a+j,y1:c*a+k,x2:b*(a-C)+j,y2:c*(a-C)+k},silent:!0,style:v});if(v.stroke==='auto'){z.setStyle({stroke:q((h+t/p)/f)})}s.add(z);g+=A}g-=A}else {g+=E}}},_renderPointer:function(b,n,o,l,e,j,k,m){var f=this.group;var c=this._data;if(!b.get('pointer.show')){c&&c.eachItemGraphicEl(function(a){f.remove(a)});return}var g=[+b.get('min'),+b.get('max')];var i=[j,k];var a=b.getData();var h=a.mapDimension('value');a.diff(c).add(function(p){var c=new my({shape:{angle:j}});initProps(c,{shape:{angle:linearMap(a.get(h,p),g,i,!0)}},b);f.add(c);a.setItemGraphicEl(p,c)}).update(function(q,r){var p=c.getItemGraphicEl(r);updateProps(p,{shape:{angle:linearMap(a.get(h,q),g,i,!0)}},b);f.add(p);a.setItemGraphicEl(q,p)}).remove(function(g){var a=c.getItemGraphicEl(g);f.remove(a)}).execute();a.eachItemGraphicEl(function(c,p){var f=a.getItemModel(p);var i=f.getModel('pointer');c.setShape({x:e.cx,y:e.cy,width:parsePercent$1(i.get('width'),e.r),r:parsePercent$1(i.get('length'),e.r)});c.useStyle(f.getModel('itemStyle').getItemStyle());if(c.style.fill==='auto'){c.setStyle('fill',l(linearMap(a.get(h,p),g,[0,1],!0)))}setHoverStyle(c,f.getModel('emphasis.itemStyle').getItemStyle())});this._data=a},_renderTitle:function(a,p,q,i,b){var g=a.getData();var j=g.mapDimension('value');var c=a.getModel('title');if(c.get('show')){var f=c.get('offsetCenter');var n=b.cx+parsePercent$1(f[0],b.r);var o=b.cy+parsePercent$1(f[1],b.r);var l=+a.get('min');var k=+a.get('max');var m=a.getData().get(j,0);var h=i(linearMap(m,[l,k],[0,1],!0));this.group.add(new e({silent:!0,style:setTextStyle({},c,{x:n,y:o,text:g.getName(0),textAlign:'center',textVerticalAlign:'middle'},{autoColor:h,forceRich:!0})}))}},_renderDetail:function(c,q,r,l,b){var a=c.getModel('detail');var n=+c.get('min');var m=+c.get('max');if(a.get('show')){var f=a.get('offsetCenter');var o=b.cx+parsePercent$1(f[0],b.r);var p=b.cy+parsePercent$1(f[1],b.r);var i=parsePercent$1(a.get('width'),b.r);var g=parsePercent$1(a.get('height'),b.r);var j=c.getData();var h=j.get(j.mapDimension('value'),0);var k=l(linearMap(h,[n,m],[0,1],!0));this.group.add(new e({silent:!0,style:setTextStyle({},a,{x:o,y:p,text:formatLabel(h,a.get('formatter')),textWidth:isNaN(i)?null:i,textHeight:isNaN(g)?null:g,textAlign:'center',textVerticalAlign:'middle'},{autoColor:k,forceRich:!0})}))}}});var hz=extendSeriesModel({type:'series.funnel',init:function(a){hz.superApply(this,'init',arguments);this.legendDataProvider=function(){return this.getRawData()};this._defaultLabelLine(a)},getInitialData:function(b,a){return bm(this,['value'])},_defaultLabelLine:function(a){defaultEmphasis(a,'labelLine',['show']);var c=a.labelLine;var b=a.emphasis.labelLine;c.show=c.show&&a.label.show;b.show=b.show&&a.emphasis.label.show},getDataParams:function(c){var b=this.getData();var a=hz.superCall(this,'getDataParams',c);var e=b.mapDimension('value');var f=b.getSum(e);a.percent=!f?0:+(b.get(e,c)/f*100).toFixed(2);a.$vars.push('percent');return a},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:'0%',maxSize:'100%',sort:'descending',gap:0,funnelAlign:'center',label:{show:!0,position:'outer'},labelLine:{show:!0,length:20,lineStyle:{width:1,type:'solid'}},itemStyle:{borderColor:'#fff',borderWidth:1},emphasis:{label:{show:!0}}}});function FunnelPiece(g,h){b.call(this);var f=new I();var a=new L();var c=new e();this.add(f);this.add(a);this.add(c);this.highDownOnUpdate=function(e,b){if(b==='emphasis'){a.ignore=a.hoverIgnore;c.ignore=c.hoverIgnore}else {a.ignore=a.normalIgnore;c.ignore=c.normalIgnore}};this.updateData(g,h,!0)}var gO=FunnelPiece.prototype;var kC=['itemStyle','opacity'];gO.updateData=function(c,b,i){var a=this.childAt(0);var g=c.hostModel;var k=c.getItemModel(b);var h=c.getItemLayout(b);var e=c.getItemModel(b).get(kC);e=e==null?1:e;a.useStyle({});if(i){a.setShape({points:h.points});a.setStyle({opacity:0});initProps(a,{style:{opacity:e}},g,b)}else {updateProps(a,{style:{opacity:e},shape:{points:h.points}},g,b)}var f=k.getModel('itemStyle');var j=c.getItemVisual(b,'color');a.setStyle(defaults({lineJoin:'round',fill:j},f.getItemStyle(['opacity'])));a.hoverStyle=f.getModel('emphasis').getItemStyle();this._updateLabel(c,b);setHoverStyle(this)};gO._updateLabel=function(f,b){var c=this.childAt(1);var e=this.childAt(2);var l=f.hostModel;var g=f.getItemModel(b);var n=f.getItemLayout(b);var a=n.label;var h=f.getItemVisual(b,'color');updateProps(c,{shape:{points:a.linePoints||a.linePoints}},l,b);updateProps(e,{style:{x:a.x,y:a.y}},l,b);e.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var m=g.getModel('label');var j=g.getModel('emphasis.label');var k=g.getModel('labelLine');var i=g.getModel('emphasis.labelLine');var h=f.getItemVisual(b,'color');setLabelStyle(e.style,e.hoverStyle={},m,j,{labelFetcher:f.hostModel,labelDataIndex:b,defaultText:f.getName(b),autoColor:h,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign});e.ignore=e.normalIgnore=!m.get('show');e.hoverIgnore=!j.get('show');c.ignore=c.normalIgnore=!k.get('show');c.hoverIgnore=!i.get('show');c.setStyle({stroke:h});c.setStyle(k.getModel('lineStyle').getLineStyle());c.hoverStyle=i.getModel('lineStyle').getLineStyle()};inherits(FunnelPiece,b);var oY=Chart.extend({type:'funnel',render:function(e,f,g){var a=e.getData();var b=this._data;var c=this.group;a.diff(b).add(function(h){var b=new FunnelPiece(a,h);a.setItemGraphicEl(h,b);c.add(b)}).update(function(i,j){var h=b.getItemGraphicEl(j);h.updateData(a,i);c.add(h);a.setItemGraphicEl(i,h)}).remove(function(h){var a=b.getItemGraphicEl(h);c.remove(a)}).execute();this._data=a},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});function getViewRect$2(b,a){return getLayoutRect(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function getSortedIndices(f,c){var h=f.mapDimension('value');var a=f.mapArray(h,function(a){return a});var b=[];var g=c==='ascending';for(var e=0,i=f.count();e<i;e++){b[e]=e}if(typeof c==='function'){b.sort(c)}else {if(c!=='none'){b.sort(function(b,e){return g?a[b]-a[e]:a[e]-a[b]})}}return b}function labelLayout$1(a){a.each(function(p){var n=a.getItemModel(p);var s=n.getModel('label');var f=s.get('position');var r=n.getModel('labelLine');var o=a.getItemLayout(p);var b=o.points;var m=f==='inner'||f==='inside'||f==='center'||f==='insideLeft'||f==='insideRight';var h;var g;var k;var l;if(m){if(f==='insideLeft'){g=(b[0][0]+b[3][0])/2+5;k=(b[0][1]+b[3][1])/2;h='left'}else {if(f==='insideRight'){g=(b[1][0]+b[2][0])/2-5;k=(b[1][1]+b[2][1])/2;h='right'}else {g=(b[0][0]+b[1][0]+b[2][0]+b[3][0])/4;k=(b[0][1]+b[1][1]+b[2][1]+b[3][1])/4;h='center'}}l=[[g,k],[g,k]]}else {var c;var i;var e;var j=r.get('length');if(f==='left'){c=(b[3][0]+b[0][0])/2;i=(b[3][1]+b[0][1])/2;e=c-j;g=e-5;h='right'}else {if(f==='right'){c=(b[1][0]+b[2][0])/2;i=(b[1][1]+b[2][1])/2;e=c+j;g=e+5;h='left'}else {if(f==='rightTop'){c=b[1][0];i=b[1][1];e=c+j;g=e+5;h='top'}else {if(f==='rightBottom'){c=b[2][0];i=b[2][1];e=c+j;g=e+5;h='bottom'}else {if(f==='leftTop'){c=b[0][0];i=b[1][1];e=c-j;g=e-5;h='right'}else {if(f==='leftBottom'){c=b[3][0];i=b[2][1];e=c-j;g=e-5;h='right'}else {c=(b[1][0]+b[2][0])/2;i=(b[1][1]+b[2][1])/2;e=c+j;g=e+5;h='left'}}}}}}var q=i;l=[[c,i],[e,q]];k=q}o.label={linePoints:l,x:g,y:k,verticalAlign:'middle',textAlign:h,inside:m}})}var l9=function(a,b,c){a.eachSeriesByType('funnel',function(f){var g=f.getData();var t=g.mapDimension('value');var n=f.get('sort');var e=getViewRect$2(f,b);var i=getSortedIndices(g,n);var v=[parsePercent$1(f.get('minSize'),e.width),parsePercent$1(f.get('maxSize'),e.width)];var s=g.getDataExtent(t);var q=f.get('min');var p=f.get('max');if(q==null){q=Math.min(s[0],0)}if(p==null){p=s[1]}var u=f.get('funnelAlign');var j=f.get('gap');var m=(e.height-j*(g.count()-1))/g.count();var l=e.y;var r=function(k,j){var l=g.get(t,k)||0;var i=linearMap(l,[q,p],v,!0);var h;switch(u){case 'left':h=e.x;break;case 'center':h=e.x+(e.width-i)/2;break;case 'right':h=e.x+e.width-i;break;}return [[h,j],[h+i,j]]};if(n==='ascending'){m=-m;j=-j;l+=e.height;i=i.reverse()}for(var k=0;k<i.length;k++){var o=i[k];var x=i[k+1];var w=g.getItemModel(o);var h=w.get('itemStyle.height');if(h==null){h=m}else {h=parsePercent$1(h,e.height);if(n==='ascending'){h=-h}}var y=r(o,l);var z=r(x,l+h);l+=h+j;g.setItemLayout(o,{points:y.concat(z.slice().reverse())})}labelLayout$1(g)})};registerVisual(df('funnel'));registerLayout(l9);registerProcessor(b6('funnel'));var j1=function(a){createParallelIfNeeded(a);mergeAxisOptionFromParallel(a)};function createParallelIfNeeded(a){if(a.parallel){return}var b=!1;each$1(a.series,function(c){if(c&&c.type==='parallel'){b=!0}});if(b){a.parallel=[{}]}}function mergeAxisOptionFromParallel(a){var b=normalizeToArray(a.parallelAxis);each$1(b,function(c){if(!isObject$1(c)){return}var e=c.parallelIndex||0;var b=normalizeToArray(a.parallel)[e];if(b&&b.parallelAxisDefault){merge(c,b.parallelAxisDefault,!1)}})}var cV=function(f,e,a,c,b){q.call(this,f,e,a);this.type=c||'value';this.axisIndex=b};cV.prototype={constructor:cV,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get('layout')!=='horizontal'}};inherits(cV,q);var a2=function(k,a,g,b,c,e){k=k||0;var m=g[1]-g[0];if(c!=null){c=restrict$1(c,[0,m])}if(e!=null){e=Math.max(e,c!=null?c:0)}if(b==='all'){var i=Math.abs(a[1]-a[0]);i=restrict$1(i,[0,m]);c=e=restrict$1(i,[c,e]);b=0}a[0]=restrict$1(a[0],g);a[1]=restrict$1(a[1],g);var h=getSpanSign(a,b);a[b]+=k;var l=c||0;var j=g.slice();h.sign<0?j[0]+=l:j[1]-=l;a[b]=restrict$1(a[b],j);var f=getSpanSign(a,b);if(c!=null&&(f.sign!==h.sign||f.span<c)){a[1-b]=a[b]+h.sign*c}var f=getSpanSign(a,b);if(e!=null&&f.span>e){a[1-b]=a[b]+f.sign*e}return a};function getSpanSign(c,a){var b=c[a]-c[1-a];return {span:Math.abs(b),sign:b>0?-1:b<0?1:a?-1:1}}function restrict$1(b,a){return Math.min(a[1]!=null?a[1]:Infinity,Math.max(a[0]!=null?a[0]:-Infinity,b))}var fz=each$1;var ih=Math.min;var id=Math.max;var hR=Math.floor;var nf=Math.ceil;var iR=round$1;var oH=Math.PI;function Parallel(a,b,c){this._axesMap=createHashMap();this._axesLayout={};this.dimensions=a.dimensions;this._rect;this._model=a;this._init(a,b,c)}Parallel.prototype={type:'parallel',constructor:Parallel,_init:function(a,e,f){var c=a.dimensions;var b=a.parallelAxisIndex;fz(c,function(i,k){var h=b[k];var c=e.getComponent('parallelAxis',h);var g=this._axesMap.set(i,new cV(i,createScaleByModel(c),[0,0],c.get('type'),h));var j=g.type==='category';g.onBand=j&&c.get('boundaryGap');g.inverse=c.get('inverse');c.axis=g;g.model=c;g.coordinateSystem=c.coordinateSystem=this},this)},update:function(a,b){this._updateAxesFromSeries(this._model,a)},containPoint:function(h){var a=this._makeLayoutInfo();var e=a.axisBase;var c=a.layoutBase;var b=a.pixelDimIndex;var g=h[1-b];var f=h[b];return g>=e&&g<=e+a.axisLength&&f>=c&&f<=c+a.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(b,a){a.eachSeries(function(c){if(!b.contains(c,a)){return}var e=c.getData();fz(this.dimensions,function(g){var f=this._axesMap.get(g);f.scale.unionExtentFromData(e,e.mapDimension(g));niceScaleExtent(f.scale,f.model)},this)},this)},resize:function(b,a){this._rect=getLayoutRect(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()});this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var c=this._model;var k=this._rect;var o=['x','y'];var n=['width','height'];var m=c.get('layout');var g=m==='horizontal'?0:1;var j=k[n[g]];var l=[0,j];var e=this.dimensions.length;var b=restrict(c.get('axisExpandWidth'),l);var i=restrict(c.get('axisExpandCount')||0,[0,e]);var s=c.get('axisExpandable')&&e>3&&e>i&&i>1&&b>0&&j>0;var a=c.get('axisExpandWindow');var f;if(!a){f=restrict(b*(i-1),l);var q=c.get('axisExpandCenter')||hR(e/2);a=[b*q-f/2];a[1]=a[0]+f}else {f=restrict(a[1]-a[0],l);a[1]=a[0]+f}var h=(j-f)/(e-i);h<3&&(h=0);var r=[hR(iR(a[0]/b,1))+1,nf(iR(a[1]/b,1))-1];var p=h/b*a[0];return {layout:m,pixelDimIndex:g,layoutBase:k[o[g]],layoutLength:j,axisBase:k[o[1-g]],axisLength:k[n[1-g]],axisExpandable:s,axisExpandWidth:b,axisCollapseWidth:h,axisExpandWindow:a,axisCount:e,winInnerIndices:r,axisExpandWindow0Pos:p}},_layoutAxes:function(){var c=this._rect;var f=this._axesMap;var e=this.dimensions;var a=this._makeLayoutInfo();var b=a.layout;f.each(function(c){var b=[0,a.axisLength];var e=c.inverse?1:0;c.setExtent(b[e],b[1-e])});fz(e,function(k,l){var f=(a.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(l,a);var g={horizontal:{x:f.position,y:a.axisLength},vertical:{x:0,y:f.position}};var j={horizontal:oH/2,vertical:0};var h=[g[b].x+c.x,g[b].y+c.y];var i=j[b];var e=create$1();rotate(e,e,i);translate(e,e,h);this._axesLayout[k]={position:h,rotation:i,transform:e,axisNameAvailableWidth:f.axisNameAvailableWidth,axisLabelShow:f.axisLabelShow,nameTruncateMaxWidth:f.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(a){return this._axesMap.get(a)},dataToPoint:function(b,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(b),a)},eachActiveState:function(f,l,e,g){e==null&&(e=0);g==null&&(g=f.count());var m=this._axesMap;var j=this.dimensions;var h=[];var i=[];each$1(j,function(a){h.push(f.mapDimension(a));i.push(m.get(a).model)});var k=this.hasAxisBrushed();for(var b=e;b<g;b++){var a;if(!k){a='normal'}else {a='active';var n=f.getValues(h,b);for(var c=0,p=j.length;c<p;c++){var o=i[c].getActiveState(n[c]);if(o==='inactive'){a='inactive';break}}}l(a,b)}},hasAxisBrushed:function(){var c=this.dimensions;var e=this._axesMap;var b=!1;for(var a=0,f=c.length;a<f;a++){if(e.get(c[a]).model.getActiveState()!=='normal'){b=!0}}return b},axisCoordToPoint:function(b,c){var a=this._axesLayout[c];return applyTransform$1([b,0],a.transform)},getAxisLayout:function(a){return clone(this._axesLayout[a])},getSlidedAxisExpandWindow:function(l){var c=this._makeLayoutInfo();var m=c.pixelDimIndex;var a=c.axisExpandWindow.slice();var b=a[1]-a[0];var j=[0,c.axisExpandWidth*(c.axisCount-1)];if(!this.containPoint(l)){return {behavior:'none',axisExpandWindow:a}}var g=l[m]-c.layoutBase-c.axisExpandWindow0Pos;var e;var i='slide';var h=c.axisCollapseWidth;var f=this._model.get('axisExpandSlideTriggerArea');var k=f[0]!=null;if(h){if(k&&h&&g<b*f[0]){i='jump';e=g-b*f[2]}else {if(k&&h&&g>b*(1-f[0])){i='jump';e=g-b*(1-f[2])}else {(e=g-b*f[1])>=0&&(e=g-b*(1-f[1]))<=0&&(e=0)}}e*=c.axisExpandWidth/h;e?a2(e,a,j,'all'):i='none'}else {var b=a[1]-a[0];var n=j[1]*g/b;a=[id(0,n-b/2)];a[1]=ih(j[1],a[0]+b);a[0]=a[1]-b}return {axisExpandWindow:a,behavior:i}}};function restrict(b,a){return ih(id(b,a[0]),a[1])}function layoutAxisWithoutExpand(c,a){var b=a.layoutLength/(a.axisCount-1);return {position:b*c,axisNameAvailableWidth:b,axisLabelShow:!0}}function layoutAxisWithExpand(c,a){var k=a.layoutLength;var h=a.axisExpandWidth;var l=a.axisCount;var b=a.axisCollapseWidth;var i=a.winInnerIndices;var e;var g=b;var j=!1;var f;if(c<i[0]){e=c*b;f=b}else {if(c<=i[1]){e=a.axisExpandWindow0Pos+c*h-a.axisExpandWindow[0];g=h;j=!0}else {e=k-(l-1-c)*b;f=b}}return {position:e,axisNameAvailableWidth:g,axisLabelShow:j,nameTruncateMaxWidth:f}}function create$2(a,c){var b=[];a.eachComponent('parallel',function(f,g){var e=new Parallel(f,a,c);e.name='parallel_'+g;e.resize(f,c);f.coordinateSystem=e;e.model=f;b.push(e)});a.eachSeries(function(b){if(b.get('coordinateSystem')==='parallel'){var e=a.queryComponents({mainType:'parallel',index:b.get('parallelIndex'),id:b.get('parallelId')})[0];b.coordinateSystem=e.coordinateSystem}});return b}CoordinateSystemManager.register('parallel',{create:create$2});var hH=g.extend({type:'baseParallelAxis',axis:null,activeIntervals:[],getAreaSelectStyle:function(){return bo([['fill','color'],['lineWidth','borderWidth'],['stroke','borderColor'],['width','width'],['opacity','opacity']])(this.getModel('areaSelectStyle'))},setActiveIntervals:function(c){var a=this.activeIntervals=clone(c);if(a){for(var b=a.length-1;b>=0;b--){asc(a[b])}}},getActiveState:function(b){var a=this.activeIntervals;if(!a.length){return 'normal'}if(b==null||isNaN(b)){return 'inactive'}if(a.length===1){var e=a[0];if(e[0]<=b&&b<=e[1]){return 'active'}}else {for(var c=0,f=a.length;c<f;c++){if(a[c][0]<=b&&b<=a[c][1]){return 'active'}}}return 'inactive'}});var k5={type:'value',dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:'rgba(160,197,232)',color:'rgba(160,197,232)',opacity:0.3},realtime:!0,z:10};merge(hH.prototype,aQ);function getAxisType$1(b,a){return a.type||(a.data?'category':'value')}bk('parallel',hH,getAxisType$1,k5);g.extend({type:'parallel',dependencies:['parallelAxis'],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:'box',defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:'horizontal',axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-0.15,0.05,0.4],axisExpandTriggerOn:'click',parallelAxisDefault:null},init:function(){g.prototype.init.apply(this,arguments);this.mergeOption({})},mergeOption:function(a){var b=this.option;a&&merge(b,a,!0);this._initDimensions()},contains:function(c,b){var a=c.get('parallelIndex');return a!=null&&b.getComponent('parallel',a)===this},setAxisExpand:function(a){each$1(['axisExpandable','axisExpandCenter','axisExpandCount','axisExpandWidth','axisExpandWindow'],function(b){if(a.hasOwnProperty(b)){this.option[b]=a[b]}},this)},_initDimensions:function(){var c=this.dimensions=[];var a=this.parallelAxisIndex=[];var b=filter(this.dependentModels.parallelAxis,function(a){return (a.get('parallelIndex')||0)===this.componentIndex},this);each$1(b,function(b){c.push('dim'+b.get('dim'));a.push(b.componentIndex)})}});var l3={type:'axisAreaSelect',event:'axisAreaSelected'};registerAction(l3,function(a,b){b.eachComponent({mainType:'parallelAxis',query:a},function(c){c.axis.model.setActiveIntervals(a.intervals)})});registerAction('parallelAxisExpand',function(a,b){b.eachComponent({mainType:'parallel',query:a},function(c){c.setAxisExpand(a)})});var aF=curry;var Z=each$1;var oG=map;var cc=Math.min;var bA=Math.max;var nL=Math.pow;var n3=10000;var ke=6;var jR=6;var gx='globalPan';var lH={w:[0,0],e:[0,1],n:[1,0],s:[1,1]};var mY={w:'ew',e:'ew',n:'ns',s:'ns',ne:'nesw',sw:'nesw',nw:'nwse',se:'nwse'};var gF={brushStyle:{lineWidth:2,stroke:'rgba(0,0,0,0.3)',fill:'rgba(0,0,0,0.1)'},transformable:!0,brushMode:'single',removeOnClick:!1};var n7=0;function BrushController(c){if(a){assert$1(c)}r.call(this);this._zr=c;this.group=new b();this._brushType;this._brushOption;this._panels;this._track=[];this._dragging;this._lastMouseMovePoint={};this._covers=[];this._creatingCover;this._creatingPanel;this._enableGlobalPan;if(a){this._mounted}this._uid='brushController_'+n7++;this._handlers={};Z(lR,function(b,a){this._handlers[a]=bind(b,this)},this)}BrushController.prototype={constructor:BrushController,enableBrush:function(b){if(a){assert$1(this._mounted)}this._brushType&&doDisableBrush(this);b.brushType&&doEnableBrush(this,b);return this},setPanels:function(a){if(a&&a.length){var b=this._panels={};each$1(a,function(c){b[c.panelId]=clone(c)})}else {this._panels=null}return this},mount:function(b){b=b||{};if(a){this._mounted=!0}this._enableGlobalPan=b.enableGlobalPan;var c=this.group;this._zr.add(c);c.attr({position:b.position||[0,0],rotation:b.rotation||0,scale:b.scale||[1,1]});this._transform=c.getLocalTransform();return this},eachCover:function(b,a){Z(this._covers,b,a)},updateCovers:function(c){if(a){assert$1(this._mounted)}c=map(c,function(a){return merge(clone(gF),a,!0)});var h='\x00-brush-index-';var b=this._covers;var g=this._covers=[];var e=this;var f=this._creatingCover;(new DataDiffer(b,c,oldGetKey,getKey)).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();return this;function getKey(a,b){return (a.id!=null?a.id:h+b)+'-'+a.brushType}function oldGetKey(a,b){return getKey(a.__brushOption,b)}function addOrUpdate(h,a){var i=c[h];if(a!=null&&b[a]===f){g[h]=b[a]}else {var j=g[h]=a!=null?(b[a].__brushOption=i,b[a]):endCreating(e,createCover(e,i));updateCoverAfterCreation(e,j)}}function remove(a){if(b[a]!==f){e.group.remove(b[a])}}},unmount:function(){if(a){if(!this._mounted){return}}this.enableBrush(!1);clearCovers(this);this._zr.remove(this.group);if(a){this._mounted=!1}return this},dispose:function(){this.unmount();this.off()}};mixin(BrushController,r);function doEnableBrush(a,b){var c=a._zr;if(!a._enableGlobalPan){take(c,gx,a._uid)}Z(a._handlers,function(f,e){c.on(e,f)});a._brushType=b.brushType;a._brushOption=merge(clone(gF),b,!0)}function doDisableBrush(a){var b=a._zr;release(b,gx,a._uid);Z(a._handlers,function(e,c){b.off(c,e)});a._brushType=a._brushOption=null}function createCover(c,a){var b=cN[a.brushType].createCover(c,a);b.__brushOption=a;updateZ$1(b,a);c.group.add(b);return b}function endCreating(c,a){var b=getCoverRenderer(a);if(b.endCreating){b.endCreating(c,a);updateZ$1(a,a.__brushOption)}return a}function updateCoverShape(c,a){var b=a.__brushOption;getCoverRenderer(a).updateCoverShape(c,a,b.range,b)}function updateZ$1(c,b){var a=b.z;a==null&&(a=n3);c.traverse(function(e){e.z=a;e.z2=a})}function updateCoverAfterCreation(b,a){getCoverRenderer(a).updateCommon(b,a);updateCoverShape(b,a)}function getCoverRenderer(a){return cN[a.__brushOption.brushType]}function getPanelByPoint(a,g,e){var b=a._panels;if(!b){return !0}var c;var f=a._transform;Z(b,function(b){b.isTargetByCursor(g,e,f)&&(c=b)});return c}function getPanelByCover(c,e){var b=c._panels;if(!b){return !0}var a=e.__brushOption.panelId;return a!=null?b[a]:!0}function clearCovers(a){var b=a._covers;var c=b.length;Z(b,function(b){a.group.remove(b)},a);b.length=0;return !!c}function trigger$1(a,b){var c=oG(a._covers,function(e){var c=e.__brushOption;var f=clone(c.range);return {brushType:c.brushType,panelId:c.panelId,range:f}});a.trigger('brush',c,{isEnd:!!b.isEnd,removeOnClick:!!b.removeOnClick})}function shouldShowCover(g){var a=g._track;if(!a.length){return !1}var f=a[a.length-1];var e=a[0];var b=f[0]-e[0];var c=f[1]-e[1];var h=nL(b*b+c*c,0.5);return h>ke}function getTrackEnds(a){var b=a.length-1;b<0&&(b=0);return [a[0],a[b]]}function createBaseRectCover(e,c,f,g){var a=new b();a.add(new h({name:'main',style:makeStyle(f),silent:!0,draggable:!0,cursor:'move',drift:aF(e,c,a,'nswe'),ondragend:aF(trigger$1,c,{isEnd:!0})}));Z(g,function(b){a.add(new h({name:b,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:aF(e,c,a,b),ondragend:aF(trigger$1,c,{isEnd:!0})}))});return a}function updateBaseRect(b,c,h,m){var e=m.brushStyle.lineWidth||0;var a=bA(e,jR);var k=h[0][0];var l=h[1][0];var f=k-e/2;var g=l-e/2;var r=h[0][1];var s=h[1][1];var i=r-a+e/2;var j=s-a+e/2;var q=r-k;var o=s-l;var p=q+e;var n=o+e;updateRectShape(b,c,'main',k,l,q,o);if(m.transformable){updateRectShape(b,c,'w',f,g,a,n);updateRectShape(b,c,'e',i,g,a,n);updateRectShape(b,c,'n',f,g,p,a);updateRectShape(b,c,'s',f,j,p,a);updateRectShape(b,c,'nw',f,g,a,a);updateRectShape(b,c,'ne',i,g,a,a);updateRectShape(b,c,'sw',f,j,a,a);updateRectShape(b,c,'se',i,j,a,a)}}function updateCommon(f,b){var c=b.__brushOption;var a=c.transformable;var e=b.childAt(0);e.useStyle(makeStyle(c));e.attr({silent:!a,cursor:a?'move':'default'});Z(['w','e','n','s','se','sw','ne','nw'],function(c){var e=b.childOfName(c);var g=getGlobalDirection(f,c);e&&e.attr({silent:!a,invisible:!a,cursor:a?mY[g]+'-resize':null})})}function updateRectShape(f,a,g,c,e,i,h){var b=a.childOfName(g);b&&b.setShape(pointsToRect(clipByPanel(f,a,[[c,e],[c+i,e+h]])))}function makeStyle(a){return defaults({strokeNoScale:!0},a.brushStyle)}function formatRectRange(f,g,c,e){var b=[cc(f,c),cc(g,e)];var a=[bA(f,c),bA(g,e)];return [[b[0],a[0]],[b[1],a[1]]]}function getTransform$1(a){return getTransform(a.group)}function getGlobalDirection(c,a){if(a.length>1){a=a.split('');var b=[getGlobalDirection(c,a[0]),getGlobalDirection(c,a[1])];(b[0]==='e'||b[0]==='w')&&b.reverse();return b.join('')}else {var f={w:'left',e:'right',n:'top',s:'bottom'};var e={left:'w',right:'e',top:'n',bottom:'s'};var b=transformDirection(f[a],getTransform$1(c));return e[b]}}function driftRect(g,f,b,e,i,j,k,l){var c=e.__brushOption;var a=g(c.range);var h=toLocalDelta(b,j,k);Z(i.split(''),function(m){var c=lH[m];a[c[0]][c[1]]+=h[c[0]]});c.range=f(formatRectRange(a[0][0],a[1][0],a[0][1],a[1][1]));updateCoverAfterCreation(b,e);trigger$1(b,{isEnd:!1})}function driftPolygon(a,c,f,g,h){var e=c.__brushOption.range;var b=toLocalDelta(a,f,g);Z(e,function(e){e[0]+=b[0];e[1]+=b[1]});updateCoverAfterCreation(a,c);trigger$1(a,{isEnd:!1})}function toLocalDelta(e,f,g){var b=e.group;var c=b.transformCoordToLocal(f,g);var a=b.transformCoordToLocal(0,0);return [c[0]-a[0],c[1]-a[1]]}function clipByPanel(b,e,c){var a=getPanelByCover(b,e);return a&&a!==!0?a.clipPath(c,b._transform):clone(c)}function pointsToRect(a){var b=cc(a[0][0],a[1][0]);var c=cc(a[0][1],a[1][1]);var e=bA(a[0][0],a[1][0]);var f=bA(a[0][1],a[1][1]);return {x:b,y:c,width:e-b,height:f-c}}function resetCursor(a,i,e){if(!a._brushType){return}var h=a._zr;var f=a._covers;var b=getPanelByPoint(a,i,e);if(!a._dragging){for(var c=0;c<f.length;c++){var g=f[c].__brushOption;if(b&&(b===!0||g.panelId===b.panelId)&&cN[g.brushType].contain(f[c],e[0],e[1])){return}}}b&&h.setCursorStyle('crosshair')}function preventDefault(b){var a=b.event;a.preventDefault&&a.preventDefault()}function mainShapeContain(a,b,c){return a.childOfName('main').contain(b,c)}function updateCoverByMouse(a,l,i,g){var b=a._creatingCover;var c=a._creatingPanel;var e=a._brushOption;var h;a._track.push(i.slice());if(shouldShowCover(a)||b){if(c&&!b){e.brushMode==='single'&&clearCovers(a);var f=clone(e);f.brushType=determineBrushType(f.brushType,c);f.panelId=c===!0?null:c.panelId;b=a._creatingCover=createCover(a,f);a._covers.push(b)}if(b){var j=cN[determineBrushType(a._brushType,c)];var k=b.__brushOption;k.range=j.getCreatingRange(clipByPanel(a,b,a._track));if(g){endCreating(a,b);j.updateCommon(a,b)}updateCoverShape(a,b);h={isEnd:g}}}else {if(g&&e.brushMode==='single'&&e.removeOnClick){if(getPanelByPoint(a,l,i)&&clearCovers(a)){h={isEnd:g,removeOnClick:!0}}}}return h}function determineBrushType(c,b){if(c==='auto'){if(a){assert$1(b&&b.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"')}return b.defaultBrushType}return c}var lR={mousedown:function(a){if(this._dragging){handleDragEnd(this,a)}else {if(!a.target||!a.target.draggable){preventDefault(a);var b=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var c=this._creatingPanel=getPanelByPoint(this,a,b);if(c){this._dragging=!0;this._track=[b.slice()]}}}},mousemove:function(a){var b=this._lastMouseMovePoint;b.x=a.offsetX;b.y=a.offsetY;var c=this.group.transformCoordToLocal(b.x,b.y);resetCursor(this,a,c);if(this._dragging){preventDefault(a);var e=updateCoverByMouse(this,a,c,!1);e&&trigger$1(this,e)}},mouseup:function(a){handleDragEnd(this,a)},globalout:function(a){handleDragEnd(this,a,!0)}};function handleDragEnd(a,b,e){if(a._dragging){!e&&preventDefault(b);var g=b.offsetX;var h=b.offsetY;var f=a._lastMouseMovePoint;if(e){g=f.x;h=f.y}var i=a.group.transformCoordToLocal(g,h);var c=updateCoverByMouse(a,b,i,!0);a._dragging=!1;a._track=[];a._creatingCover=null;c&&trigger$1(a,c)}}var cN={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(b,a){return createBaseRectCover(aF(driftRect,function(c){return c},function(c){return c}),b,a,['w','e','n','s','se','sw','ne','nw'])},getCreatingRange:function(b){var a=getTrackEnds(b);return formatRectRange(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(b,e,c,a){updateBaseRect(b,e,c,a)},updateCommon:updateCommon,contain:mainShapeContain},polygon:{createCover:function(e,c){var a=new b();a.add(new L({name:'main',style:makeStyle(c),silent:!0}));return a},getCreatingRange:function(a){return a},endCreating:function(b,a){a.remove(a.childAt(0));a.add(new I({name:'main',draggable:!0,drift:aF(driftPolygon,b,a),ondragend:aF(trigger$1,b,{isEnd:!0})}))},updateCoverShape:function(b,a,c,e){a.childAt(0).setShape({points:clipByPanel(b,a,c)})},updateCommon:updateCommon,contain:mainShapeContain}};function getLineRenderer(a){return {createCover:function(c,b){return createBaseRectCover(aF(driftRect,function(f){var e=[f,[0,100]];a&&e.reverse();return e},function(e){return e[a]}),c,b,[['w','e'],['n','s']][a])},getCreatingRange:function(c){var b=getTrackEnds(c);var f=cc(b[0][a],b[1][a]);var e=bA(b[0][a],b[1][a]);return [f,e]},updateCoverShape:function(b,g,j,i){var c;var e=getPanelByCover(b,g);if(e!==!0&&e.getLinearBrushOtherExtent){c=e.getLinearBrushOtherExtent(a,b._transform)}else {var h=b._zr;c=[0,[h.getWidth(),h.getHeight()][1-a]]}var f=[j,c];a&&f.reverse();updateBaseRect(b,g,f,i)},updateCommon:updateCommon,contain:mainShapeContain}}function makeRectPanelClipPath(a){a=normalizeRect(a);return function(b,c){return clipPointsByRect(b,a)}}function makeLinearBrushOtherExtent(a,b){a=normalizeRect(a);return function(g){var e=b!=null?b:g;var f=e?a.width:a.height;var c=e?a.x:a.y;return [c,c+(f||0)]}}function makeRectIsTargetByCursor(a,c,b){a=normalizeRect(a);return function(f,e,g){return a.contain(e[0],e[1])&&!onIrrelevantElement(f,c,b)}}function normalizeRect(a){return BoundingRect.create(a)}var mG=['axisLine','axisTickLabel','axisName'];var mX=extendComponentView({type:'parallelAxis',init:function(b,a){mX.superApply(this,'init',arguments);(this._brushController=new BrushController(a.getZr())).on('brush',bind(this._onBrush,this))},render:function(a,j,k,e){if(fromAxisAreaSelect(a,j,e)){return}this.axisModel=a;this.api=k;this.group.removeAll();var m=this._axisGroup;this._axisGroup=new b();this.group.add(this._axisGroup);if(!a.get('show')){return}var g=getCoordSysModel(a,j);var o=g.coordinateSystem;var f=a.getAreaSelectStyle();var i=f.width;var p=a.axis.dim;var n=o.getAxisLayout(p);var h=extend({strokeContainThreshold:i},n);var c=new x(a,h);each$1(mG,c.add,c);this._axisGroup.add(c.getGroup());this._refreshBrushController(h,f,a,g,i,k);var l=e&&e.animation===!1?null:a;groupTransition(m,this._axisGroup,l)},_refreshBrushController:function(c,i,f,j,e,k){var b=f.axis.getExtent();var g=b[1]-b[0];var h=Math.min(30,Math.abs(g)*0.1);var a=BoundingRect.create({x:b[0],y:-e/2,width:g,height:e});a.x-=h;a.width+=2*h;this._brushController.mount({enableGlobalPan:!0,rotation:c.rotation,position:c.position}).setPanels([{panelId:'pl',clipPath:makeRectPanelClipPath(a),isTargetByCursor:makeRectIsTargetByCursor(a,k,j),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(a,0)}]).enableBrush({brushType:'lineX',brushStyle:i,removeOnClick:!0}).updateCovers(getCoverInfoList(f))},_onBrush:function(e,c){var a=this.axisModel;var b=a.axis;var f=map(e,function(a){return [b.coordToData(a.range[0],!0),b.coordToData(a.range[1],!0)]});if(!a.option.realtime===c.isEnd||c.removeOnClick){this.api.dispatchAction({type:'axisAreaSelect',parallelAxisId:a.id,intervals:f})}},dispose:function(){this._brushController.dispose()}});function fromAxisAreaSelect(b,c,a){return a&&a.type==='axisAreaSelect'&&c.findComponents({mainType:'parallelAxis',query:a})[0]===b}function getCoverInfoList(a){var b=a.axis;return map(a.activeIntervals,function(c){return {brushType:'lineX',panelId:'pl',range:[b.dataToCoord(c[0],!0),b.dataToCoord(c[1],!0)]}})}function getCoordSysModel(a,b){return b.getComponent('parallel',a.get('parallelIndex'))}var kZ=5;extendComponentView({type:'parallel',render:function(a,c,b){this._model=a;this._api=b;if(!this._handlers){this._handlers={};each$1(nZ,function(f,e){b.getZr().on(e,this._handlers[e]=bind(f,this))},this)}createOrUpdate(this,'_throttledDispatchExpand',a.get('axisExpandRate'),'fixRate')},dispose:function(b,a){each$1(this._handlers,function(e,c){a.getZr().off(c,e)});this._handlers=null},_throttledDispatchExpand:function(a){this._dispatchExpand(a)},_dispatchExpand:function(a){a&&this._api.dispatchAction(extend({type:'parallelAxisExpand'},a))}});var nZ={mousedown:function(a){if(checkTrigger(this,'click')){this._mouseDownPoint=[a.offsetX,a.offsetY]}},mouseup:function(a){var b=this._mouseDownPoint;if(checkTrigger(this,'click')&&b){var e=[a.offsetX,a.offsetY];var f=Math.pow(b[0]-e[0],2)+Math.pow(b[1]-e[1],2);if(f>kZ){return}var c=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);c.behavior!=='none'&&this._dispatchExpand({axisExpandWindow:c.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(this._mouseDownPoint||!checkTrigger(this,'mousemove')){return}var c=this._model;var b=c.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);var a=b.behavior;a==='jump'&&this._throttledDispatchExpand.debounceNextCall(c.get('axisExpandDebounce'));this._throttledDispatchExpand(a==='none'?null:{axisExpandWindow:b.axisExpandWindow,animation:a==='jump'?null:!1})}};function checkTrigger(c,b){var a=c._model;return a.get('axisExpandable')&&a.get('axisExpandTriggerOn')===b}registerPreprocessor(j1);l.extend({type:'series.parallel',dependencies:['parallel'],visualColorAccessPath:'lineStyle.color',getInitialData:function(c,b){var a=this.getSource();setEncodeAndDimensions(a,this);return createListFromArray(a,this)},getRawIndicesByActiveState:function(c){var e=this.coordinateSystem;var b=this.getData();var a=[];e.eachActiveState(b,function(e,f){if(c===e){a.push(b.getRawIndex(f))}});return a},defaultOption:{zlevel:0,z:2,coordinateSystem:'parallel',parallelIndex:0,label:{show:!1},inactiveOpacity:0.05,activeOpacity:1,lineStyle:{width:1,opacity:0.45,type:'solid'},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:'linear'}});function setEncodeAndDimensions(c,b){if(c.encodeDefine){return}var a=b.ecModel.getComponent('parallel',b.get('parallelIndex'));if(!a){return}var e=c.encodeDefine=createHashMap();each$1(a.dimensions,function(a){var f=convertDimNameToNumber(a);e.set(a,f)})}function convertDimNameToNumber(a){return +a.replace('dim','')}var g4=0.3;var oT=Chart.extend({type:'parallel',init:function(){this._dataGroup=new b();this.group.add(this._dataGroup);this._data;this._initialized},render:function(b,k,l,i){var c=this._dataGroup;var a=b.getData();var f=this._data;var e=b.coordinateSystem;var h=e.dimensions;var g=makeSeriesScope$2(b);a.diff(f).add(add).update(update).remove(remove).execute();function add(f){var j=addEl(a,c,f,h,e);updateElCommon(j,a,f,g)}function update(c,n){var j=f.getItemGraphicEl(n);var o=createLinePoints(a,c,h,e);a.setItemGraphicEl(c,j);var m=i&&i.animation===!1?null:b;updateProps(j,{shape:{points:o}},m,c);updateElCommon(j,a,c,g)}function remove(a){var e=f.getItemGraphicEl(a);c.remove(e)}if(!this._initialized){this._initialized=!0;var j=createGridClipShape(e,b,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(j)}this._data=a},incrementalPrepareRender:function(a,b,c){this._initialized=!0;this._data=null;this._dataGroup.removeAll()},incrementalRender:function(c,b,j){var f=b.getData();var e=b.coordinateSystem;var i=e.dimensions;var h=makeSeriesScope$2(b);for(var a=c.start;a<c.end;a++){var g=addEl(f,this._dataGroup,a,i,e);g.incremental=!0;updateElCommon(g,f,a,h)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll();this._data=null}});function createGridClipShape(c,f,i){var e=c.model;var a=c.getRect();var b=new h({shape:{x:a.x,y:a.y,width:a.width,height:a.height}});var g=e.get('layout')==='horizontal'?'width':'height';b.setShape(g,0);initProps(b,{shape:{width:a.width,height:a.height}},f,i);return b}function createLinePoints(h,i,c,e){var f=[];for(var b=0;b<c.length;b++){var a=c[b];var g=h.get(h.mapDimension(a),i);if(!isEmptyValue(g,e.getAxis(a).type)){f.push(e.dataToPoint(g,a))}}return f}function addEl(c,f,b,e,g){var h=createLinePoints(c,b,e,g);var a=new L({shape:{points:h},silent:!0,z2:10});f.add(a);c.setItemGraphicEl(b,a);return a}function makeSeriesScope$2(b){var a=b.get('smooth',!0);a===!0&&(a=g4);return {lineStyle:b.getModel('lineStyle').getLineStyle(),smooth:a!=null?a:g4}}function updateElCommon(f,a,c,b){var g=b.lineStyle;if(a.hasItemOption){var h=a.getItemModel(c).getModel('lineStyle');g=h.getLineStyle()}f.useStyle(g);var e=f.style;e.fill=null;e.stroke=a.getItemVisual(c,'color');e.opacity=a.getItemVisual(c,'opacity');b.smooth&&(f.shape.smooth=b.smooth)}function isEmptyValue(a,b){return b==='category'?a==null:a==null||isNaN(a)}var ka=['lineStyle','normal','opacity'];var ly={seriesType:'parallel',reset:function(a,k,n){var e=a.getModel('itemStyle');var f=a.getModel('lineStyle');var b=k.get('color');var l=f.get('color')||e.get('color')||b[a.seriesIndex%b.length];var c=a.get('inactiveOpacity');var g=a.get('activeOpacity');var i=a.getModel('lineStyle').getLineStyle();var j=a.coordinateSystem;var m=a.getData();var h={normal:i.opacity,active:g,inactive:c};m.setVisual('color',l);function progress(c,b){j.eachActiveState(b,function(e,g){var i=h[e];if(e==='normal'&&b.hasItemOption){var f=b.getItemModel(g).get(ka,!0);f!=null&&(i=f)}b.setItemVisual(g,'opacity',i)},c.start,c.end)}return {progress:progress}}};registerVisual(ly);var l_=l.extend({type:'series.sankey',layoutInfo:null,levelModels:null,getInitialData:function(e,i){var f=e.edges||e.links;var g=e.data||e.nodes;var c=e.levels;var h=this.levelModels={};for(var b=0;b<c.length;b++){if(c[b].depth!=null&&c[b].depth>=0){h[c[b].depth]=new Model(c[b],this,i)}else {if(a){throw new Error('levels[i].depth is mandatory and should be natural number')}}}if(g&&f){var j=gc(g,f,this,!0,beforeLink);return j.data}function beforeLink(b,a){b.wrapMethod('getItemModel',function(c,f){c.customizeGetParent(function(k){var g=this.parentModel;var j=g.getData().getItemLayout(f).depth;var h=g.levelModels[j];return h||this.parentModel});return c});a.wrapMethod('getItemModel',function(c,f){c.customizeGetParent(function(l){var g=this.parentModel;var k=g.getGraph().getEdgeByIndex(f);var j=k.node1.getLayout().depth;var h=g.levelModels[j];return h||this.parentModel});return c})}},setNodePosition:function(c,a){var b=this.option.data[c];b.localX=a[0];b.localY=a[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(a,h,b){if(b==='edge'){var e=this.getDataParams(a,b);var f=e.data;var c=f.source+' -- '+f.target;if(e.value){c+=' : '+e.value}return encodeHTML(c)}else {if(b==='node'){var j=this.getGraph().getNodeByIndex(a);var g=j.getLayout().value;var i=this.getDataParams(a,b).data.name;if(g){var c=i+' : '+g}return encodeHTML(c)}}return l_.superCall(this,'formatTooltip',a,h)},optionUpdated:function(){var a=this.option;if(a.focusNodeAdjacency===!0){a.focusNodeAdjacency='allEdges'}},defaultOption:{zlevel:0,z:2,coordinateSystem:'view',layout:null,left:'5%',top:'5%',right:'20%',bottom:'5%',orient:'horizontal',nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:'right',color:'#000',fontSize:12},levels:[],nodeAlign:'justify',itemStyle:{borderWidth:1,borderColor:'#333'},lineStyle:{color:'#314656',opacity:0.2,curveness:0.5},emphasis:{label:{show:!0},lineStyle:{opacity:0.6}},animationEasing:'linear',animationDuration:1000}});var ai=['itemStyle','opacity'];var bj=['lineStyle','opacity'];function getItemOpacity$1(a,b){return a.getVisual('opacity')||a.getModel().get(b)}function fadeOutItem$1(e,f,c){var b=e.getGraphicEl();var a=getItemOpacity$1(e,f);if(c!=null){a==null&&(a=1);a*=c}b.downplay&&b.downplay();b.traverse(function(b){if(b.type!=='group'){b.setStyle('opacity',a)}})}function fadeInItem$1(b,c){var e=getItemOpacity$1(b,c);var a=b.getGraphicEl();a.highlight&&a.highlight();a.traverse(function(a){if(a.type!=='group'){a.setStyle('opacity',e)}})}var mA=extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:''},buildPath:function(c,a){var b=a.extent;c.moveTo(a.x1,a.y1);c.bezierCurveTo(a.cpx1,a.cpy1,a.cpx2,a.cpy2,a.x2,a.y2);if(a.orient==='vertical'){c.lineTo(a.x2+b,a.y2);c.bezierCurveTo(a.cpx2+b,a.cpy2,a.cpx1+b,a.cpy1,a.x1+b,a.y1)}else {c.lineTo(a.x2,a.y2+b);c.bezierCurveTo(a.cpx2,a.cpy2+b,a.cpx1,a.cpy1+b,a.x1,a.y1+b)}c.closePath()}});extendChartView({type:'sankey',_model:null,_focusAdjacencyDisabled:!1,render:function(a,n,g){var c=this;var m=a.getGraph();var b=this.group;var i=a.layoutInfo;var f=i.width;var e=i.height;var j=a.getData();var k=a.getData('edge');var l=a.get('orient');this._model=a;b.removeAll();b.attr('position',[i.x,i.y]);m.eachEdge(function(h){var c=new mA();c.dataIndex=h.dataIndex;c.seriesIndex=a.seriesIndex;c.dataType='edge';var B=h.getModel('lineStyle');var i=B.get('curveness');var j=h.node1.getLayout();var C=h.node1.getModel();var t=C.get('localX');var v=C.get('localY');var s=h.node2.getLayout();var D=h.node2.getModel();var u=D.get('localX');var w=D.get('localY');var r=h.getLayout();var m;var p;var o;var q;var x;var z;var y;var A;c.shape.extent=Math.max(1,r.dy);c.shape.orient=l;if(l==='vertical'){m=(t!=null?t*f:j.x)+r.sy;p=(v!=null?v*e:j.y)+j.dy;o=(u!=null?u*f:s.x)+r.ty;q=w!=null?w*e:s.y;x=m;z=p*(1-i)+q*i;y=o;A=p*i+q*(1-i)}else {m=(t!=null?t*f:j.x)+j.dx;p=(v!=null?v*e:j.y)+r.sy;o=u!=null?u*f:s.x;q=(w!=null?w*e:s.y)+r.ty;x=m*(1-i)+o*i;z=p;y=m*i+o*(1-i);A=q}c.setShape({x1:m,y1:p,x2:o,y2:q,cpx1:x,cpy1:z,cpx2:y,cpy2:A});c.setStyle(B.getItemStyle());switch(c.style.fill){case 'source':c.style.fill=h.node1.getVisual('color');break;case 'target':c.style.fill=h.node2.getVisual('color');break;}setHoverStyle(c,h.getModel('emphasis.lineStyle').getItemStyle());b.add(c);k.setItemGraphicEl(h.dataIndex,c)});m.eachNode(function(c){var l=c.getLayout();var k=c.getModel();var o=k.get('localX');var p=k.get('localY');var r=k.getModel('label');var q=k.getModel('emphasis.label');var i=new h({shape:{x:o!=null?o*f:l.x,y:p!=null?p*e:l.y,width:l.dx,height:l.dy},style:k.getModel('itemStyle').getItemStyle()});var m=c.getModel('emphasis.itemStyle').getItemStyle();setLabelStyle(i.style,m,r,q,{labelFetcher:a,labelDataIndex:c.dataIndex,defaultText:c.id,isRectText:!0});i.setStyle('fill',c.getVisual('color'));setHoverStyle(i,m);b.add(i);j.setItemGraphicEl(c.dataIndex,i);i.dataType='node'});j.eachItemGraphicEl(function(b,h){var i=j.getItemModel(h);if(i.get('draggable')){b.drift=function(i,k){c._focusAdjacencyDisabled=!0;this.shape.x+=i;this.shape.y+=k;this.dirty();g.dispatchAction({type:'dragNode',seriesId:a.id,dataIndex:j.getRawIndex(h),localX:this.shape.x/f,localY:this.shape.y/e})};b.ondragend=function(){c._focusAdjacencyDisabled=!1};b.draggable=!0;b.cursor='move'}if(i.get('focusNodeAdjacency')){b.off('mouseover').on('mouseover',function(){if(!c._focusAdjacencyDisabled){g.dispatchAction({type:'focusNodeAdjacency',seriesId:a.id,dataIndex:b.dataIndex})}});b.off('mouseout').on('mouseout',function(){if(!c._focusAdjacencyDisabled){g.dispatchAction({type:'unfocusNodeAdjacency',seriesId:a.id})}})}});k.eachItemGraphicEl(function(b,e){var f=k.getItemModel(e);if(f.get('focusNodeAdjacency')){b.off('mouseover').on('mouseover',function(){if(!c._focusAdjacencyDisabled){g.dispatchAction({type:'focusNodeAdjacency',seriesId:a.id,edgeDataIndex:b.dataIndex})}});b.off('mouseout').on('mouseout',function(){if(!c._focusAdjacencyDisabled){g.dispatchAction({type:'unfocusNodeAdjacency',seriesId:a.id})}})}});if(!this._data&&a.get('animation')){b.setClipPath(createGridClipShape$1(b.getBoundingRect(),a,function(){b.removeClipPath()}))}this._data=a.getData()},dispose:function(){},focusNodeAdjacency:function(k,l,m,h){var i=this._model.getData();var b=i.graph;var f=h.dataIndex;var j=i.getItemModel(f);var g=h.edgeDataIndex;if(f==null&&g==null){return}var a=b.getNodeByIndex(f);var c=b.getEdgeByIndex(g);b.eachNode(function(a){fadeOutItem$1(a,ai,0.1)});b.eachEdge(function(a){fadeOutItem$1(a,bj,0.1)});if(a){fadeInItem$1(a,ai);var e=j.get('focusNodeAdjacency');if(e==='outEdges'){each$1(a.outEdges,function(a){if(a.dataIndex<0){return}fadeInItem$1(a,bj);fadeInItem$1(a.node2,ai)})}else {if(e==='inEdges'){each$1(a.inEdges,function(a){if(a.dataIndex<0){return}fadeInItem$1(a,bj);fadeInItem$1(a.node1,ai)})}else {if(e==='allEdges'){each$1(a.edges,function(a){if(a.dataIndex<0){return}fadeInItem$1(a,bj);fadeInItem$1(a.node1,ai);fadeInItem$1(a.node2,ai)})}}}}if(c){fadeInItem$1(c,bj);fadeInItem$1(c.node1,ai);fadeInItem$1(c.node2,ai)}},unfocusNodeAdjacency:function(b,c,f,e){var a=this._model.getGraph();a.eachNode(function(a){fadeOutItem$1(a,ai)});a.eachEdge(function(a){fadeOutItem$1(a,bj)})}});function createGridClipShape$1(a,c,e){var b=new h({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});initProps(b,{shape:{width:a.width+20,height:a.height+20}},c,e);return b}registerAction({type:'dragNode',event:'dragnode',update:'update'},function(a,b){b.eachComponent({mainType:'series',subType:'sankey',query:a},function(c){c.setNodePosition(a.dataIndex,[a.localX,a.localY])})});var mr=function(a,b,c){a.eachSeriesByType('sankey',function(e){var l=e.get('nodeWidth');var m=e.get('nodeGap');var f=getViewRect$3(e,b);e.layoutInfo=f;var q=f.width;var n=f.height;var h=e.getGraph();var g=h.nodes;var p=h.edges;computeNodeValues(g);var i=filter(g,function(f){return f.getLayout().value===0});var j=i.length!==0?0:e.get('layoutIterations');var o=e.get('orient');var k=e.get('nodeAlign');layoutSankey(g,p,l,m,q,n,j,o,k)})};function getViewRect$3(b,a){return getLayoutRect(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function layoutSankey(b,e,i,j,f,c,g,a,h){computeNodeBreadths(b,e,i,f,c,a,h);computeNodeDepths(b,e,c,f,j,g,a);computeEdgeDepths(b,a)}function computeNodeValues(a){each$1(a,function(b){var c=sum(b.outEdges,getEdgeValue);var e=sum(b.inEdges,getEdgeValue);var f=Math.max(c,e);b.setLayout({value:f},!0)})}function computeNodeBreadths(c,t,j,z,y,k,o){var i=[];var m=[];var e=[];var g=[];var l=0;var v=0;for(var a=0;a<t.length;a++){i[a]=1}for(a=0;a<c.length;a++){m[a]=c[a].inEdges.length;if(m[a]===0){e.push(c[a])}}var h=-1;while(e.length){for(var r=0;r<e.length;r++){var b=e[r];var f=b.hostGraph.data.getRawDataItem(b.dataIndex);var s=f.depth!=null&&f.depth>=0;if(s&&f.depth>h){h=f.depth}b.setLayout({depth:s?f.depth:l},!0);k==='vertical'?b.setLayout({dy:j},!0):b.setLayout({dx:j},!0);for(var q=0;q<b.outEdges.length;q++){var u=b.outEdges[q];var w=t.indexOf(u);i[w]=0;var n=u.node2;var x=c.indexOf(n);if(--m[x]===0&&g.indexOf(n)<0){g.push(n)}}}++l;e=g;g=[]}for(a=0;a<i.length;a++){if(i[a]===1){throw new Error('Sankey is a DAG, the original data has cycle!')}}var p=h>l-1?h:l-1;if(o&&o!=='left'){adjustNodeWithNodeAlign(c,o,k,p)}var v=k==='vertical'?(y-j)/p:(z-j)/p;scaleNodeBreadths(c,v,k)}function isNodeDepth(b){var a=b.hostGraph.data.getRawDataItem(b.dataIndex);return a.depth!=null&&a.depth>=0}function adjustNodeWithNodeAlign(c,i,l,j){if(i==='right'){var a=[];var b=c;var h=0;while(b.length){for(var f=0;f<b.length;f++){var e=b[f];e.setLayout({skNodeHeight:h},!0);for(var g=0;g<e.inEdges.length;g++){var k=e.inEdges[g];if(a.indexOf(k.node1)<0){a.push(k.node1)}}}b=a;a=[];++h}each$1(c,function(a){if(!isNodeDepth(a)){a.setLayout({depth:Math.max(0,j-a.getLayout().skNodeHeight)},!0)}})}else {if(i==='justify'){moveSinksRight(c,j)}}}function moveSinksRight(b,a){each$1(b,function(c){if(!isNodeDepth(c)&&!c.outEdges.length){c.setLayout({depth:a},!0)}})}function scaleNodeBreadths(b,c,a){each$1(b,function(e){var f=e.getLayout().depth*c;a==='vertical'?e.setLayout({y:f},!0):e.setLayout({x:f},!0)})}function computeNodeDepths(j,i,e,f,c,h,a){var b=prepareNodesByBreadth(j,a);initializeNodeDepth(b,i,e,f,c,a);resolveCollisions(b,c,e,f,a);for(var g=1;h>0;h--){g*=0.99;relaxRightToLeft(b,g,a);resolveCollisions(b,c,e,f,a);relaxLeftToRight(b,g,a);resolveCollisions(b,c,e,f,a)}}function prepareNodesByBreadth(f,e){var b=[];var c=e==='vertical'?'y':'x';var a=groupData(f,function(a){return a.getLayout()[c]});a.keys.sort(function(a,b){return a-b});each$1(a.keys,function(c){b.push(a.buckets.get(c))});return b}function initializeNodeDepth(b,g,f,h,c,e){var a=Infinity;each$1(b,function(j){var l=j.length;var i=0;each$1(j,function(a){i+=a.getLayout().value});var k=e==='vertical'?(h-(l-1)*c)/i:(f-(l-1)*c)/i;if(k<a){a=k}});each$1(b,function(i){each$1(i,function(j,l){var k=j.getLayout().value*a;if(e==='vertical'){j.setLayout({x:l},!0);j.setLayout({dx:k},!0)}else {j.setLayout({y:l},!0);j.setLayout({dy:k},!0)}})});each$1(g,function(i){var j=+i.getValue()*a;i.setLayout({dy:j},!0)})}function resolveCollisions(e,c,f,g,b){var a=b==='vertical'?'x':'y';each$1(e,function(m){m.sort(function(h,i){return h.getLayout()[a]-i.getLayout()[a]});var i;var h;var j;var l=0;var o=m.length;var n=b==='vertical'?'dx':'dy';for(var k=0;k<o;k++){h=m[k];j=l-h.getLayout()[a];if(j>0){i=h.getLayout()[a]+j;b==='vertical'?h.setLayout({x:i},!0):h.setLayout({y:i},!0)}l=h.getLayout()[a]+h.getLayout()[n]+c}var p=b==='vertical'?g:f;j=l-c-p;if(j>0){i=h.getLayout()[a]-j;b==='vertical'?h.setLayout({x:i},!0):h.setLayout({y:i},!0);l=i;for(k=o-2;k>=0;--k){h=m[k];j=h.getLayout()[a]+h.getLayout()[n]+c-l;if(j>0){i=h.getLayout()[a]-j;b==='vertical'?h.setLayout({x:i},!0):h.setLayout({y:i},!0)}l=h.getLayout()[a]}}})}function relaxRightToLeft(c,b,a){each$1(c.slice().reverse(),function(e){each$1(e,function(f){if(f.outEdges.length){var g=sum(f.outEdges,weightedTarget,a)/sum(f.outEdges,getEdgeValue,a);if(a==='vertical'){var h=f.getLayout().x+(g-center$1(f,a))*b;f.setLayout({x:h},!0)}else {var i=f.getLayout().y+(g-center$1(f,a))*b;f.setLayout({y:i},!0)}}})})}function weightedTarget(a,b){return center$1(a.node2,b)*a.getValue()}function weightedSource(a,b){return center$1(a.node1,b)*a.getValue()}function center$1(a,b){return b==='vertical'?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function getEdgeValue(a){return a.getValue()}function sum(a,h,f){var c=0;var g=a.length;var e=-1;while(++e<g){var b=+h.call(a,a[e],f);if(!isNaN(b)){c+=b}}return c}function relaxLeftToRight(c,b,a){each$1(c,function(e){each$1(e,function(f){if(f.inEdges.length){var g=sum(f.inEdges,weightedSource,a)/sum(f.inEdges,getEdgeValue,a);if(a==='vertical'){var h=f.getLayout().x+(g-center$1(f,a))*b;f.setLayout({x:h},!0)}else {var i=f.getLayout().y+(g-center$1(f,a))*b;f.setLayout({y:i},!0)}}})})}function computeEdgeDepths(b,c){var a=c==='vertical'?'x':'y';each$1(b,function(e){e.outEdges.sort(function(f,g){return f.node2.getLayout()[a]-g.node2.getLayout()[a]});e.inEdges.sort(function(f,g){return f.node1.getLayout()[a]-g.node1.getLayout()[a]})});each$1(b,function(a){var e=0;var f=0;each$1(a.outEdges,function(f){f.setLayout({sy:e},!0);e+=f.getLayout().dy});each$1(a.inEdges,function(e){e.setLayout({ty:f},!0);f+=e.getLayout().dy})})}var ms=function(a,b){a.eachSeriesByType('sankey',function(g){var h=g.getGraph();var f=h.nodes;if(f.length){var e=Infinity;var c=-Infinity;each$1(f,function(h){var f=h.getLayout().value;if(f<e){e=f}if(f>c){c=f}});each$1(f,function(f){var j=new k({type:'color',mappingMethod:'linear',dataExtent:[e,c],visual:g.get('color')});var i=j.mapValueToVisual(f.getLayout().value);var h=f.getModel().get('itemStyle.color');h!=null?f.setVisual('color',h):f.setVisual('color',i)})}})};registerLayout(mr);registerVisual(ms);var gS={_baseAxisDim:null,getInitialData:function(a,l){var c;var f=l.getComponent('xAxis',this.get('xAxisIndex'));var g=l.getComponent('yAxis',this.get('yAxisIndex'));var r=f.get('type');var s=g.get('type');var e;if(r==='category'){a.layout='horizontal';c=f.getOrdinalMeta();e=!0}else {if(s==='category'){a.layout='vertical';c=g.getOrdinalMeta();e=!0}else {a.layout=a.layout||'horizontal'}}var k=['x','y'];var b=a.layout==='horizontal'?0:1;var q=this._baseAxisDim=k[b];var p=k[1-b];var j=[f,g];var o=j[b].get('type');var n=j[1-b].get('type');var m=a.data;if(m&&e){var i=[];each$1(m,function(b,e){var c;if(b.value&&isArray(b.value)){c=b.value.slice();b.value.unshift(e)}else {if(isArray(b)){c=b.slice();b.unshift(e)}else {c=b}}i.push(c)});a.data=i}var h=this.defaultValueDimensions;return bm(this,{coordDimensions:[{name:q,type:getDimensionTypeByAxis(o),ordinalMeta:c,otherDims:{tooltip:!1,itemName:0},dimsDef:['base']},{name:p,type:getDimensionTypeByAxis(n),dimsDef:h.slice()}],dimensionsCount:h.length+1})},getBaseAxis:function(){var a=this._baseAxisDim;return this.ecModel.getComponent(a+'Axis',this.get(a+'AxisIndex')).axis}};var lG=l.extend({type:'series.boxplot',dependencies:['xAxis','yAxis','grid'],defaultValueDimensions:[{name:'min',defaultTooltip:!0},{name:'Q1',defaultTooltip:!0},{name:'median',defaultTooltip:!0},{name:'Q3',defaultTooltip:!0},{name:'max',defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:'cartesian2d',legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:'#fff',borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:'rgba(0,0,0,0.4)'}},animationEasing:'elasticOut',animationDuration:800}});mixin(lG,gS,!0);var jO=['itemStyle'];var jB=['emphasis','itemStyle'];var oV=Chart.extend({type:'boxplot',render:function(e,g,h){var a=e.getData();var b=this.group;var c=this._data;if(!this._data){b.removeAll()}var f=e.get('layout')==='horizontal'?1:0;a.diff(c).add(function(c){if(a.hasValue(c)){var j=a.getItemLayout(c);var i=createNormalBox(j,a,c,f,!0);a.setItemGraphicEl(c,i);b.add(i)}}).update(function(j,l){var i=c.getItemGraphicEl(l);if(!a.hasValue(j)){b.remove(i);return}var k=a.getItemLayout(j);if(!i){i=createNormalBox(k,a,j,f)}else {updateNormalBoxData(k,i,a,j)}b.add(i);a.setItemGraphicEl(j,i)}).remove(function(f){var a=c.getItemGraphicEl(f);a&&b.remove(a)}).execute();this._data=a},remove:function(c){var b=this.group;var a=this._data;this._data=null;a&&a.eachItemGraphicEl(function(a){a&&b.remove(a)})},dispose:noop});var n2=Path.extend({type:'boxplotBoxPath',shape:{},buildPath:function(c,e){var b=e.points;var a=0;c.moveTo(b[a][0],b[a][1]);a++;for(;a<4;a++){c.lineTo(b[a][0],b[a][1])}c.closePath();for(;a<b.length;a++){c.moveTo(b[a][0],b[a][1]);a++;c.lineTo(b[a][0],b[a][1])}}});function createNormalBox(a,h,f,g,b){var c=a.ends;var e=new n2({shape:{points:b?transInit(c,g,a):c}});updateNormalBoxData(a,e,h,f,b);return e}function updateNormalBoxData(l,a,e,b,m){var j=e.hostModel;var h=an[m?'initProps':'updateProps'];h(a,{shape:{points:l.ends}},j,b);var f=e.getItemModel(b);var g=f.getModel(jO);var i=e.getItemVisual(b,'color');var c=g.getItemStyle(['borderColor']);c.stroke=i;c.strokeNoScale=!0;a.useStyle(c);a.z2=100;var k=f.getModel(jB).getItemStyle();setHoverStyle(a,k)}function transInit(b,c,a){return map(b,function(e){e=e.slice();e[c]=a.initBaseline;return e})}var gN=['itemStyle','borderColor'];var lK=function(a,c){var b=a.get('color');a.eachRawSeriesByType('boxplot',function(e){var g=b[e.seriesIndex%b.length];var f=e.getData();f.setVisual({legendSymbol:'roundRect',color:e.get(gN)||g});if(!a.isSeriesFiltered(e)){f.each(function(b){var g=f.getItemModel(b);f.setItemVisual(b,{color:g.get(gN,!0)})})}})};var cg=each$1;var lJ=function(b){var a=groupSeriesByAxis(b);cg(a,function(a){var c=a.seriesModels;if(!c.length){return}calculateBase(a);cg(c,function(e,c){layoutSingleSeries(e,a.boxOffsetList[c],a.boxWidthList[c])})})};function groupSeriesByAxis(c){var b=[];var a=[];c.eachSeriesByType('boxplot',function(g){var f=g.getBaseAxis();var e=indexOf(a,f);if(e<0){e=a.length;a[e]=f;b[e]={axis:f,seriesModels:[]}}b[e].seriesModels.push(g)});return b}function calculateBase(c){var k;var i=c.axis;var a=c.seriesModels;var g=a.length;var o=c.boxWidthList=[];var n=c.boxOffsetList=[];var h=[];var b;if(i.type==='category'){b=i.getBandWidth()}else {var f=0;cg(a,function(a){f=Math.max(f,a.getData().count())});k=i.getExtent(),Math.abs(k[1]-k[0])/f}cg(a,function(e){var a=e.get('boxWidth');if(!isArray(a)){a=[a,a]}h.push([parsePercent$1(a[0],b)||0,parsePercent$1(a[1],b)||0])});var e=b*0.8-2;var l=e/g*0.3;var j=(e-l*(g-1))/g;var m=j/2-e/2;cg(a,function(b,a){n.push(m);m+=l+j;o.push(Math.min(Math.max(j,h[a][0]),h[a][1]))})}function layoutSingleSeries(i,t,r){var s=i.coordinateSystem;var f=i.getData();var h=r/2;var b=i.get('layout')==='horizontal'?0:1;var j=1-b;var k=['x','y'];var m=f.mapDimension(k[b]);var e=f.mapDimension(k[j],!0);if(m==null||e.length<5){return}for(var a=0;a<f.count();a++){var g=f.get(m,a);var l=getPoint(g,e[2],a);var n=getPoint(g,e[0],a);var o=getPoint(g,e[1],a);var p=getPoint(g,e[3],a);var q=getPoint(g,e[4],a);var c=[];addBodyEnd(c,o,0);addBodyEnd(c,p,1);c.push(n,o,q,p);layEndLine(c,n);layEndLine(c,q);layEndLine(c,l);f.setItemLayout(a,{initBaseline:l[j],ends:c})}function getPoint(e,k,h){var g=f.get(k,h);var c=[];c[b]=e;c[j]=g;var a;if(isNaN(e)||isNaN(g)){a=[NaN,NaN]}else {a=s.dataToPoint(c);a[b]+=t}return a}function addBodyEnd(f,e,g){var a=e.slice();var c=e.slice();a[b]+=h;c[b]-=h;g?f.push(a,c):f.push(c,a)}function layEndLine(f,a){var c=a.slice();var e=a.slice();c[b]-=h;e[b]+=h;f.push(c,e)}}registerVisual(lK);registerLayout(lJ);var kp=l.extend({type:'series.candlestick',dependencies:['xAxis','yAxis','grid'],defaultValueDimensions:[{name:'open',defaultTooltip:!0},{name:'close',defaultTooltip:!0},{name:'lowest',defaultTooltip:!0},{name:'highest',defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:'cartesian2d',legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:'#c23531',color0:'#314656',borderWidth:1,borderColor:'#c23531',borderColor0:'#314656'},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3000,progressiveThreshold:10000,progressiveChunkMode:'mod',animationUpdate:!1,animationEasing:'linear',animationDuration:300},getShadowDim:function(){return 'open'},brushSelector:function(b,e,c){var a=e.getItemLayout(b);return a&&c.rect(a.brushRect)}});mixin(kp,gS,!0);var f8=['itemStyle'];var jv=['emphasis','itemStyle'];var hU=['color','color0','borderColor','borderColor0'];var oR=Chart.extend({type:'candlestick',render:function(a,b,c){this.group.removeClipPath();this._updateDrawMode(a);this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},incrementalPrepareRender:function(a,b,c){this._clear();this._updateDrawMode(a)},incrementalRender:function(b,a,c,e){this._isLargeDraw?this._incrementalRenderLarge(b,a):this._incrementalRenderNormal(b,a)},_updateDrawMode:function(b){var a=b.pipelineContext.large;if(this._isLargeDraw==null||a^this._isLargeDraw){this._isLargeDraw=a;this._clear()}},_renderNormal:function(c){var a=c.getData();var e=this._data;var b=this.group;var f=a.getLayout('isSimpleBox');var g=c.get('clip',!0);var i=c.coordinateSystem;var h=i.getArea&&i.getArea();if(!this._data){b.removeAll()}a.diff(e).add(function(e){if(a.hasValue(e)){var i;var j=a.getItemLayout(e);if(g&&isNormalBoxClipped(h,j)){return}i=createNormalBox$1(j,e,!0);initProps(i,{shape:{points:j.ends}},c,e);setBoxCommon(i,a,e,f);b.add(i);a.setItemGraphicEl(e,i)}}).update(function(j,l){var i=e.getItemGraphicEl(l);if(!a.hasValue(j)){b.remove(i);return}var k=a.getItemLayout(j);if(g&&isNormalBoxClipped(h,k)){b.remove(i);return}if(!i){i=createNormalBox$1(k,j)}else {updateProps(i,{shape:{points:k.ends}},c,j)}setBoxCommon(i,a,j,f);b.add(i);a.setItemGraphicEl(j,i)}).remove(function(f){var a=e.getItemGraphicEl(f);a&&b.remove(a)}).execute();this._data=a},_renderLarge:function(a){this._clear();createLarge$1(a,this.group);var b=a.get('clip',!0)?createClipPath(a.coordinateSystem,!1,a):null;if(b){this.group.setClipPath(b)}else {this.group.removeClipPath()}},_incrementalRenderNormal:function(h,f){var c=f.getData();var e=c.getLayout('isSimpleBox');var a;while((a=h.next())!=null){var b;var g=c.getItemLayout(a);b=createNormalBox$1(g,a);setBoxCommon(b,c,a,e);b.incremental=!0;this.group.add(b)}},_incrementalRenderLarge:function(b,a){createLarge$1(a,this.group,!0)},remove:function(a){this._clear()},_clear:function(){this.group.removeAll();this._data=null},dispose:noop});var lI=Path.extend({type:'normalCandlestickBox',shape:{},buildPath:function(b,c){var a=c.points;if(this.__simpleBox){b.moveTo(a[4][0],a[4][1]);b.lineTo(a[6][0],a[6][1])}else {b.moveTo(a[0][0],a[0][1]);b.lineTo(a[1][0],a[1][1]);b.lineTo(a[2][0],a[2][1]);b.lineTo(a[3][0],a[3][1]);b.closePath();b.moveTo(a[4][0],a[4][1]);b.lineTo(a[5][0],a[5][1]);b.moveTo(a[6][0],a[6][1]);b.lineTo(a[7][0],a[7][1])}}});function createNormalBox$1(a,e,c){var b=a.ends;return new lI({shape:{points:c?transInit$1(b,a):b},z2:100})}function isNormalBoxClipped(e,b){var c=!0;for(var a=0;a<b.ends.length;a++){if(e.contain(b.ends[a][0],b.ends[a][1])){c=!1;break}}return c}function setBoxCommon(a,c,b,i){var e=c.getItemModel(b);var g=e.getModel(f8);var f=c.getItemVisual(b,'color');var h=c.getItemVisual(b,'borderColor')||f;var k=g.getItemStyle(hU);a.useStyle(k);a.style.strokeNoScale=!0;a.style.fill=f;a.style.stroke=h;a.__simpleBox=i;var j=e.getModel(jv).getItemStyle();setHoverStyle(a,j)}function transInit$1(b,a){return map(b,function(c){c=c.slice();c[1]=a.initBaseline;return c})}var hB=Path.extend({type:'largeCandlestickBox',shape:{},buildPath:function(c,f){var b=f.points;for(var a=0;a<b.length;){if(this.__sign===b[a++]){var e=b[a++];c.moveTo(e,b[a++]);c.lineTo(e,b[a++])}else {a+=3}}}});function createLarge$1(a,g,h){var b=a.getData();var f=b.getLayout('largePoints');var e=new hB({shape:{points:f},__sign:1});g.add(e);var c=new hB({shape:{points:f},__sign:-1});g.add(c);setLargeStyle$1(1,e,a,b);setLargeStyle$1(-1,c,a,b);if(h){e.incremental=!0;c.incremental=!0}}function setLargeStyle$1(h,a,f,c){var b=h>0?'P':'N';var e=c.getVisual('borderColor'+b)||c.getVisual('color'+b);var g=f.getModel(f8).getItemStyle(hU);a.useStyle(g);a.style.fill=null;a.style.stroke=e}var mo=function(a){if(!a||!isArray(a.series)){return}each$1(a.series,function(b){if(isObject$1(b)&&b.type==='k'){b.type='candlestick'}})};var jF=['itemStyle','borderColor'];var jE=['itemStyle','borderColor0'];var kl=['itemStyle','color'];var kk=['itemStyle','color0'];var ky={seriesType:'candlestick',plan:bh(),performRawSeries:!0,reset:function(a,c){var e=a.getData();var b=a.pipelineContext.large;e.setVisual({legendSymbol:'roundRect',colorP:getColor(1,a),colorN:getColor(-1,a),borderColorP:getBorderColor(1,a),borderColorN:getBorderColor(-1,a)});if(c.isSeriesFiltered(a)){return}return !b&&{progress:progress};function progress(h,e){var b;while((b=h.next())!=null){var f=e.getItemModel(b);var g=e.getItemLayout(b).sign;e.setItemVisual(b,{color:getColor(g,f),borderColor:getBorderColor(g,f)})}}function getColor(e,b){return b.get(e>0?kl:kk)}function getBorderColor(e,b){return b.get(e>0?jF:jE)}}};var m$=typeof Float32Array!=='undefined'?Float32Array:Array;var kx={seriesType:'candlestick',plan:bh(),reset:function(f){var i=f.coordinateSystem;var h=f.getData();var b=calculateCandleWidth(f,h);var a=0;var c=1;var l=['x','y'];var j=h.mapDimension(l[a]);var e=h.mapDimension(l[c],!0);var n=e[0];var g=e[1];var m=e[2];var k=e[3];h.setLayout({candleWidth:b,isSimpleBox:b<=1.3});if(j==null||e.length<4){return}return {progress:f.pipelineContext.large?largeProgress:normalProgress};function normalProgress(y,h){var e;while((e=y.next())!=null){var l=h.get(j,e);var p=h.get(n,e);var o=h.get(g,e);var u=h.get(m,e);var t=h.get(k,e);var z=Math.min(p,o);var x=Math.max(p,o);var s=getPoint(z,l);var r=getPoint(x,l);var w=getPoint(u,l);var v=getPoint(t,l);var q=[];addBodyEnd(q,r,0);addBodyEnd(q,s,1);q.push(subPixelOptimizePoint(v),subPixelOptimizePoint(r),subPixelOptimizePoint(w),subPixelOptimizePoint(s));h.setItemLayout(e,{sign:getSign(h,e,p,o,g),initBaseline:p>o?r[c]:s[c],ends:q,brushRect:makeBrushRect(u,t,l)})}function getPoint(g,e){var b=[];b[a]=e;b[c]=g;return isNaN(e)||isNaN(g)?[NaN,NaN]:i.dataToPoint(b)}function addBodyEnd(i,g,j){var c=g.slice();var e=g.slice();c[a]=cG(c[a]+b/2,1,!1);e[a]=cG(e[a]-b/2,1,!0);j?i.push(c,e):i.push(e,c)}function makeBrushRect(k,j,i){var e=getPoint(k,i);var g=getPoint(j,i);e[a]-=b/2;g[a]-=b/2;return {x:e[0],y:e[1],width:c?b:g[0]-e[0],height:c?g[1]-e[1]:b}}function subPixelOptimizePoint(b){b[a]=cG(b[a],1);return b}}function largeProgress(t,h){var o=new m$(t.count*4);var l=0;var b;var p=[];var u=[];var e;while((e=t.next())!=null){var q=h.get(j,e);var w=h.get(n,e);var v=h.get(g,e);var s=h.get(m,e);var r=h.get(k,e);if(isNaN(q)||isNaN(s)||isNaN(r)){o[l++]=NaN;l+=3;continue}o[l++]=getSign(h,e,w,v,g);p[a]=q;p[c]=s;b=i.dataToPoint(p,null,u);o[l++]=b?b[0]:NaN;o[l++]=b?b[1]:NaN;p[c]=r;b=i.dataToPoint(p,null,u);o[l++]=b?b[1]:NaN}h.setLayout('largePoints',o)}}};function getSign(g,c,e,b,f){var a;if(e>b){a=-1}else {if(e<b){a=1}else {a=c>0?g.get(f,c-1)<=b?1:-1:1}}return a}function calculateCandleWidth(b,i){var c=b.getBaseAxis();var e;var a=c.type==='category'?c.getBandWidth():(e=c.getExtent(),Math.abs(e[1]-e[0])/i.count());var g=parsePercent$1(retrieve2(b.get('barMaxWidth'),a),a);var h=parsePercent$1(retrieve2(b.get('barMinWidth'),1),a);var f=b.get('barWidth');return f!=null?parsePercent$1(f,a):Math.max(Math.min(a/2,g),h)}registerPreprocessor(mo);registerVisual(ky);registerLayout(kx);l.extend({type:'series.effectScatter',dependencies:['grid','polar'],getInitialData:function(b,a){return createListFromArray(this.getSource(),this)},brushSelector:'point',defaultOption:{coordinateSystem:'cartesian2d',zlevel:0,z:2,legendHoverLink:!0,effectType:'ripple',progressive:0,showEffectOn:'render',rippleEffect:{period:4,scale:2.5,brushType:'fill'},symbolSize:10}});var gp=3;function normalizeSymbolSize$1(a){if(!isArray(a)){a=[+a,+a]}return a}function updateRipplePath(c,a){var b=a.rippleEffectColor||a.color;c.eachChild(function(e){e.attr({z:a.z,zlevel:a.zlevel,style:{stroke:a.brushType==='stroke'?b:null,fill:a.brushType==='fill'?b:null}})})}function EffectSymbol(e,f){b.call(this);var c=new SymbolClz$1(e,f);var a=new b();this.add(c);this.add(a);a.beforeUpdate=function(){this.attr(c.getScale())};this.updateData(e,f)}var aT=EffectSymbol.prototype;aT.stopEffectAnimation=function(){this.childAt(1).removeAll()};aT.startEffectAnimation=function(a){var g=a.symbolType;var h=a.color;var e=this.childAt(1);for(var c=0;c<gp;c++){var b=createSymbol(g,-1,-1,2,2,h);b.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[0.5,0.5]});var f=-c/gp*a.period+a.effectOffset;b.animate('',!0).when(a.period,{scale:[a.rippleScale/2,a.rippleScale/2]}).delay(f).start();b.animateStyle(!0).when(a.period,{opacity:0}).delay(f).start();e.add(b)}updateRipplePath(e,a)};aT.updateEffectAnimation=function(a){var f=this._effectCfg;var g=this.childAt(1);var c=['symbolType','period','rippleScale'];for(var b=0;b<c.length;b++){var e=c[b];if(f[e]!==a[e]){this.stopEffectAnimation();this.startEffectAnimation(a);return}}updateRipplePath(g,a)};aT.highlight=function(){this.trigger('emphasis')};aT.downplay=function(){this.trigger('normal')};aT.updateData=function(c,e){var n=c.hostModel;this.childAt(0).updateData(c,e);var f=this.childAt(1);var b=c.getItemModel(e);var o=c.getItemVisual(e,'symbol');var h=normalizeSymbolSize$1(c.getItemVisual(e,'symbolSize'));var l=c.getItemVisual(e,'color');f.attr('scale',h);f.traverse(function(a){a.attr({fill:l})});var g=b.getShallow('symbolOffset');if(g){var m=f.position;m[0]=parsePercent$1(g[0],h[0]);m[1]=parsePercent$1(g[1],h[1])}f.rotation=(b.getShallow('symbolRotate')||0)*Math.PI/180||0;var a={};a.showEffectOn=n.get('showEffectOn');a.rippleScale=b.get('rippleEffect.scale');a.brushType=b.get('rippleEffect.brushType');a.period=b.get('rippleEffect.period')*1000;a.effectOffset=e/c.count();a.z=b.getShallow('z')||0;a.zlevel=b.getShallow('zlevel')||0;a.symbolType=o;a.color=l;a.rippleEffectColor=b.get('rippleEffect.color');this.off('mouseover').off('mouseout').off('emphasis').off('normal');if(a.showEffectOn==='render'){this._effectCfg?this.updateEffectAnimation(a):this.startEffectAnimation(a);this._effectCfg=a}else {this._effectCfg=null;this.stopEffectAnimation();var k=this.childAt(0);var i=function(){k.highlight();if(a.showEffectOn!=='render'){this.startEffectAnimation(a)}};var j=function(){k.downplay();if(a.showEffectOn!=='render'){this.stopEffectAnimation()}};this.on('mouseover',i,this).on('mouseout',j,this).on('emphasis',i,this).on('normal',j,this)}this._effectCfg=a};aT.fadeOut=function(a){this.off('mouseover').off('mouseout').off('emphasis').off('normal');a&&a()};inherits(EffectSymbol,b);extendChartView({type:'effectScatter',init:function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},render:function(b,e,f){var c=b.getData();var a=this._symbolDraw;a.updateData(c);this.group.add(a.group)},updateTransform:function(b,e,f){var a=b.getData();this.group.dirty();var c=b_().reset(b);if(c.progress){c.progress({start:0,end:a.count()},a)}this._symbolDraw.updateLayout(a)},_updateGroupTransform:function(b){var a=b.coordinateSystem;if(a&&a.getRoamTransform){this.group.transform=clone$2(a.getRoamTransform());this.group.decomposeTransform()}},remove:function(b,a){this._symbolDraw&&this._symbolDraw.remove(a)},dispose:function(){}});registerVisual(a$('effectScatter','circle'));registerLayout(b_('effectScatter'));var nu=typeof Uint32Array==='undefined'?Array:Uint32Array;var mZ=typeof Float64Array==='undefined'?Array:Float64Array;function compatEc2(c){var b=c.data;if(b&&b[0]&&b[0][0]&&b[0][0].coord){if(a){console.warn('Lines data configuration has been changed to'+' { coords:[[1,2],[2,3]] }')}c.data=map(b,function(a){var e=[a[0].coord,a[1].coord];var b={coords:e};if(a[0].name){b.fromName=a[0].name}if(a[1].name){b.toName=a[1].name}return mergeAll([b,a[0],a[1]])})}}var hK=l.extend({type:'series.lines',dependencies:['grid','polar'],visualColorAccessPath:'lineStyle.color',init:function(a){a.data=a.data||[];compatEc2(a);var b=this._processFlatCoordsArray(a.data);this._flatCoords=b.flatCoords;this._flatCoordsOffset=b.flatCoordsOffset;if(b.flatCoords){a.data=new Float32Array(b.count)}hK.superApply(this,'init',arguments)},mergeOption:function(a){a.data=a.data||[];compatEc2(a);if(a.data){var b=this._processFlatCoordsArray(a.data);this._flatCoords=b.flatCoords;this._flatCoordsOffset=b.flatCoordsOffset;if(b.flatCoords){a.data=new Float32Array(b.count)}}hK.superApply(this,'mergeOption',arguments)},appendData:function(b){var a=this._processFlatCoordsArray(b.data);if(a.flatCoords){if(!this._flatCoords){this._flatCoords=a.flatCoords;this._flatCoordsOffset=a.flatCoordsOffset}else {this._flatCoords=concatArray(this._flatCoords,a.flatCoords);this._flatCoordsOffset=concatArray(this._flatCoordsOffset,a.flatCoordsOffset)}b.data=new Float32Array(a.count)}this.getRawData().appendData(b.data)},_getCoordsFromItemModel:function(e){var c=this.getData().getItemModel(e);var b=c.option instanceof Array?c.option:c.getShallow('coords');if(a){if(!(b instanceof Array&&b.length>0&&b[0] instanceof Array)){throw new Error('Invalid coords '+JSON.stringify(b)+'. Lines must have 2d coords array in data item.')}}return b},getLineCoordsCount:function(a){if(this._flatCoordsOffset){return this._flatCoordsOffset[a*2+1]}else {return this._getCoordsFromItemModel(a).length}},getLineCoords:function(e,b){if(this._flatCoordsOffset){var f=this._flatCoordsOffset[e*2];var g=this._flatCoordsOffset[e*2+1];for(var a=0;a<g;a++){b[a]=b[a]||[];b[a][0]=this._flatCoords[f+a*2];b[a][1]=this._flatCoords[f+a*2+1]}return g}else {var c=this._getCoordsFromItemModel(e);for(var a=0;a<c.length;a++){b[a]=b[a]||[];b[a][0]=c[a][0];b[a][1]=c[a][1]}return c.length}},_processFlatCoordsArray:function(b){var j=0;if(this._flatCoords){j=this._flatCoords.length}if(typeof b[0]==='number'){var e=b.length;var f=new nu(e);var g=new mZ(e);var h=0;var i=0;var k=0;for(var c=0;c<e;){k++;var l=b[c++];f[i++]=h+j;f[i++]=l;for(var m=0;m<l;m++){var n=b[c++];var o=b[c++];g[h++]=n;g[h++]=o;if(c>e){if(a){throw new Error('Invalid data format.')}}}}return {flatCoordsOffset:new Uint32Array(f.buffer,0,i),flatCoords:g,count:k}}return {flatCoordsOffset:null,flatCoords:null,count:b.length}},getInitialData:function(c,f){if(a){var e=CoordinateSystemManager.get(c.coordinateSystem);if(!e){throw new Error('Unkown coordinate system '+c.coordinateSystem)}}var b=new s(['value'],this);b.hasItemOption=!1;b.initData(c.data,[],function(e,i,h,g){if(e instanceof Array){return NaN}else {b.hasItemOption=!0;var a=e.value;if(a!=null){return a instanceof Array?a[g]:a}}});return b},formatTooltip:function(g){var h=this.getData();var a=h.getItemModel(g);var f=a.get('name');if(f){return f}var c=a.get('fromName');var e=a.get('toName');var b=[];c!=null&&b.push(c);e!=null&&b.push(e);return encodeHTML(b.join(' > '))},preventIncremental:function(){return !!this.get('effect.show')},getProgressive:function(){var a=this.option.progressive;if(a==null){return this.option.large?10000:this.get('progressive')}return a},getProgressiveThreshold:function(){var a=this.option.progressiveThreshold;if(a==null){return this.option.large?20000:this.get('progressiveThreshold')}return a},defaultOption:{coordinateSystem:'geo',zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:['none','none'],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:'circle',symbolSize:3,loop:!0,trailLength:0.2},large:!1,largeThreshold:2000,polyline:!1,clip:!0,label:{show:!1,position:'end'},lineStyle:{opacity:0.5}}});function EffectLine(a,c,e){b.call(this);this.add(this.createLine(a,c,e));this._updateEffectSymbol(a,c)}var at=EffectLine.prototype;at.createLine=function(b,c,a){return new Line$1(b,c,a)};at._updateEffectSymbol=function(f,h){var i=f.getItemModel(h);var c=i.getModel('effect');var b=c.get('symbolSize');var e=c.get('symbol');if(!isArray(b)){b=[b,b]}var g=c.get('color')||f.getItemVisual(h,'color');var a=this.childAt(1);if(this._symbolType!==e){this.remove(a);a=createSymbol(e,-0.5,-0.5,1,1,g);a.z2=100;a.culling=!0;this.add(a)}if(!a){return}a.setStyle('shadowColor',g);a.setStyle(c.getItemStyle(['color']));a.attr('scale',b);a.setColor(g);a.attr('scale',b);this._symbolType=e;this._updateEffectAnimation(f,c,h)};at._updateEffectAnimation=function(j,c,l){var a=this.childAt(1);if(!a){return}var k=this;var n=j.getItemLayout(l);var b=c.get('period')*1000;var e=c.get('loop');var h=c.get('constantSpeed');var f=retrieve(c.get('delay'),function(a){return a/j.count()*b/3});var m=typeof f==='function';a.ignore=!0;this.updateAnimationPoints(a,n);if(h>0){b=this.getLineLength(a)/h*1000}if(b!==this._period||e!==this._loop){a.stopAnimation();var g=f;if(m){g=f(l)}if(a.__t>0){g=-b*a.__t}a.__t=0;var i=a.animate('',e).when(b,{__t:1}).delay(g).during(function(){k.updateSymbolPosition(a)});if(!e){i.done(function(){k.remove(a)})}i.start()}this._period=b;this._loop=e};at.getLineLength=function(a){return bd(a.__p1,a.__cp1)+bd(a.__cp1,a.__p2)};at.updateAnimationPoints=function(b,a){b.__p1=a[0];b.__p2=a[1];b.__cp1=a[2]||[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]};at.updateData=function(a,b,c){this.childAt(0).updateData(a,b,c);this._updateEffectSymbol(a,b)};at.updateSymbolPosition=function(a){var c=a.__p1;var e=a.__p2;var b=a.__cp1;var f=a.__t;var i=a.position;var h=quadraticAt;var g=quadraticDerivativeAt;i[0]=h(c[0],b[0],e[0],f);i[1]=h(c[1],b[1],e[1],f);var j=g(c[0],b[0],e[0],f);var k=g(c[1],b[1],e[1],f);a.rotation=-Math.atan2(k,j)-Math.PI/2;a.ignore=!1};at.updateLayout=function(a,b){this.childAt(0).updateLayout(a,b);var c=a.getItemModel(b).getModel('effect');this._updateEffectAnimation(a,c,b)};inherits(EffectLine,b);function Polyline$2(c,e,a){b.call(this);this._createPolyline(c,e,a)}var cU=Polyline$2.prototype;cU._createPolyline=function(a,b,c){var e=a.getItemLayout(b);var f=new L({shape:{points:e}});this.add(f);this._updateCommonStl(a,b,c)};cU.updateData=function(a,b,e){var c=a.hostModel;var g=this.childAt(0);var f={shape:{points:a.getItemLayout(b)}};updateProps(g,f,c,b);this._updateCommonStl(a,b,e)};cU._updateCommonStl=function(b,h,a){var g=this.childAt(0);var e=b.getItemModel(h);var i=b.getItemVisual(h,'color');var f=a&&a.lineStyle;var c=a&&a.hoverLineStyle;if(!a||b.hasItemOption){f=e.getModel('lineStyle').getLineStyle();c=e.getModel('emphasis.lineStyle').getLineStyle()}g.useStyle(defaults({strokeNoScale:!0,fill:'none',stroke:i},f));g.hoverStyle=c;setHoverStyle(this)};cU.updateLayout=function(a,c){var b=this.childAt(0);b.setShape('points',a.getItemLayout(c))};inherits(Polyline$2,b);function EffectPolyline(b,c,a){EffectLine.call(this,b,c,a);this._lastFrame=0;this._lastFramePercent=0}var cA=EffectPolyline.prototype;cA.createLine=function(b,c,a){return new Polyline$2(b,c,a)};cA.updateAnimationPoints=function(h,e){this._points=e;var c=[0];var b=0;for(var a=1;a<e.length;a++){var f=e[a-1];var g=e[a];b+=bd(f,g);c.push(b)}if(b===0){return}for(var a=0;a<c.length;a++){c[a]/=b}this._offsets=c;this._length=b};cA.getLineLength=function(a){return this._length};cA.updateSymbolPosition=function(g){var e=g.__t;var b=this._points;var c=this._offsets;var f=b.length;if(!c){return}var h=this._lastFrame;var a;if(e<this._lastFramePercent){var i=Math.min(h+1,f-1);for(a=i;a>=0;a--){if(c[a]<=e){break}}a=Math.min(a,f-2)}else {for(var a=h;a<f;a++){if(c[a]>e){break}}a=Math.min(a-1,f-2)}lerp(g.position,b[a],b[a+1],(e-c[a])/(c[a+1]-c[a]));var j=b[a+1][0]-b[a][0];var k=b[a+1][1]-b[a][1];g.rotation=-Math.atan2(k,j)-Math.PI/2;this._lastFrame=a;this._lastFramePercent=e;g.ignore=!1};inherits(EffectPolyline,EffectLine);var g8=extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(c,h){var b=h.segs;var g=h.curveness;if(h.polyline){for(var a=0;a<b.length;){var k=b[a++];if(k>0){c.moveTo(b[a++],b[a++]);for(var l=1;l<k;l++){c.lineTo(b[a++],b[a++])}}}}else {for(var a=0;a<b.length;){var i=b[a++];var j=b[a++];var e=b[a++];var f=b[a++];c.moveTo(i,j);if(g>0){var m=(i+e)/2-(j-f)*g;var n=(j+f)/2-(e-i)*g;c.quadraticCurveTo(m,n,e,f)}else {c.lineTo(e,f)}}}},findDataIndex:function(o,p){var j=this.shape;var b=j.segs;var i=j.curveness;if(j.polyline){var c=0;for(var a=0;a<b.length;){var k=b[a++];if(k>0){var e=b[a++];var g=b[a++];for(var l=1;l<k;l++){var f=b[a++];var h=b[a++];if(containStroke$1(e,g,f,h)){return c}}}c++}}else {var c=0;for(var a=0;a<b.length;){var e=b[a++];var g=b[a++];var f=b[a++];var h=b[a++];if(i>0){var m=(e+f)/2-(g-h)*i;var n=(g+h)/2-(f-e)*i;if(containStroke$3(e,g,m,n,f,h)){return c}}else {if(containStroke$1(e,g,f,h)){return c}}c++}}return -1}});function LargeLineDraw(){this.group=new b()}var aW=LargeLineDraw.prototype;aW.isPersistent=function(){return !this._incremental};aW.updateData=function(b){this.group.removeAll();var a=new g8({rectHover:!0,cursor:'default'});a.setShape({segs:b.getLayout('linesPoints')});this._setCommon(a,b);this.group.add(a);this._incremental=null};aW.incrementalPrepareUpdate=function(a){this.group.removeAll();this._clearIncremental();if(a.count()>500000){if(!this._incremental){this._incremental=new IncrementalDisplayble({silent:!0})}this.group.add(this._incremental)}else {this._incremental=null}};aW.incrementalUpdate=function(c,b){var a=new g8();a.setShape({segs:b.getLayout('linesPoints')});this._setCommon(a,b,!!this._incremental);if(!this._incremental){a.rectHover=!0;a.cursor='default';a.__startIndex=c.start;this.group.add(a)}else {this._incremental.addDisplayable(a,!0)}};aW.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};aW._setCommon=function(a,e,f){var b=e.hostModel;a.setShape({polyline:b.get('polyline'),curveness:b.get('lineStyle.curveness')});a.useStyle(b.getModel('lineStyle').getLineStyle());a.style.strokeNoScale=!0;var c=e.getVisual('color');if(c){a.setStyle('stroke',c)}a.setStyle('fill');if(!f){a.seriesIndex=b.seriesIndex;a.on('mousemove',function(c){a.dataIndex=null;var b=a.findDataIndex(c.offsetX,c.offsetY);if(b>0){a.dataIndex=b+a.__startIndex}})}};aW._clearIncremental=function(){var a=this._incremental;if(a){a.clearDisplaybles()}};var hP={seriesType:'lines',plan:bh(),reset:function(a){var b=a.coordinateSystem;var c=a.get('polyline');var e=a.pipelineContext.large;function progress(h,n){var i=[];if(e){var j;var s=h.end-h.start;if(c){var r=0;for(var g=h.start;g<h.end;g++){r+=a.getLineCoordsCount(g)}j=new Float32Array(s+r*2)}else {j=new Float32Array(s*4)}var o=0;var l=[];for(var g=h.start;g<h.end;g++){var k=a.getLineCoords(g,i);if(c){j[o++]=k}for(var q=0;q<k;q++){l=b.dataToPoint(i[q],!1,l);j[o++]=l[0];j[o++]=l[1]}}n.setLayout('linesPoints',j)}else {for(var g=h.start;g<h.end;g++){var t=n.getItemModel(g);var k=a.getLineCoords(g,i);var f=[];if(c){for(var p=0;p<k;p++){f.push(b.dataToPoint(i[p]))}}else {f[0]=b.dataToPoint(i[0]);f[1]=b.dataToPoint(i[1]);var m=t.get('lineStyle.curveness');if(+m){f[2]=[(f[0][0]+f[1][0])/2-(f[0][1]-f[1][1])*m,(f[0][1]+f[1][1])/2-(f[1][0]-f[0][0])*m]}}n.setItemLayout(g,f)}}}return {progress:progress}}};extendChartView({type:'lines',init:function(){},render:function(b,l,m){var j=b.getData();var k=this._updateLineDraw(j,b);var c=b.get('zlevel');var h=b.get('effect.trailLength');var e=m.getZr();var f=e.painter.getType()==='svg';if(!f){e.painter.getLayer(c).clear(!0)}if(this._lastZlevel!=null&&!f){e.configLayer(this._lastZlevel,{motionBlur:!1})}if(this._showEffect(b)&&h){if(a){var g=!1;l.eachSeries(function(a){if(a!==b&&a.get('zlevel')===c){g=!0}});g&&console.warn('Lines with trail effect should have an individual zlevel')}if(!f){e.configLayer(c,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(h/10+0.9,1),0)})}}k.updateData(j);var i=b.get('clip',!0)&&createClipPath(b.coordinateSystem,!1,b);if(i){this.group.setClipPath(i)}else {this.group.removeClipPath()}this._lastZlevel=c;this._finished=!0},incrementalPrepareRender:function(a,f,e){var b=a.getData();var c=this._updateLineDraw(b,a);c.incrementalPrepareUpdate(b);this._clearLayer(e);this._finished=!1},incrementalRender:function(b,a,c){this._lineDraw.incrementalUpdate(b,a.getData());this._finished=b.end===a.getData().count()},updateTransform:function(a,g,f){var c=a.getData();var b=a.pipelineContext;if(!this._finished||b.large||b.progressiveRender){return {update:!0}}else {var e=hP.reset(a);if(e.progress){e.progress({start:0,end:c.count()},c)}this._lineDraw.updateLayout();this._clearLayer(f)}},_updateLineDraw:function(i,f){var b=this._lineDraw;var c=this._showEffect(f);var g=!!f.get('polyline');var h=f.pipelineContext;var e=h.large;if(a){if(c&&e){console.warn('Large lines not support effect')}}if(!b||c!==this._hasEffet||g!==this._isPolyline||e!==this._isLargeDraw){if(b){b.remove()}b=this._lineDraw=e?new LargeLineDraw():new LineDraw(g?c?EffectPolyline:Polyline$2:c?EffectLine:Line$1);this._hasEffet=c;this._isPolyline=g;this._isLargeDraw=e;this.group.removeAll()}this.group.add(b.group);return b},_showEffect:function(a){return !!a.get('effect.show')},_clearLayer:function(c){var a=c.getZr();var b=a.painter.getType()==='svg';if(!b&&this._lastZlevel!=null){a.painter.getLayer(this._lastZlevel).clear(!0)}},remove:function(b,a){this._lineDraw&&this._lineDraw.remove();this._lineDraw=null;this._clearLayer(a)},dispose:function(){}});function normalize$2(a){if(!(a instanceof Array)){a=[a,a]}return a}var hE='lineStyle.opacity'.split('.');var mO={seriesType:'lines',reset:function(b,f,g){var e=normalize$2(b.get('symbol'));var c=normalize$2(b.get('symbolSize'));var a=b.getData();a.setVisual('fromSymbol',e&&e[0]);a.setVisual('toSymbol',e&&e[1]);a.setVisual('fromSymbolSize',c&&c[0]);a.setVisual('toSymbolSize',c&&c[1]);a.setVisual('opacity',b.get(hE));function dataEach(a,c){var i=a.getItemModel(c);var h=normalize$2(i.getShallow('symbol',!0));var e=normalize$2(i.getShallow('symbolSize',!0));var j=i.get(hE);h[0]&&a.setItemVisual(c,'fromSymbol',h[0]);h[1]&&a.setItemVisual(c,'toSymbol',h[1]);e[0]&&a.setItemVisual(c,'fromSymbolSize',e[0]);e[1]&&a.setItemVisual(c,'toSymbolSize',e[1]);a.setItemVisual(c,'opacity',j)}return {dataEach:a.hasItemOption?dataEach:null}}};registerLayout(hP);registerVisual(mO);l.extend({type:'series.heatmap',getInitialData:function(b,a){return createListFromArray(this.getSource(),this,{generateCoord:'value'})},preventIncremental:function(){var a=CoordinateSystemManager.get(this.get('coordinateSystem'));if(a&&a.dimensions){return a.dimensions[0]==='lng'&&a.dimensions[1]==='lat'}},defaultOption:{coordinateSystem:'cartesian2d',zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});var k0=256;function Heatmap(){var a=bu();this.canvas=a;this.blurSize=30;this.pointSize=20;this.maxOpacity=1;this.minOpacity=0;this._gradientPixels={}}Heatmap.prototype={update:function(h,z,w,u,m,t){var x=this._getBrush();var q=this._getGradient(h,m,'inRange');var p=this._getGradient(h,m,'outOfRange');var o=this.pointSize+this.blurSize;var a=this.canvas;var i=a.getContext('2d');var A=h.length;a.width=z;a.height=w;for(var j=0;j<A;++j){var k=h[j];var B=k[0];var C=k[1];var y=k[2];var b=u(y);i.globalAlpha=b;i.drawImage(x,B-o,C-o)}if(!a.width||!a.height){return a}var n=i.getImageData(0,0,a.width,a.height);var e=n.data;var c=0;var v=e.length;var l=this.minOpacity;var s=this.maxOpacity;var r=s-l;while(c<v){var b=e[c+3]/256;var f=Math.floor(b*(k0-1))*4;if(b>0){var g=t(b)?q:p;b>0&&(b=b*r+l);e[c++]=g[f];e[c++]=g[f+1];e[c++]=g[f+2];e[c++]=g[f+3]*b*256}else {c+=4}}i.putImageData(n,0,0);return a},_getBrush:function(){var c=this._brushCanvas||(this._brushCanvas=bu());var e=this.pointSize+this.blurSize;var b=e*2;c.width=b;c.height=b;var a=c.getContext('2d');a.clearRect(0,0,b,b);a.shadowOffsetX=b;a.shadowBlur=this.blurSize;a.shadowColor='#000';a.beginPath();a.arc(-e,e,this.pointSize,0,Math.PI*2,!0);a.closePath();a.fill();return c},_getGradient:function(i,h,e){var g=this._gradientPixels;var a=g[e]||(g[e]=new Uint8ClampedArray(256*4));var b=[0,0,0,0];var c=0;for(var f=0;f<256;f++){h[e](f/255,!0,b);a[c++]=b[0];a[c++]=b[1];a[c++]=b[2];a[c++]=b[3]}return a}};function getIsInPiecewiseRange(b,a,g){var f=b[1]-b[0];a=map(a,function(c){return {interval:[(c.interval[0]-b[0])/f,(c.interval[1]-b[0])/f]}});var e=a.length;var c=0;return function(i){for(var f=c;f<e;f++){var h=a[f].interval;if(h[0]<=i&&i<=h[1]){c=f;break}}if(f===e){for(var f=c-1;f>=0;f--){var h=a[f].interval;if(h[0]<=i&&i<=h[1]){c=f;break}}}return f>=0&&f<e&&g[f]}}function getIsInContinuousRange(b,a){var c=b[1]-b[0];a=[(a[0]-b[0])/c,(a[1]-b[0])/c];return function(c){return c>=a[0]&&c<=a[1]}}function isGeoCoordSys(b){var a=b.dimensions;return a[0]==='lng'&&a[1]==='lat'}extendChartView({type:'heatmap',render:function(b,g,f){var e;g.eachComponent('visualMap',function(a){a.eachTargetSeries(function(c){if(c===b){e=a}})});if(a){if(!e){throw new Error('Heatmap must use with visualMap')}}this.group.removeAll();this._incrementalDisplayable=null;var c=b.coordinateSystem;if(c.type==='cartesian2d'||c.type==='calendar'){this._renderOnCartesianAndCalendar(b,f,0,b.getData().count())}else {if(isGeoCoordSys(c)){this._renderOnGeo(c,b,e,f)}}},incrementalPrepareRender:function(a,b,c){this.group.removeAll()},incrementalRender:function(b,a,f,e){var c=a.coordinateSystem;if(c){this._renderOnCartesianAndCalendar(a,e,b.start,b.end,!0)}},_renderOnCartesianAndCalendar:function(e,E,C,D,x){var g=e.coordinateSystem;var o;var m;if(g.type==='cartesian2d'){var p=g.getAxis('x');var q=g.getAxis('y');if(a){if(!(p.type==='category'&&q.type==='category')){throw new Error('Heatmap on cartesian must have two category axes')}if(!(p.onBand&&q.onBand)){throw new Error('Heatmap on cartesian must have two axes with boundaryGap true')}}o=p.getBandWidth();m=q.getBandWidth()}var B=this.group;var b=e.getData();var u='itemStyle';var r='emphasis.itemStyle';var z='label';var t='emphasis.label';var n=e.getModel(u).getItemStyle(['color']);var k=e.getModel(r).getItemStyle();var y=e.getModel(z);var s=e.getModel(t);var v=g.type;var i=v==='cartesian2d'?[b.mapDimension('x'),b.mapDimension('y'),b.mapDimension('value')]:[b.mapDimension('time'),b.mapDimension('value')];for(var c=C;c<D;c++){var f;if(v==='cartesian2d'){if(isNaN(b.get(i[2],c))){continue}var A=g.dataToPoint([b.get(i[0],c),b.get(i[1],c)]);f=new h({shape:{x:A[0]-o/2,y:A[1]-m/2,width:o,height:m},style:{fill:b.getItemVisual(c,'color'),opacity:b.getItemVisual(c,'opacity')}})}else {if(isNaN(b.get(i[1],c))){continue}f=new h({z2:1,shape:g.dataToRect([b.get(i[0],c)]).contentShape,style:{fill:b.getItemVisual(c,'color'),opacity:b.getItemVisual(c,'opacity')}})}var j=b.getItemModel(c);if(b.hasItemOption){n=j.getModel(u).getItemStyle(['color']);k=j.getModel(r).getItemStyle();y=j.getModel(z);s=j.getModel(t)}var l=e.getRawValue(c);var w='-';if(l&&l[2]!=null){w=l[2]}setLabelStyle(n,k,y,s,{labelFetcher:e,labelDataIndex:c,defaultText:w,isRectText:!0});f.setStyle(n);setHoverStyle(f,b.hasItemOption?k:extend({},k));f.incremental=x;if(x){f.useHoverLayer=!0}B.add(f);b.setItemGraphicEl(c,f)}},_renderOnGeo:function(g,e,a,n){var j=a.targetVisuals.inRange;var o=a.targetVisuals.outOfRange;var f=e.getData();var c=this._hmLayer||(this._hmLayer||new Heatmap());c.blurSize=e.get('blurSize');c.pointSize=e.get('pointSize');c.minOpacity=e.get('minOpacity');c.maxOpacity=e.get('maxOpacity');var b=g.getViewRect().clone();var p=g.getRoamTransform();b.applyTransform(p);var h=Math.max(b.x,0);var i=Math.max(b.y,0);var u=Math.min(b.width+b.x,n.getWidth());var v=Math.min(b.height+b.y,n.getHeight());var m=u-h;var l=v-i;var s=[f.mapDimension('lng'),f.mapDimension('lat'),f.mapDimension('value')];var r=f.mapArray(s,function(j,f,c){var b=g.dataToPoint([j,f]);b[0]-=h;b[1]-=i;b.push(c);return b});var k=a.getExtent();var q=a.type==='visualMap.continuous'?getIsInContinuousRange(k,a.option.range):getIsInPiecewiseRange(k,a.getPieceList(),a.option.selected);c.update(r,m,l,j.color.getNormalizer(),{inRange:j.color.getColorMapper(),outOfRange:o.color.getColorMapper()},q);var t=new ZImage({style:{width:m,height:l,x:h,y:i,image:c.canvas},silent:!0});this.group.add(t)},dispose:function(){}});var kc=hk.extend({type:'series.pictorialBar',dependencies:['grid'],defaultOption:{symbol:'circle',symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:'end',symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:'-100%',progressive:0,hoverAnimation:!1},getInitialData:function(a){a.stack=null;return kc.superApply(this,'getInitialData',arguments)}});var jA=['itemStyle','borderWidth'];var hA=[{xy:'x',wh:'width',index:0,posDesc:['left','right']},{xy:'y',wh:'height',index:1,posDesc:['top','bottom']}];var el=new ao();var o$=extendChartView({type:'pictorialBar',render:function(h,l,j){var f=this.group;var a=h.getData();var e=this._data;var i=h.coordinateSystem;var k=i.getBaseAxis();var g=!!k.isHorizontal();var c=i.grid.getRect();var b={ecSize:{width:j.getWidth(),height:j.getHeight()},seriesModel:h,coordSys:i,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:g,valueDim:hA[+g],categoryDim:hA[1-g]};a.diff(e).add(function(c){if(!a.hasValue(c)){return}var i=getItemModel(a,c);var g=getSymbolMeta(a,c,i,b);var e=createBar(a,b,g);a.setItemGraphicEl(c,e);f.add(e);updateCommon$1(e,b,g)}).update(function(i,n){var c=e.getItemGraphicEl(n);if(!a.hasValue(i)){f.remove(c);return}var m=getItemModel(a,i);var g=getSymbolMeta(a,i,m,b);var k=getShapeStr(a,g);if(c&&k!==c.__pictorialShapeStr){f.remove(c);a.setItemGraphicEl(i,null);c=null}if(c){updateBar(c,b,g)}else {c=createBar(a,b,g,!0)}a.setItemGraphicEl(i,c);c.__pictorialSymbolMeta=g;f.add(c);updateCommon$1(c,b,g)}).remove(function(b){var a=e.getItemGraphicEl(b);a&&removeBar(e,b,a.__pictorialSymbolMeta.animationModel,a)}).execute();this._data=a;return this.group},dispose:noop,remove:function(b,e){var c=this.group;var a=this._data;if(b.get('animation')){if(a){a.eachItemGraphicEl(function(c){removeBar(a,c.dataIndex,b,c)})}}else {c.removeAll()}}});function getSymbolMeta(h,e,a,i){var g=h.getItemLayout(e);var f=a.get('symbolRepeat');var j=a.get('symbolClip');var o=a.get('symbolPosition')||'start';var p=a.get('symbolRotate');var n=(p||0)*Math.PI/180||0;var m=a.get('symbolPatternSize')||2;var l=a.isAnimationEnabled();var b={dataIndex:e,layout:g,itemModel:a,symbolType:h.getItemVisual(e,'symbol')||'circle',color:h.getItemVisual(e,'color'),symbolClip:j,symbolRepeat:f,symbolRepeatDirection:a.get('symbolRepeatDirection'),symbolPatternSize:m,rotation:n,animationModel:l?a:null,hoverAnimation:l&&a.get('hoverAnimation'),z2:a.getShallow('z',!0)||0};prepareBarLength(a,f,g,i,b);prepareSymbolSize(h,e,g,f,j,b.boundingLength,b.pxSign,m,i,b);prepareLineWidth(a,b.symbolScale,n,i,b);var k=b.symbolSize;var c=a.get('symbolOffset');if(isArray(c)){c=[parsePercent$1(c[0],k[0]),parsePercent$1(c[1],k[1])]}prepareLayoutInfo(a,k,g,f,j,c,o,b.valueLineWidth,b.boundingLength,b.repeatCutLength,i,b);return b}function prepareBarLength(m,k,i,h,j){var f=h.valueDim;var b=m.get('symbolBoundingData');var c=h.coordSys.getOtherAxis(h.coordSys.getBaseAxis());var g=c.toGlobalCoord(c.dataToCoord(0));var l=1-+(i[f.wh]<=0);var a;if(isArray(b)){var e=[convertToCoordOnAxis(c,b[0])-g,convertToCoordOnAxis(c,b[1])-g];e[1]<e[0]&&e.reverse();a=e[l]}else {if(b!=null){a=convertToCoordOnAxis(c,b)-g}else {if(k){a=h.coordSysExtent[f.index][l]-g}else {a=i[f.wh]}}}j.boundingLength=a;if(k){j.repeatCutLength=i[f.wh]}j.pxSign=a>0?1:a<0?-1:0}function convertToCoordOnAxis(a,b){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(b)))}function prepareSymbolSize(o,l,m,j,p,i,n,f,e,h){var c=e.valueDim;var b=e.categoryDim;var g=Math.abs(m[b.wh]);var a=o.getItemVisual(l,'symbolSize');if(isArray(a)){a=a.slice()}else {if(a==null){a='100%'}a=[a,a]}a[b.index]=parsePercent$1(a[b.index],g);a[c.index]=parsePercent$1(a[c.index],j?g:Math.abs(i));h.symbolSize=a;var k=h.symbolScale=[a[0]/f,a[1]/f];k[c.index]*=(e.isHorizontal?-1:1)*n}function prepareLineWidth(c,b,e,g,f){var a=c.get(jA)||0;if(a){el.attr({scale:b.slice(),rotation:e});el.updateTransform();a/=el.getLineScale();a*=b[g.valueDim.index]}f.valueLineWidth=a}function prepareLayoutInfo(C,y,e,j,E,p,w,B,o,t,r,f){var c=r.categoryDim;var b=r.valueDim;var A=f.pxSign;var k=Math.max(y[b.index]+B,0);var z=k;if(j){var s=Math.abs(o);var a=retrieve(C.get('symbolMargin'),'15%')+'';var m=!1;if(a.lastIndexOf('!')===a.length-1){m=!0;a=a.slice(0,a.length-1)}a=parsePercent$1(a,y[b.index]);var i=Math.max(k+a*2,0);var n=m?0:a*2;var u=isNumeric(j);var g=u?j:toIntTimes((s+n)/i);var D=s-g*k;a=D/2/(m?g:g-1);i=k+a*2;n=m?0:a*2;if(!u&&j!=='fixed'){g=t?toIntTimes((Math.abs(t)+n)/i):0}z=g*i-n;f.repeatTimes=g;f.symbolMargin=a}var q=A*(z/2);var h=f.pathPosition=[];h[c.index]=e[c.wh]/2;h[b.index]=w==='start'?q:w==='end'?o-q:o/2;if(p){h[0]+=p[0];h[1]+=p[1]}var v=f.bundlePosition=[];v[c.index]=e[c.xy];v[b.index]=e[b.xy];var x=f.barRectShape=extend({},e);x[b.wh]=A*Math.max(Math.abs(e[b.wh]),Math.abs(h[b.index]+q));x[c.wh]=e[c.wh];var l=f.clipShape={};l[c.xy]=-e[c.xy];l[c.wh]=r.ecSize[c.wh];l[b.xy]=0;l[b.wh]=e[b.wh]}function createPath(c){var a=c.symbolPatternSize;var b=createSymbol(c.symbolType,-a/2,-a/2,a,a,c.color);b.attr({culling:!0});b.type!=='image'&&b.setStyle({strokeNoScale:!0});return b}function createOrUpdateRepeatSymbols(f,l,a,g){var k=f.__pictorialBundle;var n=a.symbolSize;var m=a.valueLineWidth;var i=a.pathPosition;var j=l.valueDim;var c=a.repeatTimes||0;var b=0;var o=n[l.valueDim.index]+m+a.symbolMargin*2;eachPath(f,function(e){e.__pictorialAnimationIndex=b;e.__pictorialRepeatTimes=c;if(b<c){updateAttr(e,null,makeTarget(b),a,g)}else {updateAttr(e,null,{scale:[0,0]},a,g,function(){k.remove(e)})}updateHoverAnimation(e,a);b++});for(;b<c;b++){var e=createPath(a);e.__pictorialAnimationIndex=b;e.__pictorialRepeatTimes=c;k.add(e);var h=makeTarget(b);updateAttr(e,{position:h.position,scale:[0,0]},{scale:h.scale,rotation:h.rotation},a,g);e.on('mouseover',onMouseOver).on('mouseout',onMouseOut);updateHoverAnimation(e,a)}function makeTarget(h){var b=i.slice();var e=a.pxSign;var k=h;if(a.symbolRepeatDirection==='start'?e>0:e<0){k=c-1-h}b[j.index]=o*(k-c/2+0.5)+i[j.index];return {position:b,scale:a.symbolScale.slice(),rotation:a.rotation}}function onMouseOver(){eachPath(f,function(b){b.trigger('emphasis')})}function onMouseOut(){eachPath(f,function(b){b.trigger('normal')})}}function createOrUpdateSingleSymbol(c,g,a,e){var f=c.__pictorialBundle;var b=c.__pictorialMainPath;if(!b){b=c.__pictorialMainPath=createPath(a);f.add(b);updateAttr(b,{position:a.pathPosition.slice(),scale:[0,0],rotation:a.rotation},{scale:a.symbolScale.slice()},a,e);b.on('mouseover',onMouseOver).on('mouseout',onMouseOut)}else {updateAttr(b,null,{position:a.pathPosition.slice(),scale:a.symbolScale.slice(),rotation:a.rotation},a,e)}updateHoverAnimation(b,a);function onMouseOver(){this.trigger('emphasis')}function onMouseOut(){this.trigger('normal')}}function createOrUpdateBarRect(b,c,f){var e=extend({},c.barRectShape);var a=b.__pictorialBarRect;if(!a){a=b.__pictorialBarRect=new h({z2:2,shape:e,silent:!0,style:{stroke:'transparent',fill:'transparent',lineWidth:0}});b.add(a)}else {updateAttr(a,null,{shape:e},c,f)}}function createOrUpdateClip(f,l,b,k){if(b.symbolClip){var a=f.__pictorialClipPath;var c=extend({},b.clipShape);var e=l.valueDim;var g=b.animationModel;var i=b.dataIndex;if(a){updateProps(a,{shape:c},g,i)}else {c[e.wh]=0;a=new h({shape:c});f.__pictorialBundle.setClipPath(a);f.__pictorialClipPath=a;var j={};j[e.wh]=b.clipShape[e.wh];an[k?'updateProps':'initProps'](a,{shape:j},g,i)}}}function getItemModel(c,b){var a=c.getItemModel(b);a.getAnimationDelayParams=getAnimationDelayParams;a.isAnimationEnabled=isAnimationEnabled;return a}function getAnimationDelayParams(a){return {index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow('animation')}function updateHoverAnimation(c,b){c.off('emphasis').off('normal');var a=b.symbolScale.slice();b.hoverAnimation&&c.on('emphasis',function(){this.animateTo({scale:[a[0]*1.1,a[1]*1.1]},400,'elasticOut')}).on('normal',function(){this.animateTo({scale:a.slice()},400,'elasticOut')})}function createBar(h,f,c,g){var a=new b();var e=new b();a.add(e);a.__pictorialBundle=e;e.attr('position',c.bundlePosition.slice());if(c.symbolRepeat){createOrUpdateRepeatSymbols(a,f,c)}else {createOrUpdateSingleSymbol(a,f,c)}createOrUpdateBarRect(a,c,g);createOrUpdateClip(a,f,c,g);a.__pictorialShapeStr=getShapeStr(h,c);a.__pictorialSymbolMeta=c;return a}function updateBar(b,c,a){var e=a.animationModel;var f=a.dataIndex;var g=b.__pictorialBundle;updateProps(g,{position:a.bundlePosition.slice()},e,f);if(a.symbolRepeat){createOrUpdateRepeatSymbols(b,c,a,!0)}else {createOrUpdateSingleSymbol(b,c,a,!0)}createOrUpdateBarRect(b,a,!0);createOrUpdateClip(b,c,a,!0)}function removeBar(g,e,c,a){var f=a.__pictorialBarRect;f&&(f.style.text=null);var b=[];eachPath(a,function(f){b.push(f)});a.__pictorialMainPath&&b.push(a.__pictorialMainPath);a.__pictorialClipPath&&(c=null);each$1(b,function(b){updateProps(b,{scale:[0,0]},c,e,function(){a.parent&&a.parent.remove(a)})});g.setItemGraphicEl(e,null)}function getShapeStr(b,a){return [b.getItemVisual(a.dataIndex,'symbol')||'none',!!a.symbolRepeat,!!a.symbolClip].join(':')}function eachPath(a,c,b){each$1(a.__pictorialBundle.children(),function(e){e!==a.__pictorialBarRect&&c.call(b,e)})}function updateAttr(c,e,a,b,f,g){e&&c.attr(e);if(b.symbolClip&&!f){a&&c.attr(a)}else {a&&an[f?'updateProps':'initProps'](c,a,b.animationModel,b.dataIndex,g)}}function updateCommon$1(h,i,a){var c=a.color;var m=a.dataIndex;var b=a.itemModel;var k=b.getModel('itemStyle').getItemStyle(['color']);var l=b.getModel('emphasis.itemStyle').getItemStyle();var f=b.getShallow('cursor');eachPath(h,function(b){b.setColor(c);b.setStyle(defaults({fill:c,opacity:a.opacity},k));setHoverStyle(b,l);f&&(b.cursor=f);b.z2=a.z2});var e={};var j=i.valueDim.posDesc[+(a.boundingLength>0)];var g=h.__pictorialBarRect;setLabel(g.style,e,b,c,i.seriesModel,m,j);setHoverStyle(g,e)}function toIntTimes(a){var b=Math.round(a);return Math.abs(a-b)<1.0E-4?b:Math.ceil(a)}registerLayout(curry(layout,'pictorialBar'));registerVisual(a$('pictorialBar','roundRect'));var c2=function(f,e,a,b,c){q.call(this,f,e,a);this.type=b||'value';this.position=c||'bottom';this.orient=null};c2.prototype={constructor:c2,model:null,isHorizontal:function(){var a=this.position;return a==='top'||a==='bottom'},pointToData:function(b,a){return this.coordinateSystem.pointToData(b,a)[0]},toGlobalCoord:null,toLocalCoord:null};inherits(c2,q);function Single(a,b,c){this.dimension='single';this.dimensions=['single'];this._axis=null;this._rect;this._init(a,b,c);this.model=a}Single.prototype={type:'singleAxis',axisPointerEnabled:!0,constructor:Single,_init:function(a,f,g){var e=this.dimension;var b=new c2(e,createScaleByModel(a),[0,0],a.get('type'),a.get('position'));var c=b.type==='category';b.onBand=c&&a.get('boundaryGap');b.inverse=a.get('inverse');b.orient=a.get('orient');a.axis=b;b.model=a;b.coordinateSystem=this;this._axis=b},update:function(a,b){a.eachSeries(function(c){if(c.coordinateSystem===this){var e=c.getData();each$1(e.mapDimension(this.dimension,!0),function(f){this._axis.scale.unionExtentFromData(e,f)},this);niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(a,b){this._rect=getLayoutRect({left:a.get('left'),top:a.get('top'),right:a.get('right'),bottom:a.get('bottom'),width:a.get('width'),height:a.get('height')},{width:b.getWidth(),height:b.getHeight()});this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var b=this._rect;var a=this._axis;var c=a.isHorizontal();var e=c?[0,b.width]:[0,b.height];var f=a.reverse?1:0;a.setExtent(e[f],e[1-f]);this._updateAxisTransform(a,c?b.x:b.y)},_updateAxisTransform:function(b,a){var e=b.getExtent();var f=e[0]+e[1];var c=b.isHorizontal();b.toGlobalCoord=c?function(c){return c+a}:function(c){return f-c+a};b.toLocalCoord=c?function(c){return c-a}:function(c){return f-c+a}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return [this._axis]},getTooltipAxes:function(){return {baseAxes:[this.getAxis()]}},containPoint:function(a){var b=this.getRect();var c=this.getAxis();var e=c.orient;if(e==='horizontal'){return c.contain(c.toLocalCoord(a[0]))&&(a[1]>=b.y&&a[1]<=b.y+b.height)}else {return c.contain(c.toLocalCoord(a[1]))&&(a[0]>=b.y&&a[0]<=b.y+b.height)}},pointToData:function(b){var a=this.getAxis();return [a.coordToData(a.toLocalCoord(b[a.orient==='horizontal'?0:1]))]},dataToPoint:function(b){var c=this.getAxis();var a=this.getRect();var f=[];var e=c.orient==='horizontal'?0:1;if(b instanceof Array){b=b[0]}f[e]=c.toGlobalCoord(c.dataToCoord(+b));f[1-e]=e===0?a.y+a.height/2:a.x+a.width/2;return f}};function create$3(a,c){var b=[];a.eachComponent('singleAxis',function(f,g){var e=new Single(f,a,c);e.name='single_'+g;e.resize(f,c);f.coordinateSystem=e;b.push(e)});a.eachSeries(function(b){if(b.get('coordinateSystem')==='singleAxis'){var e=a.queryComponents({mainType:'singleAxis',index:b.get('singleAxisIndex'),id:b.get('singleAxisId')})[0];b.coordinateSystem=e&&e.coordinateSystem}});return b}CoordinateSystemManager.register('single',{create:create$3,dimensions:Single.prototype.dimensions});function layout$2(e,h){h=h||{};var m=e.coordinateSystem;var k=e.axis;var a={};var g=k.position;var i=k.orient;var c=m.getRect();var b=[c.x,c.x+c.width,c.y,c.y+c.height];var j={horizontal:{top:b[2],bottom:b[3]},vertical:{left:b[0],right:b[1]}};a.position=[i==='vertical'?j.vertical[g]:b[0],i==='horizontal'?j.horizontal[g]:b[3]];var n={horizontal:0,vertical:1};a.rotation=Math.PI/2*n[i];var l={top:-1,bottom:1,right:1,left:-1};a.labelDirection=a.tickDirection=a.nameDirection=l[g];if(e.get('axisTick.inside')){a.tickDirection=-a.tickDirection}if(retrieve(h.labelInside,e.get('axisLabel.inside'))){a.labelDirection=-a.labelDirection}var f=h.rotate;f==null&&(f=e.get('axisLabel.rotate'));a.labelRotation=g==='top'?-f:f;a.z2=1;return a}var kg=['axisLine','axisTickLabel','axisName'];var g2='splitLine';var lk=G.extend({type:'singleAxis',axisPointerClass:'SingleAxisPointer',render:function(a,e,h,f){var c=this.group;c.removeAll();var g=layout$2(a);var b=new x(a,g);each$1(kg,b.add,b);c.add(b.getGroup());if(a.get(g2+'.show')){this['_'+g2](a)}lk.superCall(this,'render',a,e,h,f)},_splitLine:function(l){var i=l.axis;if(i.scale.isBlank()){return}var n=l.getModel('splitLine');var j=n.getModel('lineStyle');var m=j.get('width');var b=j.get('color');b=b instanceof Array?b:[b];var c=l.coordinateSystem.getRect();var p=i.isHorizontal();var g=[];var q=0;var o=i.getTicksCoords({tickModel:n});var e=[];var f=[];for(var a=0;a<o.length;++a){var h=i.toGlobalCoord(o[a].coord);if(p){e[0]=h;e[1]=c.y;f[0]=h;f[1]=c.y+c.height}else {e[0]=c.x;e[1]=h;f[0]=c.x+c.width;f[1]=h}var k=q++%b.length;g[k]=g[k]||[];g[k].push(new B({subPixelOptimize:!0,shape:{x1:e[0],y1:e[1],x2:f[0],y2:f[1]},style:{lineWidth:m},silent:!0}))}for(var a=0;a<g.length;++a){this.group.add(ak(g[a],{style:{stroke:b[a%b.length],lineDash:j.getLineDash(m),lineWidth:m},silent:!0}))}}});var hI=g.extend({type:'singleAxis',layoutMode:'box',axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});var k6={left:'5%',top:'5%',right:'5%',bottom:'5%',type:'value',position:'bottom',orient:'horizontal',axisLine:{show:!0,lineStyle:{width:1,type:'solid'}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:'auto'},splitLine:{show:!0,lineStyle:{type:'dashed',opacity:0.2}}};function getAxisType$2(b,a){return a.type||(a.data?'category':'value')}merge(hI.prototype,aQ);bk('single',hI,getAxisType$2,k6);var gu=function(j,k){var f=[];var i=j.seriesIndex;var b;if(i==null||!(b=k.getSeriesByIndex(i))){return {point:[]}}var g=b.getData();var a=queryDataIndex(g,j);if(a==null||a<0||isArray(a)){return {point:[]}}var h=g.getItemGraphicEl(a);var e=b.coordinateSystem;if(b.getTooltipPosition){f=b.getTooltipPosition(a)||[]}else {if(e&&e.dataToPoint){f=e.dataToPoint(g.getValues(map(e.dimensions,function(a){return g.mapDimension(a)}),a,!0))||[]}else {if(h){var c=h.getBoundingRect().clone();c.applyTransform(h.transform);f=[c.x+c.width/2,c.y+c.height/2]}}}return {point:f,el:h}};var $=each$1;var iC=curry;var iL=makeInner();var mD=function(b,p,i){var q=b.currTrigger;var a=[b.x,b.y];var h=b;var k=b.dispatchAction||bind(i.dispatchAction,i);var c=p.getComponent('axisPointer').coordSysAxesInfo;if(!c){return}if(illegalPoint(a)){a=gu({seriesIndex:h.seriesIndex,dataIndex:h.dataIndex},p).point}var l=illegalPoint(a);var m=h.axesInfo;var g=c.axesInfo;var r=q==='leave'||illegalPoint(a);var e={};var f={};var j={list:[],map:{}};var o={showPointer:iC(showPointer,f),showTooltip:iC(showTooltip,j)};$(c.coordSysMap,function(h,g){var f=l||h.containPoint(a);$(c.coordSysAxesInfo[g],function(k,q){var n=k.axis;var j=findInputAxisInfo(m,k);if(!r&&f&&(!m||j)){var c=j&&j.value;if(c==null&&!l){c=n.pointToData(a)}c!=null&&processOnAxis(k,c,o,!1,e)}})});var n={};$(g,function(a,e){var c=a.linkGroup;if(c&&!f[e]){$(c.axesInfo,function(h,k){var j=f[k];if(h!==a&&j){var g=j.value;c.mapper&&(g=a.axis.scale.parse(c.mapper(g,makeMapperParam(h),makeMapperParam(a))));n[a.key]=g}})}});$(n,function(c,a){processOnAxis(g[a],c,o,!0,e)});updateModelActually(f,g,e);dispatchTooltipActually(j,a,b,k);dispatchHighDownActually(g,k,i);return e};function processOnAxis(a,b,h,j,e){var i=a.axis;if(i.scale.isBlank()||!i.containData(b)){return}if(!a.involveSeries){h.showPointer(a,b);return}var g=buildPayloadsBySeries(b,a);var f=g.payloadBatch;var c=g.snapToValue;if(f[0]&&e.seriesIndex==null){extend(e,f[0])}if(!j&&a.snap){if(i.containData(c)&&c!=null){b=c}}h.showPointer(a,b,f,e);h.showTooltip(a,g,c)}function buildPayloadsBySeries(a,g){var e=g.axis;var i=e.dim;var f=a;var b=[];var c=Number.MAX_VALUE;var h=-1;$(g.seriesModels,function(j,q){var m=j.getData().mapDimension(i,!0);var k;var l;if(j.getAxisTooltipData){var p=j.getAxisTooltipData(m,a,e);l=p.dataIndices;k=p.nestestValue}else {l=j.getData().indicesOfNearest(m[0],a,e.type==='category'?0.5:null);if(!l.length){return}k=j.getData().get(m[0],l[0])}if(k==null||!isFinite(k)){return}var n=a-k;var o=Math.abs(n);if(o<=c){if(o<c||n>=0&&h<0){c=o;h=n;f=k;b.length=0}$(l,function(c){b.push({seriesIndex:j.seriesIndex,dataIndexInside:c,dataIndex:j.getData().getRawIndex(c)})})}});return {payloadBatch:b,snapToValue:f}}function showPointer(b,c,e,a){b[c.key]={value:e,payloadBatch:a}}function showTooltip(e,c,k,l){var h=k.payloadBatch;var j=c.axis;var f=j.model;var g=c.axisPointerModel;if(!c.triggerTooltip||!h.length){return}var a=c.coordSys.model;var i=makeKey(a);var b=e.map[i];if(!b){b=e.map[i]={coordSysId:a.id,coordSysIndex:a.componentIndex,coordSysType:a.type,coordSysMainType:a.mainType,dataByAxis:[]};e.list.push(b)}b.dataByAxis.push({axisDim:j.dim,axisIndex:f.componentIndex,axisType:f.type,axisId:f.id,value:l,valueLabelOpt:{precision:g.get('label.precision'),formatter:g.get('label.formatter')},seriesDataIndices:h.slice()})}function updateModelActually(c,e,b){var a=b.axesInfo=[];$(e,function(g,i){var f=g.axisPointerModel.option;var h=c[i];if(h){!g.useHandle&&(f.status='show');f.value=h.value;f.seriesDataIndices=(h.payloadBatch||[]).slice()}else {!g.useHandle&&(f.status='hide')}f.status==='show'&&a.push({axisDim:g.axis.dim,axisIndex:g.axis.model.componentIndex,value:f.value})})}function dispatchTooltipActually(a,c,f,e){if(illegalPoint(c)||!a.list.length){e({type:'hideTip'});return}var b=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};e({type:'showTip',escapeConnect:!0,x:c[0],y:c[1],tooltipOption:f.tooltipOption,position:f.position,dataIndexInside:b.dataIndexInside,dataIndex:b.dataIndex,seriesIndex:b.seriesIndex,dataByCoordSys:a.list})}function dispatchHighDownActually(i,j,e){var h=e.getZr();var g='axisPointerLastHighlights';var f=iL(h)[g]||{};var a=iL(h)[g]={};$(i,function(c,f){var b=c.axisPointerModel.option;b.status==='show'&&$(b.seriesDataIndices,function(b){var g=b.seriesIndex+' | '+b.dataIndex;a[g]=b})});var b=[];var c=[];each$1(f,function(b,f){!a[f]&&c.push(b)});each$1(a,function(a,c){!f[c]&&b.push(a)});c.length&&e.dispatchAction({type:'downplay',escapeConnect:!0,batch:c});b.length&&e.dispatchAction({type:'highlight',escapeConnect:!0,batch:b})}function findInputAxisInfo(c,e){for(var b=0;b<(c||[]).length;b++){var a=c[b];if(e.axis.dim===a.axisDim&&e.axis.model.componentIndex===a.axisIndex){return a}}}function makeMapperParam(e){var b=e.axis.model;var a={};var c=a.axisDim=e.axis.dim;a.axisIndex=a[c+'AxisIndex']=b.componentIndex;a.axisName=a[c+'AxisName']=b.name;a.axisId=a[c+'AxisId']=b.id;return a}function illegalPoint(a){return !a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}var oQ=extendComponentModel({type:'axisPointer',coordSysAxesInfo:null,defaultOption:{show:'auto',triggerOn:null,zlevel:0,z:50,type:'line',snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:'#aaa',width:1,type:'solid'},shadowStyle:{color:'rgba(150,150,150,0.3)'},label:{show:!0,formatter:null,precision:'auto',margin:3,color:'#fff',padding:[5,7,5,7],backgroundColor:'auto',borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:'#aaa'},handle:{show:!1,icon:'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',size:45,margin:50,color:'#333',shadowBlur:3,shadowColor:'#aaa',shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var al=makeInner();var n8=each$1;function register(c,b,e){if(f.node){return}var a=b.getZr();al(a).records||(al(a).records={});initGlobalListeners(a,b);var g=al(a).records[c]||(al(a).records[c]={});g.handler=e}function initGlobalListeners(a,b){if(al(a).initialized){return}al(a).initialized=!0;useHandler('click',curry(doEnter,'click'));useHandler('mousemove',curry(doEnter,'mousemove'));useHandler('globalout',onLeave);function useHandler(c,e){a.on(c,function(g){var f=makeDispatchAction(b);n8(al(a).records,function(h){h&&e(h,g,f.dispatchAction)});dispatchTooltipFinally(f.pendings,b)})}}function dispatchTooltipFinally(b,f){var e=b.showTip.length;var c=b.hideTip.length;var a;if(e){a=b.showTip[e-1]}else {if(c){a=b.hideTip[c-1]}}if(a){a.dispatchAction=null;f.dispatchAction(a)}}function onLeave(b,c,a){b.handler('leave',null,a)}function doEnter(b,c,e,a){c.handler(b,e,a)}function makeDispatchAction(c){var b={showTip:[],hideTip:[]};var a=function(e){var f=b[e.type];if(f){f.push(e)}else {e.dispatchAction=a;c.dispatchAction(e)}};return {dispatchAction:a,pendings:b}}function unregister(a,e){if(f.node){return}var b=e.getZr();var c=(al(b).records||{})[a];if(c){al(b).records[a]=null}}var gT=extendComponentView({type:'axisPointer',render:function(c,e,f){var a=e.getComponent('tooltip');var b=c.get('triggerOn')||(a&&a.get('triggerOn')||'mousemove|click');register('axisPointer',f,function(g,a,h){if(b!=='none'&&(g==='leave'||b.indexOf(g)>=0)){h({type:'updateAxisPointer',currTrigger:g,x:a&&a.offsetX,y:a&&a.offsetY})}})},remove:function(b,a){unregister(a.getZr(),'axisPointer');gT.superApply(this._model,'remove',arguments)},dispose:function(b,a){unregister('axisPointer',a);gT.superApply(this._model,'dispose',arguments)}});var a5=makeInner();var iB=clone;var fJ=bind;function BaseAxisPointer(){}BaseAxisPointer.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(f,c,j,n){var i=c.get('value');var h=c.get('status');this._axisModel=f;this._axisPointerModel=c;this._api=j;if(!n&&this._lastValue===i&&this._lastStatus===h){return}this._lastValue=i;this._lastStatus=h;var a=this._group;var g=this._handle;if(!h||h==='hide'){a&&a.hide();g&&g.hide();return}a&&a.show();g&&g.show();var e={};this.makeElOption(e,i,f,c,j);var l=e.graphicKey;if(l!==this._lastGraphicKey){this.clear(j)}this._lastGraphicKey=l;var m=this._moveAnimation=this.determineAnimation(f,c);if(!a){a=this._group=new b();this.createPointerEl(a,e,f,c);this.createLabelEl(a,e,f,c);j.getZr().add(a)}else {var k=curry(updateProps$1,c,m);this.updatePointerEl(a,e,k,c);this.updateLabelEl(a,e,k,c)}updateMandatoryProps(a,c,!0);this._renderHandle(i)},remove:function(a){this.clear(a)},dispose:function(a){this.clear(a)},determineAnimation:function(h,e){var a=e.get('animation');var b=h.axis;var f=b.type==='category';var i=e.get('snap');if(!i&&!f){return !1}if(a==='auto'||a==null){var c=this.animationThreshold;if(f&&b.getBandWidth()>c){return !0}if(i){var j=getAxisInfo(h).seriesDataCount;var g=b.getExtent();return Math.abs(g[0]-g[1])/j>c}return !1}return a===!0},makeElOption:function(c,e,b,a,f){},createPointerEl:function(c,b,g,f){var a=b.pointer;if(a){var e=a5(c).pointerEl=new an[a.type](iB(b.pointer));c.add(e)}},createLabelEl:function(c,a,f,e){if(a.label){var b=a5(c).labelEl=new h(iB(a.label));c.add(b);updateLabelShowHide(b,e)}},updatePointerEl:function(e,b,c){var a=a5(e).pointerEl;if(a&&b.pointer){a.setStyle(b.pointer.style);c(a,{shape:b.pointer.shape})}},updateLabelEl:function(f,b,e,c){var a=a5(f).labelEl;if(a){a.setStyle(b.label.style);e(a,{shape:b.label.shape,position:b.label.position});updateLabelShowHide(a,c)}},_renderHandle:function(j){if(this._dragging||!this.updateHandleTransform){return}var e=this._axisPointerModel;var h=this._api.getZr();var a=this._handle;var c=e.getModel('handle');var g=e.get('status');if(!c.get('show')||!g||g==='hide'){a&&h.remove(a);this._handle=null;return}var f;if(!this._handle){f=!0;a=this._handle=createIcon(c.get('icon'),{cursor:'move',draggable:!0,onmousemove:function(a){aN(a.event)},onmousedown:fJ(this._onHandleDragMove,this,0,0),drift:fJ(this._onHandleDragMove,this),ondragend:fJ(this._onHandleDragEnd,this)});h.add(a)}updateMandatoryProps(a,e,!1);var i=['color','borderColor','borderWidth','opacity','shadowColor','shadowBlur','shadowOffsetX','shadowOffsetY'];a.setStyle(c.getItemStyle(null,i));var b=c.get('size');if(!isArray(b)){b=[b,b]}a.attr('scale',[b[0]/2,b[1]/2]);createOrUpdate(this,'_doDispatchAxisPointer',c.get('throttle')||0,'fixRate');this._moveHandleToValue(j,f)},_moveHandleToValue:function(b,a){updateProps$1(this._axisPointerModel,!a&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(b,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(c,e){var a=this._handle;if(!a){return}this._dragging=!0;var b=this.updateHandleTransform(getHandleTransProps(a),[c,e],this._axisModel,this._axisPointerModel);this._payloadInfo=b;a.stopAnimation();a.attr(getHandleTransProps(b));a5(a).lastProp=null;this._doDispatchAxisPointer()},_doDispatchAxisPointer:function(){var c=this._handle;if(!c){return}var a=this._payloadInfo;var b=this._axisModel;this._api.dispatchAction({type:'updateAxisPointer',x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:b.axis.dim,axisIndex:b.componentIndex}]})},_onHandleDragEnd:function(c){this._dragging=!1;var a=this._handle;if(!a){return}var b=this._axisPointerModel.get('value');this._moveHandleToValue(b);this._api.dispatchAction({type:'hideTip'})},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null;this._lastStatus=null;var b=e.getZr();var a=this._group;var c=this._handle;if(b&&a){this._lastGraphicKey=null;a&&b.remove(a);c&&b.remove(c);this._group=null;this._handle=null;this._payloadInfo=null}},doClear:function(){},buildLabel:function(c,b,a){a=a||0;return {x:c[a],y:c[1-a],width:b[a],height:b[1-a]}}};BaseAxisPointer.prototype.constructor=BaseAxisPointer;function updateProps$1(c,e,a,b){if(!propsEqual(a5(a).lastProp,b)){a5(a).lastProp=b;e?updateProps(a,b,c):(a.stopAnimation(),a.attr(b))}}function propsEqual(a,b){if(isObject$1(a)&&isObject$1(b)){var c=!0;each$1(b,function(e,f){c=c&&propsEqual(a[f],e)});return !!c}else {return a===b}}function updateLabelShowHide(b,a){b[a.get('label.show')?'show':'hide']()}function getHandleTransProps(a){return {position:a.position.slice(),rotation:a.rotation||0}}function updateMandatoryProps(c,a,f){var e=a.get('z');var b=a.get('zlevel');c&&c.traverse(function(g){if(g.type!=='group'){e!=null&&(g.z=e);b!=null&&(g.zlevel=b);g.silent=f}})}enableClassExtend(BaseAxisPointer);function buildElStyle(c){var b=c.get('type');var e=c.getModel(b+'Style');var a;if(b==='line'){a=e.getLineStyle();a.fill=null}else {if(b==='shadow'){a=e.getAreaStyle();a.stroke=null}}return a}function buildLabelElOption(p,i,c,r,j){var q=c.get('value');var o=getValueLabel(q,i.axis,i.ecModel,c.get('seriesDataIndices'),{precision:c.get('label.precision'),formatter:c.get('label.formatter')});var a=c.getModel('label');var e=aR(a.get('padding')||0);var n=a.getFont();var l=getBoundingRect(o,n);var b=j.position;var h=l.width+e[1]+e[3];var g=l.height+e[0]+e[2];var m=j.align;m==='right'&&(b[0]-=h);m==='center'&&(b[0]-=h/2);var k=j.verticalAlign;k==='bottom'&&(b[1]-=g);k==='middle'&&(b[1]-=g/2);confineInContainer(b,h,g,r);var f=a.get('backgroundColor');if(!f||f==='auto'){f=i.get('axisLine.lineStyle.color')}p.label={shape:{x:0,y:0,width:h,height:g,r:a.get('borderRadius')},position:b.slice(),style:{text:o,textFont:n,textFill:a.getTextColor(),textPosition:'inside',textPadding:e,fill:f,stroke:a.get('borderColor')||'transparent',lineWidth:a.get('borderWidth')||0,shadowBlur:a.get('shadowBlur'),shadowColor:a.get('shadowColor'),shadowOffsetX:a.get('shadowOffsetX'),shadowOffsetY:a.get('shadowOffsetY')},z2:10}}function confineInContainer(a,c,b,e){var g=e.getWidth();var f=e.getHeight();a[0]=Math.min(a[0]+c,g)-c;a[1]=Math.min(a[1]+b,f)-b;a[0]=Math.max(a[0],0);a[1]=Math.max(a[1],0)}function getValueLabel(c,b,i,h,g){c=b.scale.parse(c);var e=b.scale.getLabel(c,{precision:g.precision});var a=g.formatter;if(a){var f={value:getAxisRawValue(b,c),axisDimension:b.dim,axisIndex:b.index,seriesData:[]};each$1(h,function(e){var j=i.getSeriesByIndex(e.seriesIndex);var k=e.dataIndexInside;var a=j&&j.getDataParams(k);a&&f.seriesData.push(a)});if(isString(a)){e=a.replace('{value}',e)}else {if(isFunction$1(a)){e=a(f)}}}return e}function getTransformedPosition(e,c,a){var b=create$1();rotate(b,b,a.rotation);translate(b,b,a.position);return applyTransform$1([e.dataToCoord(c),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],b)}function buildCartesianSingleLabelElOption(g,f,a,e,b,h){var c=x.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=b.get('label.margin');buildLabelElOption(f,e,b,h,{position:getTransformedPosition(e.axis,g,a),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(b,c,a){a=a||0;return {x1:b[a],y1:b[1-a],x2:c[a],y2:c[1-a]}}function makeRectShape(c,b,a){a=a||0;return {x:c[a],y:c[1-a],width:b[a],height:b[1-a]}}function makeSectorShape(c,e,f,g,a,b){return {cx:c,cy:e,r0:f,r:g,startAngle:a,endAngle:b,clockwise:!0}}var jZ=BaseAxisPointer.extend({makeElOption:function(g,h,f,b,n){var a=f.axis;var i=a.grid;var c=b.get('type');var j=getCartesian(i,a).getOtherAxis(a).getGlobalExtent();var l=a.toGlobalCoord(a.dataToCoord(h,!0));if(c&&c!=='none'){var m=buildElStyle(b);var e=kb[c](a,l,j);e.style=m;g.graphicKey=e.type;g.pointer=e}var k=layout$1(i.model,f);buildCartesianSingleLabelElOption(h,g,k,f,b,n)},getHandleTransform:function(e,b,c){var a=layout$1(b.axis.grid.model,b,{labelInside:!1});a.labelMargin=c.get('handle.margin');return {position:getTransformedPosition(b.axis,e,a),rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(i,l,k,n){var c=k.axis;var m=c.grid;var h=c.getGlobalExtent(!0);var g=getCartesian(m,c).getOtherAxis(c).getGlobalExtent();var a=c.dim==='x'?0:1;var b=i.position;b[a]+=l[a];b[a]=Math.min(h[1],b[a]);b[a]=Math.max(h[0],b[a]);var e=(g[1]+g[0])/2;var f=[e,e];f[a]=b[a];var j=[{verticalAlign:'middle'},{align:'center'}];return {position:b,rotation:i.rotation,cursorPoint:f,tooltipOption:j[a]}}});function getCartesian(c,a){var b={};b[a.dim+'AxisIndex']=a.index;return c.getCartesian(b)}var kb={line:function(e,b,a){var c=makeLineShape([b,a[0]],[b,a[1]],getAxisDimIndex(e));return {type:'Line',subPixelOptimize:!0,shape:c}},shadow:function(c,e,a){var b=Math.max(1,c.getBandWidth());var f=a[1]-a[0];return {type:'Rect',shape:makeRectShape([e-b/2,a[0]],[b,f],getAxisDimIndex(c))}}};function getAxisDimIndex(a){return a.dim==='x'?0:1}G.registerAxisPointerClass('CartesianAxisPointer',jZ);registerPreprocessor(function(a){if(a){(!a.axisPointer||a.axisPointer.length===0)&&(a.axisPointer={});var b=a.axisPointer.link;if(b&&!isArray(b)){a.axisPointer.link=[b]}}});registerProcessor(Y.PROCESSOR.STATISTIC,function(a,b){a.getComponent('axisPointer').coordSysAxesInfo=collect(a,b)});registerAction({type:'updateAxisPointer',event:'updateAxisPointer',update:':updateAxisPointer'},mD);var jm=['x','y'];var oN=['width','height'];var kv=BaseAxisPointer.extend({makeElOption:function(f,i,e,a,n){var g=e.axis;var h=g.coordinateSystem;var j=getGlobalExtent(h,1-getPointDimIndex(g));var l=h.dataToPoint(i)[0];var b=a.get('type');if(b&&b!=='none'){var m=buildElStyle(a);var c=jX[b](g,l,j);c.style=m;f.graphicKey=c.type;f.pointer=c}var k=layout$2(e);buildCartesianSingleLabelElOption(i,f,k,e,a,n)},getHandleTransform:function(e,b,c){var a=layout$2(b,{labelInside:!1});a.labelMargin=c.get('handle.margin');return {position:getTransformedPosition(b.axis,e,a),rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(h,l,k,m){var j=k.axis;var i=j.coordinateSystem;var a=getPointDimIndex(j);var g=getGlobalExtent(i,a);var b=h.position;b[a]+=l[a];b[a]=Math.min(g[1],b[a]);b[a]=Math.max(g[0],b[a]);var f=getGlobalExtent(i,1-a);var c=(f[1]+f[0])/2;var e=[c,c];e[a]=b[a];return {position:b,rotation:h.rotation,cursorPoint:e,tooltipOption:{verticalAlign:'middle'}}}});var jX={line:function(e,b,a){var c=makeLineShape([b,a[0]],[b,a[1]],getPointDimIndex(e));return {type:'Line',subPixelOptimize:!0,shape:c}},shadow:function(c,e,a){var b=c.getBandWidth();var f=a[1]-a[0];return {type:'Rect',shape:makeRectShape([e-b/2,a[0]],[b,f],getPointDimIndex(c))}}};function getPointDimIndex(a){return a.isHorizontal()?0:1}function getGlobalExtent(c,a){var b=c.getRect();return [b[jm[a]],b[jm[a]]+b[oN[a]]]}G.registerAxisPointerClass('SingleAxisPointer',kv);extendComponentView({type:'single'});var em=2;var kK=l.extend({type:'series.themeRiver',dependencies:['singleAxis'],nameMap:null,init:function(a){kK.superApply(this,'init',arguments);this.legendDataProvider=function(){return this.getRawData()}},fixData:function(b){var e=b.length;var o=groupData(b,function(a){return a[2]});var a=[];o.buckets.each(function(c,e){a.push({name:e,dataList:c})});var m=a.length;var h=-1;var i=-1;for(var f=0;f<m;++f){var n=a[f].dataList.length;if(n>h){h=n;i=f}}for(var c=0;c<m;++c){if(c===i){continue}var r=a[c].name;for(var j=0;j<h;++j){var k=a[i].dataList[j][0];var p=a[c].dataList.length;var l=-1;for(var g=0;g<p;++g){var q=a[c].dataList[g][0];if(q===k){l=g;break}}if(l===-1){b[e]=[];b[e][0]=k;b[e][1]=0;b[e][2]=r;e++}}}return b},getInitialData:function(m,l){var g=l.queryComponents({mainType:'singleAxis',index:this.get('singleAxisIndex'),id:this.get('singleAxisId')})[0];var j=g.get('type');var i=filter(m.data,function(a){return a[2]!==undefined});var a=this.fixData(i||[]);var k=[];var c=this.nameMap=createHashMap();var e=0;for(var b=0;b<a.length;++b){k.push(a[b][em]);if(!c.get(a[b][em])){c.set(a[b][em],e);e++}}var h=bl(a,{coordDimensions:['single'],dimensionsDefine:[{name:'time',type:getDimensionTypeByAxis(j)},{name:'value',type:'float'},{name:'name',type:'ordinal'}],encodeDefine:{single:0,value:1,itemName:2}});var f=new s(h,this);f.initData(a);return f},getLayerSeries:function(){var a=this.getData();var h=a.count();var e=[];for(var b=0;b<h;++b){e[b]=b}var f=a.mapDimension('single');var g=groupData(e,function(b){return a.get('name',b)});var c=[];g.buckets.each(function(b,e){b.sort(function(c,g){return a.get(f,c)-a.get(f,g)});c.push({name:e,indices:b})});return c},getAxisTooltipData:function(a,n,p){if(!isArray(a)){a=a?[a]:[]}var o=this.getData();var c=this.getLayerSeries();var i=[];var l=c.length;var f;for(var b=0;b<l;++b){var j=Number.MAX_VALUE;var g=-1;var m=c[b].indices.length;for(var e=0;e<m;++e){var h=o.get(a[0],c[b].indices[e]);var k=Math.abs(h-n);if(k<=j){f=h;j=k;g=c[b].indices[e]}}i.push(g)}return {dataIndices:i,nestestValue:f}},formatTooltip:function(c){var b=this.getData();var e=b.getName(c);var a=b.get(b.mapDimension('value'),c);if(isNaN(a)||a==null){a='-'}return encodeHTML(e+' : '+a)},defaultOption:{zlevel:0,z:2,coordinateSystem:'singleAxis',boundaryGap:['10%','10%'],singleAxisIndex:0,animationEasing:'linear',label:{margin:4,show:!0,position:'left',color:'#000',fontSize:11},emphasis:{label:{show:!0}}}});extendChartView({type:'themeRiver',init:function(){this._layers=[]},render:function(a,m,n){var c=a.getData();var f=this.group;var h=a.getLayerSeries();var i=c.getLayout('layoutInfo');var l=i.rect;var j=i.boundaryGap;f.attr('position',[0,l.y+j[0]]);function keyGetter(b){return b.name}var k=new DataDiffer(this._layersSeries||[],h,keyGetter,keyGetter);var g={};k.add(bind(process,this,'add')).update(bind(process,this,'update')).remove(bind(process,this,'remove')).execute();function process(y,q,E){var w=this._layers;if(y==='remove'){f.remove(w[q]);return}var t=[];var u=[];var z;var k=h[q].indices;for(var l=0;l<k.length;l++){var v=c.getItemLayout(k[l]);var B=v.x;var A=v.y0;var F=v.y;t.push([B,A]);u.push([B,A+F]);z=c.getItemVisual(k[l],'color')}var i;var p;var o=c.getItemLayout(k[0]);var s=c.getItemModel(k[l-1]);var r=s.getModel('label');var x=r.get('margin');if(y==='add'){var j=g[q]=new b();i=new h3({shape:{points:t,stackedOnPoints:u,smooth:0.4,stackedOnSmooth:0.4,smoothConstraint:!1},z2:0});p=new e({style:{x:o.x-x,y:o.y0+o.y/2}});j.add(i);j.add(p);f.add(j);i.setClipPath(createGridClipShape$2(i.getBoundingRect(),a,function(){i.removeClipPath()}))}else {var j=w[E];i=j.childAt(0);p=j.childAt(1);f.add(j);g[q]=j;updateProps(i,{shape:{points:t,stackedOnPoints:u}},a);updateProps(p,{style:{x:o.x-x,y:o.y0+o.y/2}},a)}var C=s.getModel('emphasis.itemStyle');var D=s.getModel('itemStyle');setTextStyle(p.style,r,{text:r.get('show')?a.getFormattedLabel(k[l-1],'normal')||c.getName(k[l-1]):null,textVerticalAlign:'middle'});i.setStyle(extend({fill:z},D.getItemStyle(['color'])));setHoverStyle(i,C.getItemStyle())}this._layersSeries=h;this._layers=g},dispose:function(){}});function createGridClipShape$2(a,c,e){var b=new h({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});initProps(b,{shape:{width:a.width+20,height:a.height+20}},c,e);return b}var kW=function(a,b){a.eachSeriesByType('themeRiver',function(f){var h=f.getData();var i=f.coordinateSystem;var g={};var e=i.getRect();g.rect=e;var c=f.get('boundaryGap');var l=i.getAxis();g.boundaryGap=c;if(l.orient==='horizontal'){c[0]=parsePercent$1(c[0],e.height);c[1]=parsePercent$1(c[1],e.height);var j=e.height-c[0]-c[1];themeRiverLayout$1(h,f,j)}else {c[0]=parsePercent$1(c[0],e.width);c[1]=parsePercent$1(c[1],e.width);var k=e.width-c[0]-c[1];themeRiverLayout$1(h,f,k)}h.setLayout('layoutInfo',g)})};function themeRiverLayout$1(b,i,o){if(!b.count()){return}var l=i.coordinateSystem;var f=i.getLayerSeries();var n=b.mapDimension('single');var m=b.mapDimension('value');var e=map(f,function(a){return map(a.indices,function(c){var e=l.dataToPoint(b.get(n,c));e[1]=b.get(m,c);return e})});var j=computeBaseline(e);var k=j.y0;var h=o/j.max;var q=f.length;var p=f[0].indices.length;var g;for(var a=0;a<p;++a){g=k[a]*h;b.setItemLayout(f[0].indices[a],{layerIndex:0,x:e[0][a][0],y0:g,y:e[0][a][1]*h});for(var c=1;c<q;++c){g+=e[c-1][a][1]*h;b.setItemLayout(f[c].indices[a],{layerIndex:c,x:e[c][a][0],y0:g,y:e[c][a][1]*h})}}}function computeBaseline(h){var n=h.length;var f=h[0].length;var i=[];var j=[];var a=0;var b;var g={};for(var k=0;k<f;++k){for(var l=0,b=0;l<n;++l){b+=h[l][k][1]}if(b>a){a=b}i.push(b)}for(var c=0;c<f;++c){j[c]=(a-i[c])/2}a=0;for(var e=0;e<f;++e){var m=i[e]+j[e];if(m>a){a=m}}g.y0=j;g.max=a;return g}var kX=function(a){a.eachSeriesByType('themeRiver',function(b){var e=b.getData();var c=b.getRawData();var f=b.get('color');var g=createHashMap();e.each(function(c){g.set(e.getRawIndex(c),c)});c.each(function(h){var k=c.getName(h);var i=f[(b.nameMap.get(k)-1)%f.length];c.setItemVisual(h,'color',i);var j=g.get(h);if(j!=null){e.setItemVisual(j,'color',i)}})})};registerLayout(kW);registerVisual(kX);registerProcessor(b6('themeRiver'));l.extend({type:'series.sunburst',_viewRoot:null,getInitialData:function(a,f){var c={name:a.name,children:a.data};completeTreeValue$1(c);var e=a.levels||[];var b={};b.levels=e;return Tree.createTree(c,this,b).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(b){var a=l.prototype.getDataParams.apply(this,arguments);var c=this.getData().tree.getNodeByDataIndex(b);a.treePathInfo=wrapTreePathInfo(c,this);return a},defaultOption:{zlevel:0,z:2,center:['50%','50%'],radius:[0,'75%'],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:'descendant',nodeClick:'rootToNode',renderLabelForZeroData:!1,label:{rotate:'radial',show:!0,opacity:1,align:'center',position:'inside',distance:5,silent:!0,emphasis:{}},itemStyle:{borderWidth:1,borderColor:'white',borderType:'solid',shadowBlur:0,shadowColor:'rgba(0, 0, 0, 0.2)',shadowOffsetX:0,shadowOffsetY:0,opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:0.9}},animationType:'expansion',animationDuration:1000,animationDurationUpdate:500,animationEasing:'cubicOut',data:[],levels:[],sort:'desc'},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(a){a?this._viewRoot=a:a=this._viewRoot;var b=this.getRawData().tree.root;if(!a||a!==b&&!b.contains(a)){this._viewRoot=b}}});function completeTreeValue$1(b){var c=0;each$1(b.children,function(e){completeTreeValue$1(e);var a=e.value;isArray(a)&&(a=a[0]);c+=a});var a=b.value;if(isArray(a)){a=a[0]}if(a==null||isNaN(a)){a=c}if(a<0){a=0}isArray(b.value)?b.value[0]=a:b.value=a}var cz={NONE:'none',DESCENDANT:'descendant',ANCESTOR:'ancestor',SELF:'self'};var kI=2;var lg=4;function SunburstPiece(g,c,h){b.call(this);var f=new aa({z2:kI});f.seriesIndex=c.seriesIndex;var a=new e({z2:lg,silent:g.getModel('label').get('silent')});this.add(f);this.add(a);this.updateData(!0,g,'normal',c,h);function onEmphasis(){a.ignore=a.hoverIgnore}function onNormal(){a.ignore=a.normalIgnore}this.on('emphasis',onEmphasis).on('normal',onNormal).on('mouseover',onEmphasis).on('mouseout',onNormal)}var aS=SunburstPiece.prototype;aS.updateData=function(m,e,k,b,g){this.node=e;e.piece=this;b=b||this._seriesModel;g=g||this._ecModel;var a=this.childAt(0);a.dataIndex=e.dataIndex;var i=e.getModel();var j=e.getLayout();var f=extend({},j);f.label=null;var h=getNodeColor(e,b,g);fillDefaultColor(e,b,h);var n=i.getModel('itemStyle').getItemStyle();var c;if(k==='normal'){c=n}else {var p=i.getModel(k+'.itemStyle').getItemStyle();c=merge(p,n)}c=defaults({lineJoin:'bevel',fill:c.fill||h},c);if(m){a.setShape(f);a.shape.r=j.r0;updateProps(a,{shape:{r:j.r}},b,e.dataIndex);a.useStyle(c)}else {if(typeof c.fill==='object'&&c.fill.type||typeof a.style.fill==='object'&&a.style.fill.type){updateProps(a,{shape:f},b);a.useStyle(c)}else {updateProps(a,{shape:f,style:c},b)}}this._updateLabel(b,h,k);var l=i.getShallow('cursor');l&&a.attr('cursor',l);if(m){var o=b.getShallow('highlightPolicy');this._initEvents(a,e,b,o)}this._seriesModel=b||this._seriesModel;this._ecModel=g||this._ecModel};aS.onEmphasis=function(a){var b=this;this.node.hostTree.root.eachNode(function(c){if(c.piece){if(b.node===c){c.piece.updateData(!1,c,'emphasis')}else {if(isNodeHighlighted(c,b.node,a)){c.piece.childAt(0).trigger('highlight')}else {if(a!==cz.NONE){c.piece.childAt(0).trigger('downplay')}}}}})};aS.onNormal=function(){this.node.hostTree.root.eachNode(function(a){if(a.piece){a.piece.updateData(!1,a,'normal')}})};aS.onHighlight=function(){this.updateData(!1,this.node,'highlight')};aS.onDownplay=function(){this.updateData(!1,this.node,'downplay')};aS._updateLabel=function(r,s,k){var o=this.node.getModel();var i=o.getModel('label');var n=k==='normal'||k==='emphasis'?i:o.getModel(k+'.label');var p=o.getModel('emphasis.label');var l=retrieve(r.getFormattedLabel(this.node.dataIndex,k,null,null,'label'),this.node.name);if(getLabelAttr('show')===!1){l=''}var a=this.node.getLayout();var f=n.get('minAngle');if(f==null){f=i.get('minAngle')}f=f/180*Math.PI;var t=a.endAngle-a.startAngle;if(f!=null&&Math.abs(t)<f){l=''}var h=this.childAt(1);setLabelStyle(h.style,h.hoverStyle||{},i,p,{defaultText:n.getShallow('show')?l:null,autoColor:s,useInsideStyle:!0});var e=(a.startAngle+a.endAngle)/2;var w=Math.cos(e);var x=Math.sin(e);var g;var q=getLabelAttr('position');var m=getLabelAttr('distance')||0;var c=getLabelAttr('align');if(q==='outside'){g=a.r+m;c=e>Math.PI/2?'right':'left'}else {if(!c||c==='center'){g=(a.r+a.r0)/2;c='center'}else {if(c==='left'){g=a.r0+m;if(e>Math.PI/2){c='right'}}else {if(c==='right'){g=a.r-m;if(e>Math.PI/2){c='left'}}}}}h.attr('style',{text:l,textAlign:c,textVerticalAlign:getLabelAttr('verticalAlign')||'middle',opacity:getLabelAttr('opacity')});var u=g*w+a.cx;var v=g*x+a.cy;h.attr('position',[u,v]);var j=getLabelAttr('rotate');var b=0;if(j==='radial'){b=-e;if(b<-Math.PI/2){b+=Math.PI}}else {if(j==='tangential'){b=Math.PI/2-e;if(b>Math.PI/2){b-=Math.PI}else {if(b<-Math.PI/2){b+=Math.PI}}}else {if(typeof j==='number'){b=j*Math.PI/180}}}h.attr('rotation',b);function getLabelAttr(b){var a=n.get(b);if(a==null){return i.get(b)}else {return a}}};aS._initEvents=function(e,j,h,f){e.off('mouseover').off('mouseout').off('emphasis').off('normal');var a=this;var b=function(){a.onEmphasis(f)};var c=function(){a.onNormal()};var i=function(){a.onDownplay()};var g=function(){a.onHighlight()};if(h.isAnimationEnabled()){e.on('mouseover',b).on('mouseout',c).on('emphasis',b).on('normal',c).on('downplay',i).on('highlight',g)}};inherits(SunburstPiece,b);function getNodeColor(a,h,e){var c=a.getVisual('color');var f=a.getVisual('visualMeta');if(!f||f.length===0){c=null}var b=a.getModel('itemStyle').get('color');if(b){return b}else {if(c){return c}else {if(a.depth===0){return e.option.color[0]}else {var g=e.option.color.length;b=e.option.color[getRootId(a)%g]}}}return b}function getRootId(b){var a=b;while(a.depth>1){a=a.parentNode}var c=b.getAncestors()[0];return indexOf(c.children,a)}function isNodeHighlighted(b,a,c){if(c===cz.NONE){return !1}else {if(c===cz.SELF){return b===a}else {if(c===cz.ANCESTOR){return b===a||b.isAncestorOf(a)}else {return b===a||b.isDescendantOf(a)}}}}function fillDefaultColor(e,a,b){var c=a.getData();c.setItemVisual(e.dataIndex,'color',b)}var j6='sunburstRootToNode';var oU=Chart.extend({type:'sunburst',init:function(){},render:function(a,f,o,c){var b=this;this.seriesModel=a;this.api=o;this.ecModel=f;var j=a.getData();var e=j.tree.root;var k=a.getViewRoot();var g=this.group;var l=a.get('renderLabelForZeroData');var i=[];k.eachNode(function(b){i.push(b)});var n=this._oldChildren||[];dualTravel(i,n);renderRollUp(e,k);if(c&&c.highlight&&c.highlight.piece){var m=a.getShallow('highlightPolicy');c.highlight.piece.onEmphasis(m)}else {if(c&&c.unhighlight){var h=this.virtualPiece;if(!h&&e.children.length){h=e.children[0].piece}if(h){h.onNormal()}}}this._initEvents();this._oldChildren=i;function dualTravel(b,e){if(b.length===0&&e.length===0){return}(new DataDiffer(e,b,getKey,getKey)).add(processNode).update(processNode).remove(curry(processNode,null)).execute();function getKey(g){return g.getId()}function processNode(g,h){var i=g==null?null:b[g];var j=h==null?null:e[h];doRenderNode(i,j)}}function doRenderNode(b,h){if(!l&&b&&!b.getValue()){b=null}if(b!==e&&h!==e){if(h&&h.piece){if(b){h.piece.updateData(!1,b,'normal',a,f);j.setItemGraphicEl(b.dataIndex,h.piece)}else {removeNode(h)}}else {if(b){var i=new SunburstPiece(b,a,f);g.add(i);j.setItemGraphicEl(b.dataIndex,i)}}}}function removeNode(b){if(!b){return}if(b.piece){g.remove(b.piece);b.piece=null}}function renderRollUp(h,e){if(e.depth>0){if(b.virtualPiece){b.virtualPiece.updateData(!1,h,'normal',a,f)}else {b.virtualPiece=new SunburstPiece(h,a,f);g.add(b.virtualPiece)}if(e.piece._onclickEvent){e.piece.off('click',e.piece._onclickEvent)}var i=function(g){b._rootToNode(e.parentNode)};e.piece._onclickEvent=i;b.virtualPiece.on('click',i)}else {if(b.virtualPiece){g.remove(b.virtualPiece);b.virtualPiece=null}}}},dispose:function(){},_initEvents:function(){var b=this;var a=function(e){var a=!1;var c=b.seriesModel.getViewRoot();c.eachNode(function(c){if(!a&&c.piece&&c.piece.childAt(0)===e.target){var g=c.getModel().get('nodeClick');if(g==='rootToNode'){b._rootToNode(c)}else {if(g==='link'){var f=c.getModel();var h=f.get('link');if(h){var i=f.get('target',!0)||'_blank';window.open(h,i)}}}a=!0}})};if(this.group._onclickEvent){this.group.off('click',this.group._onclickEvent)}this.group.on('click',a);this.group._onclickEvent=a},_rootToNode:function(a){if(a!==this.seriesModel.getViewRoot()){this.api.dispatchAction({type:j6,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})}},containPoint:function(c,g){var h=g.getData();var a=h.getItemLayout(0);if(a){var e=c[0]-a.cx;var f=c[1]-a.cy;var b=Math.sqrt(e*e+f*f);return b<=a.r&&b>=a.r0}}});var gk='sunburstRootToNode';registerAction({type:gk,update:'updateView'},function(a,b){b.eachComponent({mainType:'series',subType:'sunburst',query:a},handleRootToNode);function handleRootToNode(e,g){var c=retrieveTargetInfo(a,[gk],e);if(c){var f=e.getViewRoot();if(f){a.direction=aboveViewRoot(f,c.node)?'rollUp':'drillDown'}e.resetViewRoot(c.node)}}});var gL='sunburstHighlight';registerAction({type:gL,update:'updateView'},function(a,b){b.eachComponent({mainType:'series',subType:'sunburst',query:a},handleHighlight);function handleHighlight(e,f){var c=retrieveTargetInfo(a,[gL],e);if(c){a.highlight=c.node}}});var kd='sunburstUnhighlight';registerAction({type:kd,update:'updateView'},function(a,b){b.eachComponent({mainType:'series',subType:'sunburst',query:a},handleUnhighlight);function handleUnhighlight(e,c){a.unhighlight=!0}});var io=Math.PI/180;var lC=function(b,c,a,e){c.eachSeriesByType(b,function(f){var h=f.get('center');var i=f.get('radius');if(!isArray(i)){i=[0,i]}if(!isArray(h)){h=[h,h]}var w=a.getWidth();var u=a.getHeight();var k=Math.min(w,u);var z=parsePercent$1(h[0],w);var A=parsePercent$1(h[1],u);var j=parsePercent$1(i[0],k/2);var H=parsePercent$1(i[1],k/2);var m=-f.get('startAngle')*io;var t=f.get('minAngle')*io;var q=f.getData().tree.root;var g=f.getViewRoot();var C=g.depth;var x=f.get('sort');if(x!=null){initChildren$1(g,x)}var p=0;each$1(g.children,function(g){!isNaN(g.getValue())&&p++});var y=g.getValue();var s=Math.PI/(y||p)*2;var l=g.depth>0;var D=g.height-(l?-1:1);var o=(H-j)/(D||1);var n=f.get('clockwise');var B=f.get('stillShowZeroSum');var G=n?1:-1;var r=function(g,h){if(!g){return}var p=h;if(g!==q){var D=g.getValue();var m=y===0&&B?s:D*s;if(m<t){m=t}p=h+G*m;var w=g.depth-C-(l?-1:1);var v=j+o*w;var x=j+o*(w+1);var i=g.getModel();if(i.get('r0')!=null){v=parsePercent$1(i.get('r0'),k/2)}if(i.get('r')!=null){x=parsePercent$1(i.get('r'),k/2)}g.setLayout({angle:m,startAngle:h,endAngle:p,clockwise:n,cx:z,cy:A,r0:v,r:x})}if(g.children&&g.children.length){var u=0;each$1(g.children,function(i){u+=r(i,h+u)})}return p-h};if(l){var E=j;var F=j+o;var v=Math.PI*2;q.setLayout({angle:v,startAngle:m,endAngle:m+v,clockwise:n,cx:z,cy:A,r0:E,r:F})}r(g,m)})};function initChildren$1(a,c){var b=a.children||[];a.children=sort$2(b,c);if(b.length){each$1(a.children,function(b){initChildren$1(b,c)})}}function sort$2(b,a){if(typeof a==='function'){return b.sort(a)}else {var c=a==='asc';return b.sort(function(f,g){var e=(f.getValue()-g.getValue())*(c?1:-1);return e===0?(f.dataIndex-g.dataIndex)*(c?-1:1):e})}}registerVisual(curry(df,'sunburst'));registerLayout(curry(lC,'sunburst'));registerProcessor(curry(b6,'sunburst'));function dataToCoordSize(b,a){a=a||[0,0];return map(['x','y'],function(h,f){var c=this.getAxis(h);var g=a[f];var e=b[f]/2;return c.type==='category'?c.getBandWidth():Math.abs(c.dataToCoord(g-e)-c.dataToCoord(g+e))},this)}var km=function(b){var a=b.grid.getRect();return {coordSys:{type:'cartesian2d',x:a.x,y:a.y,width:a.width,height:a.height},api:{coord:function(a){return b.dataToPoint(a)},size:bind(dataToCoordSize,b)}}};function dataToCoordSize$1(b,a){a=a||[0,0];return map([0,1],function(c){var h=a[c];var g=b[c]/2;var e=[];var f=[];e[c]=h-g;f[c]=h+g;e[1-c]=f[1-c]=a[1-c];return Math.abs(this.dataToPoint(e)[c]-this.dataToPoint(f)[c])},this)}var ng=function(a){var b=a.getBoundingRect();return {coordSys:{type:'geo',x:b.x,y:b.y,width:b.width,height:b.height,zoom:a.getZoom()},api:{coord:function(b){return a.dataToPoint(b)},size:bind(dataToCoordSize$1,a)}}};function dataToCoordSize$2(c,b){var a=this.getAxis();var f=b instanceof Array?b[0]:b;var e=(c instanceof Array?c[0]:c)/2;return a.type==='category'?a.getBandWidth():Math.abs(a.dataToCoord(f-e)-a.dataToCoord(f+e))}var kE=function(b){var a=b.getRect();return {coordSys:{type:'singleAxis',x:a.x,y:a.y,width:a.width,height:a.height},api:{coord:function(a){return b.dataToPoint(a)},size:bind(dataToCoordSize$2,b)}}};function dataToCoordSize$3(b,a){return map(['Radius','Angle'],function(f,h){var c=this['get'+f+'Axis']();var j=a[h];var g=b[h]/2;var i='dataTo'+f;var e=c.type==='category'?c.getBandWidth():Math.abs(c[i](j-g)-c[i](j+g));if(f==='Angle'){e=e*Math.PI/180}return e},this)}var mn=function(a){var c=a.getRadiusAxis();var e=a.getAngleAxis();var b=c.getExtent();b[0]>b[1]&&b.reverse();return {coordSys:{type:'polar',cx:a.cx,cy:a.cy,r:b[1],r0:b[0]},api:{coord:bind(function(h){var b=c.dataToRadius(h[0]);var f=e.dataToAngle(h[1]);var g=a.coordToPoint([b,f]);g.push(b,f*Math.PI/180);return g}),size:bind(dataToCoordSize$3,a)}}};var lb=function(a){var c=a.getRect();var b=a.getRangeInfo();return {coordSys:{type:'calendar',x:c.x,y:c.y,width:c.width,height:c.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:b.start,end:b.end,weeks:b.weeks,dayCount:b.allDay}},api:{coord:function(c,b){return a.dataToPoint(c,b)}}}};var f_=f1;var jN=['itemStyle'];var jC=['emphasis','itemStyle'];var lZ=['label'];var lh=['emphasis','label'];var kr='e\x00\x00';var hh={cartesian2d:km,geo:ng,singleAxis:kE,polar:mn,calendar:lb};l.extend({type:'series.custom',dependencies:['grid','polar','geo','singleAxis','calendar'],defaultOption:{coordinateSystem:'cartesian2d',zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(b,a){return createListFromArray(this.getSource(),this)},getDataParams:function(c,e,b){var a=l.prototype.getDataParams.apply(this,arguments);b&&(a.info=b.info);return a}});Chart.extend({type:'custom',_data:null,render:function(a,i,j,h){var e=this._data;var c=a.getData();var b=this.group;var f=makeRenderItem(a,c,i,j);c.diff(e).add(function(e){createOrUpdate$1(null,e,f(e,h),a,b,c)}).update(function(g,k){var l=e.getItemGraphicEl(k);createOrUpdate$1(l,g,f(g,h),a,b,c)}).remove(function(f){var c=e.getItemGraphicEl(f);c&&b.remove(c)}).execute();var g=a.get('clip',!0)?createClipPath(a.coordinateSystem,!1,a):null;if(g){b.setClipPath(g)}else {b.removeClipPath()}this._data=c},incrementalPrepareRender:function(a,b,c){this.group.removeAll();this._data=null},incrementalRender:function(c,b,g,i,h){var e=b.getData();var f=makeRenderItem(b,e,g,i);function setIncrementalAndHoverLayer(a){if(!a.isGroup){a.incremental=!0;a.useHoverLayer=!0}}for(var a=c.start;a<c.end;a++){var j=createOrUpdate$1(null,a,f(a,h),b,this.group,e);j.traverse(setIncrementalAndHoverLayer)}},dispose:noop,filterForExposedEvent:function(f,c,a,e){var b=c.element;if(b==null||a.name===b){return !0}while((a=a.parent)&&a!==this.group){if(a.name===b){return !0}}return !1}});function createEl(h){var f=h.type;var c;if(f==='path'){var g=h.shape;var k=g.width!=null&&g.height!=null?{x:g.x||0,y:g.y||0,width:g.width,height:g.height}:null;var i=getPathData(g);c=makePath(i,null,k,g.layout||'center');c.__customPathData=i}else {if(f==='image'){c=new ZImage({});c.__customImagePath=h.style.image}else {if(f==='text'){c=new e({});c.__customText=h.style.text}else {if(f==='group'){c=new b()}else {if(f==='compoundPath'){throw new Error('"compoundPath" is not supported yet.')}else {var j=getShapeClass(f);if(a){assert$1(j,'graphic type "'+f+'" can not be found.')}c=new j()}}}}}c.__customGraphicType=f;c.name=h.name;return c}function updateEl(b,k,a,i,m,f,l){var e={};var c=a.style||{};a.shape&&(e.shape=clone(a.shape));a.position&&(e.position=a.position.slice());a.scale&&(e.scale=a.scale.slice());a.origin&&(e.origin=a.origin.slice());a.rotation&&(e.rotation=a.rotation);if(b.type==='image'&&a.style){var h=e.style={};each$1(['x','y','width','height'],function(e){prepareStyleTransition(e,h,c,b.style,f)})}if(b.type==='text'&&a.style){var h=e.style={};each$1(['x','y'],function(e){prepareStyleTransition(e,h,c,b.style,f)});!c.hasOwnProperty('textFill')&&c.fill&&(c.textFill=c.fill);!c.hasOwnProperty('textStroke')&&c.stroke&&(c.textStroke=c.stroke)}if(b.type!=='group'){b.useStyle(c);if(f){b.style.opacity=0;var g=c.opacity;g==null&&(g=1);initProps(b,{style:{opacity:g}},i,k)}}if(f){b.attr(e)}else {updateProps(b,e,i,k)}a.hasOwnProperty('z2')&&b.attr('z2',a.z2||0);a.hasOwnProperty('silent')&&b.attr('silent',a.silent);a.hasOwnProperty('invisible')&&b.attr('invisible',a.invisible);a.hasOwnProperty('ignore')&&b.attr('ignore',a.ignore);a.hasOwnProperty('info')&&b.attr('info',a.info);var j=a.styleEmphasis;setElementHoverStyle(b,j);if(l){setAsHighDownDispatcher(b,j!==!1)}}function prepareStyleTransition(a,c,b,e,f){if(b[a]!=null&&!f){c[a]=b[a];b[a]=e[a]}}function makeRenderItem(c,b,o,h){var m=c.get('renderItem');var e=c.coordinateSystem;var l={};if(e){if(a){assert$1(m,'series.render is required.');assert$1(e.prepareCustoms||hh[e.type],'This coordSys does not support custom series.')}l=e.prepareCustoms?e.prepareCustoms():hh[e.type](e)}var q=defaults({getWidth:h.getWidth,getHeight:h.getHeight,getZr:h.getZr,getDevicePixelRatio:h.getDevicePixelRatio,value:value,style:style,styleEmphasis:styleEmphasis,visual:visual,barLayout:barLayout,currentSeriesIndices:currentSeriesIndices,font:font},l.api||{});var p={context:{},seriesId:c.id,seriesName:c.name,seriesIndex:c.seriesIndex,coordSys:l.coordSys,dataInsideLength:b.count(),encode:wrapEncodeDef(c.getData())};var f;var n=!0;var g;var k;var j;var i;return function(a,e){f=a;n=!0;return m&&m(defaults({dataIndexInside:a,dataIndex:b.getRawIndex(a),actionType:e?e.type:null},p),q)};function updateCache(a){a==null&&(a=f);if(n){g=b.getItemModel(a);k=g.getModel(lZ);j=g.getModel(lh);i=b.getItemVisual(a,'color');n=!1}}function value(e,a){a==null&&(a=f);return b.get(b.getDimension(e||0),a)}function style(j,a){a==null&&(a=f);updateCache(a);var e=g.getModel(jN).getItemStyle();i!=null&&(e.fill=i);var m=b.getItemVisual(a,'opacity');m!=null&&(e.opacity=m);var l=j?applyExtraBefore(j,k):k;setTextStyle(e,l,null,{autoColor:i,isRectText:!0});e.text=l.getShallow('show')?retrieve2(c.getFormattedLabel(a,'normal'),getDefaultLabel(b,a)):null;j&&applyExtraAfter(e,j);return e}function styleEmphasis(i,a){a==null&&(a=f);updateCache(a);var e=g.getModel(jC).getItemStyle();var k=i?applyExtraBefore(i,j):j;setTextStyle(e,k,null,{isRectText:!0},!0);e.text=k.getShallow('show')?retrieve3(c.getFormattedLabel(a,'emphasis'),c.getFormattedLabel(a,'normal'),getDefaultLabel(b,a)):null;i&&applyExtraAfter(e,i);return e}function visual(e,a){a==null&&(a=f);return b.getItemVisual(a,e)}function barLayout(f){if(e.getBaseAxis){var a=e.getBaseAxis();return getLayoutOnAxis(defaults({axis:a},f),h)}}function currentSeriesIndices(){return o.getCurrentSeriesIndices()}function font(a){return getFont(a,o)}}function wrapEncodeDef(b){var a={};each$1(b.dimensions,function(h,f){var c=b.getDimensionInfo(h);if(!c.isExtraCoord){var e=c.coordDim;var g=a[e]=a[e]||[];g[c.coordDimIndex]=f}});return a}function createOrUpdate$1(a,b,f,e,g,c){a=doCreateOrUpdate(a,b,f,e,g,c,!0);a&&c.setItemGraphicEl(b,a);return a}function doCreateOrUpdate(a,i,b,g,j,k,m){var h=!b;b=b||{};var c=b.type;var e=b.shape;var f=b.style;if(a&&(h||c!=null&&c!==a.__customGraphicType||c==='path'&&hasOwnPathData(e)&&getPathData(e)!==a.__customPathData||c==='image'&&hasOwn(f,'image')&&f.image!==a.__customImagePath||c==='text'&&hasOwn(e,'text')&&f.text!==a.__customText)){j.remove(a);a=null}if(h){return}var l=!a;!a&&(a=createEl(b));updateEl(a,i,b,g,k,l,m);if(c==='group'){mergeChildren(a,i,b,g,k)}j.add(a);return a}function mergeChildren(c,j,f,h,m){var e=f.children;var l=e?e.length:0;var i=f.$mergeChildren;var k=i==='byName'||f.diffChildrenByName;var g=i===!1;if(!l&&!k&&!g){return}if(k){diffGroupChildren({oldChildren:c.children()||[],newChildren:e||[],dataIndex:j,animatableModel:h,group:c,data:m});return}g&&c.removeAll();var b=0;for(;b<l;b++){e[b]&&doCreateOrUpdate(c.childAt(b),j,e[b],h,c,m)}if(a){assert$1(!g||c.childCount()===b,'MUST NOT contain empty item in children array when `group.$mergeChildren` is `false`.')}}function diffGroupChildren(a){(new DataDiffer(a.oldChildren,a.newChildren,getKey,getKey,a)).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(a,c){var b=a&&a.name;return b!=null?b:kr+c}function processAddUpdate(b,c){var a=this.context;var e=b!=null?a.newChildren[b]:null;var f=c!=null?a.oldChildren[c]:null;doCreateOrUpdate(f,a.dataIndex,e,a.animatableModel,a.group,a.data)}function applyExtraBefore(b,c){var a=new Model({},c);each$1(f_,function(e,f){if(b.hasOwnProperty(e)){a.option[f]=b[e]}});return a}function applyExtraAfter(c,b){for(var a in b){if(b.hasOwnProperty(a)||!f_.hasOwnProperty(a)){c[a]=b[a]}}}function processRemove(c){var a=this.context;var b=a.oldChildren[c];b&&a.group.remove(b)}function getPathData(a){return a&&(a.pathData||a.d)}function hasOwnPathData(a){return a&&(a.hasOwnProperty('pathData')||a.hasOwnProperty('d'))}function hasOwn(a,b){return a&&a.hasOwnProperty(b)}function getSeriesStackId$1(a){return a.get('stack')||'__ec_stack_'+a.seriesIndex}function getAxisKey$1(a,b){return b.dim+a.model.componentIndex}function barLayoutPolar(c,b,f){var a={};var e=calRadialBar(filter(b.getSeriesByType(c),function(a){return !b.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==='polar'}));b.eachSeriesByType(c,function(g){if(g.coordinateSystem.type!=='polar'){return}var j=g.getData();var x=g.coordinateSystem;var k=x.getBaseAxis();var G=getAxisKey$1(x,k);var h=getSeriesStackId$1(g);var z=e[G][h];var B=z.offset;var D=z.width;var n=x.getOtherAxis(k);var L=g.coordinateSystem.cx;var M=g.coordinateSystem.cy;var A=g.get('barMinHeight')||0;var C=g.get('barMinAngle')||0;a[h]=a[h]||[];var E=j.mapDimension(n.dim);var H=j.mapDimension(k.dim);var w=isDimensionStacked(j,E);var F=k.dim!=='radius'||!g.get('roundCap',!0);var l=n.getExtent()[0];for(var o=0,K=j.count();o<K;o++){var t=j.get(E,o);var i=j.get(H,o);if(isNaN(t)){continue}var y=t>=0?'p':'n';var m=l;if(w){if(!a[h][i]){a[h][i]={p:l,n:l}}m=a[h][i][y]}var u;var v;var q;var s;if(n.dim==='radius'){var p=n.dataToRadius(t)-l;var J=k.dataToAngle(i);if(Math.abs(p)<A){p=(p<0?-1:1)*A}u=m;v=m+p;q=J-B;s=q-D;w&&(a[h][i][y]=v)}else {var r=n.dataToAngle(t,F)-l;var I=k.dataToRadius(i);if(Math.abs(r)<C){r=(r<0?-1:1)*C}u=I+B;v=u+D;q=m;s=m+r;w&&(a[h][i][y]=s)}j.setItemLayout(o,{cx:L,cy:M,r0:u,r:v,startAngle:-q*Math.PI/180,endAngle:-s*Math.PI/180})}},this)}function calRadialBar(c,e){var b={};each$1(c,function(f,s){var r=f.getData();var q=f.coordinateSystem;var k=q.getBaseAxis();var o=getAxisKey$1(q,k);var n=k.getExtent();var j=k.type==='category'?k.getBandWidth():Math.abs(n[1]-n[0])/r.count();var a=b[o]||{bandWidth:j,remainedWidth:j,autoWidthCount:0,categoryGap:'20%',gap:'30%',stacks:{}};var h=a.stacks;b[o]=a;var g=getSeriesStackId$1(f);if(!h[g]){a.autoWidthCount++}h[g]=h[g]||{width:0,maxWidth:0};var i=parsePercent$1(f.get('barWidth'),j);var m=parsePercent$1(f.get('barMaxWidth'),j);var p=f.get('barGap');var l=f.get('barCategoryGap');if(i&&!h[g].width){i=Math.min(a.remainedWidth,i);h[g].width=i;a.remainedWidth-=i}m&&(h[g].maxWidth=m);p!=null&&(a.gap=p);l!=null&&(a.categoryGap=l)});var a={};each$1(b,function(f,j){a[j]={};var m=f.stacks;var p=f.bandWidth;var n=parsePercent$1(f.categoryGap,p);var h=parsePercent$1(f.gap,1);var i=f.remainedWidth;var g=f.autoWidthCount;var b=(i-n)/(g+(g-1)*h);b=Math.max(b,0);each$1(m,function(h,k){var a=h.maxWidth;if(a&&a<b){a=Math.min(a,i);if(h.width){a=Math.min(a,h.width)}i-=a;h.width=a;g--}});b=(i-n)/(g+(g-1)*h);b=Math.max(b,0);var l=0;var k;each$1(m,function(a,g){if(!a.width){a.width=b}k=a;l+=a.width*(1+h)});if(k){l-=k.width*h}var o=-l/2;each$1(m,function(g,b){a[j][b]=a[j][b]||{offset:o,width:g.width};o+=g.width*(1+h)})});return a}function RadiusAxis(b,a){q.call(this,'radius',b,a);this.type='category'}RadiusAxis.prototype={constructor:RadiusAxis,pointToData:function(b,a){return this.polar.pointToData(b,a)[this.dim==='radius'?0:1]},dataToRadius:q.prototype.dataToCoord,radiusToData:q.prototype.coordToData};inherits(RadiusAxis,q);var n$=makeInner();function AngleAxis(b,a){a=a||[0,360];q.call(this,'angle',b,a);this.type='category'}AngleAxis.prototype={constructor:AngleAxis,pointToData:function(b,a){return this.polar.pointToData(b,a)[this.dim==='radius'?0:1]},dataToAngle:q.prototype.dataToCoord,angleToData:q.prototype.coordToData,calculateCategoryInterval:function(){var b=this;var l=b.getLabelModel();var j=b.scale;var f=j.getExtent();var k=j.count();if(f[1]-f[0]<1){return 0}var g=f[0];var m=b.dataToCoord(g+1)-b.dataToCoord(g);var n=Math.abs(m);var p=getBoundingRect(g,l.getFont(),'center','top');var o=Math.max(p.height,7);var h=o/n;isNaN(h)&&(h=Infinity);var a=Math.max(0,Math.floor(h));var e=n$(b.model);var c=e.lastAutoInterval;var i=e.lastTickCount;if(c!=null&&i!=null&&Math.abs(c-a)<=1&&Math.abs(i-k)<=1&&c>a){a=c}else {e.lastTickCount=k;e.lastAutoInterval=a}return a}};inherits(AngleAxis,q);var dJ=function(a){this.name=a||'';this.cx=0;this.cy=0;this._radiusAxis=new RadiusAxis();this._angleAxis=new AngleAxis();this._radiusAxis.polar=this._angleAxis.polar=this};dJ.prototype={type:'polar',axisPointerEnabled:!0,constructor:dJ,dimensions:['radius','angle'],model:null,containPoint:function(b){var a=this.pointToCoord(b);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},containData:function(a){return this._radiusAxis.containData(a[0])&&this._angleAxis.containData(a[1])},getAxis:function(a){return this['_'+a+'Axis']},getAxes:function(){return [this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var a=[];var c=this._angleAxis;var b=this._radiusAxis;c.scale.type===e&&a.push(c);b.scale.type===e&&a.push(b);return a},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(b){var a=this._angleAxis;return b===a?this._radiusAxis:a},getBaseAxis:function(){return this.getAxesByScale('ordinal')[0]||this.getAxesByScale('time')[0]||this.getAngleAxis()},getTooltipAxes:function(a){var b=a!=null&&a!=='auto'?this.getAxis(a):this.getBaseAxis();return {baseAxes:[b],otherAxes:[this.getOtherAxis(b)]}},dataToPoint:function(b,a){return this.coordToPoint([this._radiusAxis.dataToRadius(b[0],a),this._angleAxis.dataToAngle(b[1],a)])},pointToData:function(c,a){var b=this.pointToCoord(c);return [this._radiusAxis.radiusToData(b[0],a),this._angleAxis.angleToData(b[1],a)]},pointToCoord:function(j){var e=j[0]-this.cx;var f=j[1]-this.cy;var i=this.getAngleAxis();var c=i.getExtent();var b=Math.min(c[0],c[1]);var g=Math.max(c[0],c[1]);i.inverse?b=g-360:g=b+360;var h=Math.sqrt(e*e+f*f);e/=h;f/=h;var a=Math.atan2(-f,e)/Math.PI*180;var k=a<b?1:-1;while(a<b||a>g){a+=k*360}return [h,a]},coordToPoint:function(c){var b=c[0];var a=c[1]/180*Math.PI;var e=Math.cos(a)*b+this.cx;var f=-Math.sin(a)*b+this.cy;return [e,f]},getArea:function(){var c=this.getAngleAxis();var f=this.getRadiusAxis();var a=f.getExtent().slice();a[0]>a[1]&&a.reverse();var b=c.getExtent();var e=Math.PI/180;return {cx:this.cx,cy:this.cy,r0:a[0],r:a[1],startAngle:-b[0]*e,endAngle:-b[1]*e,clockwise:c.inverse,contain:function(g,h){var b=g-this.cx;var c=h-this.cy;var a=b*b+c*c;var f=this.r;var e=this.r0;return a<=f*f&&a>=e*e}}}};var ew=g.extend({type:'polarAxis',axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:'polar',index:this.option.polarIndex,id:this.option.polarId})[0]}});merge(ew.prototype,aQ);var f0={angle:{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};function getAxisType$3(b,a){return a.type||(a.data?'category':'value')}bk('angle',ew,getAxisType$3,f0.angle);bk('radius',ew,getAxisType$3,f0.radius);extendComponentModel({type:'polar',dependencies:['polarAxis','angleAxis'],coordinateSystem:null,findAxisModel:function(b){var a;var c=this.ecModel;c.eachComponent(b,function(c){if(c.getCoordSysModel()===this){a=c}},this);return a},defaultOption:{zlevel:0,z:0,center:['50%','50%'],radius:'80%'}});function resizePolar(c,e,j){var f=e.get('center');var h=j.getWidth();var g=j.getHeight();c.cx=parsePercent$1(f[0],h);c.cy=parsePercent$1(f[1],g);var b=c.getRadiusAxis();var i=Math.min(h,g)/2;var a=e.get('radius');if(a==null){a=[0,'100%']}else {if(!isArray(a)){a=[0,a]}}a=[parsePercent$1(a[0],i),parsePercent$1(a[1],i)];b.inverse?b.setExtent(a[1],a[0]):b.setExtent(a[0],a[1])}function updatePolarScale(g,h){var e=this;var a=e.getAngleAxis();var b=e.getRadiusAxis();a.scale.setExtent(Infinity,-Infinity);b.scale.setExtent(Infinity,-Infinity);g.eachSeries(function(f){if(f.coordinateSystem===e){var c=f.getData();each$1(c.mapDimension('radius',!0),function(a){b.scale.unionExtentFromData(c,getStackedDimension(c,a))});each$1(c.mapDimension('angle',!0),function(b){a.scale.unionExtentFromData(c,getStackedDimension(c,b))})}});niceScaleExtent(a.scale,a.model);niceScaleExtent(b.scale,b.model);if(a.type==='category'&&!a.onBand){var c=a.getExtent();var f=360/a.scale.count();a.inverse?c[1]+=f:c[1]-=f;a.setExtent(c[0],c[1])}}function setAxis(a,b){a.type=b.get('type');a.scale=createScaleByModel(b);a.onBand=b.get('boundaryGap')&&a.type==='category';a.inverse=b.get('inverse');if(b.mainType==='angleAxis'){a.inverse^=b.get('clockwise');var c=b.get('startAngle');a.setExtent(c,c+(a.inverse?-360:360))}b.axis=a;a.model=b}var mm={dimensions:dJ.prototype.dimensions,create:function(b,e){var c=[];b.eachComponent('polar',function(f,k){var a=new dJ(k);a.update=updatePolarScale;var i=a.getRadiusAxis();var j=a.getAngleAxis();var g=f.findAxisModel('radiusAxis');var h=f.findAxisModel('angleAxis');setAxis(i,g);setAxis(j,h);resizePolar(a,f,e);c.push(a);f.coordinateSystem=a;a.model=f});b.eachSeries(function(c){if(c.get('coordinateSystem')==='polar'){var f=b.queryComponents({mainType:'polar',index:c.get('polarIndex'),id:c.get('polarId')})[0];if(a){if(!f){throw new Error('Polar "'+retrieve(c.get('polarIndex'),c.get('polarId'),0)+'" not found')}}c.coordinateSystem=f.coordinateSystem}});return c}};CoordinateSystemManager.register('polar',mm);var lM=['axisLine','axisLabel','axisTick','splitLine','splitArea'];function getAxisLineShape(c,a,b){a[1]>a[0]&&(a=a.slice().reverse());var e=c.coordToPoint([a[0],b]);var f=c.coordToPoint([a[1],b]);return {x1:e[0],y1:e[1],x2:f[0],y2:f[1]}}function getRadiusIdx(b){var a=b.getRadiusAxis();return a.inverse?0:1}function fixAngleOverlap(a){var b=a[0];var c=a[a.length-1];if(b&&c&&Math.abs(Math.abs(b.coord-c.coord)-360)<1.0E-4){a.pop()}}G.extend({type:'angleAxis',axisPointerClass:'PolarAxisPointer',render:function(b,h){this.group.removeAll();if(!b.get('show')){return}var a=b.axis;var f=a.polar;var g=f.getRadiusAxis().getExtent();var c=a.getTicksCoords();var e=map(a.getViewLabels(),function(c){var c=clone(c);c.coord=a.dataToCoord(c.tickValue);return c});fixAngleOverlap(e);fixAngleOverlap(c);each$1(lM,function(i){if(b.get(i+'.show')&&(!a.scale.isBlank()||i==='axisLine')){this['_'+i](b,f,c,g,e)}},this)},_axisLine:function(h,a,i,b){var f=h.getModel('axisLine.lineStyle');var e=getRadiusIdx(a);var g=e?0:1;var c;if(b[g]===0){c=new ao({shape:{cx:a.cx,cy:a.cy,r:b[e]},style:f.getLineStyle(),z2:1,silent:!0})}else {c=new dN({shape:{cx:a.cx,cy:a.cy,r:b[e],r0:b[g]},style:f.getLineStyle(),z2:1,silent:!0})}c.style.fill=null;this.group.add(c)},_axisTick:function(b,e,g,f){var a=b.getModel('axisTick');var h=(a.get('inside')?-1:1)*a.get('length');var c=f[getRadiusIdx(e)];var i=map(g,function(a){return new B({shape:getAxisLineShape(e,[c,c+h],a.coord)})});this.group.add(ak(i,{style:defaults(a.getModel('lineStyle').getLineStyle(),{stroke:b.get('axisLine.lineStyle.color')})}))},_axisLabel:function(a,f,k,g,j){var c=a.getCategories(!0);var b=a.getModel('axisLabel');var i=b.get('margin');var h=a.get('triggerEvent');each$1(j,function(n,v){var o=b;var p=n.tickValue;var q=g[getRadiusIdx(f)];var l=f.coordToPoint([q+i,n.coord]);var r=f.cx;var s=f.cy;var u=Math.abs(l[0]-r)/q<0.3?'center':l[0]>r?'left':'right';var t=Math.abs(l[1]-s)/q<0.3?'middle':l[1]>s?'top':'bottom';if(c&&c[p]&&c[p].textStyle){o=new Model(c[p].textStyle,b,b.ecModel)}var m=new e({silent:x.isLabelSilent(a)});this.group.add(m);setTextStyle(m.style,o,{x:l[0],y:l[1],textFill:o.getTextColor()||a.get('axisLine.lineStyle.color'),text:n.formattedLabel,textAlign:u,textVerticalAlign:t});if(h){m.eventData=x.makeAxisEventDataBase(a);m.eventData.targetType='axisLabel';m.eventData.value=n.rawLabel}},this)},_splitLine:function(f,l,h,j){var i=f.getModel('splitLine');var g=i.getModel('lineStyle');var b=g.get('color');var k=0;b=b instanceof Array?b:[b];var c=[];for(var a=0;a<h.length;a++){var e=k++%b.length;c[e]=c[e]||[];c[e].push(new B({shape:getAxisLineShape(l,j,h[a].coord)}))}for(var a=0;a<c.length;a++){this.group.add(ak(c[a],{style:defaults({stroke:b[a%b.length]},g.getLineStyle()),silent:!0,z:f.get('z')}))}},_splitArea:function(i,l,c,f){if(!c.length){return}var m=i.getModel('splitArea');var j=m.getModel('areaStyle');var b=j.get('color');var o=0;b=b instanceof Array?b:[b];var e=[];var h=Math.PI/180;var k=-c[0].coord*h;var p=Math.min(f[0],f[1]);var q=Math.max(f[0],f[1]);var n=i.get('clockwise');for(var a=1;a<c.length;a++){var g=o++%b.length;e[g]=e[g]||[];e[g].push(new aa({shape:{cx:l.cx,cy:l.cy,r0:p,r:q,startAngle:k,endAngle:-c[a].coord*h,clockwise:n},silent:!0}));k=-c[a].coord*h}for(var a=0;a<e.length;a++){this.group.add(ak(e[a],{style:defaults({fill:b[a%b.length]},j.getAreaStyle()),silent:!0}))}}});var kh=['axisLine','axisTickLabel','axisName'];var kn=['splitLine','splitArea'];G.extend({type:'radiusAxis',axisPointerClass:'PolarAxisPointer',render:function(a,k){this.group.removeAll();if(!a.get('show')){return}var b=a.axis;var e=b.polar;var i=e.getAngleAxis();var h=b.getTicksCoords();var f=i.getExtent()[0];var g=b.getExtent();var j=layoutAxis(e,a,f);var c=new x(a,j);each$1(kh,c.add,c);this.group.add(c.getGroup());each$1(kn,function(c){if(a.get(c+'.show')&&!b.scale.isBlank()){this['_'+c](a,e,f,g,h)}},this)},_splitLine:function(i,h,m,l,g){var j=i.getModel('splitLine');var f=j.getModel('lineStyle');var b=f.get('color');var k=0;b=b instanceof Array?b:[b];var c=[];for(var a=0;a<g.length;a++){var e=k++%b.length;c[e]=c[e]||[];c[e].push(new ao({shape:{cx:h.cx,cy:h.cy,r:g[a].coord},silent:!0}))}for(var a=0;a<c.length;a++){this.group.add(ak(c[a],{style:defaults({stroke:b[a%b.length],fill:null},f.getLineStyle()),silent:!0}))}},_splitArea:function(j,i,n,m,c){if(!c.length){return}var k=j.getModel('splitArea');var g=k.getModel('areaStyle');var b=g.get('color');var l=0;b=b instanceof Array?b:[b];var e=[];var h=c[0].coord;for(var a=1;a<c.length;a++){var f=l++%b.length;e[f]=e[f]||[];e[f].push(new aa({shape:{cx:i.cx,cy:i.cy,r0:h,r:c[a].coord,startAngle:0,endAngle:Math.PI*2},silent:!0}));h=c[a].coord}for(var a=0;a<e.length;a++){this.group.add(ak(e[a],{style:defaults({fill:b[a%b.length]},g.getAreaStyle()),silent:!0}))}}});function layoutAxis(a,b,c){return {position:[a.cx,a.cy],rotation:c/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:b.getModel('axisLabel').get('rotate'),z2:1}}var kJ=BaseAxisPointer.extend({makeElOption:function(g,k,f,b,p){var a=f.axis;if(a.dim==='angle'){this.animationThreshold=Math.PI/18}var h=a.polar;var n=h.getOtherAxis(a);var m=n.getExtent();var i;i=a['dataTo'+capitalFirst(a.dim)](k);var c=b.get('type');if(c&&c!=='none'){var j=buildElStyle(b);var e=jY[c](a,h,i,m,j);e.style=j;g.graphicKey=e.type;g.pointer=e}var l=b.get('label.margin');var o=getLabelPosition(k,f,b,h,l);buildLabelElOption(g,f,b,p,o)}});function getLabelPosition(r,k,s,b,j){var m=k.axis;var l=m.dataToCoord(r);var e=b.getAngleAxis().getExtent()[0];e=e/180*Math.PI;var q=b.getRadiusAxis().getExtent();var a;var g;var f;if(m.dim==='radius'){var c=create$1();rotate(c,c,e);translate(c,c,[b.cx,b.cy]);a=applyTransform$1([l,-j],c);var p=k.getModel('axisLabel').get('rotate')||0;var i=x.innerTextLayout(e,p*Math.PI/180,-1);g=i.textAlign;f=i.textVerticalAlign}else {var h=q[1];a=b.coordToPoint([h+j,l]);var n=b.cx;var o=b.cy;g=Math.abs(a[0]-n)/h<0.3?'center':a[0]>n?'left':'right';f=Math.abs(a[1]-o)/h<0.3?'middle':a[1]>o?'top':'bottom'}return {position:a,align:g,verticalAlign:f}}var jY={line:function(e,a,b,c,f){return e.dim==='angle'?{type:'Line',shape:makeLineShape(a.coordToPoint([c[0],b]),a.coordToPoint([c[1],b]))}:{type:'Circle',shape:{cx:a.cx,cy:a.cy,r:b}}},shadow:function(g,c,a,e,h){var b=Math.max(1,g.getBandWidth());var f=Math.PI/180;return g.dim==='angle'?{type:'Sector',shape:makeSectorShape(c.cx,c.cy,e[0],e[1],(-a-b/2)*f,(-a+b/2)*f)}:{type:'Sector',shape:makeSectorShape(c.cx,c.cy,a-b/2,a+b/2,0,Math.PI*2)}}};G.registerAxisPointerClass('PolarAxisPointer',kJ);registerLayout(curry(barLayoutPolar,'bar'));extendComponentView({type:'polar'});var nQ=g.extend({type:'geo',coordinateSystem:null,layoutMode:'box',init:function(a){g.prototype.init.apply(this,arguments);defaultEmphasis(a,'label',['show'])},optionUpdated:function(){var a=this.option;var b=this;a.regions=hY.getFilledRegions(a.regions,a.map,a.nameMap);this._optionModelMap=reduce(a.regions||[],function(c,a){if(a.name){c.set(a.name,new Model(a,b))}return c},createHashMap());this.updateSelectedMap(a.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:'center',top:'center',aspectScale:null,silent:!1,map:'',boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:'#000'},itemStyle:{borderWidth:0.5,borderColor:'#444',color:'#eee'},emphasis:{label:{show:!0,color:'rgb(100,0,0)'},itemStyle:{color:'rgba(255,215,0,0.8)'}},regions:[]},getRegionModel:function(a){return this._optionModelMap.get(a)||new Model(null,this,this.ecModel)},getFormattedLabel:function(b,c){var f=this.getRegionModel(b);var a=f.get('label'+(c==='normal'?'.':c+'.')+'formatter');var e={name:b};if(typeof a==='function'){e.status=c;return a(e)}else {if(typeof a==='string'){return a.replace('{a}',b!=null?b:'')}}},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a}});mixin(nQ,et);extendComponentView({type:'geo',init:function(c,b){var a=new MapDraw(b,!0);this._mapDraw=a;this.group.add(a.group)},render:function(b,c,f,a){if(a&&a.type==='geoToggleSelect'&&a.from===this.uid){return}var e=this._mapDraw;if(b.get('show')){e.draw(b,c,f,this,a)}else {this._mapDraw.group.removeAll()}this.group.silent=b.get('silent')},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});function makeAction(b,a){a.update='updateView';registerAction(a,function(c,f){var e={};f.eachComponent({mainType:'geo',query:c},function(g){g[b](c.name);var h=g.coordinateSystem;each$1(h.regions,function(h){e[h.name]=g.isSelected(h.name)||!1})});return {selected:e,name:c.name}})}makeAction('toggleSelected',{type:'geoToggleSelect',event:'geoselectchanged'});makeAction('select',{type:'geoSelect',event:'geoselected'});makeAction('unSelect',{type:'geoUnSelect',event:'geounselected'});var d7=86400000;function Calendar(a,b,c){this._model=a}Calendar.prototype={constructor:Calendar,type:'calendar',dimensions:['time','value'],getDimensionsInfo:function(){return [{name:'time',type:'time'},'value']},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(a){a=parseDate(a);var f=a.getFullYear();var c=a.getMonth()+1;c=c<10?'0'+c:c;var b=a.getDate();b=b<10?'0'+b:b;var e=a.getDay();e=Math.abs((e+7-this.getFirstDayOfWeek())%7);return {y:f,m:c,d:b,day:e,time:a.getTime(),formatedDate:f+'-'+c+'-'+b,date:a}},getNextNDay:function(a,b){b=b||0;if(b===0){return this.getDateInfo(a)}a=new Date(this.getDateInfo(a).time);a.setDate(a.getDate()+b);return this.getDateInfo(a)},update:function(j,g){this._firstDayOfWeek=+this._model.getModel('dayLabel').get('firstDay');this._orient=this._model.get('orient');this._lineWidth=this._model.getModel('itemStyle').getItemStyle().lineWidth||0;this._rangeInfo=this._getRangeInfo(this._initRangeOption());var f=this._rangeInfo.weeks||1;var e=['width','height'];var a=this._model.get('cellSize').slice();var b=this._model.getBoxLayoutParams();var c=this._orient==='horizontal'?[f,7]:[7,f];each$1([0,1],function(f){if(cellSizeSpecified(a,f)){b[e[f]]=a[f]*c[f]}});var i={width:g.getWidth(),height:g.getHeight()};var h=this._rect=getLayoutRect(b,i);each$1([0,1],function(b){if(!cellSizeSpecified(a,b)){a[b]=h[e[b]]/c[b]}});function cellSizeSpecified(a,b){return a[b]!=null&&a[b]!=='auto'}this._sw=a[0];this._sh=a[1]},dataToPoint:function(b,c){isArray(b)&&(b=b[0]);c==null&&(c=!0);var a=this.getDateInfo(b);var e=this._rangeInfo;var h=a.formatedDate;if(c&&!(a.time>=e.start.time&&a.time<e.end.time+d7)){return [NaN,NaN]}var g=a.day;var f=this._getRangeInfo([e.start.time,h]).nthWeek;if(this._orient==='vertical'){return [this._rect.x+g*this._sw+this._sw/2,this._rect.y+f*this._sh+this._sh/2]}return [this._rect.x+f*this._sw+this._sw/2,this._rect.y+g*this._sh+this._sh/2]},pointToData:function(b){var a=this.pointToDate(b);return a&&a.time},dataToRect:function(c,b){var a=this.dataToPoint(c,b);return {contentShape:{x:a[0]-(this._sw-this._lineWidth)/2,y:a[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},pointToDate:function(a){var c=Math.floor((a[0]-this._rect.x)/this._sw)+1;var e=Math.floor((a[1]-this._rect.y)/this._sh)+1;var b=this._rangeInfo.range;if(this._orient==='vertical'){return this._getDateByWeeksAndDay(e,c-1,b)}return this._getDateByWeeksAndDay(c,e-1,b)},convertToPixel:curry(doConvert$2,'dataToPoint'),convertFromPixel:curry(doConvert$2,'pointToData'),_initRangeOption:function(){var b=this._model.get('range');var a=b;if(isArray(a)&&a.length===1){a=a[0]}if(/^\d{4}$/.test(a)){b=[a+'-01-01',a+'-12-31']}if(/^\d{4}[\/|-]\d{1,2}$/.test(a)){var e=this.getDateInfo(a);var c=e.date;c.setMonth(c.getMonth()+1);var g=this.getNextNDay(c,-1);b=[e.formatedDate,g.formatedDate]}if(/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)){b=[a,a]}var f=this._getRangeInfo(b);if(f.start.time>f.end.time){b.reverse()}return b},_getRangeInfo:function(a){a=[this.getDateInfo(a[0]),this.getDateInfo(a[1])];var e;if(a[0].time>a[1].time){e=!0;a.reverse()}var c=Math.floor(a[1].time/d7)-Math.floor(a[0].time/d7)+1;var b=new Date(a[0].time);var g=b.getDate();var h=a[1].date.getDate();b.setDate(g+c-1);if(b.getDate()!==h){var i=b.getTime()-a[1].time>0?1:-1;while(b.getDate()!==h&&(b.getTime()-a[1].time)*i>0){c-=i;b.setDate(g+c-1)}}var f=Math.floor((c+a[0].day+6)/7);var j=e?-f+1:f-1;e&&a.reverse();return {range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:c,weeks:f,nthWeek:j,fweek:a[0].day,lweek:a[1].day}},_getDateByWeeksAndDay:function(b,c,g){var a=this._getRangeInfo(g);if(b>a.weeks||b===0&&c<a.fweek||b===a.weeks&&c>a.lweek){return !1}var f=(b-1)*7-a.fweek+c;var e=new Date(a.start.time);e.setDate(a.start.d+f);return this.getDateInfo(e)}};Calendar.dimensions=Calendar.prototype.dimensions;Calendar.getDimensionsInfo=Calendar.prototype.getDimensionsInfo;Calendar.create=function(b,c){var a=[];b.eachComponent('calendar',function(e){var f=new Calendar(e,b,c);a.push(f);e.coordinateSystem=f});b.eachSeries(function(e){if(e.get('coordinateSystem')==='calendar'){e.coordinateSystem=a[e.get('calendarIndex')||0]}});return a};function doConvert$2(f,h,e,g){var a=e.calendarModel;var b=e.seriesModel;var c=a?a.coordinateSystem:b?b.coordinateSystem:null;return c===this?c[f](g):null}CoordinateSystemManager.register('calendar',Calendar);var hl=g.extend({type:'calendar',coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:'horizontal',splitLine:{show:!0,lineStyle:{color:'#000',width:1,type:'solid'}},itemStyle:{color:'#fff',borderWidth:1,borderColor:'#ccc'},dayLabel:{show:!0,firstDay:0,position:'start',margin:'50%',nameMap:'en',color:'#000'},monthLabel:{show:!0,position:'start',margin:5,align:'center',nameMap:'en',formatter:null,color:'#000'},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:'#ccc',fontFamily:'sans-serif',fontWeight:'bolder',fontSize:20}},init:function(a,c,f,e){var b=getLayoutParams(a);hl.superApply(this,'init',arguments);mergeAndNormalizeLayoutParams(a,b)},mergeOption:function(a,b){hl.superApply(this,'mergeOption',arguments);mergeAndNormalizeLayoutParams(this.option,a)}});function mergeAndNormalizeLayoutParams(b,c){var a=b.cellSize;if(!isArray(a)){a=b.cellSize=[a,a]}else {if(a.length===1){a[1]=a[0]}}var e=map([0,1],function(e){if(sizeCalculable(c,e)){a[e]='auto'}return a[e]!=null&&a[e]!=='auto'});mergeLayoutParam(b,c,{type:'box',ignoreSize:e})}var m0={EN:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],CN:['','','','','','','','','','','','']};var nv={EN:['S','M','T','W','T','F','S'],CN:['','','','','','','']};extendComponentView({type:'calendar',_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(a,g,h){var b=this.group;b.removeAll();var f=a.coordinateSystem;var c=f.getRangeInfo();var e=f.getOrient();this._renderDayRect(a,c,b);this._renderLines(a,c,e,b);this._renderYearText(a,c,e,b);this._renderMonthText(a,e,b);this._renderWeekText(a,c,e,b)},_renderDayRect:function(c,e,i){var a=c.coordinateSystem;var g=c.getModel('itemStyle').getItemStyle();var l=a.getCellWidth();var k=a.getCellHeight();for(var b=e.start.time;b<=e.end.time;b=a.getNextNDay(b,1).time){var f=a.dataToRect([b],!1).tl;var j=new h({shape:{x:f[0],y:f[1],width:l,height:k},cursor:'default',style:g});i.add(j)}},_renderLines:function(g,b,h,i){var a=this;var c=g.coordinateSystem;var f=g.getModel('splitLine.lineStyle').getLineStyle();var k=g.get('splitLine.show');var l=f.lineWidth;this._tlpoints=[];this._blpoints=[];this._firstDayOfMonth=[];this._firstDayPoints=[];var e=b.start;for(var m=0;e.time<=b.end.time;m++){addPoints(e.formatedDate);if(m===0){e=c.getDateInfo(b.start.y+'-'+b.start.m)}var j=e.date;j.setMonth(j.getMonth()+1);e=c.getDateInfo(j)}addPoints(c.getNextNDay(b.end.time,1).formatedDate);function addPoints(j){a._firstDayOfMonth.push(c.getDateInfo(j));a._firstDayPoints.push(c.dataToRect([j],!1).tl);var e=a._getLinePointsOfOneWeek(g,j,h);a._tlpoints.push(e[0]);a._blpoints.push(e[e.length-1]);k&&a._drawSplitline(e,f,i)}k&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,l,h),f,i);k&&this._drawSplitline(a._getEdgesPoints(a._blpoints,l,h),f,i)},_getEdgesPoints:function(c,e,f){var a=[c[0].slice(),c[c.length-1].slice()];var b=f==='horizontal'?0:1;a[0][b]=a[0][b]-e/2;a[1][b]=a[1][b]+e/2;return a},_drawSplitline:function(c,a,e){var b=new L({z2:20,shape:{points:c},style:a});e.add(b)},_getLinePointsOfOneWeek:function(h,c,i){var a=h.coordinateSystem;c=a.getDateInfo(c);var b=[];for(var f=0;f<7;f++){var e=a.getNextNDay(c.time,f);var g=a.dataToRect([e.time],!1);b[2*e.day]=g.tl;b[2*e.day+1]=g[i==='horizontal'?'bl':'tr']}return b},_formatterLabel:function(a,b){if(typeof a==='string'&&a){return formatTplSimple(a,b)}if(typeof a==='function'){return a(b)}return b.nameMap},_yearTextPositionControl:function(h,a,g,b,e){a=a.slice();var c=['center','bottom'];if(b==='bottom'){a[1]+=e;c=['center','top']}else {if(b==='left'){a[0]-=e}else {if(b==='right'){a[0]+=e;c=['center','top']}else {a[1]-=e}}}var f=0;if(b==='left'||b==='right'){f=Math.PI/2}return {rotation:f,position:a,style:{textAlign:c[0],textVerticalAlign:c[1]}}},_renderYearText:function(m,b,i,s){var c=m.getModel('yearLabel');if(!c.get('show')){return}var q=c.get('margin');var h=c.get('position');if(!h){h=i!=='horizontal'?'top':'left'}var a=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]];var k=(a[0][0]+a[1][0])/2;var l=(a[0][1]+a[1][1])/2;var g=i==='horizontal'?0:1;var o={top:[k,a[g][1]],bottom:[k,a[1-g][1]],left:[a[1-g][0],l],right:[a[g][0],l]};var j=b.start.y;if(+b.end.y>+b.start.y){j=j+'-'+b.end.y}var n=c.get('formatter');var r={start:b.start.y,end:b.end.y,nameMap:j};var p=this._formatterLabel(n,r);var f=new e({z2:30});setTextStyle(f.style,c,{text:p}),f.attr(this._yearTextPositionControl(f,o[h],i,h,q));s.add(f)},_monthTextPositionControl:function(i,f,j,g,h){var b='left';var a='top';var c=i[0];var e=i[1];if(j==='horizontal'){e=e+h;if(f){b='center'}if(g==='start'){a='bottom'}}else {c=c+h;if(f){a='middle'}if(g==='start'){b='right'}}return {x:c,y:e,textAlign:b,textVerticalAlign:a}},_renderMonthText:function(q,m,v){var a=q.getModel('monthLabel');if(!a.get('show')){return}var f=a.get('nameMap');var g=a.get('margin');var j=a.get('position');var u=a.get('align');var h=[this._tlpoints,this._blpoints];if(isString(f)){f=m0[f.toUpperCase()]||[]}var n=j==='start'?0:1;var i=m==='horizontal'?0:1;g=j==='start'?-g:g;var l=u==='center';for(var b=0;b<h[n].length-1;b++){var o=h[n][b].slice();var c=this._firstDayOfMonth[b];if(l){var p=this._firstDayPoints[b];o[i]=(p[i]+h[0][b+1][i])/2}var r=a.get('formatter');var w=f[+c.m-1];var t={yyyy:c.y,yy:(c.y+'').slice(2),MM:c.m,M:+c.m,nameMap:w};var s=this._formatterLabel(r,t);var k=new e({z2:30});extend(setTextStyle(k.style,a,{text:s}),this._monthTextPositionControl(o,l,m,j,g));v.add(k)}},_weekTextPositionControl:function(i,k,j,f,e){var h='center';var g='middle';var b=i[0];var c=i[1];var a=j==='start';if(k==='horizontal'){b=b+f+(a?1:-1)*e[0]/2;h=a?'right':'left'}else {c=c+f+(a?1:-1)*e[1]/2;g=a?'bottom':'top'}return {x:b,y:c,textAlign:h,textVerticalAlign:g}},_renderWeekText:function(i,g,l,q){var b=i.getModel('dayLabel');if(!b.get('show')){return}var a=i.coordinateSystem;var o=b.get('position');var h=b.get('nameMap');var c=b.get('margin');var p=a.getFirstDayOfWeek();if(isString(h)){h=nv[h.toUpperCase()]||[]}var m=a.getNextNDay(g.end.time,7-g.lweek).time;var j=[a.getCellWidth(),a.getCellHeight()];c=parsePercent$1(c,j[l==='horizontal'?0:1]);if(o==='start'){m=a.getNextNDay(g.start.time,-(7+g.fweek)).time;c=-c}for(var f=0;f<7;f++){var s=a.getNextNDay(m,f);var r=a.dataToRect([s.time],!1).center;var n=f;n=Math.abs((f+p)%7);var k=new e({z2:30});extend(setTextStyle(k.style,b,{text:h[n]}),this._weekTextPositionControl(r,l,o,c,j));q.add(k)}}});var f9={path:null,compoundPath:null,group:b,image:ZImage,text:e};registerPreprocessor(function(b){var a=b.graphic;if(isArray(a)){if(!a[0]||!a[0].elements){b.graphic=[{elements:a}]}else {b.graphic=[b.graphic[0]]}}else {if(a&&!a.elements){b.graphic=[{elements:[a]}]}}});var lY=extendComponentModel({type:'graphic',defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(b){var a=this.option.elements;this.option.elements=null;lY.superApply(this,'mergeOption',arguments);this.option.elements=a},optionUpdated:function(j,h){var e=this.option;var k=(h?e:j).elements;var b=e.elements=h?[]:e.elements;var f=[];this._flatten(k,f);var g=mappingToExists(b,f);makeIdAndName(g);var i=this._elOptionsToUpdate=[];each$1(g,function(e,f){var c=e.option;if(a){assert$1(isObject$1(c)||e.exist,'Empty graphic option definition')}if(!c){return}i.push(c);setKeyInfoToNewElOption(e,c);mergeNewElOptionToExist(b,f,c);setLayoutInfoToExist(b[f],c)},this);for(var c=b.length-1;c>=0;c--){if(b[c]==null){b.splice(c,1)}else {delete b[c].$action}}},_flatten:function(c,b,a){each$1(c,function(e){if(!e){return}if(a){e.parentOption=a}b.push(e);var f=e.children;if(e.type==='group'&&f){this._flatten(f,b,e)}delete e.children},this)},useElOptionsToUpdate:function(){var a=this._elOptionsToUpdate;this._elOptionsToUpdate=null;return a}});extendComponentView({type:'graphic',init:function(a,b){this._elMap=createHashMap();this._lastGraphicModel},render:function(a,c,b){if(a!==this._lastGraphicModel){this._clear()}this._lastGraphicModel=a;this._updateElements(a);this._relocate(a,b)},_updateElements:function(e){var c=e.useElOptionsToUpdate();if(!c){return}var b=this._elMap;var f=this.group;each$1(c,function(g){var i=g.$action;var k=g.id;var h=b.get(k);var n=g.parentId;var m=n!=null?b.get(n):f;var c=g.style;if(g.type==='text'&&c){if(g.hv&&g.hv[1]){c.textVerticalAlign=c.textBaseline=null}!c.hasOwnProperty('textFill')&&c.fill&&(c.textFill=c.fill);!c.hasOwnProperty('textStroke')&&c.stroke&&(c.textStroke=c.stroke)}var l=getCleanedElOption(g);if(a){h&&assert$1(m===h.parent,'Changing parent is not supported.')}if(!i||i==='merge'){h?h.attr(l):createEl$1(k,m,l,b)}else {if(i==='replace'){removeEl(h,b);createEl$1(k,m,l,b)}else {if(i==='remove'){removeEl(h,b)}}}var j=b.get(k);if(j){j.__ecGraphicWidthOption=g.width;j.__ecGraphicHeightOption=g.height;setEventData(j,e,g)}})},_relocate:function(n,l){var f=n.option.elements;var i=this.group;var k=this._elMap;var j=l.getWidth();var h=l.getHeight();for(var c=0;c<f.length;c++){var e=f[c];var a=k.get(e.id);if(!a||!a.isGroup){continue}var b=a.parent;var g=b===i;a.__ecGraphicWidth=parsePercent$1(a.__ecGraphicWidthOption,g?j:b.__ecGraphicWidth)||0;a.__ecGraphicHeight=parsePercent$1(a.__ecGraphicHeightOption,g?h:b.__ecGraphicHeight)||0}for(var c=f.length-1;c>=0;c--){var e=f[c];var a=k.get(e.id);if(!a){continue}var b=a.parent;var m=b===i?{width:j,height:h}:{width:b.__ecGraphicWidth,height:b.__ecGraphicHeight};positionElement(a,e,m,null,{hv:e.hv,boundingMode:e.bounding})}},_clear:function(){var a=this._elMap;a.each(function(b){removeEl(b,a)});this._elMap=createHashMap()},dispose:function(){this._clear()}});function createEl$1(g,h,e,i){var b=e.type;if(a){assert$1(b,'graphic type MUST be set')}var f=f9.hasOwnProperty(b)?f9[b]:getShapeClass(b);if(a){assert$1(f,'graphic type can not be found')}var c=new f(e);h.add(c);i.set(g,c);c.__ecGraphicId=g}function removeEl(a,c){var b=a&&a.parent;if(b){a.type==='group'&&a.traverse(function(b){removeEl(b,c)});c.removeKey(a.__ecGraphicId);b.remove(a)}}function getCleanedElOption(a){a=extend({},a);each$1(['id','parentId','$action','hv','bounding'].concat(gX),function(b){delete a[b]});return a}function isSetLoc(b,c){var a;each$1(c,function(e){b[e]!=null&&b[e]!=='auto'&&(a=!0)});return a}function setKeyInfoToNewElOption(e,a){var b=e.exist;a.id=e.keyInfo.id;!a.type&&b&&(a.type=b.type);if(a.parentId==null){var c=a.parentOption;if(c){a.parentId=c.id}else {if(b){a.parentId=b.parentId}}}a.parentOption=null}function mergeNewElOptionToExist(f,g,e){var c=extend({},e);var b=f[g];var h=e.$action||'merge';if(h==='merge'){if(b){if(a){var i=e.type;assert$1(!i||b.type===i,'Please set $action: "replace" to change `type`')}merge(b,c,!0);mergeLayoutParam(b,c,{ignoreSize:!0});copyLayoutParams(e,b)}else {f[g]=c}}else {if(h==='replace'){f[g]=c}else {if(h==='remove'){b&&(f[g]=null)}}}}function setLayoutInfoToExist(a,b){if(!a){return}a.hv=b.hv=[isSetLoc(b,['left','right']),isSetLoc(b,['top','bottom'])];if(a.type==='group'){a.width==null&&(a.width=b.width=0);a.height==null&&(a.height=b.height=0)}}function setEventData(a,c,e){var b=a.eventData;if(!a.silent&&!a.ignore&&!b){b=a.eventData={componentType:'graphic',componentIndex:c.componentIndex,name:a.name}}if(b){b.info=a.info}}var is={};function register$1(b,a){is[b]=a}function get$1(a){return is[a]}var l2=extendComponentModel({type:'toolbox',layoutMode:{type:'box',ignoreSize:!0},optionUpdated:function(){l2.superApply(this,'optionUpdated',arguments);each$1(this.option.feature,function(c,b){var a=get$1(b);a&&merge(c,a.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:'horizontal',left:'right',top:'top',backgroundColor:'transparent',borderColor:'#ccc',borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:'#666',color:'none'},emphasis:{iconStyle:{borderColor:'#3E98C5'}},tooltip:{show:!1}}});function layout$3(f,a,h){var b=a.getBoxLayoutParams();var e=a.get('padding');var c={width:h.getWidth(),height:h.getHeight()};var g=getLayoutRect(b,c,e);bf(a.get('orient'),f,a.get('itemGap'),g.width,g.height);positionElement(f,b,c,e)}function makeBackground(b,c){var a=aR(c.get('padding'));var e=c.getItemStyle(['color','opacity']);e.fill=c.get('backgroundColor');var b=new h({shape:{x:b.x-a[3],y:b.y-a[0],width:b.width+a[1]+a[3],height:b.height+a[0]+a[2],r:c.get('borderRadius')},style:e,silent:!0,z2:-1});return b}extendComponentView({type:'toolbox',render:function(a,f,b,j){var c=this.group;c.removeAll();if(!a.get('show')){return}var e=+a.get('itemSize');var h=a.get('feature')||{};var i=this._features||(this._features={});var g=[];each$1(h,function(e,c){g.push(c)});(new DataDiffer(this._featureNames||[],g)).add(processFeature).update(processFeature).remove(curry(processFeature,null)).execute();this._featureNames=g;function processFeature(o,p){var k=g[o];var l=g[p];var n=h[k];var e=new Model(n,a,a.ecModel);var c;if(k&&!l){if(isUserFeatureName(k)){c={model:e,onclick:e.option.onclick,featureName:k}}else {var m=get$1(k);if(!m){return}c=new m(e,f,b)}i[k]=c}else {c=i[l];if(!c){return}c.model=e;c.ecModel=f;c.api=b}if(!k&&l){c.dispose&&c.dispose(f,b);return}if(!e.get('show')||c.unusable){c.remove&&c.remove(f,b);return}createIconPaths(e,c,k);e.setIconStatus=function(c,h){var e=this.option;var g=this.iconPaths;e.iconStatus=e.iconStatus||{};e.iconStatus[c]=h;g[c]&&g[c].trigger(h)};if(c.render){c.render(e,f,b,j)}}function createIconPaths(i,l,m){var n=i.getModel('iconStyle');var g=i.getModel('emphasis.iconStyle');var k=l.getIcons?l.getIcons():i.get('icon');var h=i.get('title')||{};if(typeof k==='string'){var q=k;var p=h;k={};h={};k[m]=q;h[m]=p}var o=i.iconPaths={};each$1(k,function(r,p){var k=createIcon(r,{},{x:-e/2,y:-e/2,width:e,height:e});k.setStyle(n.getItemStyle());k.hoverStyle=g.getItemStyle();k.setStyle({text:h[p],textAlign:g.get('textAlign'),textBorderRadius:g.get('textBorderRadius'),textPadding:g.get('textPadding'),textFill:null});var q=a.getModel('tooltip');if(q&&q.get('show')){k.attr('tooltip',extend({content:h[p],formatter:q.get('formatter',!0)||function(){return h[p]},formatterParams:{componentType:'toolbox',name:p,title:h[p],$vars:['name','title']},position:q.get('position',!0)||'bottom'},q.option))}setHoverStyle(k);if(a.get('showTitle')){k.__title=h[p];k.on('mouseover',function(){var c=g.getItemStyle();var e=a.get('orient')==='vertical'?a.get('right')==null?'right':'left':a.get('bottom')==null?'bottom':'top';k.setStyle({textFill:g.get('textFill')||c.fill||c.stroke||'#000',textBackgroundColor:g.get('textBackgroundColor'),textPosition:g.get('textPosition')||e})}).on('mouseout',function(){k.setStyle({textFill:null,textBackgroundColor:null})})}k.trigger(i.get('iconStatus.'+p)||'normal');c.add(k);k.on('click',bind(l.onclick,l,f,b,p));o[p]=k})}layout$3(c,a,b);c.add(makeBackground(c.getBoundingRect(),a));c.eachChild(function(h){var l=h.__title;var g=h.hoverStyle;if(g&&l){var i=getBoundingRect(l,makeFont(g));var n=h.position[0]+c.position[0];var o=h.position[1]+c.position[1]+e;var k=!1;if(o+i.height>b.getHeight()){g.textPosition='top';k=!0}var m=k?-5-i.height:e+8;if(n+i.width/2>b.getWidth()){g.textPosition=['100%',m];g.textAlign='right'}else {if(n-i.width/2<0){g.textPosition=[0,m];g.textAlign='left'}}}})},updateView:function(e,a,c,b){each$1(this._features,function(f){f.updateView&&f.updateView(f.model,a,c,b)})},remove:function(a,b){each$1(this._features,function(c){c.remove&&c.remove(a,b)});this.group.removeAll()},dispose:function(a,b){each$1(this._features,function(c){c.dispose&&c.dispose(a,b)})}});function isUserFeatureName(a){return a.indexOf('my')===0}var g1=aq.toolbox.saveAsImage;function SaveAsImage(a){this.model=a}SaveAsImage.defaultOption={show:!0,icon:'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',title:g1.title,type:'png',connectedBackgroundColor:'#fff',name:'',excludeComponents:['toolbox'],pixelRatio:1,lang:g1.lang.slice()};SaveAsImage.prototype.unusable=!f.canvasSupported;var oe=SaveAsImage.prototype;oe.onclick=function(h,o){var a=this.model;var j=a.get('name')||h.get('title.0.text')||'echarts';var e=a.get('type',!0)||'png';var g=o.getConnectedDataURL({type:e,backgroundColor:a.get('backgroundColor',!0)||h.get('backgroundColor')||'#fff',connectedBackgroundColor:a.get('connectedBackgroundColor'),excludeComponents:a.get('excludeComponents'),pixelRatio:a.get('pixelRatio')});if(typeof MouseEvent==='function'&&!f.browser.ie&&!f.browser.edge){var b=document.createElement('a');b.download=j+'.'+e;b.target='_blank';b.href=g;var p=new MouseEvent('click',{view:window,bubbles:!0,cancelable:!1});b.dispatchEvent(p)}else {if(window.navigator.msSaveOrOpenBlob){var l=atob(g.split(',')[1]);var c=l.length;var k=new Uint8Array(c);while(c--){k[c]=l.charCodeAt(c)}var m=new Blob([k]);window.navigator.msSaveOrOpenBlob(m,j+'.'+e)}else {var i=a.get('lang');var n=''+'<body style="margin:0;">'+'<img src="'+g+'" style="max-width:100%;" title="'+(i&&i[0]||'')+'" />'+'</body>';var q=window.open();q.document.write(n)}}};register$1('saveAsImage',SaveAsImage);var lQ=aq.toolbox.magicType;function MagicType(a){this.model=a}MagicType.defaultOption={show:!0,type:[],icon:{line:'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',bar:'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',stack:'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z',tiled:'M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z'},title:clone(lQ.title),option:{},seriesIndex:{}};var iP=MagicType.prototype;iP.getIcons=function(){var c=this.model;var a=c.get('icon');var b={};each$1(c.get('type'),function(c){if(a[c]){b[c]=a[c]}});return b};var gA={'line':function(b,c,a,e){if(b==='bar'){return merge({id:c,type:'line',data:a.get('data'),stack:a.get('stack'),markPoint:a.get('markPoint'),markLine:a.get('markLine')},e.get('option.line')||{},!0)}},'bar':function(b,c,a,e){if(b==='line'){return merge({id:c,type:'bar',data:a.get('data'),stack:a.get('stack'),markPoint:a.get('markPoint'),markLine:a.get('markLine')},e.get('option.bar')||{},!0)}},'stack':function(a,b,e,c){if(a==='line'||a==='bar'){return merge({id:b,stack:'__ec_magicType_stack__'},c.get('option.stack')||{},!0)}},'tiled':function(a,b,e,c){if(a==='line'||a==='bar'){return merge({id:b,stack:''},c.get('option.tiled')||{},!0)}}};var nh=[['line','bar'],['stack','tiled']];iP.onclick=function(f,h,a){var c=this.model;var e=c.get('seriesIndex.'+a);if(!gA[a]){return}var b={series:[]};var g=function(e){var n=e.subType;var p=e.id;var j=gA[a](n,p,e,c);if(j){defaults(j,e.option);b.series.push(j)}var k=e.coordinateSystem;if(k&&k.type==='cartesian2d'&&(a==='line'||a==='bar')){var l=k.getAxesByScale('ordinal')[0];if(l){var q=l.dim;var g=q+'Axis';var o=f.queryComponents({mainType:g,index:e.get(name+'Index'),id:e.get(name+'Id')})[0];var i=o.componentIndex;b[g]=b[g]||[];for(var m=0;m<=i;m++){b[g][i]=b[g][i]||{}}b[g][i].boundaryGap=a==='bar'}}};each$1(nh,function(b){if(indexOf(b,a)>=0){each$1(b,function(e){c.setIconStatus(e,'normal')})}});c.setIconStatus(a,'emphasis');f.eachComponent({mainType:'series',query:e==null?null:{seriesIndex:e}},g);h.dispatchAction({type:'changeMagicType',currentType:a,newOption:b})};registerAction({type:'changeMagicType',event:'magicTypeChanged',update:'prepareAndUpdate'},function(b,a){a.mergeOption(b.newOption)});register$1('magicType',MagicType);var hC=aq.toolbox.dataView;var cS=(new Array(60)).join('-');var bt='\t';function groupSeries(e){var a={};var b=[];var c=[];e.eachRawSeries(function(h){var g=h.coordinateSystem;if(g&&(g.type==='cartesian2d'||g.type==='polar')){var f=g.getBaseAxis();if(f.type==='category'){var i=f.dim+'_'+f.index;if(!a[i]){a[i]={categoryAxis:f,valueAxis:g.getOtherAxis(f),series:[]};c.push({axisDim:f.dim,axisIndex:f.index})}a[i].series.push(h)}else {b.push(h)}}else {b.push(h)}});return {seriesGroupByCategoryAxis:a,other:b,meta:c}}function assembleSeriesWithCategoryAxis(b){var a=[];each$1(b,function(e,n){var j=e.categoryAxis;var l=e.valueAxis;var k=l.dim;var m=[' '].concat(map(e.series,function(a){return a.name}));var c=[j.model.getCategories()];each$1(e.series,function(a){c.push(a.getRawData().mapArray(k,function(c){return c}))});var i=[m.join(bt)];for(var f=0;f<c[0].length;f++){var h=[];for(var g=0;g<c.length;g++){h.push(c[g][f])}i.push(h.join(bt))}a.push(i.join('\n'))});return a.join('\n\n'+cS+'\n\n')}function assembleOtherSeries(a){return map(a,function(c){var b=c.getRawData();var e=[c.name];var f=[];b.each(b.dimensions,function(){var h=arguments.length;var j=arguments[h-1];var i=b.getName(j);for(var g=0;g<h-1;g++){f[g]=arguments[g]}e.push((i?i+bt:'')+f.join(bt))});return e.join('\n')}).join('\n\n'+cS+'\n\n')}function getContentFromModel(b){var a=groupSeries(b);return {value:filter([assembleSeriesWithCategoryAxis(a.seriesGroupByCategoryAxis),assembleOtherSeries(a.other)],function(a){return a.replace(/[\n\t\s]/g,'')}).join('\n\n'+cS+'\n\n'),meta:a.meta}}function trim$1(a){return a.replace(/^\s\s*/,'').replace(/\s\s*$/,'')}function isTSVFormat(a){var b=a.slice(0,a.indexOf('\n'));if(b.indexOf(bt)>=0){return !0}}var eA=new RegExp('['+bt+']+','g');function parseTSVContents(i){var c=i.split(/\n+/g);var h=trim$1(c.shift()).split(eA);var g=[];var e=map(h,function(a){return {name:a,data:[]}});for(var b=0;b<c.length;b++){var f=trim$1(c[b]).split(eA);g.push(f.shift());for(var a=0;a<f.length;a++){e[a]&&(e[a].data[b]=f[a])}}return {series:e,categories:g}}function parseListContents(k){var f=k.split(/\n+/g);var j=trim$1(f.shift());var e=[];for(var a=0;a<f.length;a++){var b=trim$1(f[a]).split(eA);var i='';var c;var h=!1;if(isNaN(b[0])){h=!0;i=b[0];b=b.slice(1);e[a]={name:i,value:[]};c=e[a].value}else {c=e[a]=[]}for(var g=0;g<b.length;g++){c.push(+b[g])}if(c.length===1){h?e[a].value=c[0]:e[a]=c[0]}}return {name:j,data:e}}function parseContents(e,b){var c=e.split(new RegExp('\n*'+cS+'\n*','g'));var a={series:[]};each$1(c,function(h,i){if(isTSVFormat(h)){var c=parseTSVContents(h);var f=b[i];var g=f.axisDim+'Axis';if(f){a[g]=a[g]||[];a[g][f.axisIndex]={data:c.categories};a.series=a.series.concat(c.series)}}else {var c=parseListContents(h);a.series.push(c)}});return a}function DataView(a){this._dom=null;this.model=a}DataView.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',title:clone(hC.title),lang:clone(hC.lang),backgroundColor:'#fff',textColor:'#000',textareaColor:'#fff',textareaBorderColor:'#333',buttonColor:'#c23531',buttonTextColor:'#fff'};DataView.prototype.onclick=function(s,m){var j=m.getDom();var a=this.model;if(this._dom){j.removeChild(this._dom)}var c=document.createElement('div');c.style.cssText='position:absolute;left:5px;top:5px;bottom:5px;right:5px;';c.style.backgroundColor=a.get('backgroundColor')||'#fff';var l=document.createElement('h4');var n=a.get('lang')||[];l.innerHTML=n[0]||a.get('title');l.style.cssText='margin: 10px 20px;';l.style.color=a.get('textColor');var e=document.createElement('div');var b=document.createElement('textarea');e.style.cssText='display:block;width:100%;overflow:auto;';var p=a.get('optionToContent');var o=a.get('contentToOption');var q=getContentFromModel(s);if(typeof p==='function'){var k=p(m.getOption());if(typeof k==='string'){e.innerHTML=k}else {if(isDom(k)){e.appendChild(k)}}}else {e.appendChild(b);b.readOnly=a.get('readOnly');b.style.cssText='width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';b.style.color=a.get('textColor');b.style.borderColor=a.get('textareaBorderColor');b.style.backgroundColor=a.get('textareaColor');b.value=q.value}var r=q.meta;var f=document.createElement('div');f.style.cssText='position:absolute;bottom:0;left:0;right:0;';var h='float:right;margin-right:20px;border:none;'+'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';var i=document.createElement('div');var g=document.createElement('div');h+=';background-color:'+a.get('buttonColor');h+=';color:'+a.get('buttonTextColor');var t=this;function close(){j.removeChild(c);t._dom=null}addEventListener(i,'click',close);addEventListener(g,'click',function(){var a;try{if(typeof o==='function'){a=o(e,m.getOption())}else {a=parseContents(b.value,r)}}catch(o3){close();throw new Error('Data view format error '+o3)}if(a){m.dispatchAction({type:'changeDataView',newOption:a})}close()});i.innerHTML=n[1];g.innerHTML=n[2];g.style.cssText=h;i.style.cssText=h;!a.get('readOnly')&&f.appendChild(g);f.appendChild(i);c.appendChild(l);c.appendChild(e);c.appendChild(f);e.style.height=j.clientHeight-80+'px';j.appendChild(c);this._dom=c};DataView.prototype.remove=function(b,a){this._dom&&a.getDom().removeChild(this._dom)};DataView.prototype.dispose=function(a,b){this.remove(a,b)};function tryMergeDataOption(b,a){return map(b,function(c,f){var e=a&&a[f];if(isObject$1(e)&&!isArray(e)){if(isObject$1(c)&&!isArray(c)){c=c.value}return defaults({value:c},e)}else {return c}})}register$1('dataView',DataView);registerAction({type:'changeDataView',event:'dataViewChanged',update:'prepareAndUpdate'},function(c,b){var a=[];each$1(c.newOption.series,function(e){var f=b.getSeriesByName(e.name)[0];if(!f){a.push(extend({type:'scatter'},e))}else {var g=f.get('data');a.push({name:e.name,data:tryMergeDataOption(e.data,g)})}});b.mergeOption(defaults({series:a},c.newOption))});var aG=each$1;var dh=indexOf;var ds=curry;var eu=['dataToPoint','pointToData'];var jw=['grid','xAxis','yAxis','geo','graph','polar','radiusAxis','angleAxis','bmap'];function BrushTargetManager(f,e,a){var b=this._targetInfoList=[];var g={};var c=parseFinder$1(e,f);aG(ko,function(h,i){if(!a||!a.include||dh(a.include,i)>=0){h(c,b,g)}})}var bH=BrushTargetManager.prototype;bH.setOutputRanges=function(b,a){this.matchOutputRanges(b,a,function(c,e,g){(c.coordRanges||(c.coordRanges=[])).push(e);if(!c.coordRange){c.coordRange=e;var f=eQ[c.brushType](0,g,e);c.__rangeOffset={offset:hr[c.brushType](f.values,c.range,[1,1]),xyMinMax:f.xyMinMax}}})};bH.matchOutputRanges=function(b,a,c){aG(b,function(e){var f=this.findTargetInfo(e,a);if(f&&f!==!0){each$1(f.coordSyses,function(f){var g=eQ[e.brushType](1,f,e.range);c(e,g.values,f,a)})}},this)};bH.setInputRanges=function(c,b){aG(c,function(e){var f=this.findTargetInfo(e,b);if(a){assert$1(!f||f===!0||e.coordRange,'coordRange must be specified when coord index specified.');assert$1(!f||f!==!0||e.range,'range must be specified in global brush.')}e.range=e.range||[];if(f&&f!==!0){e.panelId=f.panelId;var h=eQ[e.brushType](0,f.coordSys,e.coordRange);var g=e.__rangeOffset;e.range=g?hr[e.brushType](h.values,g.offset,getScales(h.xyMinMax,g.xyMinMax)):h.values}},this)};bH.makePanelOpts=function(b,a){return map(this._targetInfoList,function(c){var e=c.getPanelRect();return {panelId:c.panelId,defaultBrushType:a&&a(c),clipPath:makeRectPanelClipPath(e),isTargetByCursor:makeRectIsTargetByCursor(e,b,c.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(e)}})};bH.controlSeries=function(e,b,c){var a=this.findTargetInfo(e,c);return a===!0||a&&dh(a.coordSyses,b.coordinateSystem)>=0};bH.findTargetInfo=function(f,h){var c=this._targetInfoList;var g=parseFinder$1(h,f);for(var a=0;a<c.length;a++){var b=c[a];var e=f.panelId;if(e){if(b.panelId===e){return b}}else {for(var a=0;a<gC.length;a++){if(gC[a](g,b)){return b}}}}return !0};function formatMinMax(a){a[0]>a[1]&&a.reverse();return a}function parseFinder$1(a,b){return parseFinder(a,b,{includeMainTypes:jw})}var ko={grid:function(e,i){var b=e.xAxisModels;var c=e.yAxisModels;var h=e.gridModels;var a=createHashMap();var f={};var g={};if(!b&&!c&&!h){return}aG(b,function(c){var b=c.axis.grid.model;a.set(b.id,b);f[b.id]=!0});aG(c,function(c){var b=c.axis.grid.model;a.set(b.id,b);g[b.id]=!0});aG(h,function(b){a.set(b.id,b);f[b.id]=!0;g[b.id]=!0});a.each(function(a){var j=a.coordinateSystem;var h=[];aG(j.getCartesians(),function(f,g){if(dh(b,f.getAxis('x').model)>=0||dh(c,f.getAxis('y').model)>=0){h.push(f)}});i.push({panelId:'grid--'+a.id,gridModel:a,coordSysModel:a,coordSys:h[0],coordSyses:h,getPanelRect:gR.grid,xAxisDeclared:f[a.id],yAxisDeclared:g[a.id]})})},geo:function(b,a){aG(b.geoModels,function(c){var e=c.coordinateSystem;a.push({panelId:'geo--'+c.id,geoModel:c,coordSysModel:c,coordSys:e,coordSyses:[e],getPanelRect:gR.geo})})}};var gC=[function(b,f){var c=b.xAxisModel;var e=b.yAxisModel;var a=b.gridModel;!a&&c&&(a=c.axis.grid.model);!a&&e&&(a=e.axis.grid.model);return a&&a===f.gridModel},function(c,b){var a=c.geoModel;return a&&a===b.geoModel}];var gR={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var a=this.coordSys;var b=a.getBoundingRect().clone();b.applyTransform(getTransform(a));return b}};var eQ={lineX:ds(axisConvert,0),lineY:ds(axisConvert,1),rect:function(g,b,a){var e=b[eu[g]]([a[0][0],a[1][0]]);var c=b[eu[g]]([a[0][1],a[1][1]]);var f=[formatMinMax([e[0],c[0]]),formatMinMax([e[1],c[1]])];return {values:f,xyMinMax:f}},polygon:function(f,c,b){var a=[[Infinity,-Infinity],[Infinity,-Infinity]];var e=map(b,function(g){var e=c[eu[f]](g);a[0][0]=Math.min(a[0][0],e[0]);a[1][0]=Math.min(a[1][0],e[1]);a[0][1]=Math.max(a[0][1],e[0]);a[1][1]=Math.max(a[1][1],e[1]);return e});return {values:e,xyMinMax:a}}};function axisConvert(c,i,g,f){if(a){assert$1(g.type==='cartesian2d','lineX/lineY brush is available only in cartesian2d.')}var b=g.getAxis(['x','y'][c]);var h=formatMinMax(map([0,1],function(a){return i?b.coordToData(b.toLocalCoord(f[a])):b.toGlobalCoord(b.dataToCoord(f[a]))}));var e=[];e[c]=h;e[1-c]=[NaN,NaN];return {values:h,xyMinMax:e}}var hr={lineX:ds(axisDiffProcessor,0),lineY:ds(axisDiffProcessor,1),rect:function(b,c,a){return [[b[0][0]-a[0]*c[0][0],b[0][1]-a[0]*c[0][1]],[b[1][0]-a[1]*c[1][0],b[1][1]-a[1]*c[1][1]]]},polygon:function(c,b,a){return map(c,function(e,f){return [e[0]-a[0]*b[f][0],e[1]-a[1]*b[f][1]]})}};function axisDiffProcessor(a,c,e,b){return [c[0]-b[a]*e[0],c[1]-b[a]*e[1]]}function getScales(f,e){var c=getSize(f);var b=getSize(e);var a=[c[0]/b[0],c[1]/b[1]];isNaN(a[0])&&(a[0]=1);isNaN(a[1])&&(a[1]=1);return a}function getSize(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var iE=each$1;var fI='\x00_ec_hist_store';function push(c,b){var a=giveStore(c);iE(b,function(j,e){var f=a.length-1;for(;f>=0;f--){var i=a[f];if(i[e]){break}}if(f<0){var g=c.queryComponents({mainType:'dataZoom',subType:'select',id:e})[0];if(g){var h=g.getPercentRange();a[0][e]={dataZoomId:e,start:h[0],end:h[1]}}}});a.push(b)}function pop(c){var a=giveStore(c);var e=a[a.length-1];a.length>1&&a.pop();var b={};iE(e,function(e,g){for(var f=a.length-1;f>=0;f--){var e=a[f][g];if(e){b[g]=e;break}}});return b}function clear$1(a){a[fI]=null}function count(a){return giveStore(a).length}function giveStore(b){var a=b[fI];if(!a){a=b[fI]=[{}]}return a}g.registerSubTypeDefaulter('dataZoom',function(){return 'slider'});var nl=['x','y','z','radius','angle','single'];var oi=['cartesian2d','polar','singleAxis'];function isCoordSupported(a){return indexOf(oi,a)>=0}function createNameEach(b,a){b=b.slice();var e=map(b,capitalFirst);a=(a||[]).slice();var c=map(a,capitalFirst);return function(f,g){each$1(b,function(j,k){var i={name:j,capital:e[k]};for(var h=0;h<a.length;h++){i[a[h]]=j+c[h]}f.call(g,i)})}}var hs=createNameEach(nl,['axisIndex','axis','index','id']);function createLinkedNodesFinder(c,a,b){return function(g){var e={nodes:[],records:{}};a(function(f){e.records[f.name]={}});if(!g){return e}absorb(g,e);var f;do{f=!1;c(processSingleNode)}while(f);function processSingleNode(h){if(!isNodeAbsorded(h,e)&&isLinked(h,e)){absorb(h,e);f=!0}}return e};function isNodeAbsorded(f,e){return indexOf(e.nodes,f)>=0}function isLinked(g,f){var e=!1;a(function(h){each$1(b(g,h)||[],function(i){f.records[h.name][i]&&(e=!0)})});return e}function absorb(f,e){e.nodes.push(f);a(function(g){each$1(b(f,g)||[],function(h){e.records[g.name][h]=!0})})}}var ba=each$1;var i4=asc;var e5=function(c,b,a,e){this._dimName=c;this._axisIndex=b;this._valueWindow;this._percentWindow;this._dataExtent;this._minMaxSpan;this.ecModel=e;this._dataZoomModel=a};e5.prototype={constructor:e5,hostedBy:function(a){return this._dataZoomModel===a},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var a=[];var b=this.ecModel;b.eachSeries(function(c){if(isCoordSupported(c.get('coordinateSystem'))){var e=this._dimName;var f=b.queryComponents({mainType:e+'Axis',index:c.get(e+'AxisIndex'),id:c.get(e+'AxisId')})[0];if(this._axisIndex===(f&&f.componentIndex)){a.push(c)}}},this);return a},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+'Axis',this._axisIndex)},getOtherAxisModel:function(){var b=this._dimName;var h=this.ecModel;var g=this.getAxisModel();var f=b==='x'||b==='y';var c;var a;if(f){a='gridIndex';c=b==='x'?'y':'x'}else {a='polarIndex';c=b==='angle'?'radius':'angle'}var e;h.eachComponent(c+'Axis',function(b){if((b.get(a)||0)===(g.get(a)||0)){e=b}});return e},getMinMaxSpan:function(){return clone(this._minMaxSpan)},calculateDataWindow:function(i){var e=this._dataExtent;var k=this.getAxisModel();var f=k.axis.scale;var j=this._dataZoomModel.getRangePropMode();var a=[0,100];var b=[];var c=[];var g;ba(['start','end'],function(m,l){var k=i[m];var h=i[m+'Value'];if(j[l]==='percent'){k==null&&(k=a[l]);h=f.parse(linearMap(k,a,e))}else {g=!0;h=h==null?e[l]:f.parse(h);k=linearMap(h,e,a)}c[l]=h;b[l]=k});i4(c);i4(b);var h=this._minMaxSpan;g?restrictSet(c,b,e,a,!1):restrictSet(b,c,a,e,!0);function restrictSet(e,b,c,k,g){var j=g?'Span':'ValueSpan';a2(0,e,c,'all',h['min'+j],h['max'+j]);for(var a=0;a<2;a++){b[a]=linearMap(e[a],c,k,!0);g&&(b[a]=f.parse(b[a]))}}return {valueWindow:c,percentWindow:b}},reset:function(a){if(a!==this._dataZoomModel){return}var c=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,c);setMinMaxSpan(this);var b=this.calculateDataWindow(a.settledOption);this._valueWindow=b.valueWindow;this._percentWindow=b.percentWindow;setAxisModel(this)},restore:function(a){if(a!==this._dataZoomModel){return}this._valueWindow=this._percentWindow=null;setAxisModel(this,!0)},filterData:function(c,g){if(c!==this._dataZoomModel){return}var f=this._dimName;var e=this.getTargetSeriesModels();var b=c.get('filterMode');var a=this._valueWindow;if(b==='none'){return}ba(e,function(i){var e=i.getData();var h=e.mapDimension(f,!0);if(!h.length){return}if(b==='weakFilter'){e.filterSelf(function(p){var o;var n;var m;for(var f=0;f<h.length;f++){var b=e.get(h[f],p);var j=!isNaN(b);var l=b<a[0];var k=b>a[1];if(j&&!l&&!k){return !0}j&&(m=!0);l&&(o=!0);k&&(n=!0)}return m&&o&&n})}else {ba(h,function(h){if(b==='empty'){i.setData(e=e.map(h,function(a){return !isInWindow(a)?NaN:a}))}else {var f={};f[h]=a;e.selectRange(f)}})}ba(h,function(b){e.setApproximateExtent(a,b)})});function isInWindow(b){return b>=a[0]&&b<=a[1]}}};function calculateDataExtent(c,e,b){var a=[Infinity,-Infinity];ba(b,function(g){var f=g.getData();if(f){ba(f.mapDimension(e,!0),function(i){var h=f.getApproximateExtent(i);h[0]<a[0]&&(a[0]=h[0]);h[1]>a[1]&&(a[1]=h[1])})}});if(a[1]<a[0]){a=[NaN,NaN]}fixExtentByAxis(c,a);return a}function fixExtentByAxis(h,a){var b=h.getAxisModel();var e=b.getMin(!0);var f=b.get('type')==='category';var g=f&&b.getCategories().length;if(e!=null&&e!=='dataMin'&&typeof e!=='function'){a[0]=e}else {if(f){a[0]=g>0?0:NaN}}var c=b.getMax(!0);if(c!=null&&c!=='dataMax'&&typeof c!=='function'){a[1]=c}else {if(f){a[1]=g>0?g-1:NaN}}if(!b.get('scale',!0)){a[0]>0&&(a[0]=0);a[1]<0&&(a[1]=0)}return a}function setAxisModel(e,h){var g=e.getAxisModel();var b=e._percentWindow;var c=e._valueWindow;if(!b){return}var a=getPixelPrecision(c,[0,500]);a=Math.min(a,20);var f=h||b[0]===0&&b[1]===100;g.setRange(f?null:+c[0].toFixed(a),f?null:+c[1].toFixed(a))}function setMinMaxSpan(b){var e=b._minMaxSpan={};var c=b._dataZoomModel;var a=b._dataExtent;ba(['min','max'],function(h){var g=c.get(h+'Span');var f=c.get(h+'ValueSpan');f!=null&&(f=b.getAxisModel().axis.scale.parse(f));if(f!=null){g=linearMap(a[0]+f,a,[0,100],!0)}else {if(g!=null){f=linearMap(g,[0,100],a,!0)-a[0]}}e[h+'Span']=g;e[h+'ValueSpan']=f})}var a9=each$1;var a_=hs;var eF=extendComponentModel({type:'dataZoom',dependencies:['xAxis','yAxis','zAxis','radiusAxis','angleAxis','singleAxis','series'],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:'filter',throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(b,e,c){this._dataIntervalByAxis={};this._dataInfo={};this._axisProxies={};this.textStyleModel;this._autoThrottle=!0;this._rangePropMode=['percent','percent'];var a=retrieveRawOption(b);this.settledOption=a;this.mergeDefaultAndTheme(b,c);this.doInit(a)},mergeOption:function(b){var a=retrieveRawOption(b);merge(this.option,b,!0);merge(this.settledOption,a,!0);this.doInit(a)},doInit:function(a){var b=this.option;if(!f.canvasSupported){b.realtime=!1}this._setDefaultThrottle(a);updateRangeUse(this,a);var c=this.settledOption;a9([['start','startValue'],['end','endValue']],function(e,f){if(this._rangePropMode[f]==='value'){b[e[0]]=c[e[0]]=null}},this);this.textStyleModel=this.getModel('textStyle');this._resetTarget();this._giveAxisProxies()},_giveAxisProxies:function(){var a=this._axisProxies;this.eachTargetAxis(function(c,b,h,g){var e=this.dependentModels[c.axis][b];var f=e.__dzAxisProxy||(e.__dzAxisProxy=new e5(c.name,b,this,g));a[c.name+'_'+b]=f},this)},_resetTarget:function(){var a=this.option;var b=this._judgeAutoMode();a_(function(c){var b=c.axisIndex;a[b]=normalizeToArray(a[b])},this);if(b==='axisIndex'){this._autoSetAxisIndex()}else {if(b==='orient'){this._autoSetOrient()}}},_judgeAutoMode:function(){var b=this.option;var a=!1;a_(function(c){if(b[c.axisIndex]!=null){a=!0}},this);var c=b.orient;if(c==null&&a){return 'orient'}else {if(!a){if(c==null){b.orient='horizontal'}return 'axisIndex'}}},_autoSetAxisIndex:function(){var b=!0;var g=this.get('orient',!0);var c=this.option;var e=this.dependentModels;if(b){var f=g==='vertical'?'y':'x';if(e[f+'Axis'].length){c[f+'AxisIndex']=[0];b=!1}else {a9(e.singleAxis,function(a){if(b&&a.get('orient',!0)===g){c.singleAxisIndex=[a.componentIndex];b=!1}})}}if(b){a_(function(g){if(!b){return}var a=[];var f=this.dependentModels[g.axis];if(f.length&&!a.length){for(var e=0,h=f.length;e<h;e++){if(f[e].get('type')==='category'){a.push(e)}}}c[g.axisIndex]=a;if(a.length){b=!1}},this)}if(b){this.ecModel.eachSeries(function(b){if(this._isSeriesHasAllAxesTypeOf(b,'value')){a_(function(f){var g=c[f.axisIndex];var e=b.get(f.axisIndex);var i=b.get(f.axisId);var h=b.ecModel.queryComponents({mainType:f.axis,index:e,id:i})[0];if(a){if(!h){throw new Error(f.axis+' "'+retrieve(e,i,0)+'" not found')}}e=h.componentIndex;if(indexOf(g,e)<0){g.push(e)}})}},this)}},_autoSetOrient:function(){var a;this.eachTargetAxis(function(b){!a&&(a=b.name)},this);this.option.orient=a==='y'?'vertical':'horizontal'},_isSeriesHasAllAxesTypeOf:function(b,c){var a=!0;a_(function(f){var g=b.get(f.axisIndex);var e=this.dependentModels[f.axis][g];if(!e||e.get('type')!==c){a=!1}},this);return a},_setDefaultThrottle:function(b){if(b.hasOwnProperty('throttle')){this._autoThrottle=!1}if(this._autoThrottle){var a=this.ecModel.option;this.option.throttle=a.animation&&a.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var a;a_(function(b){if(a==null){var c=this.get(b.axisIndex);if(c.length){a=this.dependentModels[b.axis][c[0]]}}},this);return a},eachTargetAxis:function(a,b){var c=this.ecModel;a_(function(e){a9(this.get(e.axisIndex),function(f){a.call(b,e,f,this,c)},this)},this)},getAxisProxy:function(b,a){return this._axisProxies[b+'_'+a]},getAxisModel:function(c,b){var a=this.getAxisProxy(c,b);return a&&a.getAxisModel()},setRawRange:function(a){var c=this.option;var b=this.settledOption;a9([['start','startValue'],['end','endValue']],function(e){if(a[e[0]]!=null||a[e[1]]!=null){c[e[0]]=b[e[0]]=a[e[0]];c[e[1]]=b[e[1]]=a[e[1]]}},this);updateRangeUse(this,a)},setCalculatedRange:function(b){var a=this.option;a9(['start','startValue','end','endValue'],function(c){a[c]=b[c]})},getPercentRange:function(){var a=this.findRepresentativeAxisProxy();if(a){return a.getDataPercentWindow()}},getValueRange:function(a,b){if(a==null&&b==null){var c=this.findRepresentativeAxisProxy();if(c){return c.getDataValueWindow()}}else {return this.getAxisProxy(a,b).getDataValueWindow()}},findRepresentativeAxisProxy:function(c){if(c){return c.__dzAxisProxy}var a=this._axisProxies;for(var b in a){if(a.hasOwnProperty(b)&&a[b].hostedBy(this)){return a[b]}}for(var b in a){if(a.hasOwnProperty(b)&&!a[b].hostedBy(this)){return a[b]}}},getRangePropMode:function(){return this._rangePropMode.slice()}});function retrieveRawOption(a){var b={};a9(['start','end','startValue','endValue','throttle'],function(c){a.hasOwnProperty(c)&&(b[c]=a[c])});return b}function updateRangeUse(e,c){var a=e._rangePropMode;var b=e.get('rangeMode');a9([['start','startValue'],['end','endValue']],function(i,f){var g=c[i[0]]!=null;var h=c[i[1]]!=null;if(g&&!h){a[f]='percent'}else {if(!g&&h){a[f]='value'}else {if(b){a[f]=b[f]}else {if(g){a[f]='percent'}}}}})}var eM=W.extend({type:'dataZoom',render:function(a,b,c,e){this.dataZoomModel=a;this.ecModel=b;this.api=c},getTargetCoordInfo:function(){var b=this.dataZoomModel;var c=this.ecModel;var a={};b.eachTargetAxis(function(g,f){var e=c.getComponent(g.axis,f);if(e){var b=e.getCoordSysModel();b&&save(b,e,a[b.mainType]||(a[b.mainType]=[]),b.componentIndex)}},this);function save(e,g,a,f){var b;for(var c=0;c<a.length;c++){if(a[c].model===e){b=a[c];break}}if(!b){a.push(b={model:e,axisModels:[],coordIndex:f})}b.axisModels.push(g)}return a}});eF.extend({type:'dataZoom.select'});eM.extend({type:'dataZoom.select'});registerProcessor({getTargetSeries:function(b){var a=createHashMap();b.eachComponent('dataZoom',function(c){c.eachTargetAxis(function(h,f,e){var g=e.getAxisProxy(h.name,f);each$1(g.getTargetSeriesModels(),function(g){a.set(g.uid,g)})})});return a},modifyOutputEnd:!0,overallReset:function(a,b){a.eachComponent('dataZoom',function(c){c.eachTargetAxis(function(g,f,e){e.getAxisProxy(g.name,f).reset(e,b)});c.eachTargetAxis(function(g,f,e){e.getAxisProxy(g.name,f).filterData(e,b)})});a.eachComponent('dataZoom',function(c){var g=c.findRepresentativeAxisProxy();var e=g.getDataPercentWindow();var f=g.getDataValueWindow();c.setCalculatedRange({start:e[0],end:e[1],startValue:f[0],endValue:f[1]})})}});registerAction('dataZoom',function(a,c){var e=createLinkedNodesFinder(bind(c.eachComponent,c,'dataZoom'),hs,function(e,b){return e.get(b.axisIndex)});var b=[];c.eachComponent({mainType:'dataZoom',query:a},function(f,g){b.push.apply(b,e(f).nodes)});each$1(b,function(b,e){b.setRawRange({start:a.start,end:a.end,startValue:a.startValue,endValue:a.endValue})})});var l6=aq.toolbox.dataZoom;var iD=each$1;var kq='\x00_ec_\x00toolbox-dataZoom_';function DataZoom(c,b,a){(this._brushController=new BrushController(a.getZr())).on('brush',bind(this._onBrush,this)).mount();this._isZoomActive}DataZoom.defaultOption={show:!0,filterMode:'filter',icon:{zoom:'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',back:'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'},title:clone(l6.title)};var bG=DataZoom.prototype;bG.render=function(a,b,c,e){this.model=a;this.ecModel=b;this.api=c;updateZoomBtnStatus(a,b,this,e,c);updateBackBtnStatus(a,b)};bG.onclick=function(b,c,a){na[a].call(this)};bG.remove=function(a,b){this._brushController.unmount()};bG.dispose=function(a,b){this._brushController.dispose()};var na={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:'takeGlobalCursor',key:'dataZoomSelect',dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};bG._onBrush=function(c,f){if(!f.isEnd||!c.length){return}var b={};var a=this.ecModel;this._brushController.updateCovers([]);var e=new BrushTargetManager(retrieveAxisSetting(this.model.option),a,{include:['grid']});e.matchOutputRanges(c,a,function(g,b,a){if(a.type!=='cartesian2d'){return}var e=g.brushType;if(e==='rect'){setBatch('x',a,b[0]);setBatch('y',a,b[1])}else {setBatch({lineX:'x',lineY:'y'}[e],a,b)}});push(a,b);this._dispatchZoomAction(b);function setBatch(j,l,h){var k=l.getAxis(j);var i=k.model;var e=findDataZoom(j,i,a);var g=e.findRepresentativeAxisProxy(i).getMinMaxSpan();if(g.minValueSpan!=null||g.maxValueSpan!=null){h=a2(0,h.slice(),k.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)}e&&(b[e.id]={dataZoomId:e.id,startValue:h[0],endValue:h[1]})}function findDataZoom(e,b,g){var a;g.eachComponent({mainType:'dataZoom',subType:'select'},function(h){var i=h.getAxisModel(e,b.componentIndex);i&&(a=h)});return a}};bG._dispatchZoomAction=function(b){var a=[];iD(b,function(c,e){a.push(clone(c))});a.length&&this.api.dispatchAction({type:'dataZoom',from:this.uid,batch:a})};function retrieveAxisSetting(b){var a={};each$1(['xAxisIndex','yAxisIndex'],function(c){a[c]=b[c];a[c]==null&&(a[c]='all');(a[c]===!1||a[c]==='none')&&(a[c]=[])});return a}function updateBackBtnStatus(a,b){a.setIconStatus('back',count(b)>1?'emphasis':'normal')}function updateZoomBtnStatus(e,g,c,b,h){var a=c._isZoomActive;if(b&&b.type==='takeGlobalCursor'){a=b.key==='dataZoomSelect'?b.dataZoomSelectActive:!1}c._isZoomActive=a;e.setIconStatus('zoom',a?'emphasis':'normal');var f=new BrushTargetManager(retrieveAxisSetting(e.option),g,{include:['grid']});c._brushController.setPanels(f.makePanelOpts(h,function(a){return a.xAxisDeclared&&!a.yAxisDeclared?'lineX':!a.xAxisDeclared&&a.yAxisDeclared?'lineY':'rect'})).enableBrush(a?{brushType:'auto',brushStyle:{lineWidth:0,fill:'rgba(0,0,0,0.2)'}}:!1)}register$1('dataZoom',DataZoom);registerPreprocessor(function(b){if(!b){return}var c=b.dataZoom||(b.dataZoom=[]);if(!isArray(c)){b.dataZoom=c=[c]}var a=b.toolbox;if(a){if(isArray(a)){a=a[0]}if(a&&a.feature){var e=a.feature.dataZoom;addForAxis('xAxis',e);addForAxis('yAxis',e)}}function addForAxis(f,e){if(!e){return}var g=f+'Index';var a=e[g];if(a!=null&&a!=='all'&&!isArray(a)){a=a===!1||a==='none'?[]:[a]}forEachComponent(f,function(j,h){if(a!=null&&a!=='all'&&indexOf(a,h)===-1){return}var i={type:'select',$fromToolbox:!0,filterMode:e.filterMode||'filter',id:kq+f+h};i[g]=h;c.push(i)})}function forEachComponent(c,e){var a=b[c];if(!isArray(a)){a=a?[a]:[]}iD(a,e)}});var mT=aq.toolbox.restore;function Restore(a){this.model=a}Restore.defaultOption={show:!0,icon:'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',title:mT.title};var of=Restore.prototype;of.onclick=function(a,b,c){clear$1(a);b.dispatchAction({type:'restore',from:this.uid})};register$1('restore',Restore);registerAction({type:'restore',event:'restore',update:'prepareAndUpdate'},function(b,a){a.resetOption('recreate')});extendComponentModel({type:'tooltip',dependencies:['axisPointer'],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:'item',triggerOn:'mousemove|click',alwaysShowContent:!1,displayMode:'single',renderMode:'auto',confine:!1,showDelay:0,hideDelay:100,transitionDuration:0.4,enterable:!1,backgroundColor:'rgba(50,50,50,0.7)',borderColor:'#333',borderRadius:4,borderWidth:0,padding:5,extraCssText:'',axisPointer:{type:'line',axis:'auto',animation:'auto',animationDurationUpdate:200,animationEasingUpdate:'exponentialOut',crossStyle:{color:'#999',width:1,type:'dashed',textStyle:{}}},textStyle:{color:'#fff',fontSize:14}}});var iF=each$1;var lU=toCamelCase;var og=['','-webkit-','-moz-','-o-'];var nY='position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';function assembleTransition(b){var a='cubic-bezier(0.23, 1, 0.32, 1)';var c='left '+b+'s '+a+','+'top '+b+'s '+a;return map(og,function(a){return a+'transition:'+c}).join(';')}function assembleFont(b){var a=[];var c=b.get('fontSize');var e=b.getTextColor();e&&a.push('color:'+e);a.push('font:'+b.getFont());c&&a.push('line-height:'+Math.round(c*3/2)+'px');iF(['decoration','align'],function(c){var e=b.get(c);e&&a.push('text-'+c+':'+e)});return a.join(';')}function assembleCssText(b){var a=[];var e=b.get('transitionDuration');var c=b.get('backgroundColor');var h=b.getModel('textStyle');var g=b.get('padding');e&&a.push(assembleTransition(e));if(c){if(f.canvasSupported){a.push('background-Color:'+c)}else {a.push('background-Color:#'+toHex(c));a.push('filter:alpha(opacity=70)')}}iF(['width','color','radius'],function(e){var c='border-'+e;var g=lU(c);var f=b.get(g);f!=null&&a.push(c+':'+f+(e==='color'?'':'px'))});a.push(assembleFont(h));if(g!=null){a.push('padding:'+aR(g).join('px ')+'px')}return a.join(';')+';'}function TooltipContent(c,e){if(f.wxa){return null}var b=document.createElement('div');var g=this._zr=e.getZr();this.el=b;this._x=e.getWidth()/2;this._y=e.getHeight()/2;c.appendChild(b);this._container=c;this._show=!1;this._hideTimeout;var a=this;b.onmouseenter=function(){if(a._enterable){clearTimeout(a._hideTimeout);a._show=!0}a._inContent=!0};b.onmousemove=function(b){b=b||window.event;if(!a._enterable){var f=g.handler;normalizeEvent(c,b,!0);f.dispatch('mousemove',b)}};b.onmouseleave=function(){if(a._enterable){if(a._show){a.hideLater(a._hideDelay)}}a._inContent=!1}}TooltipContent.prototype={constructor:TooltipContent,_enterable:!0,update:function(){var a=this._container;var c=a.currentStyle||document.defaultView.getComputedStyle(a);var b=a.style;if(b.position!=='absolute'&&c.position!=='absolute'){b.position='relative'}},show:function(b){clearTimeout(this._hideTimeout);var a=this.el;a.style.cssText=nY+assembleCssText(b)+';left:'+this._x+'px;top:'+this._y+'px;'+(b.get('extraCssText')||'');a.style.display=a.innerHTML?'block':'none';a.style.pointerEvents=this._enterable?'auto':'none';this._show=!0},setContent:function(a){this.el.innerHTML=a==null?'':a},setEnterable:function(a){this._enterable=a},getSize:function(){var a=this.el;return [a.clientWidth,a.clientHeight]},moveTo:function(c,e){var b=this._zr;var a;if(b&&b.painter&&(a=b.painter.getViewportRootOffset())){c+=a.offsetLeft;e+=a.offsetTop}var f=this.el.style;f.left=c+'px';f.top=e+'px';this._x=c;this._y=e},hide:function(){this.el.style.display='none';this._show=!1},hideLater:function(a){if(this._show&&!(this._inContent&&this._enterable)){if(a){this._hideDelay=a;this._show=!1;this._hideTimeout=setTimeout(bind(this.hide,this),a)}else {this.hide()}}},isShow:function(){return this._show},getOuterSize:function(){var c=this.el.clientWidth;var b=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(this.el);if(a){c+=parseInt(a.borderLeftWidth,10)+parseInt(a.borderRightWidth,10);b+=parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)}}return {width:c,height:b}}};function TooltipRichContent(a){this._zr=a.getZr();this._show=!1;this._hideTimeout}TooltipRichContent.prototype={constructor:TooltipRichContent,_enterable:!0,update:function(){},show:function(a){if(this._hideTimeout){clearTimeout(this._hideTimeout)}this.el.attr('show',!0);this._show=!0},setContent:function(k,j,c){if(this.el){this._zr.remove(this.el)}var h={};var b=k;var i='{marker';var m='|}';var g=b.indexOf(i);while(g>=0){var l=b.indexOf(m);var f=b.substr(g+i.length,l-g-i.length);if(f.indexOf('sub')>-1){h['marker'+f]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:j[f],textOffset:[3,0]}}else {h['marker'+f]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:j[f]}}b=b.substr(l+1);g=b.indexOf('{marker')}this.el=new e({style:{rich:h,text:k,textLineHeight:20,textBackgroundColor:c.get('backgroundColor'),textBorderRadius:c.get('borderRadius'),textFill:c.get('textStyle.color'),textPadding:c.get('padding')},z:c.get('z')});this._zr.add(this.el);var a=this;this.el.on('mouseover',function(){if(a._enterable){clearTimeout(a._hideTimeout);a._show=!0}a._inContent=!0});this.el.on('mouseout',function(){if(a._enterable){if(a._show){a.hideLater(a._hideDelay)}}a._inContent=!1})},setEnterable:function(a){this._enterable=a},getSize:function(){var a=this.el.getBoundingRect();return [a.width,a.height]},moveTo:function(a,b){if(this.el){this.el.attr('position',[a,b])}},hide:function(){if(this.el){this.el.hide()}this._show=!1},hideLater:function(a){if(this._show&&!(this._inContent&&this._enterable)){if(a){this._hideDelay=a;this._show=!1;this._hideTimeout=setTimeout(bind(this.hide,this),a)}else {this.hide()}}},isShow:function(){return this._show},getOuterSize:function(){var a=this.getSize();return {width:a[0],height:a[1]}}};var i_=bind;var ch=each$1;var hf=parsePercent$1;var nP=new h({shape:{x:-1,y:-1,width:2,height:2}});extendComponentView({type:'tooltip',init:function(g,b){if(f.node){return}var c=g.getComponent('tooltip');var e=c.get('renderMode');this._renderMode=getTooltipRenderMode(e);var a;if(this._renderMode==='html'){a=new TooltipContent(b.getDom(),b);this._newLine='<br/>'}else {a=new TooltipRichContent(b);this._newLine='\n'}this._tooltipContent=a},render:function(a,c,e){if(f.node){return}this.group.removeAll();this._tooltipModel=a;this._ecModel=c;this._api=e;this._lastDataByCoordSys=null;this._alwaysShowContent=a.get('alwaysShowContent');var b=this._tooltipContent;b.update();b.setEnterable(a.get('enterable'));this._initGlobalListener();this._keepShow()},_initGlobalListener:function(){var b=this._tooltipModel;var a=b.get('triggerOn');register('itemTooltip',this._api,i_(function(c,e,b){if(a!=='none'){if(a.indexOf(c)>=0){this._tryShow(e,b)}else {if(c==='leave'){this._hide(b)}}}},this))},_keepShow:function(){var b=this._tooltipModel;var e=this._ecModel;var c=this._api;if(this._lastX!=null&&this._lastY!=null&&b.get('triggerOn')!=='none'){var a=this;clearTimeout(this._refreshUpdateTimeout);this._refreshUpdateTimeout=setTimeout(function(){!c.isDisposed()&&a.manuallyShowTip(b,e,c,{x:a._lastX,y:a._lastY})})}},manuallyShowTip:function(l,h,c,a){if(a.from===this.uid||f.node){return}var b=makeDispatchAction$1(a,c);this._ticket='';var k=a.dataByCoordSys;if(a.tooltip&&a.x!=null&&a.y!=null){var e=nP;e.position=[a.x,a.y];e.update();e.tooltip=a.tooltip;this._tryShow({offsetX:a.x,offsetY:a.y,target:e},b)}else {if(k){this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,event:{},dataByCoordSys:a.dataByCoordSys,tooltipOption:a.tooltipOption},b)}else {if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(l,h,c,a)){return}var g=gu(a,h);var i=g.point[0];var j=g.point[1];if(i!=null&&j!=null){this._tryShow({offsetX:i,offsetY:j,position:a.position,target:g.el,event:{}},b)}}else {if(a.x!=null&&a.y!=null){c.dispatchAction({type:'updateAxisPointer',x:a.x,y:a.y});this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:c.getZr().findHover(a.x,a.y).target,event:{}},b)}}}}},manuallyHideTip:function(e,f,c,a){var b=this._tooltipContent;if(!this._alwaysShowContent&&this._tooltipModel){b.hideLater(this._tooltipModel.get('hideDelay'))}this._lastX=this._lastY=null;if(a.from!==this.uid){this._hide(makeDispatchAction$1(a,c))}},_manuallyAxisShowTip:function(b,g,j,f){var c=f.seriesIndex;var e=f.dataIndex;var h=g.getComponent('axisPointer').coordSysAxesInfo;if(c==null||e==null||h==null){return}var a=g.getSeriesByIndex(c);if(!a){return}var i=a.getData();var b=buildTooltipModel([i.getItemModel(e),a,(a.coordinateSystem||{}).model,b]);if(b.get('trigger')!=='axis'){return}j.dispatchAction({type:'updateAxisPointer',seriesIndex:c,dataIndex:e,position:f.position});return !0},_tryShow:function(a,e){var b=a.target;var f=this._tooltipModel;if(!f){return}this._lastX=a.offsetX;this._lastY=a.offsetY;var c=a.dataByCoordSys;if(c&&c.length){this._showAxisTooltip(c,a)}else {if(b&&b.dataIndex!=null){this._lastDataByCoordSys=null;this._showSeriesItemTooltip(a,b,e)}else {if(b&&b.tooltip){this._lastDataByCoordSys=null;this._showComponentItemTooltip(a,b,e)}else {this._lastDataByCoordSys=null;this._hide(e)}}}},_showOrMove:function(c,a){var b=c.get('showDelay');a=bind(a,this);clearTimeout(this._showTimout);b>0?this._showTimout=setTimeout(a,b):a()},_showAxisTooltip:function(i,c){var g=this._ecModel;var m=this._tooltipModel;var b=[c.offsetX,c.offsetY];var a=[];var f=[];var e=buildTooltipModel([c.tooltipOption,m]);var k=this._renderMode;var h=this._newLine;var l={};ch(i,function(b){ch(b.dataByAxis,function(e){var m=g.getComponent(e.axisDim+'Axis',e.axisIndex);var n=e.value;var j=[];if(!m||n==null){return}var o=getValueLabel(n,m.axis,g,e.seriesDataIndices,e.valueLabelOpt);each$1(e.seriesDataIndices,function(s){var p=g.getSeriesByIndex(s.seriesIndex);var r=s.dataIndexInside;var a=p&&p.getDataParams(r);a.axisDim=e.axisDim;a.axisIndex=e.axisIndex;a.axisType=e.axisType;a.axisId=e.axisId;a.axisValue=getAxisRawValue(m.axis,n);a.axisValueLabel=o;if(a){f.push(a);var h=p.formatTooltip(r,!0,null,k);var q;if(isObject$1(h)){q=h.html;var t=h.markers;merge(l,t)}else {q=h}j.push(q)}});var p=o;if(k!=='html'){a.push(j.join(h))}else {a.push((p?encodeHTML(p)+h:'')+j.join(h))}})},this);a.reverse();a=a.join(this._newLine+this._newLine);var j=c.position;this._showOrMove(e,function(){if(this._updateContentNotChangedOnAxis(i)){this._updatePosition(e,j,b[0],b[1],this._tooltipContent,f)}else {this._showTooltipContent(e,a,f,Math.random(),b[0],b[1],j,undefined,l)}})},_showSeriesItemTooltip:function(f,e,o){var q=this._ecModel;var l=e.seriesIndex;var i=q.getSeriesByIndex(l);var b=e.dataModel||i;var a=e.dataIndex;var m=e.dataType;var n=b.getData();var g=buildTooltipModel([n.getItemModel(a),b,i&&(i.coordinateSystem||{}).model,this._tooltipModel]);var k=g.get('trigger');if(k!=null&&k!=='item'){return}var r=b.getDataParams(a,m);var c=b.formatTooltip(a,!1,m,this._renderMode);var h;var j;if(isObject$1(c)){h=c.html;j=c.markers}else {h=c;j=null}var p='item_'+b.name+'_'+a;this._showOrMove(g,function(){this._showTooltipContent(g,h,r,p,f.offsetX,f.offsetY,f.position,f.target,j)});o({type:'showTip',dataIndexInside:a,dataIndex:n.getRawIndex(a),seriesIndex:l,from:this.uid})},_showComponentItemTooltip:function(c,f,g){var b=f.tooltip;if(typeof b==='string'){var e=b;b={content:e,formatter:e}}var a=new Model(b,this._tooltipModel,this._ecModel);var i=a.get('content');var h=Math.random();this._showOrMove(a,function(){this._showTooltipContent(a,i,a.get('formatterParams')||{},h,c.offsetX,c.offsetY,c.position,f)});g({type:'showTip',from:this.uid})},_showTooltipContent:function(a,m,f,h,k,l,e,j,i){this._ticket='';if(!a.get('showContent')||!a.get('show')){return}var b=this._tooltipContent;var c=a.get('formatter');e=e||a.get('position');var g=m;if(c&&typeof c==='string'){g=formatTpl(c,f,!0)}else {if(typeof c==='function'){var n=i_(function(c,g){if(c===this._ticket){b.setContent(g,i,a);this._updatePosition(a,e,k,l,b,f,j)}},this);this._ticket=h;g=c(f,h,n)}}b.setContent(g,i,a);b.show(a);this._updatePosition(a,e,k,l,b,f,j)},_updatePosition:function(m,a,b,c,i,p,l){var h=this._api.getWidth();var g=this._api.getHeight();a=a||m.get('position');var e=i.getSize();var k=m.get('align');var j=m.get('verticalAlign');var n=l&&l.getBoundingRect().clone();l&&n.applyTransform(l.transform);if(typeof a==='function'){a=a([b,c],p,i.el,n,{viewSize:[h,g],contentSize:e.slice()})}if(isArray(a)){b=hf(a[0],h);c=hf(a[1],g)}else {if(isObject$1(a)){a.width=e[0];a.height=e[1];var o=getLayoutRect(a,{width:h,height:g});b=o.x;c=o.y;k=null;j=null}else {if(typeof a==='string'&&l){var f=calcTooltipPosition(a,n,e);b=f[0];c=f[1]}else {var f=refixTooltipPosition(b,c,i,h,g,k?null:20,j?null:20);b=f[0];c=f[1]}}}k&&(b-=isCenterAlign(k)?e[0]/2:k==='right'?e[0]:0);j&&(c-=isCenterAlign(j)?e[1]/2:j==='bottom'?e[1]:0);if(m.get('confine')){var f=confineTooltipPosition(b,c,i,h,g);b=f[0];c=f[1]}i.moveTo(b,c)},_updateContentNotChangedOnAxis:function(b){var c=this._lastDataByCoordSys;var a=!!c&&c.length===b.length;a&&ch(c,function(f,h){var c=f.dataByAxis||{};var g=b[h]||{};var e=g.dataByAxis||[];a&=c.length===e.length;a&&ch(c,function(c,k){var g=e[k]||{};var i=c.seriesDataIndices||[];var j=g.seriesDataIndices||[];a&=c.value===g.value&&c.axisType===g.axisType&&c.axisId===g.axisId&&i.length===j.length;a&&ch(i,function(e,i){var g=j[i];a&=e.seriesIndex===g.seriesIndex&&e.dataIndex===g.dataIndex})})});this._lastDataByCoordSys=b;return !!a},_hide:function(a){this._lastDataByCoordSys=null;a({type:'hideTip',from:this.uid})},dispose:function(b,a){if(f.node){return}this._tooltipContent.hide();unregister('itemTooltip',a)}});function buildTooltipModel(c){var b=c.pop();while(c.length){var a=c.pop();if(a){if(Model.isInstance(a)){a=a.get('tooltip',!0)}if(typeof a==='string'){a={formatter:a}}b=new Model(a,b,b.ecModel)}}return b}function makeDispatchAction$1(b,a){return b.dispatchAction||bind(a.dispatchAction,a)}function refixTooltipPosition(c,e,k,j,i,a,b){var h=k.getOuterSize();var g=h.width;var f=h.height;if(a!=null){if(c+g+a>j){c-=g+a}else {c+=a}}if(b!=null){if(e+f+b>i){e-=f+b}else {e+=b}}return [c,e]}function confineTooltipPosition(a,b,i,h,g){var f=i.getOuterSize();var e=f.width;var c=f.height;a=Math.min(a+e,h)-e;b=Math.min(b+c,g)-c;a=Math.max(a,0);b=Math.max(b,0);return [a,b]}function calcTooltipPosition(k,a,j){var h=j[0];var f=j[1];var i=5;var b=0;var c=0;var g=a.width;var e=a.height;switch(k){case 'inside':b=a.x+g/2-h/2;c=a.y+e/2-f/2;break;case 'top':b=a.x+g/2-h/2;c=a.y-f-i;break;case 'bottom':b=a.x+g/2-h/2;c=a.y+e+i;break;case 'left':b=a.x-h-i;c=a.y+e/2-f/2;break;case 'right':b=a.x+g+i;c=a.y+e/2-f/2;}return [b,c]}function isCenterAlign(a){return a==='center'||a==='middle'}registerAction({type:'showTip',event:'showTip',update:'tooltip:manuallyShowTip'},function(){});registerAction({type:'hideTip',event:'hideTip',update:'tooltip:manuallyHideTip'},function(){});var j$=['rect','polygon','keep','clear'];var lz=function(e,i){var b=e&&e.brush;if(!isArray(b)){b=b?[b]:[]}if(!b.length){return}var f=[];each$1(b,function(a){var b=a.hasOwnProperty('toolbox')?a.toolbox:[];if(b instanceof Array){f=f.concat(b)}});var a=e&&e.toolbox;if(isArray(a)){a=a[0]}if(!a){a={feature:{}};e.toolbox=[a]}var g=a.feature||(a.feature={});var h=g.brush||(g.brush={});var c=h.type||(h.type=[]);c.push.apply(c,f);removeDuplicate(c);if(i&&!c.length){c.push.apply(c,j$)}};function removeDuplicate(a){var b={};each$1(a,function(c){b[c]=1});a.length=0;each$1(b,function(c,b){a.push(b)})}var iG=each$1;function hasKeys(a){if(a){for(var b in a){if(a.hasOwnProperty(b)){return !0}}}}function createVisualMappings(e,c,a){var b={};iG(c,function(f){var g=b[f]=createMappings();iG(e[f],function(i,h){if(!k.isValidType(h)){return}var b={type:h,visual:i};a&&a(b,f);g[h]=new k(b);if(h==='opacity'){b=clone(b);b.type='colorAlpha';g.__hidden.__alphaForOpacity=new k(b)}})});return b;function createMappings(){var b=function(){};b.prototype.__hidden=b.prototype;var f=new b();return f}}function replaceVisualOption(b,a,c){var e;each$1(c,function(f){if(a.hasOwnProperty(f)&&hasKeys(a[f])){e=!0}});e&&each$1(c,function(e){if(a.hasOwnProperty(e)&&hasKeys(a[e])){b[e]=clone(a[e])}else {delete b[e]}})}function applyVisual(h,e,a,g,i,c){var f={};each$1(h,function(b){var j=k.prepareVisualTypes(e[b]);f[b]=j});var b;function getVisual(f){return a.getItemVisual(b,f)}function setVisual(j,f){a.setItemVisual(b,j,f)}if(c==null){a.each(eachItem)}else {a.each([c],eachItem)}function eachItem(j,q){b=c==null?j:q;var l=a.getRawDataItem(b);if(l&&l.visualMap===!1){return}var n=g.call(i,j);var o=e[n];var m=f[n];for(var k=0,r=m.length;k<r;k++){var p=m[k];o[p]&&o[p].applyVisual(j,getVisual,setVisual)}}}function incrementalApplyVisual(f,b,e,a){var c={};each$1(f,function(g){var h=k.prepareVisualTypes(b[g]);c[g]=h});function progress(p,h){if(a!=null){a=h.getDimension(a)}function getVisual(c){return h.getItemVisual(g,c)}function setVisual(i,c){h.setItemVisual(g,i,c)}var g;while((g=p.next())!=null){var j=h.getRawDataItem(g);if(j&&j.visualMap===!1){continue}var n=a!=null?h.get(a,g,!0):g;var l=e(n);var m=b[l];var k=c[l];for(var i=0,q=k.length;i<q;i++){var o=k[i];m[o]&&m[o].applyVisual(n,getVisual,setVisual)}}}return {progress:progress}}var fp={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(a,c,b){return a&&b.boundingRect.contain(a[0],a[1])},rect:function(a,c,b){return a&&b.boundingRect.intersect(a)}},polygon:{point:function(a,c,b){return a&&b.boundingRect.contain(a[0],a[1])&&contain$1(b.range,a[0],a[1])},rect:function(e,j,i){var c=i.range;if(!e||c.length<=1){return !1}var a=e.x;var b=e.y;var g=e.width;var f=e.height;var h=c[0];if(contain$1(c,a,b)||contain$1(c,a+g,b)||contain$1(c,a,b+f)||contain$1(c,a+g,b+f)||BoundingRect.create(e).contain(h[0],h[1])||linePolygonIntersect(a,b,a+g,b,c)||linePolygonIntersect(a,b,a,b+f,c)||linePolygonIntersect(a+g,b,a+g,b+f,c)||linePolygonIntersect(a,b+f,a+g,b+f,c)){return !0}}}};function getLineSelectors(a){var b=['x','y'];var c=['width','height'];return {point:function(b,g,e){if(b){var c=e.range;var f=b[a];return inLineRange(f,c)}},rect:function(f,i,h){if(f){var g=h.range;var e=[f[b[a]],f[b[a]]+f[c[a]]];e[1]<e[0]&&e.reverse();return inLineRange(e[0],g)||inLineRange(e[1],g)||inLineRange(g[0],e)||inLineRange(g[1],e)}}}}function inLineRange(b,a){return a[0]<=b&&b<=a[1]}var hV=['inBrush','outOfBrush'];var en='__ecBrushSelect';var eE='__ecInBrushSelectEvent';var g9=Y.VISUAL.BRUSH;registerLayout(g9,function(b,c,a){b.eachComponent({mainType:'brush'},function(e){a&&a.type==='takeGlobalCursor'&&e.setBrushOption(a.key==='brush'?a.brushOption:{brushType:!1});var f=e.brushTargetManager=new BrushTargetManager(e.option,b);f.setInputRanges(e.areas,b)})});registerVisual(g9,function(a,g,f){var b=[];var e;var c;a.eachComponent({mainType:'brush'},function(h,p){var n={brushId:h.id,brushIndex:p,brushName:h.name,areas:clone(h.areas),selected:[]};b.push(n);var k=h.option;var l=k.brushLink;var o=[];var i=[];var m=[];var j=0;if(!p){e=k.throttleType;c=k.throttleDelay}var r=map(h.areas,function(b){return bindSelector(defaults({boundingRect:j0[b.brushType](b)},b))});var q=createVisualMappings(h.option,hV,function(b){b.mappingMethod='fixed'});isArray(l)&&each$1(l,function(b){o[b]=1});function linkOthers(b){return l==='all'||o[b]}function brushed(b){return !!b.length}a.eachSeries(function(c,b){var e=m[b]=[];c.subType==='parallel'?stepAParallel(c,b,e):stepAOthers(c,b,e)});function stepAParallel(b,e){var c=b.coordinateSystem;j|=c.hasAxisBrushed();linkOthers(e)&&c.eachActiveState(b.getData(),function(c,j){c==='active'&&(i[j]=1)})}function stepAOthers(e,k,b){var c=getSelectorsByBrushType(e);if(!c||brushModelNotControll(h,k)){return}each$1(r,function(i){c[i.brushType]&&h.brushTargetManager.controlSeries(i,e,a)&&b.push(i);j|=brushed(b)});if(linkOthers(k)&&brushed(b)){var l=e.getData();l.each(function(j){if(checkInRange(c,b,l,j)){i[j]=1}})}}a.eachSeries(function(c,b){var k={seriesId:c.id,seriesIndex:b,seriesName:c.name,dataIndex:[]};n.selected.push(k);var o=getSelectorsByBrushType(c);var l=m[b];var e=c.getData();var r=linkOthers(b)?function(j){return i[j]?(k.dataIndex.push(e.getRawIndex(j)),'inBrush'):'outOfBrush'}:function(i){return checkInRange(o,l,e,i)?(k.dataIndex.push(e.getRawIndex(i)),'inBrush'):'outOfBrush'};(linkOthers(b)?j:brushed(l))&&applyVisual(hV,q,e,r)})});dispatchAction(g,e,c,b,f)});function dispatchAction(b,f,e,c,g){if(!g){return}var a=b.getZr();if(a[eE]){return}if(!a[en]){a[en]=doDispatch}var h=createOrUpdate(a,en,e,f);h(b,c)}function doDispatch(a,c){if(!a.isDisposed()){var b=a.getZr();b[eE]=!0;a.dispatchAction({type:'brushSelect',batch:c});b[eE]=!1}}function checkInRange(e,c,g,f){for(var b=0,h=c.length;b<h;b++){var a=c[b];if(e[a.brushType](f,g,a.selectors,a)){return !0}}}function getSelectorsByBrushType(e){var a=e.brushSelector;if(isString(a)){var c=[];each$1(fp,function(b,f){c[f]=function(g,j,h,i){var c=j.getItemLayout(g);return b[a](c,h,i)}});return c}else {if(isFunction$1(a)){var b={};each$1(fp,function(f,c){b[c]=a});return b}}return a}function brushModelNotControll(c,b){var a=c.option.seriesIndex;return a!=null&&a!=='all'&&(isArray(a)?indexOf(a,b)<0:b!==a)}function bindSelector(a){var b=a.selectors={};each$1(fp[a.brushType],function(e,c){b[c]=function(f){return e(f,b,a)}});return a}var j0={lineX:noop,lineY:noop,rect:function(a){return getBoundingRectFromMinMax(a.range)},polygon:function(f){var a;var e=f.range;for(var c=0,g=e.length;c<g;c++){a=a||[[Infinity,-Infinity],[Infinity,-Infinity]];var b=e[c];b[0]<a[0][0]&&(a[0][0]=b[0]);b[0]>a[0][1]&&(a[0][1]=b[0]);b[1]<a[1][0]&&(a[1][0]=b[1]);b[1]>a[1][1]&&(a[1][1]=b[1])}return a&&getBoundingRectFromMinMax(a)}};function getBoundingRectFromMinMax(a){return new BoundingRect(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var ju=['#ddd'];var oX=extendComponentModel({type:'brush',dependencies:['geo','grid','xAxis','yAxis','parallel','series'],defaultOption:{toolbox:null,brushLink:null,seriesIndex:'all',geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:'rect',brushMode:'single',transformable:!0,brushStyle:{borderWidth:1,color:'rgba(120,140,180,0.3)',borderColor:'rgba(120,140,180,0.8)'},throttleType:'fixRate',throttleDelay:0,removeOnClick:!0,z:10000},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(c,e){var a=this.option;!e&&replaceVisualOption(a,c,['inBrush','outOfBrush']);var b=a.inBrush=a.inBrush||{};a.outOfBrush=a.outOfBrush||{color:ju};if(!b.hasOwnProperty('liftZ')){b.liftZ=5}},setAreas:function(b){if(a){assert$1(isArray(b));each$1(b,function(a){assert$1(a.brushType,'Illegal areas')})}if(!b){return}this.areas=map(b,function(a){return generateBrushOption(this.option,a)},this)},setBrushOption:function(a){this.brushOption=generateBrushOption(this.option,a);this.brushType=this.brushOption.brushType}});function generateBrushOption(a,b){return merge({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:(new Model(a.brushStyle)).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},b,!0)}extendComponentView({type:'brush',init:function(b,a){this.ecModel=b;this.api=a;this.model;(this._brushController=new BrushController(a.getZr())).on('brush',bind(this._onBrush,this)).mount()},render:function(a){this.model=a;return updateController.apply(this,arguments)},updateTransform:updateController,updateView:updateController,dispose:function(){this._brushController.dispose()},_onBrush:function(b,c){var a=this.model.id;this.model.brushTargetManager.setOutputRanges(b,this.ecModel);(!c.isEnd||c.removeOnClick)&&this.api.dispatchAction({type:'brush',brushId:a,areas:clone(b),$from:a});c.isEnd&&this.api.dispatchAction({type:'brushEnd',brushId:a,areas:clone(b),$from:a})}});function updateController(a,e,c,b){(!b||b.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(c)).enableBrush(a.brushOption).updateCovers(a.areas.slice())}registerAction({type:'brush',event:'brush'},function(a,b){b.eachComponent({mainType:'brush',query:a},function(c){c.setAreas(a.areas)})});registerAction({type:'brushSelect',event:'brushSelected',update:'none'},function(){});registerAction({type:'brushEnd',event:'brushEnd',update:'none'},function(){});var nA=aq.toolbox.brush;function Brush(b,a,c){this.model=b;this.ecModel=a;this.api=c;this._brushType;this._brushMode}Brush.defaultOption={show:!0,type:['rect','polygon','lineX','lineY','keep','clear'],icon:{rect:'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',polygon:'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',lineX:'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',lineY:'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',keep:'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',clear:'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2'},title:clone(nA.title)};var dz=Brush.prototype;dz.render=dz.updateView=function(c,f,g){var b;var a;var e;f.eachComponent({mainType:'brush'},function(h){b=h.brushType;a=h.brushOption.brushMode||'single';e|=h.areas.length});this._brushType=b;this._brushMode=a;each$1(c.get('type',!0),function(h){c.setIconStatus(h,(h==='keep'?a==='multiple':h==='clear'?e:h===b)?'emphasis':'normal')})};dz.getIcons=function(){var c=this.model;var a=c.get('icon',!0);var b={};each$1(c.get('type',!0),function(c){if(a[c]){b[c]=a[c]}});return b};dz.onclick=function(f,b,a){var e=this._brushType;var c=this._brushMode;if(a==='clear'){b.dispatchAction({type:'axisAreaSelect',intervals:[]});b.dispatchAction({type:'brush',command:'clear',areas:[]})}else {b.dispatchAction({type:'takeGlobalCursor',key:'brush',brushOption:{brushType:a==='keep'?e:e===a?!1:a,brushMode:a==='keep'?c==='multiple'?'single':'multiple':c}})}};register$1('brush',Brush);registerPreprocessor(lz);extendComponentModel({type:'title',layoutMode:{type:'box',ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:'',target:'blank',subtext:'',subtarget:'blank',left:0,top:0,backgroundColor:'rgba(0,0,0,0)',borderColor:'#ccc',borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:'bolder',color:'#333'},subtextStyle:{color:'#aaa'}}});extendComponentView({type:'title',render:function(a,y,v){this.group.removeAll();if(!a.get('show')){return}var k=this.group;var r=a.getModel('textStyle');var q=a.getModel('subtextStyle');var g=a.get('textAlign');var c=retrieve2(a.get('textBaseline'),a.get('textVerticalAlign'));var j=new e({style:setTextStyle({},r,{text:a.get('text'),textFill:r.getTextColor()},{disableBox:!0}),z2:10});var w=j.getBoundingRect();var t=a.get('subtext');var l=new e({style:setTextStyle({},q,{text:t,textFill:q.getTextColor(),y:w.height+a.get('itemGap'),textVerticalAlign:'top'},{disableBox:!0}),z2:10});var p=a.get('link');var o=a.get('sublink');var n=a.get('triggerEvent',!0);j.silent=!p&&!n;l.silent=!o&&!n;if(p){j.on('click',function(){window.open(p,'_'+a.get('target'))})}if(o){l.on('click',function(){window.open(o,'_'+a.get('subtarget'))})}j.eventData=l.eventData=n?{componentType:'title',componentIndex:a.componentIndex}:null;k.add(j);t&&k.add(l);var f=k.getBoundingRect();var m=a.getBoxLayoutParams();m.width=f.width;m.height=f.height;var b=getLayoutRect(m,{width:v.getWidth(),height:v.getHeight()},a.get('padding'));if(!g){g=a.get('left')||a.get('right');if(g==='middle'){g='center'}if(g==='right'){b.x+=b.width}else {if(g==='center'){b.x+=b.width/2}}}if(!c){c=a.get('top')||a.get('bottom');if(c==='center'){c='middle'}if(c==='bottom'){b.y+=b.height}else {if(c==='middle'){b.y+=b.height/2}}c=c||'top'}k.attr('position',[b.x,b.y]);var s={textAlign:g,textVerticalAlign:c};j.setStyle(s);l.setStyle(s);f=k.getBoundingRect();var i=b.margin;var u=a.getItemStyle(['color','opacity']);u.fill=a.get('backgroundColor');var x=new h({shape:{x:f.x-i[3],y:f.y-i[0],width:f.width+i[1]+i[3],height:f.height+i[0]+i[2],r:a.get('borderRadius')},style:u,subPixelOptimize:!0,silent:!0});k.add(x)}});var lA=function(b){var a=b&&b.timeline;if(!isArray(a)){a=a?[a]:[]}each$1(a,function(a){if(!a){return}compatibleEC2(a)})};function compatibleEC2(a){var e=a.type;var c={'number':'value','time':'time'};if(c[e]){a.axisType=c[e];delete a.type}transferItem(a);if(has$1(a,'controlPosition')){var b=a.controlStyle||(a.controlStyle={});if(!has$1(b,'position')){b.position=a.controlPosition}if(b.position==='none'&&!has$1(b,'show')){b.show=!1;delete b.position}delete a.controlPosition}each$1(a.data||[],function(b){if(isObject$1(b)&&!isArray(b)){if(!has$1(b,'value')&&has$1(b,'name')){b.value=b.name}transferItem(b)}})}function transferItem(b){var f=b.itemStyle||(b.itemStyle={});var c=f.emphasis||(f.emphasis={});var a=b.label||(b.label||{});var e=a.normal||(a.normal={});var g={normal:1,emphasis:1};each$1(a,function(c,a){if(!g[a]&&!has$1(e,a)){e[a]=c}});if(c.label&&!has$1(a,'emphasis')){a.emphasis=c.label;delete c.label}}function has$1(b,a){return b.hasOwnProperty(a)}g.registerSubTypeDefaulter('timeline',function(){return 'slider'});registerAction({type:'timelineChange',event:'timelineChanged',update:'prepareAndUpdate'},function(b,c){var a=c.getComponent('timeline');if(a&&b.currentIndex!=null){a.setCurrentIndex(b.currentIndex);if(!a.get('loop',!0)&&a.isIndexMax()){a.setPlayState(!1)}}c.resetOption('timeline');return defaults({currentIndex:a.option.currentIndex},b)});registerAction({type:'timelinePlayChange',event:'timelinePlayChanged',update:'update'},function(b,c){var a=c.getComponent('timeline');if(a&&b.playState!=null){a.setPlayState(b.playState)}});var ho=g.extend({type:'timeline',layoutMode:'box',defaultOption:{zlevel:0,z:4,show:!0,axisType:'time',realtime:!0,left:'20%',top:null,right:'20%',bottom:0,width:null,height:40,padding:5,controlPosition:'left',autoPlay:!1,rewind:!1,loop:!0,playInterval:2000,currentIndex:0,itemStyle:{},label:{color:'#000'},data:[]},init:function(b,c,a){this._data;this._names;this.mergeDefaultAndTheme(b,a);this._initData()},mergeOption:function(a){ho.superApply(this,'mergeOption',arguments);this._initData()},setCurrentIndex:function(a){if(a==null){a=this.option.currentIndex}var b=this._data.count();if(this.option.loop){a=(a%b+b)%b}else {a>=b&&(a=b-1);a<0&&(a=0)}this.option.currentIndex=a},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(a){this.option.autoPlay=!!a},getPlayState:function(){return !!this.option.autoPlay},_initData:function(){var b=this.option;var a=b.data||[];var c=b.axisType;var f=this._names=[];if(c==='category'){var e=[];each$1(a,function(c,g){var a=getDataItemValue(c);var b;if(isObject$1(c)){b=clone(c);b.value=g}else {b=g}e.push(b);if(!isString(a)&&(a==null||isNaN(a))){a=''}f.push(a+'')});a=e}var g={category:'ordinal',time:'time'}[c]||'number';var h=this._data=new s([{name:'value',type:g}],this);h.initData(a,f)},getData:function(){return this._data},getCategories:function(){if(this.get('axisType')==='category'){return this._names.slice()}}});var j7=ho.extend({type:'timeline.slider',defaultOption:{backgroundColor:'rgba(0,0,0,0)',borderColor:'#ccc',borderWidth:0,orient:'horizontal',inverse:!1,tooltip:{trigger:'item'},symbol:'emptyCircle',symbolSize:10,lineStyle:{show:!0,width:2,color:'#304654'},label:{position:'auto',show:!0,interval:'auto',rotate:0,color:'#304654'},itemStyle:{color:'#304654',borderWidth:1},checkpointStyle:{symbol:'circle',symbolSize:13,color:'#c23531',borderWidth:5,borderColor:'rgba(194,53,49, 0.5)',animation:!0,animationDuration:300,animationEasing:'quinticInOut'},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:'left',playIcon:'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',stopIcon:'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',nextIcon:'path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z',prevIcon:'path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z',color:'#304654',borderColor:'#304654',borderWidth:1},emphasis:{label:{show:!0,color:'#c23531'},itemStyle:{color:'#c23531'},controlStyle:{color:'#c23531',borderColor:'#c23531',borderWidth:2}},data:[]}});mixin(j7,eq);var l1=W.extend({type:'timeline'});var cW=function(e,c,a,b){q.call(this,e,c,a);this.type=b||'value';this.model=null};cW.prototype={constructor:cW,getLabelModel:function(){return this.model.getModel('label')},isHorizontal:function(){return this.model.get('orient')==='horizontal'}};inherits(cW,q);var aH=bind;var fA=each$1;var fN=Math.PI;l1.extend({type:'timeline.slider',init:function(b,a){this.api=a;this._axis;this._viewRect;this._timer;this._currentPointer;this._mainGroup;this._labelGroup},render:function(a,h,e,i){this.model=a;this.api=e;this.ecModel=h;this.group.removeAll();if(a.get('show',!0)){var b=this._layout(a,e);var g=this._createGroup('mainGroup');var f=this._createGroup('labelGroup');var c=this._axis=this._createAxis(b,a);a.formatTooltip=function(b){return encodeHTML(c.scale.getLabel(b))};fA(['AxisLine','AxisTick','Control','CurrentPointer'],function(f){this['_render'+f](b,g,c,a)},this);this._renderAxisLabel(b,f,c,a);this._position(b,a)}this._doPlayStop()},remove:function(){this._clearTimer();this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(b,q){var a=b.get('label.position');var f=b.get('orient');var e=getViewRect$4(b,q);if(a==null||a==='auto'){a=f==='horizontal'?e.y+e.height/2<q.getHeight()/2?'-':'+':e.x+e.width/2<q.getWidth()/2?'+':'-'}else {if(isNaN(a)){a={horizontal:{top:'-',bottom:'+'},vertical:{left:'-',right:'+'}}[f][a]}}var y={horizontal:'center',vertical:a>=0||a==='+'?'left':'right'};var x={horizontal:a>=0||a==='+'?'top':'bottom',vertical:'middle'};var z={horizontal:0,vertical:fN/2};var w=f==='vertical'?e.height:e.width;var c=b.getModel('controlStyle');var j=c.get('show',!0);var i=j?c.get('itemSize'):0;var v=j?c.get('itemGap'):0;var h=i+v;var n=b.get('label.rotate')||0;n=n*fN/180;var o;var m;var l;var p;var r=c.get('position',!0);var t=j&&c.get('showPlayBtn',!0);var u=j&&c.get('showPrevBtn',!0);var s=j&&c.get('showNextBtn',!0);var k=0;var g=w;if(r==='left'||r==='bottom'){t&&(o=[0,0],k+=h);u&&(m=[k,0],k+=h);s&&(l=[g-i,0],g-=h)}else {t&&(o=[g-i,0],g-=h);u&&(m=[0,0],k+=h);s&&(l=[g-i,0],g-=h)}p=[k,g];if(b.get('inverse')){p.reverse()}return {viewRect:e,mainLength:w,orient:f,rotation:z[f],labelRotation:n,labelPosOpt:a,labelAlign:b.get('label.align')||y[f],labelBaseline:b.get('label.verticalAlign')||b.get('label.baseline')||x[f],playPosition:o,prevBtnPosition:m,nextBtnPosition:l,axisExtent:p,controlSize:i,controlGap:v}},_position:function(k,p){var g=this._mainGroup;var f=this._labelGroup;var a=k.viewRect;if(k.orient==='vertical'){var b=create$1();var l=a.x;var m=a.y+a.height;translate(b,b,[-l,-m]);rotate(b,b,-fN/2);translate(b,b,[l,m]);a=a.clone();a.applyTransform(b)}var c=getBound(a);var n=getBound(g.getBoundingRect());var o=getBound(f.getBoundingRect());var e=g.position;var h=f.position;h[0]=e[0]=c[0][0];var j=k.labelPosOpt;if(isNaN(j)){var i=j==='+'?0:1;toBound(e,n,c,1,i);toBound(h,o,c,1,1-i)}else {var i=j>=0?0:1;toBound(e,n,c,1,i);h[1]=e[1]+j}g.attr('position',e);f.attr('position',h);g.rotation=f.rotation=k.rotation;setOrigin(g);setOrigin(f);function setOrigin(a){var b=a.position;a.origin=[c[0][0]-b[0],c[1][0]-b[1]]}function getBound(a){return [[a.x,a.x+a.width],[a.y,a.y+a.height]]}function toBound(c,e,f,a,b){c[a]+=f[a][b]-e[a][b]}},_createAxis:function(h,a){var g=a.getData();var e=a.get('axisType');var b=createScaleByModel(a,e);b.getTicks=function(){return g.mapArray(['value'],function(b){return b})};var c=g.getDataExtent('value');b.setExtent(c[0],c[1]);b.niceTicks();var f=new cW('value',b,h.axisExtent,e);f.model=a;return f},_createGroup:function(c){var a=this['_'+c]=new b();this.group.add(a);return a},_renderAxisLine:function(f,c,e,a){var b=e.getExtent();if(!a.get('lineStyle.show')){return}c.add(new B({shape:{x1:b[0],y1:0,x2:b[1],y2:0},style:extend({lineCap:'round'},a.getModel('lineStyle').getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(g,c,b,a){var f=a.getData();var e=b.scale.getTicks();fA(e,function(i){var m=b.dataToCoord(i);var h=f.getItemModel(i);var k=h.getModel('itemStyle');var j=h.getModel('emphasis.itemStyle');var l={position:[m,0],onclick:aH(this._changeTimeline,this,i)};var e=giveSymbol(h,k,c,l);setHoverStyle(e,j.getItemStyle());if(h.get('tooltip')){e.dataIndex=i;e.dataModel=a}else {e.dataIndex=e.dataModel=null}},this)},_renderAxisLabel:function(a,h,b,c){var f=b.getLabelModel();if(!f.get('show')){return}var i=c.getData();var g=b.getViewLabels();fA(g,function(f){var j=f.tickValue;var k=i.getItemModel(j);var l=k.getModel('label');var m=k.getModel('emphasis.label');var n=b.dataToCoord(f.tickValue);var g=new e({position:[n,0],rotation:a.labelRotation-a.rotation,onclick:aH(this._changeTimeline,this,j),silent:!1});setTextStyle(g.style,l,{text:f.formattedLabel,textAlign:a.labelAlign,textVerticalAlign:a.labelBaseline});h.add(g);setHoverStyle(g,setTextStyle({},m))},this)},_renderControl:function(b,j,l,a){var c=b.controlSize;var i=b.rotation;var h=a.getModel('controlStyle').getItemStyle();var g=a.getModel('emphasis.controlStyle').getItemStyle();var k=[0,-c/2,c,c];var e=a.getPlayState();var f=a.get('inverse',!0);makeBtn(b.nextBtnPosition,'controlStyle.nextIcon',aH(this._changeTimeline,this,f?'-':'+'));makeBtn(b.prevBtnPosition,'controlStyle.prevIcon',aH(this._changeTimeline,this,f?'+':'-'));makeBtn(b.playPosition,'controlStyle.'+(e?'stopIcon':'playIcon'),aH(this._handlePlayClick,this,!e),!0);function makeBtn(e,n,o,m){if(!e){return}var p={position:e,origin:[c/2,0],rotation:m?-i:0,rectHover:!0,style:h,onclick:o};var f=makeIcon(a,n,k,p);j.add(f);setHoverStyle(f,g)}},_renderCurrentPointer:function(i,j,f,a){var h=a.getData();var c=a.getCurrentIndex();var e=h.getItemModel(c).getModel('checkpointStyle');var b=this;var g={onCreate:function(e){e.draggable=!0;e.drift=aH(b._handlePointerDrag,b);e.ondragend=aH(b._handlePointerDragend,b);pointerMoveTo(e,c,f,a,!0)},onUpdate:function(b){pointerMoveTo(b,c,f,a)}};this._currentPointer=giveSymbol(e,e,this._mainGroup,{},this._currentPointer,g)},_handlePlayClick:function(a){this._clearTimer();this.api.dispatchAction({type:'timelinePlayChange',playState:a,from:this.uid})},_handlePointerDrag:function(b,c,a){this._clearTimer();this._pointerChangeTimeline([a.offsetX,a.offsetY])},_handlePointerDragend:function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},_pointerChangeTimeline:function(f,g){var a=this._toAxisCoord(f)[0];var h=this._axis;var b=asc(h.getExtent().slice());a>b[1]&&(a=b[1]);a<b[0]&&(a=b[0]);this._currentPointer.position[0]=a;this._currentPointer.dirty();var c=this._findNearestTick(a);var e=this.model;if(g||c!==e.getCurrentIndex()&&e.get('realtime')){this._changeTimeline(c)}},_doPlayStop:function(){this._clearTimer();if(this.model.getPlayState()){this._timer=setTimeout(aH(handleFrame,this),this.model.get('playInterval'))}function handleFrame(){var a=this.model;this._changeTimeline(a.getCurrentIndex()+(a.get('rewind',!0)?-1:1))}},_toAxisCoord:function(a){var b=this._mainGroup.getLocalTransform();return applyTransform$1(a,b,!0)},_findNearestTick:function(c){var f=this.model.getData();var b=Infinity;var a;var e=this._axis;f.each(['value'],function(i,g){var h=e.dataToCoord(i);var f=Math.abs(h-c);if(f<b){b=f;a=g}});return a},_clearTimer:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}},_changeTimeline:function(a){var b=this.model.getCurrentIndex();if(a==='+'){a=b+1}else {if(a==='-'){a=b-1}}this.api.dispatchAction({type:'timelineChange',currentIndex:a,from:this.uid})}});function getViewRect$4(a,b){return getLayoutRect(a.getBoxLayoutParams(),{width:b.getWidth(),height:b.getHeight()},a.get('padding'))}function makeIcon(b,c,a,f){var e=makePath(b.get(c).replace(/^path:\/\//,''),clone(f||{}),new BoundingRect(a[0],a[1],a[2],a[3]),'center');return e}function giveSymbol(e,h,j,c,a,f){var i=h.get('color');if(!a){var m=e.get('symbol');a=createSymbol(m,-1,-1,2,2,i);a.setStyle('strokeNoScale',!0);j.add(a);f&&f.onCreate(a)}else {a.setColor(i);j.add(a);f&&f.onUpdate(a)}var n=h.getItemStyle(['color','symbol','symbolSize']);a.setStyle(n);c=merge({rectHover:!0,z2:100},c,!0);var b=e.get('symbolSize');b=b instanceof Array?b.slice():[+b,+b];b[0]/=2;b[1]/=2;c.scale=b;var g=e.get('symbolOffset');if(g){var k=c.position=c.position||[0,0];k[0]+=parsePercent$1(g[0],b[0]);k[1]+=parsePercent$1(g[1],b[1])}var l=e.get('symbolRotate');c.rotation=(l||0)*Math.PI/180||0;a.attr(c);a.updateTransform();return a}function pointerMoveTo(a,g,h,c,f){if(a.dragging){return}var b=c.getModel('checkpointStyle');var e=h.dataToCoord(c.getData().get(['value'],g));if(f||!b.get('animation',!0)){a.attr({position:[e,0]})}else {a.stopAnimation(!0);a.animateTo({position:[e,0]},b.get('animationDuration',!0),b.get('animationEasing',!0))}}registerPreprocessor(lA);var hN=addCommas;var eT=encodeHTML;function fillLabel(a){defaultEmphasis(a,'label',['show'])}var c$=extendComponentModel({type:'marker',dependencies:['series','grid','polar','geo'],init:function(c,e,b){if(a){if(this.type==='marker'){throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.')}}this.mergeDefaultAndTheme(c,b);this._mergeOption(c,b,!1,!0)},isAnimationEnabled:function(){if(f.node){return !1}var a=this.__hostSeries;return this.getShallow('animation')&&a&&a.isAnimationEnabled()},mergeOption:function(b,a){this._mergeOption(b,a,!1,!1)},_mergeOption:function(g,b,c,f){var e=this.constructor;var a=this.mainType+'Model';if(!c){b.eachSeries(function(h){var j=h.get(this.mainType,!0);var i=h[a];if(!j||!j.data){h[a]=null;return}if(!i){if(f){fillLabel(j)}each$1(j.data,function(a){if(a instanceof Array){fillLabel(a[0]);fillLabel(a[1])}else {fillLabel(a)}});i=new e(j,this,b);extend(i,{mainType:this.mainType,seriesIndex:h.seriesIndex,name:h.name,createdBySelf:!0});i.__hostSeries=h}else {i._mergeOption(j,b,!0)}h[a]=i},this)}},formatTooltip:function(e){var g=this.getData();var a=this.getRawValue(e);var f=isArray(a)?map(a,hN).join(', '):hN(a);var c=g.getName(e);var b=eT(this.name);if(a!=null||c){b+='<br />'}if(c){b+=eT(c);if(a!=null){b+=' : '}}if(a!=null){b+=eT(f)}return b},getData:function(){return this._data},setData:function(a){this._data=a}});mixin(c$,eq);c$.extend({type:'markPoint',defaultOption:{zlevel:0,z:5,symbol:'pin',symbolSize:50,tooltip:{trigger:'item'},label:{show:!0,position:'inside'},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var h7=indexOf;function hasXOrY(a){return !(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function hasXAndY(a){return !isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function markerTypeCalculatorWithExtent(l,a,j,c,i,f){var b=[];var k=isDimensionStacked(a,c);var h=k?a.getCalculationInfo('stackResultDimension'):c;var m=numCalculate(a,h,l);var g=a.indicesOfNearest(h,m)[0];b[i]=a.get(j,g);b[f]=a.get(c,g);var e=getPrecision(a.get(c,g));e=Math.min(e,20);if(e>=0){b[f]=+b[f].toFixed(e)}return b}var fx=curry;var d$={min:fx(markerTypeCalculatorWithExtent,'min'),max:fx(markerTypeCalculatorWithExtent,'max'),average:fx(markerTypeCalculatorWithExtent,'average')};function dataTransform(g,a){var f=g.getData();var h=g.coordinateSystem;if(a&&!hasXAndY(a)&&!isArray(a.coord)&&h){var i=h.dimensions;var b=getAxisInfo$1(a,f,h,g);a=clone(a);if(a.type&&d$[a.type]&&b.baseAxis&&b.valueAxis){var k=h7(i,b.baseAxis.dim);var j=h7(i,b.valueAxis.dim);a.coord=d$[a.type](f,b.baseDataDim,b.valueDataDim,k,j);a.value=a.coord[j]}else {var e=[a.xAxis!=null?a.xAxis:a.radiusAxis,a.yAxis!=null?a.yAxis:a.angleAxis];for(var c=0;c<2;c++){if(d$[e[c]]){e[c]=numCalculate(f,f.mapDimension(i[c]),e[c])}}a.coord=e}}return a}function getAxisInfo$1(b,c,e,f){var a={};if(b.valueIndex!=null||b.valueDim!=null){a.valueDataDim=b.valueIndex!=null?c.getDimension(b.valueIndex):b.valueDim;a.valueAxis=e.getAxis(dataDimToCoordDim(f,a.valueDataDim));a.baseAxis=e.getOtherAxis(a.valueAxis);a.baseDataDim=c.mapDimension(a.baseAxis.dim)}else {a.baseAxis=f.getBaseAxis();a.valueAxis=e.getOtherAxis(a.baseAxis);a.baseDataDim=c.mapDimension(a.baseAxis.dim);a.valueDataDim=c.mapDimension(a.valueAxis.dim)}return a}function dataDimToCoordDim(g,a){var b=g.getData();var e=b.dimensions;a=b.getDimension(a);for(var c=0;c<e.length;c++){var f=b.getDimensionInfo(e[c]);if(f.name===a){return f.coordDim}}}function dataFilter$1(a,b){return a&&a.containData&&b.coord&&!hasXOrY(b)?a.containData(b.coord):!0}function dimValueGetter(a,e,c,b){if(b<2){return a.coord&&a.coord[b]}return a.value}function numCalculate(b,a,c){if(c==='average'){var f=0;var e=0;b.each(a,function(g,h){if(!isNaN(g)){f+=g;e++}});return f/e}else {if(c==='median'){return b.getMedian(a)}else {return b.getDataExtent(a,!0)[c==='max'?1:0]}}}var e_=extendComponentView({type:'marker',init:function(){this.markerGroupMap=createHashMap()},render:function(f,b,e){var a=this.markerGroupMap;a.each(function(a){a.__keep=!1});var c=this.type+'Model';b.eachSeries(function(g){var a=g[c];a&&this.renderSeries(g,a,b,e)},this);a.each(function(a){!a.__keep&&this.group.remove(a.group)},this)},renderSeries:function(){}});function updateMarkerLayout(a,c,e){var b=c.coordinateSystem;a.each(function(g){var j=a.getItemModel(g);var f;var h=parsePercent$1(j.get('x'),e.getWidth());var i=parsePercent$1(j.get('y'),e.getHeight());if(!isNaN(h)&&!isNaN(i)){f=[h,i]}else {if(c.getMarkerPosition){f=c.getMarkerPosition(a.getValues(a.dimensions,g))}else {if(b){var k=a.get(b.dimensions[0],g);var l=a.get(b.dimensions[1],g);f=b.dataToPoint([k,l])}}}if(!isNaN(h)){f[0]=h}if(!isNaN(i)){f[1]=i}a.setItemLayout(g,f)})}e_.extend({type:'markPoint',updateTransform:function(c,a,b){a.eachSeries(function(e){var f=e.markPointModel;if(f){updateMarkerLayout(f.getData(),e,b);this.markerGroupMap.get(e.id).updateLayout(f)}},this)},renderSeries:function(b,a,k,j){var i=b.coordinateSystem;var g=b.id;var h=b.getData();var f=this.markerGroupMap;var e=f.get(g)||f.set(g,new SymbolDraw());var c=createList$1(i,b,a);a.setData(c);updateMarkerLayout(a.getData(),b,j);c.each(function(g){var i=c.getItemModel(g);var f=i.getShallow('symbol');var e=i.getShallow('symbolSize');var n=isFunction$1(f);var l=isFunction$1(e);if(n||l){var o=a.getRawValue(g);var m=a.getDataParams(g);if(n){f=f(o,m)}if(l){e=e(o,m)}}c.setItemVisual(g,{symbol:f,symbolSize:e,color:i.get('itemStyle.color')||h.getVisual('color')})});e.updateData(c);this.group.add(e.group);c.eachItemGraphicEl(function(c){c.traverse(function(e){e.dataModel=a})});e.__keep=!0;e.group.silent=a.get('silent')||b.get('silent')}});function createList$1(a,c,f){var b;if(a){b=map(a&&a.dimensions,function(b){var e=c.getData().getDimensionInfo(c.getData().mapDimension(b))||{};return defaults({name:b},e)})}else {b=[{name:'value',type:'float'}]}var g=new s(b,f);var e=map(f.get('data'),curry(dataTransform,c));if(a){e=filter(e,curry(dataFilter$1,a))}g.initData(e,null,a?dimValueGetter:function(b){return b.value});return g}registerPreprocessor(function(a){a.markPoint=a.markPoint||{}});c$.extend({type:'markLine',defaultOption:{zlevel:0,z:5,symbol:['circle','arrow'],symbolSize:[8,16],precision:2,tooltip:{trigger:'item'},label:{show:!0,position:'end'},lineStyle:{type:'dashed'},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:'linear'}});var kB=function(f,n,p,a){var j=f.getData();var c=a.type;if(!isArray(a)&&(c==='min'||c==='max'||c==='average'||c==='median'||(a.xAxis!=null||a.yAxis!=null))){var i;var b;if(a.yAxis!=null||a.xAxis!=null){i=n.getAxis(a.yAxis!=null?'y':'x');b=retrieve(a.yAxis,a.xAxis)}else {var m=getAxisInfo$1(a,j,n,f);i=m.valueAxis;var o=getStackedDimension(j,m.valueDataDim);b=numCalculate(j,o,c)}var h=i.dim==='x'?0:1;var k=1-h;var e=clone(a);var g={};e.type=null;e.coord=[];g.coord=[];e.coord[k]=-Infinity;g.coord[k]=Infinity;var l=p.get('precision');if(l>=0&&typeof b==='number'){b=+b.toFixed(Math.min(l,20))}e.coord[h]=g.coord[h]=b;a=[e,g,{type:c,valueIndex:a.valueIndex,value:b}]}a=[dataTransform(f,a[0]),dataTransform(f,a[1]),extend({},a[2])];a[2].type=a[2].type||'';merge(a[2],a[0]);merge(a[2],a[1]);return a};function isInifinity(a){return !isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim(a,b,f,e){var c=1-a;var g=e.dimensions[a];return isInifinity(b[c])&&isInifinity(f[c])&&b[a]===f[a]&&e.getAxis(g).containData(b[a])}function markLineFilter(a,b){if(a.type==='cartesian2d'){var c=b[0].coord;var e=b[1].coord;if(c&&e&&(ifMarkLineHasOnlyDim(1,c,e,a)||ifMarkLineHasOnlyDim(0,c,e,a))){return !0}}return dataFilter$1(a,b[0])&&dataFilter$1(a,b[1])}function updateSingleMarkerEndLayout(b,c,k,i,n){var e=i.coordinateSystem;var j=b.getItemModel(c);var a;var g=parsePercent$1(j.get('x'),n.getWidth());var h=parsePercent$1(j.get('y'),n.getHeight());if(!isNaN(g)&&!isNaN(h)){a=[g,h]}else {if(i.getMarkerPosition){a=i.getMarkerPosition(b.getValues(b.dimensions,c))}else {var f=e.dimensions;var o=b.get(f[0],c);var p=b.get(f[1],c);a=e.dataToPoint([o,p])}if(e.type==='cartesian2d'){var l=e.getAxis('x');var m=e.getAxis('y');var f=e.dimensions;if(isInifinity(b.get(f[0],c))){a[0]=l.toGlobalCoord(l.getExtent()[k?0:1])}else {if(isInifinity(b.get(f[1],c))){a[1]=m.toGlobalCoord(m.getExtent()[k?0:1])}}}if(!isNaN(g)){a[0]=g}if(!isNaN(h)){a[1]=h}}b.setItemLayout(c,a)}e_.extend({type:'markLine',updateTransform:function(c,b,a){b.eachSeries(function(e){var f=e.markLineModel;if(f){var h=f.getData();var g=f.__from;var i=f.__to;g.each(function(f){updateSingleMarkerEndLayout(g,f,!0,e,a);updateSingleMarkerEndLayout(i,f,!1,e,a)});h.each(function(f){h.setItemLayout(f,[g.getItemLayout(f),i.getItemLayout(f)])});this.markerGroupMap.get(e.id).updateLayout()}},this)},renderSeries:function(c,a,p,o){var n=c.coordinateSystem;var l=c.id;var m=c.getData();var k=this.markerGroupMap;var j=k.get(l)||k.set(l,new LineDraw());this.group.add(j.group);var h=createList$2(n,c,a);var e=h.from;var i=h.to;var b=h.line;a.__from=e;a.__to=i;a.setData(b);var g=a.get('symbol');var f=a.get('symbolSize');if(!isArray(g)){g=[g,g]}if(typeof f==='number'){f=[f,f]}h.from.each(function(b){updateDataVisualAndLayout(e,b,!0);updateDataVisualAndLayout(i,b,!1)});b.each(function(f){var g=b.getItemModel(f).get('lineStyle.color');b.setItemVisual(f,{color:g||e.getItemVisual(f,'color')});b.setItemLayout(f,[e.getItemLayout(f),i.getItemLayout(f)]);b.setItemVisual(f,{'fromSymbolSize':e.getItemVisual(f,'symbolSize'),'fromSymbol':e.getItemVisual(f,'symbol'),'toSymbolSize':i.getItemVisual(f,'symbolSize'),'toSymbol':i.getItemVisual(f,'symbol')})});j.updateData(b);h.line.eachItemGraphicEl(function(b,e){b.traverse(function(f){f.dataModel=a})});function updateDataVisualAndLayout(h,i,e){var b=h.getItemModel(i);updateSingleMarkerEndLayout(h,i,e,c,o);h.setItemVisual(i,{symbolSize:b.get('symbolSize')||f[e?0:1],symbol:b.get('symbol',!0)||g[e?0:1],color:b.get('itemStyle.color')||m.getVisual('color')})}j.__keep=!0;j.group.silent=a.get('silent')||c.get('silent')}});function createList$2(a,f,b){var e;if(a){e=map(a&&a.dimensions,function(c){var e=f.getData().getDimensionInfo(f.getData().mapDimension(c))||{};return defaults({name:c},e)})}else {e=[{name:'value',type:'float'}]}var i=new s(e,b);var j=new s(e,b);var g=new s([],b);var c=map(b.get('data'),curry(kB,f,a,b));if(a){c=filter(c,curry(markLineFilter,a))}var h=a?dimValueGetter:function(c){return c.value};i.initData(map(c,function(c){return c[0]}),null,h);j.initData(map(c,function(c){return c[1]}),null,h);g.initData(map(c,function(c){return c[2]}));g.hasItemOption=!0;return {from:i,to:j,line:g}}registerPreprocessor(function(a){a.markLine=a.markLine||{}});c$.extend({type:'markArea',defaultOption:{zlevel:0,z:1,tooltip:{trigger:'item'},animation:!1,label:{show:!0,position:'top'},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:'top'}}}});var kA=function(h,j,k,i){var b=dataTransform(h,i[0]);var c=dataTransform(h,i[1]);var e=retrieve;var f=b.coord;var g=c.coord;f[0]=e(f[0],-Infinity);f[1]=e(f[1],-Infinity);g[0]=e(g[0],Infinity);g[1]=e(g[1],Infinity);var a=mergeAll([{},b,c]);a.coord=[b.coord,c.coord];a.x0=b.x;a.y0=b.y;a.x1=c.x;a.y1=c.y;return a};function isInifinity$1(a){return !isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim$1(c,b,e,f){var a=1-c;return isInifinity$1(b[a])&&isInifinity$1(e[a])}function markAreaFilter(b,a){var c=a.coord[0];var e=a.coord[1];if(b.type==='cartesian2d'){if(c&&e&&(ifMarkLineHasOnlyDim$1(1,c,e,b)||ifMarkLineHasOnlyDim$1(0,c,e,b))){return !0}}return dataFilter$1(b,{coord:c,x:a.x0,y:a.y0})||dataFilter$1(b,{coord:e,x:a.x1,y:a.y1})}function getSingleMarkerEndPoint(e,f,a,i,p){var c=i.coordinateSystem;var m=e.getItemModel(f);var b;var g=parsePercent$1(m.get(a[0]),p.getWidth());var h=parsePercent$1(m.get(a[1]),p.getHeight());if(!isNaN(g)&&!isNaN(h)){b=[g,h]}else {if(i.getMarkerPosition){b=i.getMarkerPosition(e.getValues(a,f))}else {var k=e.get(a[0],f);var l=e.get(a[1],f);var j=[k,l];c.clampData&&c.clampData(j,j);b=c.dataToPoint(j,!0)}if(c.type==='cartesian2d'){var n=c.getAxis('x');var o=c.getAxis('y');var k=e.get(a[0],f);var l=e.get(a[1],f);if(isInifinity$1(k)){b[0]=n.toGlobalCoord(n.getExtent()[a[0]==='x0'?0:1])}else {if(isInifinity$1(l)){b[1]=o.toGlobalCoord(o.getExtent()[a[1]==='y0'?0:1])}}}if(!isNaN(g)){b[0]=g}if(!isNaN(h)){b[1]=h}}return b}var g$=[['x0','y0'],['x1','y0'],['x1','y1'],['x0','y1']];e_.extend({type:'markArea',updateTransform:function(c,a,b){a.eachSeries(function(f){var g=f.markAreaModel;if(g){var e=g.getData();e.each(function(g){var h=map(g$,function(h){return getSingleMarkerEndPoint(e,g,h,f,b)});e.setItemLayout(g,h);var i=e.getItemGraphicEl(g);i.setShape('points',h)})}},this)},renderSeries:function(e,f,l,k){var j=e.coordinateSystem;var h=e.id;var i=e.getData();var g=this.markerGroupMap;var c=g.get(h)||g.set(h,{group:new b()});this.group.add(c.group);c.__keep=!0;var a=createList$3(j,e,f);f.setData(a);a.each(function(b){a.setItemLayout(b,map(g$,function(c){return getSingleMarkerEndPoint(a,b,c,e,k)}));a.setItemVisual(b,{color:i.getVisual('color')})});a.diff(c.__data).add(function(g){var b=new I({shape:{points:a.getItemLayout(g)}});a.setItemGraphicEl(g,b);c.group.add(b)}).update(function(g,h){var b=c.__data.getItemGraphicEl(h);updateProps(b,{shape:{points:a.getItemLayout(g)}},f,g);c.group.add(b);a.setItemGraphicEl(g,b)}).remove(function(b){var a=c.__data.getItemGraphicEl(b);c.group.remove(a)}).execute();a.eachItemGraphicEl(function(b,g){var c=a.getItemModel(g);var j=c.getModel('label');var i=c.getModel('emphasis.label');var h=a.getItemVisual(g,'color');b.useStyle(defaults(c.getModel('itemStyle').getItemStyle(),{fill:modifyAlpha(h,0.4),stroke:h}));b.hoverStyle=c.getModel('emphasis.itemStyle').getItemStyle();setLabelStyle(b.style,b.hoverStyle,j,i,{labelFetcher:f,labelDataIndex:g,defaultText:a.getName(g)||'',isRectText:!0,autoColor:h});setHoverStyle(b,{});b.dataModel=f});c.__data=a;c.group.silent=f.get('silent')||e.get('silent')}});function createList$3(a,g,e){var c;var b;var i=['x0','y0','x1','y1'];if(a){c=map(a&&a.dimensions,function(b){var c=g.getData();var f=c.getDimensionInfo(c.mapDimension(b))||{};return defaults({name:b},f)});b=new s(map(i,function(b,f){return {name:b,type:c[f%2].type}}),e)}else {c=[{name:'value',type:'float'}];b=new s(c,e)}var f=map(e.get('data'),curry(kA,g,a,e));if(a){f=filter(f,curry(markAreaFilter,a))}var h=a?function(c,h,f,b){return c.coord[Math.floor(b/2)][b%2]}:function(b){return b.value};b.initData(f,null,h);b.hasItemOption=!0;return b}registerPreprocessor(function(a){a.markArea=a.markArea||{}});var hD=aq.legend.selector;var jU={all:{type:'all',title:clone(hD.all)},inverse:{type:'inverse',title:clone(hD.inverse)}};var hJ=extendComponentModel({type:'legend.plain',dependencies:['series'],layoutMode:{type:'box',ignoreSize:!0},init:function(a,c,b){this.mergeDefaultAndTheme(a,b);a.selected=a.selected||{};this._updateSelector(a)},mergeOption:function(a){hJ.superCall(this,'mergeOption',a);this._updateSelector(a)},_updateSelector:function(b){var a=b.selector;if(a===!0){a=b.selector=['all','inverse']}if(isArray(a)){each$1(a,function(c,e){isString(c)&&(c={type:c});a[e]=merge(c,jU[c.type])})}},optionUpdated:function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&this.get('selectedMode')==='single'){var c=!1;for(var b=0;b<a.length;b++){var e=a[b].get('name');if(this.isSelected(e)){this.select(e);c=!0;break}}!c&&this.select(a[0].get('name'))}},_updateData:function(c){var b=[];var a=[];c.eachRawSeries(function(e){var i=e.name;a.push(i);var f;if(e.legendDataProvider){var h=e.legendDataProvider();var g=h.mapArray(h.getName);if(!c.isSeriesFiltered(e)){a=a.concat(g)}if(g.length){b=b.concat(g)}else {f=!0}}else {f=!0}if(f&&isNameSpecified(e)){b.push(e.name)}});this._availableNames=a;var f=this.get('data')||b;var e=map(f,function(a){if(typeof a==='string'||typeof a==='number'){a={name:a}}return new Model(a,this,this.ecModel)},this);this._data=e},getData:function(){return this._data},select:function(e){var a=this.option.selected;var b=this.get('selectedMode');if(b==='single'){var c=this._data;each$1(c,function(b){a[b.get('name')]=!1})}a[e]=!0},unSelect:function(a){if(this.get('selectedMode')!=='single'){this.option.selected[a]=!1}},toggleSelected:function(a){var b=this.option.selected;if(!b.hasOwnProperty(a)){b[a]=!0}this[b[a]?'unSelect':'select'](a)},allSelect:function(){var b=this._data;var a=this.option.selected;each$1(b,function(b){a[b.get('name',!0)]=!0})},inverseSelect:function(){var b=this._data;var a=this.option.selected;each$1(b,function(c){var b=c.get('name',!0);if(!a.hasOwnProperty(b)){a[b]=!0}a[b]=!a[b]})},isSelected:function(a){var b=this.option.selected;return !(b.hasOwnProperty(a)&&!b[a])&&indexOf(this._availableNames,a)>=0},getOrient:function(){return this.get('orient')==='vertical'?{index:1,name:'vertical'}:{index:0,name:'horizontal'}},defaultOption:{zlevel:0,z:4,show:!0,orient:'horizontal',left:'center',top:0,align:'auto',backgroundColor:'rgba(0,0,0,0)',borderColor:'#ccc',borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:'#ccc',inactiveBorderColor:'#ccc',itemStyle:{borderWidth:0},textStyle:{color:'#333'},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:' sans-serif',color:'#666',borderWidth:1,borderColor:'#666'},emphasis:{selectorLabel:{show:!0,color:'#eee',backgroundColor:'#666'}},selectorPosition:'auto',selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function legendSelectActionHandler(a,c,g){var b={};var f=a==='toggleSelected';var e;g.eachComponent('legend',function(h){if(f&&e!=null){h[e?'select':'unSelect'](c.name)}else {if(a==='allSelect'||a==='inverseSelect'){h[a]()}else {h[a](c.name);e=h.isSelected(c.name)}}var i=h.getData();each$1(i,function(i){var e=i.get('name');if(e==='\n'||e===''){return}var f=h.isSelected(e);if(b.hasOwnProperty(e)){b[e]=b[e]&&f}else {b[e]=f}})});return a==='allSelect'||a==='inverseSelect'?{selected:b}:{name:c.name,selected:b}}registerAction('legendToggleSelect','legendselectchanged',curry(legendSelectActionHandler,'toggleSelected'));registerAction('legendAllSelect','legendselectall',curry(legendSelectActionHandler,'allSelect'));registerAction('legendInverseSelect','legendinverseselect',curry(legendSelectActionHandler,'inverseSelect'));registerAction('legendSelect','legendselected',curry(legendSelectActionHandler,'select'));registerAction('legendUnSelect','legendunselected',curry(legendSelectActionHandler,'unSelect'));var bC=curry;var iH=each$1;var dq=b;var m_=extendComponentView({type:'legend.plain',newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new dq());this._backgroundEl;this.group.add(this._selectorGroup=new dq());this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(a,n,h){var m=this._isFirstRender;this._isFirstRender=!1;this.resetInner();if(!a.get('show',!0)){return}var c=a.get('align');var g=a.get('orient');if(!c||c==='auto'){c=a.get('left')==='right'&&g==='vertical'?'right':'left'}var f=a.get('selector',!0);var b=a.get('selectorPosition',!0);if(f&&(!b||b==='auto')){b=g==='horizontal'?'end':'start'}this.renderInner(c,a,n,h,f,g,b);var i=a.getBoxLayoutParams();var j={width:h.getWidth(),height:h.getHeight()};var l=a.get('padding');var o=getLayoutRect(i,j,l);var e=this.layoutInner(a,c,o,m,f,b);var k=getLayoutRect(defaults({width:e.width,height:e.height},i),j,l);this.group.attr('position',[k.x-e.x,k.y-e.y]);this.group.add(this._backgroundEl=makeBackground(e,a))},resetInner:function(){this.getContentGroup().removeAll();this._backgroundEl&&this.group.remove(this._backgroundEl);this.getSelectorGroup().removeAll()},renderInner:function(i,f,g,b,j,m,k){var l=this.getContentGroup();var e=createHashMap();var h=f.get('selectedMode');var c=[];g.eachRawSeries(function(a){!a.get('legendHoverLink')&&c.push(a.id)});iH(f.getData(),function(s,t){var n=s.get('name');if(!this.newlineDisabled&&(n===''||n==='\n')){l.add(new dq({newline:!0}));return}var o=g.getSeriesByName(n)[0];if(e.get(n)){return}if(o){var r=o.getData();var q=r.getVisual('color');var p=r.getVisual('borderColor');if(typeof q==='function'){q=q(o.getDataParams(0))}if(typeof p==='function'){p=p(o.getDataParams(0))}var u=r.getVisual('legendSymbol')||'roundRect';var v=r.getVisual('symbol');var w=this._createItem(n,t,s,f,u,v,i,q,p,h);w.on('click',bC(dispatchSelectAction,n,b)).on('mouseover',bC(dispatchHighlightAction,o.name,null,b,c)).on('mouseout',bC(dispatchDownplayAction,o.name,null,b,c));e.set(n,!0)}else {g.eachRawSeries(function(o){if(e.get(n)){return}if(o.legendDataProvider){var a=o.legendDataProvider();var l=a.indexOfName(n);if(l<0){return}var u=a.getItemVisual(l,'color');var q=a.getItemVisual(l,'borderColor');var p='roundRect';var r=this._createItem(n,t,s,f,p,null,i,u,q,h);r.on('click',bC(dispatchSelectAction,n,b)).on('mouseover',bC(dispatchHighlightAction,null,n,b,c)).on('mouseout',bC(dispatchDownplayAction,null,n,b,c));e.set(n,!0)}},this)}if(a){if(!e.get(n)){console.warn(n+' series not exists. Legend data should be same with series name or data name.')}}},this);if(j){this._createSelector(j,f,b,m,k)}},_createSelector:function(c,a,f,h,g){var b=this.getSelectorGroup();iH(c,function(b){createSelectorButton(b)});function createSelectorButton(j){var m=j.type;var i=new e({style:{x:0,y:0,align:'center',verticalAlign:'middle'},onclick:function(){f.dispatchAction({type:m==='all'?'legendAllSelect':'legendInverseSelect'})}});b.add(i);var l=a.getModel('selectorLabel');var k=a.getModel('emphasis.selectorLabel');setLabelStyle(i.style,i.hoverStyle={},l,k,{defaultText:j.title,isRectText:!1});setHoverStyle(i)}},_createItem:function(c,E,p,b,g,f,w,z,v,D){var q=b.get('itemWidth');var l=b.get('itemHeight');var n=b.get('inactiveColor');var t=b.get('inactiveBorderColor');var k=b.get('symbolKeepAspect');var s=b.getModel('itemStyle');var i=b.isSelected(c);var a=new dq();var u=p.getModel('textStyle');var x=p.get('icon');var o=p.getModel('tooltip');var A=o.parentModel;g=x||g;var C=createSymbol(g,0,0,q,l,i?z:n,k==null?!0:k);a.add(setSymbolStyle(C,g,s,v,t,i));if(!x&&f&&(f!==g||f==='none')){var m=l*0.8;if(f==='none'){f='circle'}var B=createSymbol(f,(q-m)/2,(l-m)/2,m,m,i?z:n,k==null?!0:k);a.add(setSymbolStyle(B,f,s,v,t,i))}var G=w==='left'?q+5:-5;var F=w;var j=b.get('formatter');var r=c;if(typeof j==='string'&&j){r=j.replace('{name}',c!=null?c:'')}else {if(typeof j==='function'){r=j(c)}}a.add(new e({style:setTextStyle({},u,{text:r,x:G,y:l/2,textFill:i?u.getTextColor():n,textAlign:F,textVerticalAlign:'middle'})}));var y=new h({shape:a.getBoundingRect(),invisible:!0,tooltip:o.get('show')?extend({content:c,formatter:A.get('formatter',!0)||function(){return c},formatterParams:{componentType:'legend',legendIndex:b.componentIndex,name:c,$vars:['name']}},o.option):null});a.add(y);a.eachChild(function(a){a.silent=!0});y.silent=!D;this.getContentGroup().add(a);setHoverStyle(a);a.__legendDataIndex=E;return a},layoutInner:function(e,s,n,r,q,p){var h=this.getContentGroup();var l=this.getSelectorGroup();bf(e.get('orient'),h,e.get('itemGap'),n.width,n.height);var c=h.getBoundingRect();var m=[-c.x,-c.y];if(q){bf('horizontal',l,e.get('selectorItemGap',!0));var a=l.getBoundingRect();var i=[-a.x,-a.y];var k=e.get('selectorButtonGap',!0);var b=e.getOrient().index;var g=b===0?'width':'height';var f=b===0?'height':'width';var o=b===0?'y':'x';if(p==='end'){i[b]+=c[g]+k}else {m[b]+=a[g]+k}i[1-b]+=c[f]/2-a[f]/2;l.attr('position',i);h.attr('position',m);var j={x:0,y:0};j[g]=c[g]+k+a[g];j[f]=Math.max(c[f],a[f]);j[o]=Math.min(0,a[o]+i[1-b]);return j}else {h.attr('position',m);return this.group.getBoundingRect()}},remove:function(){this.getContentGroup().removeAll();this._isFirstRender=!0}});function setSymbolStyle(e,c,b,g,f,h){var a;if(c!=='line'&&c.indexOf('empty')<0){a=b.getItemStyle();e.style.stroke=g;if(!h){a.stroke=f}}else {a=b.getItemStyle(['borderWidth','borderColor'])}return e.setStyle(a)}function dispatchSelectAction(a,b){b.dispatchAction({type:'legendToggleSelect',name:a})}function dispatchHighlightAction(e,f,a,c){var b=a.getZr().storage.getDisplayList()[0];if(!(b&&b.useHoverLayer)){a.dispatchAction({type:'highlight',seriesName:e,name:f,excludeSeriesId:c})}}function dispatchDownplayAction(e,f,a,c){var b=a.getZr().storage.getDisplayList()[0];if(!(b&&b.useHoverLayer)){a.dispatchAction({type:'downplay',seriesName:e,name:f,excludeSeriesId:c})}}var mh=function(b){var a=b.findComponents({mainType:'legend'});if(a&&a.length){b.filterSeries(function(e){for(var c=0;c<a.length;c++){if(!a[c].isSelected(e.name)){return !1}}return !0})}};registerProcessor(Y.PROCESSOR.SERIES_FILTER,mh);g.registerSubTypeDefaulter('legend',function(){return 'plain'});var gm=hJ.extend({type:'legend.scroll',setScrollDataIndex:function(a){this.option.scrollDataIndex=a},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:'end',pageFormatter:'{current}/{total}',pageIcons:{horizontal:['M0,0L12,-10L12,10z','M0,0L-12,-10L-12,10z'],vertical:['M0,0L20,0L10,-20z','M0,0L20,0L10,20z']},pageIconColor:'#2f4554',pageIconInactiveColor:'#aaa',pageIconSize:15,pageTextStyle:{color:'#333'},animationDurationUpdate:800},init:function(a,c,f,e){var b=getLayoutParams(a);gm.superCall(this,'init',a,c,f,e);mergeAndNormalizeLayoutParams$1(this,a,b)},mergeOption:function(a,b){gm.superCall(this,'mergeOption',a,b);mergeAndNormalizeLayoutParams$1(this,this.option,a)}});function mergeAndNormalizeLayoutParams$1(b,e,f){var c=b.getOrient();var a=[1,1];a[c.index]=0;mergeLayoutParam(e,f,{type:'box',ignoreSize:a})}var iz=b;var fO=['width','height'];var fP=['x','y'];var dX=m_.extend({type:'legend.scroll',newlineDisabled:!0,init:function(){dX.superCall(this,'init');this._currentIndex=0;this.group.add(this._containerGroup=new iz());this._containerGroup.add(this.getContentGroup());this.group.add(this._controllerGroup=new iz());this._showController},resetInner:function(){dX.superCall(this,'resetInner');this._controllerGroup.removeAll();this._containerGroup.removeClipPath();this._containerGroup.__rectSize=null},renderInner:function(j,b,l,g,k,m,i){var h=this;dX.superCall(this,'renderInner',j,b,l,g,k,m,i);var f=this._controllerGroup;var a=b.get('pageIconSize',!0);if(!isArray(a)){a=[a,a]}createPageButton('pagePrev',0);var c=b.getModel('pageTextStyle');f.add(new e({name:'pageText',style:{textFill:c.getTextColor(),font:c.getFont(),textVerticalAlign:'middle',textAlign:'center'},silent:!0}));createPageButton('pageNext',1);function createPageButton(e,o){var n=e+'DataIndex';var c=createIcon(b.get('pageIcons',!0)[b.getOrient().name][o],{onclick:bind(h._pageGo,h,n,b,g)},{x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]});c.name=e;f.add(c)}},layoutInner:function(j,s,n,q,l,p){var k=this.getSelectorGroup();var b=j.getOrient().index;var e=fO[b];var r=fP[b];var f=fO[1-b];var h=fP[1-b];l&&bf('horizontal',k,j.get('selectorItemGap',!0));var i=j.get('selectorButtonGap',!0);var c=k.getBoundingRect();var g=[-c.x,-c.y];var m=clone(n);l&&(m[e]=n[e]-c[e]-i);var a=this._layoutContentAndController(j,q,m,b,e,f,h);if(l){if(p==='end'){g[b]+=a[e]+i}else {var o=c[e]+i;g[b]-=o;a[r]-=o}a[e]+=c[e]+i;g[1-b]+=a[h]+a[f]/2-c[f]/2;a[f]=Math.max(a[f],c[f]);a[h]=Math.min(a[h],c[h]+g[1-b]);k.attr('position',g)}return a},_layoutContentAndController:function(b,w,f,e,a,g,u){var j=this.getContentGroup();var m=this._containerGroup;var l=this._controllerGroup;bf(b.get('orient'),j,b.get('itemGap'),!e?null:f.width,e?null:f.height);bf('horizontal',l,b.get('pageButtonItemGap',!0));var i=j.getBoundingRect();var c=l.getBoundingRect();var n=this._showController=i[a]>f[a];var t=[-i.x,-i.y];if(!w){t[e]=j.position[e]}var s=[0,0];var o=[-c.x,-c.y];var r=retrieve2(b.get('pageButtonGap',!0),b.get('itemGap',!0));if(n){var v=b.get('pageButtonPosition',!0);if(v==='end'){o[e]+=f[a]-c[a]}else {s[e]+=c[a]+r}}o[1-e]+=i[g]/2-c[g]/2;j.attr('position',t);m.attr('position',s);l.attr('position',o);var k={x:0,y:0};k[a]=n?f[a]:i[a];k[g]=Math.max(i[g],c[g]);k[u]=Math.min(0,c[u]+o[1-e]);m.__rectSize=f[a];if(n){var p={x:0,y:0};p[a]=Math.max(f[a]-c[a]-r,0);p[g]=k[g];m.setClipPath(new h({shape:p}));m.__rectSize=p[a]}else {l.eachChild(function(c){c.attr({invisible:!0,silent:!0})})}var q=this._getPageInfo(b);q.pageIndex!=null&&updateProps(j,{position:q.contentPosition},n?b:!1);this._updatePageInfoView(b,q);return k},_pageGo:function(e,b,c){var a=this._getPageInfo(b)[e];a!=null&&c.dispatchAction({type:'legendScroll',scrollDataIndex:a,legendId:b.id})},_updatePageInfoView:function(b,c){var e=this._controllerGroup;each$1(['pagePrev','pageNext'],function(g){var f=c[g+'DataIndex']!=null;var a=e.childOfName(g);if(a){a.setStyle('fill',f?b.get('pageIconColor',!0):b.get('pageIconInactiveColor',!0));a.cursor=f?'pointer':'default'}});var g=e.childOfName('pageText');var a=b.get('pageFormatter');var f=c.pageIndex;var h=f!=null?f+1:0;var i=c.pageCount;g&&a&&g.setStyle('text',isString(a)?a.replace('{current}',h).replace('{total}',i):a({current:h,total:i}))},_getPageInfo:function(m){var q=m.get('scrollDataIndex',!0);var l=this.getContentGroup();var k=this._containerGroup.__rectSize;var h=m.getOrient().index;var r=fO[h];var s=fP[h];var j=this._findTargetItemIndex(q);var i=l.children();var n=i[j];var o=i.length;var p=!o?0:1;var c={contentPosition:l.position.slice(),pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!n){return c}var g=getItemInfo(n);c.contentPosition[h]=-g.s;for(var f=j+1,a=g,e=g,b=null;f<=o;++f){b=getItemInfo(i[f]);if(!b&&e.e>a.s+k||b&&!intersect(b,a.s)){if(e.i>a.i){a=e}else {a=b}if(a){if(c.pageNextDataIndex==null){c.pageNextDataIndex=a.i}++c.pageCount}}e=b}for(var f=j-1,a=g,e=g,b=null;f>=-1;--f){b=getItemInfo(i[f]);if((!b||!intersect(e,b.s))&&a.i<e.i){e=a;if(c.pagePrevDataIndex==null){c.pagePrevDataIndex=a.i}++c.pageCount;++c.pageIndex}a=b}return c;function getItemInfo(a){if(a){var b=a.getBoundingRect();var c=b[s]+a.position[h];return {s:c,e:c+b[r],i:a.__legendDataIndex}}}function intersect(a,b){return a.e>=b&&a.s<=b+k}},_findTargetItemIndex:function(c){var b;var e=this.getContentGroup();var a;if(this._showController){e.eachChild(function(g,f){var e=g.__legendDataIndex;if(a==null&&e!=null){a=f}if(e===c){b=f}})}return b!=null?b:a}});registerAction('legendScroll','legendscroll',function(b,c){var a=b.scrollDataIndex;a!=null&&c.eachComponent({mainType:'legend',subType:'scroll',query:b},function(e){e.setScrollDataIndex(a)})});var oS=eF.extend({type:'dataZoom.slider',layoutMode:'box',defaultOption:{show:!0,right:'ph',top:'ph',width:'ph',height:'ph',left:null,bottom:null,backgroundColor:'rgba(47,69,84,0)',dataBackground:{lineStyle:{color:'#2f4554',width:0.5,opacity:0.3},areaStyle:{color:'rgba(47,69,84,0.3)',opacity:0.3}},borderColor:'#ddd',fillerColor:'rgba(167,183,204,0.4)',handleIcon:'M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z',handleSize:'100%',handleStyle:{color:'#a7b7cc'},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:'auto',realtime:!0,zoomLock:!1,textStyle:{color:'#333'}}});var dC=h;var a1=linearMap;var fM=asc;var ap=bind;var fB=each$1;var f3=7;var jt=1;var d_=30;var b4='horizontal';var ip='vertical';var np=5;var js=['line','bar','candlestick','scatter'];var ex=eM.extend({type:'dataZoom.slider',init:function(b,a){this._displayables={};this._orient;this._range;this._handleEnds;this._size;this._handleWidth;this._handleHeight;this._location;this._dragging;this._dataShadowInfo;this.api=a},render:function(b,c,e,a){ex.superApply(this,'render',arguments);createOrUpdate(this,'_dispatchZoomAction',this.dataZoomModel.get('throttle'),'fixRate');this._orient=b.get('orient');if(this.dataZoomModel.get('show')===!1){this.group.removeAll();return}if(!a||a.type!=='dataZoom'||a.from!==this.uid){this._buildView()}this._updateView()},remove:function(){ex.superApply(this,'remove',arguments);clear(this,'_dispatchZoomAction')},dispose:function(){ex.superApply(this,'dispose',arguments);clear(this,'_dispatchZoomAction')},_buildView:function(){var a=this.group;a.removeAll();this._resetLocation();this._resetInterval();var c=this._displayables.barGroup=new b();this._renderBackground();this._renderHandle();this._renderDataShadow();a.add(c);this._positionGroup()},_resetLocation:function(){var f=this.dataZoomModel;var g=this.api;var a=this._findCoordRect();var e={width:g.getWidth(),height:g.getHeight()};var h=this._orient===b4?{right:e.width-a.x-a.width,top:e.height-d_-f3,width:a.width,height:d_}:{right:f3,top:a.y,width:d_,height:a.height};var c=getLayoutParams(f.option);each$1(['right','top','width','height'],function(a){if(c[a]==='ph'){c[a]=h[a]}});var b=getLayoutRect(c,e,f.padding);this._location={x:b.x,y:b.y};this._size=[b.width,b.height];this._orient===ip&&this._size.reverse()},_positionGroup:function(){var f=this.group;var h=this._location;var c=this._orient;var e=this.dataZoomModel.getFirstTargetAxisModel();var b=e&&e.get('inverse');var g=this._displayables.barGroup;var a=(this._dataShadowInfo||{}).otherAxisInverse;g.attr(c===b4&&!b?{scale:a?[1,1]:[1,-1]}:c===b4&&b?{scale:a?[-1,1]:[-1,-1]}:c===ip&&!b?{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2});var i=f.getBoundingRect([g]);f.attr('position',[h.x-i.x,h.y-i.y])},_getViewExtent:function(){return [0,this._size[0]]},_renderBackground:function(){var c=this.dataZoomModel;var a=this._size;var b=this._displayables.barGroup;b.add(new dC({silent:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:c.get('backgroundColor')},z2:-40}));b.add(new dC({shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:'transparent'},z2:0,onclick:bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var l=this._dataShadowInfo=this._prepareDataShadowInfo();if(!l){return}var g=this._size;var j=l.series;var f=j.getRawData();var k=j.getShadowDim?j.getShadowDim():l.otherDim;if(k==null){return}var a=f.getDataExtent(k);var m=(a[1]-a[0])*0.3;a=[a[0]-m,a[1]+m];var p=[0,g[1]];var q=[0,g[0]];var b=[[g[0],0],[0,0]];var c=[];var o=q[1]/(f.count()-1);var e=0;var n=Math.round(f.count()/g[0]);var i;f.each([k],function(g,j){if(n>0&&j%n){e+=o;return}var f=g==null||isNaN(g)||g==='';var h=f?0:a1(g,a,p,!0);if(f&&!i&&j){b.push([b[b.length-1][0],0]);c.push([c[c.length-1][0],0])}else {if(!f&&i){b.push([e,0]);c.push([e,0])}}b.push([e,h]);c.push([e,h]);e+=o;i=f});var h=this.dataZoomModel;this._displayables.barGroup.add(new I({shape:{points:b},style:defaults({fill:h.get('dataBackgroundColor')},h.getModel('dataBackground.areaStyle').getAreaStyle()),silent:!0,z2:-20}));this._displayables.barGroup.add(new L({shape:{points:c},style:h.getModel('dataBackground.lineStyle').getLineStyle(),silent:!0,z2:-19}))},_prepareDataShadowInfo:function(){var a=this.dataZoomModel;var c=a.get('showDataShadow');if(c===!1){return}var b;var e=this.ecModel;a.eachTargetAxis(function(f,g){var h=a.getAxisProxy(f.name,g).getTargetSeriesModels();each$1(h,function(a){if(b){return}if(c!==!0&&indexOf(js,a.get('type'))<0){return}var k=e.getComponent(f.axis,g).axis;var h=getOtherDim(f.name);var i;var j=a.coordinateSystem;if(h!=null&&j.getOtherAxis){i=j.getOtherAxis(k).inverse}h=a.getData().mapDimension(h);b={thisAxis:k,series:a,thisDim:f.name,otherDim:h,otherAxisInverse:i}},this)},this);return b},_renderHandle:function(){var b=this._displayables;var h=b.handles=[];var g=b.handleLabels=[];var c=this._displayables.barGroup;var f=this._size;var a=this.dataZoomModel;c.add(b.filler=new dC({draggable:!0,cursor:getCursor(this._orient),drift:ap(this._onDragMove,this,'all'),onmousemove:function(a){aN(a.event)},ondragstart:ap(this._showDataInfo,this,!0),ondragend:ap(this._onDragEnd,this),onmouseover:ap(this._showDataInfo,this,!0),onmouseout:ap(this._showDataInfo,this,!1),style:{fill:a.get('fillerColor'),textPosition:'inside'}}));c.add(new dC({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:f[0],height:f[1]},style:{stroke:a.get('dataBackgroundColor')||a.get('borderColor'),lineWidth:jt,fill:'rgba(0,0,0,0)'}}));fB([0,1],function(f){var b=createIcon(a.get('handleIcon'),{cursor:getCursor(this._orient),draggable:!0,drift:ap(this._onDragMove,this,f),onmousemove:function(a){aN(a.event)},ondragend:ap(this._onDragEnd,this),onmouseover:ap(this._showDataInfo,this,!0),onmouseout:ap(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2});var k=b.getBoundingRect();this._handleHeight=parsePercent$1(a.get('handleSize'),this._size[1]);this._handleWidth=k.width/k.height*this._handleHeight;b.setStyle(a.getModel('handleStyle').getItemStyle());var j=a.get('handleColor');if(j!=null){b.style.fill=j}c.add(h[f]=b);var i=a.textStyleModel;this.group.add(g[f]=new e({silent:!0,invisible:!0,style:{x:0,y:0,text:'',textVerticalAlign:'middle',textAlign:'center',textFill:i.getTextColor(),textFont:i.getFont()},z2:10}))},this)},_resetInterval:function(){var b=this._range=this.dataZoomModel.getPercentRange();var a=this._getViewExtent();this._handleEnds=[a1(b[0],[0,100],a,!0),a1(b[1],[0,100],a,!0)]},_updateInterval:function(i,j){var g=this.dataZoomModel;var e=this._handleEnds;var a=this._getViewExtent();var c=g.findRepresentativeAxisProxy().getMinMaxSpan();var b=[0,100];a2(j,e,a,g.get('zoomLock')?'all':i,c.minSpan!=null?a1(c.minSpan,b,a,!0):null,c.maxSpan!=null?a1(c.maxSpan,b,a,!0):null);var f=this._range;var h=this._range=fM([a1(e[0],a,b,!0),a1(e[1],a,b,!0)]);return !f||f[0]!==h[0]||f[1]!==h[1]},_updateView:function(f){var b=this._displayables;var c=this._handleEnds;var a=fM(c.slice());var e=this._size;fB([0,1],function(g){var h=b.handles[g];var a=this._handleHeight;h.attr({scale:[a/2,a/2],position:[c[g],e[1]/2-a/2]})},this);b.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:e[1]});this._updateDataInfo(f)},_updateDataInfo:function(l){var b=this.dataZoomModel;var e=this._displayables;var k=e.handleLabels;var g=this._orient;var f=['',''];if(b.get('showDetail')){var a=b.findRepresentativeAxisProxy();if(a){var i=a.getAxisModel().axis;var h=this._range;var c=l?a.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:a.getDataValueWindow();f=[this._formatLabel(c[0],i),this._formatLabel(c[1],i)]}}var j=fM(this._handleEnds.slice());setLabel.call(this,0);setLabel.call(this,1);function setLabel(a){var b=getTransform(e.handles[a].parent,this.group);var c=transformDirection(a===0?'right':'left',b);var i=this._handleWidth/2+np;var h=applyTransform$1([j[a]+(a===0?-i:i),this._size[1]/2],b);k[a].setStyle({x:h[0],y:h[1],textVerticalAlign:g===b4?'middle':c,textAlign:g===b4?c:'center',text:f[a]})}},_formatLabel:function(a,e){var g=this.dataZoomModel;var b=g.get('labelFormatter');var c=g.get('labelPrecision');if(c==null||c==='auto'){c=e.getPixelPrecision()}var f=a==null||isNaN(a)?'':e.type==='category'||e.type==='time'?e.scale.getLabel(Math.round(a)):a.toFixed(Math.min(c,20));return isFunction$1(b)?b(a,f):isString(b)?b.replace('{value}',f):f},_showDataInfo:function(a){a=this._dragging||a;var b=this._displayables.handleLabels;b[0].attr('invisible',!a);b[1].attr('invisible',!a)},_onDragMove:function(c,g,h){this._dragging=!0;var b=this._displayables.barGroup.getLocalTransform();var f=applyTransform$1([g,h],b,!0);var e=this._updateInterval(c,f[0]);var a=this.dataZoomModel.get('realtime');this._updateView(!a);e&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1;this._showDataInfo(!1);var a=this.dataZoomModel.get('realtime');!a&&this._dispatchZoomAction()},_onClickPanelClick:function(e){var c=this._size;var a=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(a[0]<0||a[0]>c[0]||a[1]<0||a[1]>c[1]){return}var b=this._handleEnds;var g=(b[0]+b[1])/2;var f=this._updateInterval('all',a[0]-g);this._updateView();f&&this._dispatchZoomAction()},_dispatchZoomAction:function(){var a=this._range;this.api.dispatchAction({type:'dataZoom',from:this.uid,dataZoomId:this.dataZoomModel.id,start:a[0],end:a[1]})},_findCoordRect:function(){var a;fB(this.getTargetCoordInfo(),function(b){if(!a&&b.length){var c=b[0].model.coordinateSystem;a=c.getRect&&c.getRect()}});if(!a){var c=this.api.getWidth();var b=this.api.getHeight();a={x:c*0.2,y:b*0.2,width:c*0.6,height:b*0.6}}return a}});function getOtherDim(a){var b={x:'y',y:'x',radius:'angle',angle:'radius'};return b[a]}function getCursor(a){return a==='vertical'?'ns-resize':'ew-resize'}eF.extend({type:'dataZoom.inside',defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var iW='\x00_ec_dataZoom_roams';function register$2(g,b){var f=giveStore$1(g);var c=b.dataZoomId;var e=b.coordId;each$1(f,function(f,h){var a=f.dataZoomInfos;if(a[c]&&indexOf(b.allCoordIds,e)<0){delete a[c];f.count--}});cleanStore(f);var a=f[e];if(!a){a=f[e]={coordId:e,dataZoomInfos:{},count:0};a.controller=createController(g,a);a.dispatchAction=curry(dispatchAction$1,g)}!a.dataZoomInfos[c]&&a.count++;a.dataZoomInfos[c]=b;var h=mergeControllerParams(a.dataZoomInfos);a.controller.enable(h.controlType,h.opt);a.controller.setPointerChecker(b.containsPoint);createOrUpdate(a,'dispatchAction',b.dataZoomModel.get('throttle',!0),'fixRate')}function unregister$1(c,a){var b=giveStore$1(c);each$1(b,function(b){b.controller.dispose();var e=b.dataZoomInfos;if(e[a]){delete e[a];b.count--}});cleanStore(b)}function generateCoordId(a){return a.type+'\x00_'+a.id}function giveStore$1(b){var a=b.getZr();return a[iW]||(a[iW]={})}function createController(c,a){var b=new RoamController(c.getZr());each$1(['pan','zoom','scrollMove'],function(e){b.on(e,function(f){var b=[];each$1(a.dataZoomInfos,function(g){if(!f.isAvailableBehavior(g.dataZoomModel.option)){return}var i=(g.getRange||{})[e];var h=i&&i(a.controller,f);!g.dataZoomModel.get('disabled',!0)&&h&&b.push({dataZoomId:g.dataZoomId,start:h[0],end:h[1]})});b.length&&a.dispatchAction(b)})});return b}function cleanStore(a){each$1(a,function(b,c){if(!b.count){b.controller.dispose();delete a[c]}})}function dispatchAction$1(b,a){b.dispatchAction({type:'dataZoom',batch:a})}function mergeControllerParams(f){var a;var e='type_';var c={'type_true':2,'type_move':1,'type_false':0,'type_undefined':-1};var b=!0;each$1(f,function(i){var g=i.dataZoomModel;var h=g.get('disabled',!0)?!1:g.get('zoomLock',!0)?'move':!0;if(c[e+h]>c[e+a]){a=h}b&=g.get('preventDefaultMouseMove',!0)});return {controlType:a,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!b}}}var ok=bind;var g7=eM.extend({type:'dataZoom.inside',init:function(a,b){this._range},render:function(a,c,b,e){g7.superApply(this,'render',arguments);this._range=a.getPercentRange();each$1(this.getTargetCoordInfo(),function(f,g){var h=map(f,function(h){return generateCoordId(h.model)});each$1(f,function(j){var i=j.model;var k={};each$1(['pan','zoom','scrollMove'],function(h){k[h]=ok(mq[h],this,j,g)},this);register$2(b,{coordId:generateCoordId(i),allCoordIds:h,containsPoint:function(l,h,k){return i.coordinateSystem.containPoint([h,k])},dataZoomId:a.id,dataZoomModel:a,getRange:k})},this)},this)},dispose:function(){unregister$1(this.api,this.dataZoomModel.id);g7.superApply(this,'dispose',arguments);this._range=null}});var mq={zoom:function(i,k,l,f){var e=this._range;var a=e.slice();var h=i.axisModels[0];if(!h){return}var b=ej[k](null,[f.originX,f.originY],h,l,i);var c=(b.signal>0?b.pixelStart+b.pixelLength-b.pixel:b.pixel-b.pixelStart)/b.pixelLength*(a[1]-a[0])+a[0];var j=Math.max(1/f.scale,0);a[0]=(a[0]-c)*j+c;a[1]=(a[1]-c)*j+c;var g=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();a2(0,a,[0,100],0,g.minSpan,g.maxSpan);this._range=a;if(e[0]!==a[0]||e[1]!==a[1]){return a}},pan:makeMover(function(c,g,h,e,f,a){var b=ej[e]([a.oldX,a.oldY],[a.newX,a.newY],g,f,h);return b.signal*(c[1]-c[0])*b.pixel/b.pixelLength}),scrollMove:makeMover(function(b,g,h,e,f,a){var c=ej[e]([0,0],[a.scrollDelta,a.scrollDelta],g,f,h);return c.signal*(b[1]-b[0])*a.scrollDelta})};function makeMover(a){return function(f,g,i,j){var c=this._range;var b=c.slice();var e=f.axisModels[0];if(!e){return}var h=a(b,e,f,g,i,j);a2(h,b,[0,100],'all');this._range=b;if(c[0]!==b[0]||c[1]!==b[1]){return b}}}var ej={grid:function(b,f,g,i,h){var e=g.axis;var a={};var c=h.model.coordinateSystem.getRect();b=b||[0,0];if(e.dim==='x'){a.pixel=f[0]-b[0];a.pixelLength=c.width;a.pixelStart=c.x;a.signal=e.inverse?1:-1}else {a.pixel=f[1]-b[1];a.pixelLength=c.height;a.pixelStart=c.y;a.signal=e.inverse?-1:1}return a},polar:function(b,c,h,k,j){var i=h.axis;var a={};var e=j.model.coordinateSystem;var f=e.getRadiusAxis().getExtent();var g=e.getAngleAxis().getExtent();b=b?e.pointToCoord(b):[0,0];c=e.pointToCoord(c);if(h.mainType==='radiusAxis'){a.pixel=c[0]-b[0];a.pixelLength=f[1]-f[0];a.pixelStart=f[0];a.signal=i.inverse?1:-1}else {a.pixel=c[1]-b[1];a.pixelLength=g[1]-g[0];a.pixelStart=g[0];a.signal=i.inverse?-1:1}return a},singleAxis:function(b,f,g,i,h){var e=g.axis;var c=h.model.coordinateSystem.getRect();var a={};b=b||[0,0];if(e.orient==='horizontal'){a.pixel=f[0]-b[0];a.pixelLength=c.width;a.pixelStart=c.x;a.signal=e.inverse?1:-1}else {a.pixel=f[1]-b[1];a.pixelLength=c.height;a.pixelStart=c.y;a.signal=e.inverse?-1:1}return a}};var iI=each$1;var hi=function(b){var a=b&&b.visualMap;if(!isArray(a)){a=a?[a]:[]}iI(a,function(a){if(!a){return}if(has$2(a,'splitList')&&!has$2(a,'pieces')){a.pieces=a.splitList;delete a.splitList}var c=a.pieces;if(c&&isArray(c)){iI(c,function(c){if(isObject$1(c)){if(has$2(c,'start')&&!has$2(c,'min')){c.min=c.start}if(has$2(c,'end')&&!has$2(c,'max')){c.max=c.end}}})}})};function has$2(a,b){return a&&a.hasOwnProperty&&a.hasOwnProperty(b)}g.registerSubTypeDefaulter('visualMap',function(a){return !a.categories&&(!(a.pieces?a.pieces.length>0:a.splitNumber>0)||a.calculable)?'continuous':'piecewise'});var gZ=Y.VISUAL.COMPONENT;registerVisual(gZ,{createOnAllSeries:!0,reset:function(a,c){var b=[];c.eachComponent('visualMap',function(e){var f=a.pipelineContext;if(!e.isTargetSeries(a)||f&&f.large){return}b.push(incrementalApplyVisual(e.stateList,e.targetVisuals,bind(e.getValueState,e),e.getDataDimension(a.getData())))});return b}});registerVisual(gZ,{createOnAllSeries:!0,reset:function(a,e){var c=a.getData();var b=[];e.eachComponent('visualMap',function(f){if(f.isTargetSeries(a)){var g=f.getVisualMeta(bind(getColorVisual,null,a,f))||{stops:[],outerColors:[]};var i=f.getDataDimension(c);var h=c.getDimensionInfo(i);if(h!=null){g.dimension=h.index;b.push(g)}}});a.getData().setVisual('visualMeta',b)}});function getColorVisual(i,h,l,j){var e=h.targetVisuals[j];var c=k.prepareVisualTypes(e);var a={color:i.getData().getVisual('color')};for(var b=0,m=c.length;b<m;b++){var g=c[b];var f=e[g==='opacity'?'__alphaForOpacity':g];f&&f.applyVisual(l,getVisual,setVisual)}return a.color;function getVisual(b){return a[b]}function setVisual(c,b){a[c]=b}}var eJ={get:function(c,e,b){var a=clone((k7[c]||{})[e]);return b?isArray(a)?a[a.length-1]:a:a}};var k7={color:{active:['#006edd','#e0ffff'],inactive:['rgba(0,0,0,0)']},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[0.3,1],inactive:[0,0]},colorLightness:{active:[0.9,0.5],inactive:[0,0]},colorAlpha:{active:[0.3,1],inactive:[0,0]},opacity:{active:[0.3,1],inactive:[0,0]},symbol:{active:['circle','roundRect','diamond'],inactive:['none']},symbolSize:{active:[10,50],inactive:[0,0]}};var hQ=k.mapVisual;var m8=k.eachVisual;var nI=isArray;var fC=each$1;var oE=asc;var mN=linearMap;var fK=noop;var cM=extendComponentModel({type:'visualMap',dependencies:['series'],stateList:['inRange','outOfRange'],replacableOptionKeys:['inRange','outOfRange','target','controller','color'],dataBound:[-Infinity,Infinity],layoutMode:{type:'box',ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:'all',min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:'vertical',backgroundColor:'rgba(0,0,0,0)',borderColor:'#ccc',contentColor:'#5793f3',inactiveColor:'#aaa',borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:'#333'}},init:function(b,c,a){this._dataExtent;this.targetVisuals={};this.controllerVisuals={};this.textStyleModel;this.itemSize;this.mergeDefaultAndTheme(b,a)},optionUpdated:function(b,c){var a=this.option;if(!f.canvasSupported){a.realtime=!1}!c&&replaceVisualOption(a,b,this.replacableOptionKeys);this.textStyleModel=this.getModel('textStyle');this.resetItemSize();this.completeVisualOption()},resetVisual:function(a){var b=this.stateList;a=bind(a,this);this.controllerVisuals=createVisualMappings(this.option.controller,b,a);this.targetVisuals=createVisualMappings(this.option.target,b,a)},getTargetSeriesIndices:function(){var a=this.option.seriesIndex;var b=[];if(a==null||a==='all'){this.ecModel.eachSeries(function(c,a){b.push(a)})}else {b=normalizeToArray(a)}return b},eachTargetSeries:function(a,b){each$1(this.getTargetSeriesIndices(),function(c){a.call(b,this.ecModel.getSeriesByIndex(c))},this)},isTargetSeries:function(b){var a=!1;this.eachTargetSeries(function(c){c===b&&(a=!0)});return a},formatValueText:function(a,i,f){var h=this.option;var j=h.precision;var g=this.dataBound;var e=h.formatter;var c;var b;f=f||['<','>'];if(isArray(a)){a=a.slice();c=!0}b=i?a:c?[toFixed(a[0]),toFixed(a[1])]:toFixed(a);if(isString(e)){return e.replace('{value}',c?b[0]:b).replace('{value2}',c?b[1]:b)}else {if(isFunction$1(e)){return c?e(a[0],a[1]):e(a)}}if(c){if(a[0]===g[0]){return f[0]+' '+b[1]}else {if(a[1]===g[1]){return f[1]+' '+b[0]}else {return b[0]+' - '+b[1]}}}else {return b}function toFixed(b){return b===g[0]?'min':b===g[1]?'max':(+b).toFixed(Math.min(j,20))}},resetExtent:function(){var a=this.option;var b=oE([a.min,a.max]);this._dataExtent=b},getDataDimension:function(a){var b=this.option.dimension;var g=a.dimensions;if(b==null&&!g.length){return}if(b!=null){return a.getDimension(b)}var e=a.dimensions;for(var c=e.length-1;c>=0;c--){var f=e[c];var h=a.getDimensionInfo(f);if(!h.isCalculationCoord){return f}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var g=this.ecModel;var a=this.option;var f={inRange:a.inRange,outOfRange:a.outOfRange};var e=a.target||(a.target={});var c=a.controller||(a.controller={});merge(e,f);merge(c,f);var b=this.isCategory();completeSingle.call(this,e);completeSingle.call(this,c);completeInactive.call(this,e,'inRange','outOfRange');completeController.call(this,c);function completeSingle(c){if(nI(a.color)&&!c.inRange){c.inRange={color:a.color.slice().reverse()}}c.inRange=c.inRange||{color:g.get('gradientColor')};fC(this.stateList,function(a){var e=c[a];if(isString(e)){var f=eJ.get(e,'active',b);if(f){c[a]={};c[a][e]=f}else {delete c[a]}}},this)}function completeInactive(c,g,e){var f=c[g];var a=c[e];if(f&&!a){a=c[e]={};fC(f,function(i,f){if(!k.isValidType(f)){return}var h=eJ.get(f,'inactive',b);if(h!=null){a[f]=h;if(f==='color'&&!a.hasOwnProperty('opacity')&&!a.hasOwnProperty('colorAlpha')){a.opacity=[0,0]}}})}}function completeController(a){var f=(a.inRange||{}).symbol||(a.outOfRange||{}).symbol;var c=(a.inRange||{}).symbolSize||(a.outOfRange||{}).symbolSize;var e=this.get('inactiveColor');fC(this.stateList,function(k){var h=this.itemSize;var g=a[k];if(!g){g=a[k]={color:b?e:[e]}}if(g.symbol==null){g.symbol=f&&clone(f)||(b?'roundRect':['roundRect'])}if(g.symbolSize==null){g.symbolSize=c&&clone(c)||(b?h[0]:[h[0],h[0]])}g.symbol=hQ(g.symbol,function(b){return b==='none'||b==='square'?'roundRect':b});var i=g.symbolSize;if(i!=null){var j=-Infinity;m8(i,function(b){b>j&&(j=b)});g.symbolSize=hQ(i,function(b){return mN(b,[0,j],[0,h[0]],!0)})}},this)}},resetItemSize:function(){this.itemSize=[parseFloat(this.get('itemWidth')),parseFloat(this.get('itemHeight'))]},isCategory:function(){return !!this.option.categories},setSelected:fK,getValueState:fK,getVisualMeta:fK});var gE=[20,140];var gU=cM.extend({type:'visualMap.continuous',defaultOption:{align:'auto',calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(a,b){gU.superApply(this,'optionUpdated',arguments);this.resetExtent();this.resetVisual(function(c){c.mappingMethod='linear';c.dataExtent=this.getExtent()});this._resetRange()},resetItemSize:function(){gU.superApply(this,'resetItemSize',arguments);var a=this.itemSize;this._orient==='horizontal'&&a.reverse();(a[0]==null||isNaN(a[0]))&&(a[0]=gE[0]);(a[1]==null||isNaN(a[1]))&&(a[1]=gE[1])},_resetRange:function(){var b=this.getExtent();var a=this.option.range;if(!a||a.auto){b.auto=1;this.option.range=b}else {if(isArray(a)){if(a[0]>a[1]){a.reverse()}a[0]=Math.max(a[0],b[0]);a[1]=Math.min(a[1],b[1])}}},completeVisualOption:function(){cM.prototype.completeVisualOption.apply(this,arguments);each$1(this.stateList,function(b){var a=this.option.controller[b].symbolSize;if(a&&a[0]!==a[1]){a[0]=0}},this)},setSelected:function(a){this.option.range=a.slice();this._resetRange()},getSelected:function(){var b=this.getExtent();var a=asc((this.get('range')||[]).slice());a[0]>b[1]&&(a[0]=b[1]);a[1]>b[1]&&(a[1]=b[1]);a[0]<b[0]&&(a[0]=b[0]);a[1]<b[0]&&(a[1]=b[0]);return a},getValueState:function(c){var a=this.option.range;var b=this.getExtent();return (a[0]<=b[0]||a[0]<=c)&&(a[1]>=b[1]||c<=a[1])?'inRange':'outOfRange'},findTargetDataIndices:function(b){var a=[];this.eachTargetSeries(function(e){var c=[];var f=e.getData();f.each(this.getDataDimension(f),function(a,f){b[0]<=a&&a<=b[1]&&c.push(f)},this);a.push({seriesId:e.id,dataIndex:c})},this);return a},getVisualMeta:function(j){var e=getColorStopValues(this,'outOfRange',this.getExtent());var a=getColorStopValues(this,'inRange',this.option.range.slice());var b=[];function setStop(a,c){b.push({value:a,color:j(a,c)})}var g=0;var c=0;var k=a.length;var i=e.length;for(;c<i&&(!a.length||e[c]<=a[0]);c++){if(e[c]<a[g]){setStop(e[c],'outOfRange')}}for(var f=1;g<k;g++,f=0){f&&b.length&&setStop(a[g],'outOfRange');setStop(a[g],'inRange')}for(var f=1;c<i;c++){if(!a.length||a[a.length-1]<e[c]){if(f){b.length&&setStop(b[b.length-1].value,'outOfRange');f=0}setStop(e[c],'outOfRange')}}var h=b.length;return {stops:b,outerColors:[h?b[0].color:'transparent',h?b[h-1].color:'transparent']}}});function getColorStopValues(h,i,a){if(a[0]===a[1]){return a.slice()}var e=200;var g=(a[1]-a[0])/e;var c=a[0];var b=[];for(var f=0;f<=e&&c<a[1];f++){b.push(c);c+=g}b.push(a[1]);return b}var hp=extendComponentView({type:'visualMap',autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(a,b){this.ecModel=a;this.api=b;this.visualMapModel},render:function(a,b,e,c){this.visualMapModel=a;if(a.get('show')===!1){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(e){var b=this.visualMapModel;var a=aR(b.get('padding')||0);var c=e.getBoundingRect();e.add(new h({z2:-1,silent:!0,shape:{x:c.x-a[3],y:c.y-a[0],width:c.width+a[3]+a[1],height:c.height+a[0]+a[2]},style:{fill:b.get('backgroundColor'),stroke:b.get('borderColor'),lineWidth:b.get('borderWidth')}}))},getControllerVisual:function(g,c,e){e=e||{};var j=e.forceState;var b=this.visualMapModel;var a={};if(c==='symbol'){a.symbol=b.get('itemSymbol')}if(c==='color'){var h=b.get('contentColor');a.color=h}function getter(b){return a[b]}function setter(f,b){a[f]=b}var f=b.controllerVisuals[j||b.getValueState(g)];var i=k.prepareVisualTypes(f);each$1(i,function(a){var b=f[a];if(e.convertOpacityToAlpha&&a==='opacity'){a='colorAlpha';b=f.__alphaForOpacity}if(k.dependsOn(a,c)){b&&b.applyVisual(g,getter,setter)}});return a[c]},positionGroup:function(b){var c=this.visualMapModel;var a=this.api;positionElement(b,c.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},doRender:noop});function getItemAlign(m,l,o){var b=m.option;var f=b.align;if(f!=null&&f!=='auto'){return f}var k={width:l.getWidth(),height:l.getHeight()};var g=b.orient==='horizontal'?1:0;var j=[['left','right','width'],['top','bottom','height']];var h=j[g];var n=[0,null,10];var e={};for(var a=0;a<3;a++){e[j[1-g][a]]=n[a];e[h[a]]=a===2?o[0]:b[h[a]]}var c=[['x','width',3],['y','height',0]][g];var i=getLayoutRect(e,k,b.padding);return h[(i.margin[c[2]]||0)+i[c[0]]+i[c[1]]*0.5<k[c[1]]*0.5?0:1]}function makeHighDownBatch(b,a){each$1(b||[],function(c){if(c.dataIndex!=null){c.dataIndexInside=c.dataIndex;c.dataIndex=null}c.highlightKey='visualMap'+(a?a.componentIndex:'')});return b}var aj=linearMap;var n9=each$1;var dl=Math.min;var cb=Math.max;var k1=12;var g6=6;var le=hp.extend({type:'visualMap.continuous',init:function(){le.superApply(this,'init',arguments);this._shapes={};this._dataInterval=[];this._handleEnds=[];this._orient;this._useHandle;this._hoverLinkDataIndices=[];this._dragging;this._hovering},doRender:function(b,c,e,a){if(!a||a.type!=='selectDataRange'||a.from!==this.uid){this._buildView()}},_buildView:function(){this.group.removeAll();var b=this.visualMapModel;var a=this.group;this._orient=b.get('orient');this._useHandle=b.get('calculable');this._resetInterval();this._renderBar(a);var c=b.get('text');this._renderEndsText(a,c,0);this._renderEndsText(a,c,1);this._updateView(!0);this.renderBackground(a);this._updateView();this._enableHoverLinkToSeries();this._enableHoverLinkFromSeries();this.positionGroup(a)},_renderEndsText:function(n,g,b){if(!g){return}var a=g[1-b];a=a!=null?a+'':'';var f=this.visualMapModel;var k=f.get('textGap');var i=f.itemSize;var h=this._shapes.barGroup;var j=this._applyTransform([i[0]/2,b===0?-k:i[1]+k],h);var m=this._applyTransform(b===0?'bottom':'top',h);var l=this._orient;var c=this.visualMapModel.textStyleModel;this.group.add(new e({style:{x:j[0],y:j[1],textVerticalAlign:l==='horizontal'?'middle':m,textAlign:l==='horizontal'?m:'center',text:a,textFont:c.getFont(),textFill:c.getTextColor()}}))},_renderBar:function(k){var e=this.visualMapModel;var b=this._shapes;var c=e.itemSize;var h=this._orient;var i=this._useHandle;var f=getItemAlign(e,this.api,c);var a=b.barGroup=this._createBarGroup(f);a.add(b.outOfRange=createPolygon());a.add(b.inRange=createPolygon(null,i?getCursor$1(this._orient):null,bind(this._dragHandle,this,'all',!1),bind(this._dragHandle,this,'all',!0)));var j=e.textStyleModel.getTextRect('');var g=cb(j.width,j.height);if(i){b.handleThumbs=[];b.handleLabels=[];b.handleLabelPoints=[];this._createHandle(a,0,c,g,h,f);this._createHandle(a,1,c,g,h,f)}this._createIndicator(a,c,g,h);k.add(a)},_createHandle:function(m,a,n,b,k){var j=bind(this._dragHandle,this,a,!1);var i=bind(this._dragHandle,this,a,!0);var c=createPolygon(createHandlePoints(a,b),getCursor$1(this._orient),j,i);c.position[0]=n[0];m.add(c);var g=this.visualMapModel.textStyleModel;var h=new e({draggable:!0,drift:j,onmousemove:function(c){aN(c.event)},ondragend:i,style:{x:0,y:0,text:'',textFont:g.getFont(),textFill:g.getTextColor()}});this.group.add(h);var l=[k==='horizontal'?b/2:b*1.5,k==='horizontal'?a===0?-(b*1.5):b*1.5:a===0?-b/2:b/2];var f=this._shapes;f.handleThumbs[a]=c;f.handleLabelPoints[a]=l;f.handleLabels[a]=h},_createIndicator:function(h,i,j,k){var a=createPolygon([[0,0]],'move');a.position[0]=i[0];a.attr({invisible:!0,silent:!0});h.add(a);var f=this.visualMapModel.textStyleModel;var c=new e({silent:!0,invisible:!0,style:{x:0,y:0,text:'',textFont:f.getFont(),textFill:f.getTextColor()}});this.group.add(c);var g=[k==='horizontal'?j/2:g6+3,0];var b=this._shapes;b.indicator=a;b.indicatorLabel=c;b.indicatorLabelPoint=g},_dragHandle:function(b,a,e,f){if(!this._useHandle){return}this._dragging=!a;if(!a){var c=this._applyTransform([e,f],this._shapes.barGroup,!0);this._updateInterval(b,c[1]);this._updateView()}if(a===!this.visualMapModel.get('realtime')){this.api.dispatchAction({type:'selectDataRange',from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()})}if(a){!this._hovering&&this._clearHoverLinkToSeries()}else {if(useHoverLinkOnHandle(this.visualMapModel)){this._doHoverLinkToSeries(this._handleEnds[b],!1)}}},_resetInterval:function(){var a=this.visualMapModel;var b=this._dataInterval=a.getSelected();var c=a.getExtent();var e=[0,a.itemSize[1]];this._handleEnds=[aj(b[0],c,e,!0),aj(b[1],c,e,!0)]},_updateInterval:function(g,c){c=c||0;var e=this.visualMapModel;var a=this._handleEnds;var b=[0,e.itemSize[1]];a2(c,a,b,g,0);var f=e.getExtent();this._dataInterval=[aj(a[0],b,f,!0),aj(a[1],b,f,!0)]},_updateView:function(i){var g=this.visualMapModel;var c=g.getExtent();var h=this._shapes;var e=[0,g.itemSize[1]];var f=i?e:this._handleEnds;var a=this._createBarVisual(this._dataInterval,c,f,'inRange');var b=this._createBarVisual(c,c,e,'outOfRange');h.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape('points',a.barPoints);h.outOfRange.setStyle({fill:b.barColor,opacity:b.opacity}).setShape('points',b.barPoints);this._updateHandle(f,a)},_createBarVisual:function(b,i,g,f){var c={forceState:f,convertOpacityToAlpha:!0};var a=this._makeColorGradient(b,c);var e=[this.getControllerVisual(b[0],'symbolSize',c),this.getControllerVisual(b[1],'symbolSize',c)];var h=this._createBarPoints(g,e);return {barColor:new aV(0,0,0,1,a),barPoints:h,handlesColor:[a[0].color,a[a.length-1].color]}},_makeColorGradient:function(a,f){var e=100;var b=[];var h=(a[1]-a[0])/e;b.push({color:this.getControllerVisual(a[0],'color',f),offset:0});for(var c=1;c<e;c++){var g=a[0]+h*c;if(g>a[1]){break}b.push({color:this.getControllerVisual(g,'color',f),offset:c/e})}b.push({color:this.getControllerVisual(a[1],'color',f),offset:1});return b},_createBarPoints:function(a,c){var b=this.visualMapModel.itemSize;return [[b[0]-c[0],a[0]],[b[0],a[0]],[b[0],a[1]],[b[0]-c[1],a[1]]]},_createBarGroup:function(a){var e=this._orient;var c=this.visualMapModel.get('inverse');return new b(e==='horizontal'&&!c?{scale:a==='bottom'?[1,1]:[-1,1],rotation:Math.PI/2}:e==='horizontal'&&c?{scale:a==='bottom'?[-1,1]:[1,1],rotation:-Math.PI/2}:e==='vertical'&&!c?{scale:a==='left'?[1,-1]:[-1,-1]}:{scale:a==='left'?[1,1]:[-1,1]})},_updateHandle:function(g,c){if(!this._useHandle){return}var a=this._shapes;var b=this.visualMapModel;var f=a.handleThumbs;var e=a.handleLabels;n9([0,1],function(h){var i=f[h];i.setStyle('fill',c.handlesColor[h]);i.position[1]=g[h];var j=applyTransform$1(a.handleLabelPoints[h],getTransform(i,this.group));e[h].setStyle({x:j[0],y:j[1],text:b.formatValueText(this._dataInterval[h]),textVerticalAlign:'middle',textAlign:this._applyTransform(this._orient==='horizontal'?h===0?'bottom':'top':'left',a.barGroup)})},this)},_showIndicator:function(g,p,e,m){var c=this.visualMapModel;var n=c.getExtent();var i=c.itemSize;var o=[0,i[1]];var l=aj(g,n,o,!0);var b=this._shapes;var a=b.indicator;if(!a){return}a.position[1]=l;a.attr('invisible',!1);a.setShape('points',createIndicatorPoints(!!e,m,l,i[1]));var r={convertOpacityToAlpha:!0};var q=this.getControllerVisual(g,'color',r);a.setStyle('fill',q);var h=applyTransform$1(b.indicatorLabelPoint,getTransform(a,this.group));var f=b.indicatorLabel;f.attr('invisible',!1);var k=this._applyTransform('left',b.barGroup);var j=this._orient;f.setStyle({text:(e?e:'')+c.formatValueText(p),textVerticalAlign:j==='horizontal'?k:'middle',textAlign:j==='horizontal'?'center':k,x:h[0],y:h[1]})},_enableHoverLinkToSeries:function(){var a=this;this._shapes.barGroup.on('mousemove',function(e){a._hovering=!0;if(!a._dragging){var c=a.visualMapModel.itemSize;var b=a._applyTransform([e.offsetX,e.offsetY],a._shapes.barGroup,!0,!0);b[1]=dl(cb(0,b[1]),c[1]);a._doHoverLinkToSeries(b[1],0<=b[0]&&b[0]<=c[0])}}).on('mouseout',function(){a._hovering=!1;!a._dragging&&a._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var a=this.api.getZr();if(this.visualMapModel.option.hoverLink){a.on('mouseover',this._hoverLinkFromSeriesMouseOver,this);a.on('mouseout',this._hideIndicator,this)}else {this._clearHoverLinkFromSeries()}},_doHoverLinkToSeries:function(f,k){var a=this.visualMapModel;var m=a.itemSize;if(!a.option.hoverLink){return}var b=[0,m[1]];var h=a.getExtent();f=dl(cb(b[0],f),b[1]);var e=getHalfHoverLinkSize(a,h,b);var i=[f-e,f+e];var g=aj(f,b,h,!0);var c=[aj(i[0],b,h,!0),aj(i[1],b,h,!0)];i[0]<b[0]&&(c[0]=-Infinity);i[1]>b[1]&&(c[1]=Infinity);if(k){if(c[0]===-Infinity){this._showIndicator(g,c[1],'< ',e)}else {if(c[1]===Infinity){this._showIndicator(g,c[0],'> ',e)}else {this._showIndicator(g,g,' ',e)}}}var n=this._hoverLinkDataIndices;var l=[];if(k||useHoverLinkOnHandle(a)){l=this._hoverLinkDataIndices=a.findTargetDataIndices(c)}var j=compressBatches(n,l);this._dispatchHighDown('downplay',makeHighDownBatch(j[0],a));this._dispatchHighDown('highlight',makeHighDownBatch(j[1],a))},_hoverLinkFromSeriesMouseOver:function(g){var a=g.target;var c=this.visualMapModel;if(!a||a.dataIndex==null){return}var e=this.ecModel.getSeriesByIndex(a.seriesIndex);if(!c.isTargetSeries(e)){return}var f=e.getData(a.dataType);var b=f.get(c.getDataDimension(f),a.dataIndex,!0);if(!isNaN(b)){this._showIndicator(b,b)}},_hideIndicator:function(){var a=this._shapes;a.indicator&&a.indicator.attr('invisible',!0);a.indicatorLabel&&a.indicatorLabel.attr('invisible',!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown('downplay',makeHighDownBatch(a,this.visualMapModel));a.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var a=this.api.getZr();a.off('mouseover',this._hoverLinkFromSeriesMouseOver);a.off('mouseout',this._hideIndicator)},_applyTransform:function(a,c,e,f){var b=getTransform(c,f?null:this.group);return an[isArray(a)?'applyTransform':'transformDirection'](a,b,e)},_dispatchHighDown:function(b,a){a&&a.length&&this.api.dispatchAction({type:b,batch:a})},dispose:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()}});function createPolygon(e,c,a,b){return new I({shape:{points:e},draggable:!!a,cursor:c,drift:a,onmousemove:function(f){aN(f.event)},ondragend:b})}function createHandlePoints(b,a){return b===0?[[0,0],[a,0],[a,-a]]:[[0,0],[a,0],[a,a]]}function createIndicatorPoints(e,a,b,c){return e?[[0,-dl(a,cb(b,0))],[g6,0],[0,dl(a,cb(c-b,0))]]:[[0,0],[5,-5],[5,5]]}function getHalfHoverLinkSize(c,e,f){var a=k1/2;var b=c.get('hoverLinkDataSize');if(b){a=aj(b,e,f,!0)/2}return a}function useHoverLinkOnHandle(b){var a=b.get('hoverLinkOnHandle');return !!(a==null?b.get('realtime'):a)}function getCursor$1(a){return a==='vertical'?'ns-resize':'ew-resize'}var l4={type:'selectDataRange',event:'dataRangeSelected',update:'update'};registerAction(l4,function(a,b){b.eachComponent({mainType:'visualMap',query:a},function(c){c.setSelected(a.selected)})});registerPreprocessor(hi);var lj=cM.extend({type:'visualMap.piecewise',defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:'auto',itemWidth:20,itemHeight:14,itemSymbol:'roundRect',pieceList:null,categories:null,splitNumber:5,selectedMode:'multiple',itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(b,c){lj.superApply(this,'optionUpdated',arguments);this._pieceList=[];this.resetExtent();var e=this._mode=this._determineMode();mp[this._mode].call(this);this._resetSelected(b,c);var a=this.option.categories;this.resetVisual(function(f,g){if(e==='categories'){f.mappingMethod='category';f.categories=clone(a)}else {f.dataExtent=this.getExtent();f.mappingMethod='piecewise';f.pieceList=map(this._pieceList,function(a){var a=clone(a);if(g!=='inRange'){a.visual=null}return a})}})},completeVisualOption:function(){var a=this.option;var b={};var c=k.listVisualTypes();var e=this.isCategory();each$1(a.pieces,function(a){each$1(c,function(c){if(a.hasOwnProperty(c)){b[c]=1}})});each$1(b,function(f,b){var c=0;each$1(this.stateList,function(e){c|=has(a,e,b)||has(a.target,e,b)},this);!c&&each$1(this.stateList,function(c){(a[c]||(a[c]={}))[b]=eJ.get(b,c==='inRange'?'active':'inactive',e)})},this);function has(a,b,c){return a&&a[b]&&(isObject$1(a[b])?a[b].hasOwnProperty(c):a[b]===c)}cM.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(f,g){var b=this.option;var c=this._pieceList;var a=(g?b:f).selected||{};b.selected=a;each$1(c,function(c,e){var b=this.getSelectedMapKey(c);if(!a.hasOwnProperty(b)){a[b]=!0}},this);if(b.selectedMode==='single'){var e=!1;each$1(c,function(c,h){var b=this.getSelectedMapKey(c);if(a[b]){e?a[b]=!1:e=!0}},this)}},getSelectedMapKey:function(a){return this._mode==='categories'?a.value+'':a.index+''},getPieceList:function(){return this._pieceList},_determineMode:function(){var a=this.option;return a.pieces&&a.pieces.length>0?'pieces':this.option.categories?'categories':'splitNumber'},setSelected:function(a){this.option.selected=clone(a)},getValueState:function(b){var a=k.findPieceIndex(b,this._pieceList);return a!=null?this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?'inRange':'outOfRange':'outOfRange'},findTargetDataIndices:function(b){var a=[];this.eachTargetSeries(function(e){var c=[];var f=e.getData();f.each(this.getDataDimension(f),function(f,a){var g=k.findPieceIndex(f,this._pieceList);g===b&&c.push(a)},this);a.push({seriesId:e.id,dataIndex:c})},this);return a},getRepresentValue:function(c){var a;if(this.isCategory()){a=c.value}else {if(c.value!=null){a=c.value}else {var b=c.interval||[];a=b[0]===-Infinity&&b[1]===Infinity?0:(b[0]+b[1])/2}}return a},getVisualMeta:function(h){if(this.isCategory()){return}var g=[];var c=[];var f=this;function setStop(a,e){var i=f.getRepresentValue({interval:a});if(!e){e=f.getValueState(i)}var b=h(i,e);if(a[0]===-Infinity){c[0]=b}else {if(a[1]===Infinity){c[1]=b}else {g.push({value:a[0],color:b},{value:a[1],color:b})}}}var a=this._pieceList.slice();if(!a.length){a.push({interval:[-Infinity,Infinity]})}else {var b=a[0].interval[0];b!==-Infinity&&a.unshift({interval:[-Infinity,b]});b=a[a.length-1].interval[1];b!==Infinity&&a.push({interval:[b,Infinity]})}var e=-Infinity;each$1(a,function(b){var a=b.interval;if(a){a[0]>e&&setStop([e,a[0]],'outOfRange');setStop(a.slice());e=a[1]}},this);return {stops:g,outerColors:c}}});var mp={splitNumber:function(){var c=this.option;var g=this._pieceList;var h=Math.min(c.precision,20);var b=this.getExtent();var a=c.splitNumber;a=Math.max(parseInt(a,10),1);c.splitNumber=a;var e=(b[1]-b[0])/a;while(+e.toFixed(h)!==e&&h<5){h++}c.precision=h;e=+e.toFixed(h);var f=0;if(c.minOpen){g.push({index:f++,interval:[-Infinity,b[0]],close:[0,0]})}for(var i=b[0],j=f+a;f<j;i+=e){var k=f===a-1?b[1]:i+e;g.push({index:f++,interval:[i,k],close:[1,1]})}if(c.maxOpen){g.push({index:f++,interval:[b[1],Infinity],close:[0,0]})}reformIntervals(g);each$1(g,function(a){a.text=this.formatValueText(a.interval)},this)},categories:function(){var a=this.option;each$1(a.categories,function(a){this._pieceList.push({text:this.formatValueText(a,!0),value:a})},this);normalizeReverse(a,this._pieceList)},pieces:function(){var c=this.option;var b=this._pieceList;each$1(c.pieces,function(f,l){if(!isObject$1(f)){f={value:f}}var g={text:'',index:l};if(f.label!=null){g.text=f.label}if(f.hasOwnProperty('value')){var m=g.value=f.value;g.interval=[m,m];g.close=[1,1]}else {var c=g.interval=[];var h=g.close=[0,0];var o=[1,0,1];var n=[-Infinity,Infinity];var j=[];for(var e=0;e<2;e++){var p=[['gte','gt','min'],['lte','lt','max']][e];for(var i=0;i<3&&c[e]==null;i++){c[e]=f[p[i]];h[e]=o[i];j[e]=i===2}c[e]==null&&(c[e]=n[e])}j[0]&&c[1]===Infinity&&(h[0]=0);j[1]&&c[0]===-Infinity&&(h[1]=0);if(a){if(c[0]>c[1]){console.warn('Piece '+l+'is illegal: '+c+' lower bound should not greater then uppper bound.')}}if(c[0]===c[1]&&h[0]&&h[1]){g.value=c[0]}}g.visual=k.retrieveVisuals(f);b.push(g)},this);normalizeReverse(c,b);reformIntervals(b);each$1(b,function(a){var b=a.close;var c=[['<',''][b[1]],['>',''][b[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,c)},this)}};function normalizeReverse(a,c){var b=a.inverse;if(a.orient==='vertical'?!b:b){c.reverse()}}var oP=hp.extend({type:'visualMap.piecewise',doRender:function(){var c=this.group;c.removeAll();var a=this.visualMapModel;var l=a.get('textGap');var j=a.textStyleModel;var n=j.getFont();var m=j.getTextColor();var h=this._getItemAlign();var f=a.itemSize;var k=this._getViewData();var g=k.endsText;var i=retrieve(a.get('showLabel',!0),!g);g&&this._renderEndsText(c,g[0],f,i,h);each$1(k.viewPieceList,renderItem,this);g&&this._renderEndsText(c,g[1],f,i,h);bf(a.get('orient'),c,a.get('itemGap'));this.renderBackground(c);this.positionGroup(c);function renderItem(o){var j=o.piece;var g=new b();g.onclick=bind(this._onItemClick,this,j);this._enableHoverLink(g,o.indexInModelPieceList);var k=a.getRepresentValue(j);this._createItemSymbol(g,k,[0,0,f[0],f[1]]);if(i){var p=this.visualMapModel.getValueState(k);g.add(new e({style:{x:h==='right'?-l:f[0]+l,y:f[1]/2,text:j.text,textVerticalAlign:'middle',textAlign:h,textFont:n,textFill:m,opacity:p==='outOfRange'?0.5:1}}))}c.add(g)}},_enableHoverLink:function(b,a){b.on('mouseover',bind(onHoverLink,this,'highlight')).on('mouseout',bind(onHoverLink,this,'downplay'));function onHoverLink(e){var c=this.visualMapModel;c.option.hoverLink&&this.api.dispatchAction({type:e,batch:makeHighDownBatch(c.findTargetDataIndices(a),c)})}},_getItemAlign:function(){var b=this.visualMapModel;var c=b.option;if(c.orient==='vertical'){return getItemAlign(b,this.api,b.itemSize)}else {var a=c.align;if(!a||a==='auto'){a='left'}return a}},_renderEndsText:function(j,i,a,h,f){if(!i){return}var g=new b();var c=this.visualMapModel.textStyleModel;g.add(new e({style:{x:h?f==='right'?a[0]:0:a[0]/2,y:a[1]/2,textVerticalAlign:'middle',textAlign:h?f:'center',text:i,textFont:c.getFont(),textFill:c.getTextColor()}}));j.add(g)},_getViewData:function(){var a=this.visualMapModel;var c=map(a.getPieceList(),function(b,a){return {piece:b,indexInModelPieceList:a}});var b=a.get('text');var f=a.get('orient');var e=a.get('inverse');if(f==='horizontal'?e:!e){c.reverse()}else {if(b){b=b.slice().reverse()}}return {viewPieceList:c,endsText:b}},_createItemSymbol:function(c,b,a){c.add(createSymbol(this.getControllerVisual(b,'symbol'),a[0],a[1],a[2],a[3],this.getControllerVisual(b,'color')))},_onItemClick:function(f){var c=this.visualMapModel;var e=c.option;var a=clone(e.selected);var b=c.getSelectedMapKey(f);if(e.selectedMode==='single'){a[b]=!0;each$1(a,function(e,c){a[c]=c===b})}else {a[b]=!a[b]}this.api.dispatchAction({type:'selectDataRange',from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}});registerPreprocessor(hi);var jk='urn:schemas-microsoft-com:vml';var jl=typeof window==='undefined'?null:window;var ij=!1;var J=jl&&jl.document;function createNode(a){return eS(a)}var eS;if(J&&!f.canvasSupported){try{!J.namespaces.zrvml&&J.namespaces.add('zrvml',jk);eS=function(a){return J.createElement('<zrvml:'+a+' class="zrvml">')}}catch(o3){eS=function(a){return J.createElement('<'+a+' xmlns="'+jk+'" class="zrvml">')}}}function initVML(){if(ij||!J){return}ij=!0;var a=J.styleSheets;if(a.length<31){J.createStyleSheet().addRule('.zrvml','behavior:url(#default#VML)')}else {a[0].addRule('.zrvml','behavior:url(#default#VML)')}}var bb=y.CMD;var j=Math.round;var cs=Math.sqrt;var oD=Math.abs;var jh=Math.cos;var jj=Math.sin;var fc=Math.max;if(!f.canvasSupported){var p=',';var dZ='progid:DXImageTransform.Microsoft';var n=21600;var D=n/2;var mB=100000;var nV=1000;var er=function(a){a.style.cssText='position:absolute;left:0;top:0;width:1px;height:1px;';a.coordsize=n+','+n;a.coordorigin='0,0'};var j9=function(a){return String(a).replace(/&/g,'&amp;').replace(/"/g,'&quot;')};var iQ=function(c,b,a){return 'rgb('+[c,b,a].join(',')+')'};var ab=function(a,b){if(b&&a&&b.parentNode!==a){a.appendChild(b)}};var cn=function(a,b){if(b&&a&&b.parentNode===a){a.removeChild(b)}};var e9=function(a,c,b){return (parseFloat(a)||0)*mB+(parseFloat(c)||0)*nV+b};var hg=parsePercent;var gB=function(c,e,b){var a=parse(e);b=+b;if(isNaN(b)){b=1}if(a){c.color=iQ(a[0],a[1],a[2]);c.opacity=b*a[3]}};var kP=function(b){var a=parse(b);return [iQ(a[0],a[1],a[2]),a[3]]};var lF=function(b,l,o){var a=l.fill;if(a!=null){if(a instanceof X){var i;var f=0;var A=[0,0];var s=0;var x=1;var m=o.getBoundingRect();var k=m.width;var j=m.height;if(a.type==='linear'){i='gradient';var e=o.transform;var c=[a.x*k,a.y*j];var p=[a.x2*k,a.y2*j];if(e){applyTransform(c,c,e);applyTransform(p,p,e)}var G=p[0]-c[0];var H=p[1]-c[1];f=Math.atan2(G,H)*180/Math.PI;if(f<0){f+=360}if(f<1.0E-6){f=0}}else {i='gradientradial';var c=[a.x*k,a.y*j];var e=o.transform;var y=o.scale;var u=k;var r=j;A=[(c[0]-m.x)/u,(c[1]-m.y)/r];if(e){applyTransform(c,c,e)}u/=y[0]*n;r/=y[1]*n;var w=fc(u,r);s=2*0/w;x=2*a.r/w-s}var t=a.colorStops.slice();t.sort(function(a,c){return a.offset-c.offset});var q=t.length;var g=[];var z=[];for(var h=0;h<q;h++){var B=t[h];var v=kP(B.color);z.push(B.offset*x+s+' '+v[0]);if(h===0||h===q-1){g.push(v)}}if(q>=2){var E=g[0][0];var F=g[1][0];var C=g[0][1]*l.opacity;var D=g[1][1]*l.opacity;b.type=i;b.method='none';b.focus='100%';b.angle=f;b.color=E;b.color2=F;b.colors=z.join(',');b.opacity=D;b.opacity2=C}if(i==='radial'){b.focusposition=A.join(',')}}else {gB(b,a,l.opacity)}}};var kY=function(b,a){if(a.lineDash){b.dashstyle=a.lineDash.join(' ')}if(a.stroke!=null&&!(a.stroke instanceof X)){gB(b,a.stroke,a.opacity)}};var cC=function(c,e,b,g){var f=e==='fill';var a=c.getElementsByTagName(e)[0];if(b[e]!=null&&b[e]!=='none'&&(f||!f&&b.lineWidth)){c[f?'filled':'stroked']='true';if(b[e] instanceof X){cn(c,a)}if(!a){a=createNode(e)}f?lF(a,b,g):kY(a,b);ab(c,a)}else {c[f?'filled':'stroked']='false';cn(c,a)}};var H=[[],[],[]];var kS=function(N,c){var U=bb.M;var S=bb.C;var T=bb.L;var R=bb.A;var O=bb.Q;var q=[];var i;var u;var M;var a;var l;var m;var b=N.data;var P=N.len();for(a=0;a<P;){M=b[a++];u='';i=0;switch(M){case U:u=' m ';i=1;l=b[a++];m=b[a++];H[0][0]=l;H[0][1]=m;break;case T:u=' l ';i=1;l=b[a++];m=b[a++];H[0][0]=l;H[0][1]=m;break;case O:case S:u=' c ';i=3;var g=b[a++];var h=b[a++];var B=b[a++];var F=b[a++];var C;var G;if(M===O){C=B;G=F;B=(B+2*g)/3;F=(F+2*h)/3;g=(l+2*g)/3;h=(m+2*h)/3}else {C=b[a++];G=b[a++]};H[0][0]=g;H[0][1]=h;H[1][0]=B;H[1][1]=F;H[2][0]=C;H[2][1]=G;l=C;m=G;break;case R:var w=0;var x=0;var s=1;var t=1;var L=0;if(c){w=c[4];x=c[5];s=cs(c[0]*c[0]+c[1]*c[1]);t=cs(c[2]*c[2]+c[3]*c[3]);L=Math.atan2(-c[1]/t,c[0]/s)};var r=b[a++];var k=b[a++];var z=b[a++];var A=b[a++];var y=b[a++]+L;var K=b[a++]+y+L;a++;var o=b[a++];var v=r+jh(y)*z;var E=k+jj(y)*A;var g=r+jh(K)*z;var h=k+jj(K)*A;var Q=o?' wa ':' at ';if(Math.abs(v-g)<1.0E-4){if(Math.abs(K-y)>0.01){if(o){v+=270/n}}else {if(Math.abs(E-k)<1.0E-4){if(o&&v<r||!o&&v>r){h-=270/n}else {h+=270/n}}else {if(o&&E<k||!o&&E>k){g+=270/n}else {g-=270/n}}}};q.push(Q,j(((r-z)*s+w)*n-D),p,j(((k-A)*t+x)*n-D),p,j(((r+z)*s+w)*n-D),p,j(((k+A)*t+x)*n-D),p,j((v*s+w)*n-D),p,j((E*t+x)*n-D),p,j((g*s+w)*n-D),p,j((h*t+x)*n-D));l=g;m=h;break;case bb.R:var e=H[0];var f=H[1];e[0]=b[a++];e[1]=b[a++];f[0]=e[0]+b[a++];f[1]=e[1]+b[a++];if(c){applyTransform(e,e,c);applyTransform(f,f,c)};e[0]=j(e[0]*n-D);f[0]=j(f[0]*n-D);e[1]=j(e[1]*n-D);f[1]=j(f[1]*n-D);q.push(' m ',e[0],p,e[1],' l ',f[0],p,e[1],' l ',f[0],p,f[1],' l ',e[0],p,f[1]);break;case bb.Z:q.push(' x ');}if(i>0){q.push(u);for(var I=0;I<i;I++){var J=H[I];c&&applyTransform(J,J,c);q.push(j(J[0]*n-D),p,j(J[1]*n-D),I<i-1?p:'')}}}return q.join('')};Path.prototype.brushVML=function(f){var b=this.style;var a=this._vmlEl;if(!a){a=createNode('shape');er(a);this._vmlEl=a}cC(a,'fill',b,this);cC(a,'stroke',b,this);var e=this.transform;var i=e!=null;var h=a.getElementsByTagName('stroke')[0];if(h){var g=b.lineWidth;if(i&&!b.strokeNoScale){var j=e[0]*e[3]-e[1]*e[2];g*=cs(oD(j))}h.weight=g+'px'}var c=this.path||(this.path=new y());if(this.__dirtyPath){c.beginPath();c.subPixelOptimize=!1;this.buildPath(c,this.shape);c.toStatic();this.__dirtyPath=!1}a.path=kS(c,this.transform);a.style.zIndex=e9(this.zlevel,this.z,this.z2);ab(f,a);if(b.text!=null){this.drawRectText(f,this.getBoundingRect())}else {this.removeRectText(f)}};Path.prototype.onRemove=function(a){cn(a,this._vmlEl);this.removeRectText(a)};Path.prototype.onAdd=function(a){ab(a,this._vmlEl);this.appendRectText(a)};var oc=function(a){return typeof a==='object'&&a.tagName&&a.tagName.toUpperCase()==='IMG'};ZImage.prototype.brushVML=function(H){var e=this.style;var c=e.image;var k;var i;if(oc(c)){var E=c.src;if(E===this._imageSrc){k=this._imageWidth;i=this._imageHeight}else {var s=c.runtimeStyle;var N=s.width;var M=s.height;s.width='auto';s.height='auto';k=c.width;i=c.height;s.width=N;s.height=M;this._imageSrc=E;this._imageWidth=k;this._imageHeight=i}c=E}else {if(c===this._imageSrc){k=this._imageWidth;i=this._imageHeight}}if(!c){return}var n=e.x||0;var o=e.y||0;var m=e.width;var l=e.height;var w=e.sWidth;var v=e.sHeight;var K=e.sx||0;var L=e.sy||0;var O=w&&v;var h=this._vmlEl;if(!h){h=J.createElement('div');er(h);this._vmlEl=h}var t=h.style;var G=!1;var a;var f=1;var g=1;if(this.transform){a=this.transform;f=cs(a[0]*a[0]+a[1]*a[1]);g=cs(a[2]*a[2]+a[3]*a[3]);G=a[1]||a[2]}if(G){var x=[n,o];var y=[n+m,o];var z=[n,o+l];var A=[n+m,o+l];applyTransform(x,x,a);applyTransform(y,y,a);applyTransform(z,z,a);applyTransform(A,A,a);var P=fc(x[0],y[0],z[0],A[0]);var Q=fc(x[1],y[1],z[1],A[1]);var F=[];F.push('M11=',a[0]/f,p,'M12=',a[2]/g,p,'M21=',a[1]/f,p,'M22=',a[3]/g,p,'Dx=',j(n*f+a[4]),p,'Dy=',j(o*g+a[5]));t.padding='0 '+j(P)+'px '+j(Q)+'px 0';t.filter=dZ+'.Matrix('+F.join('')+', SizingMethod=clip)'}else {if(a){n=n*f+a[4];o=o*g+a[5]}t.filter='';t.left=j(n)+'px';t.top=j(o)+'px'}var r=this._imageEl;var b=this._cropEl;if(!r){r=J.createElement('div');this._imageEl=r}var q=r.style;if(O){if(!(k&&i)){var u=new Image();var D=this;u.onload=function(){u.onload=null;k=u.width;i=u.height;q.width=j(f*k*m/w)+'px';q.height=j(g*i*l/v)+'px';D._imageWidth=k;D._imageHeight=i;D._imageSrc=c};u.src=c}else {q.width=j(f*k*m/w)+'px';q.height=j(g*i*l/v)+'px'}if(!b){b=J.createElement('div');b.style.overflow='hidden';this._cropEl=b}var B=b.style;B.width=j((m+K*m/w)*f);B.height=j((l+L*l/v)*g);B.filter=dZ+'.Matrix(Dx='+-K*m/w*f+',Dy='+-L*l/v*g+')';if(!b.parentNode){h.appendChild(b)}if(r.parentNode!==b){b.appendChild(r)}}else {q.width=j(f*m)+'px';q.height=j(g*l)+'px';h.appendChild(r);if(b&&b.parentNode){h.removeChild(b);this._cropEl=null}}var C='';var I=e.opacity;if(I<1){C+='.Alpha(opacity='+j(I*100)+') '}C+=dZ+'.AlphaImageLoader(src='+c+', SizingMethod=scale)';q.filter=C;h.style.zIndex=e9(this.zlevel,this.z,this.z2);ab(H,h);if(e.text!=null){this.drawRectText(H,this.getBoundingRect())}};ZImage.prototype.onRemove=function(a){cn(a,this._vmlEl);this._vmlEl=null;this._cropEl=null;this._imageEl=null;this.removeRectText(a)};ZImage.prototype.onAdd=function(a){ab(a,this._vmlEl);this.appendRectText(a)};var dV='normal';var ez={};var d0=0;var j4=100;var oo=document.createElement('div');var mc=function(c){var b=ez[c];if(!b){if(d0>j4){d0=0;ez={}}var a=oo.style;var e;try{a.font=c;e=a.fontFamily.split(',')[0]}catch(o4){}b={style:a.fontStyle||dV,variant:a.fontVariant||dV,weight:a.fontWeight||dV,size:parseFloat(a.fontSize||12)|0,family:e||'Microsoft YaHei'};ez[c]=b;d0++}return b};var aw;$override$1('measureText',function(c,b){var a=J;if(!aw){aw=a.createElement('div');aw.style.cssText='position:absolute;top:-20000px;left:0;'+'padding:0;margin:0;border:none;white-space:pre;';J.body.appendChild(aw)}try{aw.style.font=b}catch(o4){}aw.innerHTML='';aw.appendChild(a.createTextNode(c));return {width:aw.offsetWidth}});var fh=new BoundingRect();var l7=function(D,c,n,w){var a=this.style;this.__dirty&&normalizeTextStyle(a,!0);var e=a.text;e!=null&&(e+='');if(!e){return}if(a.rich){var z=parseRichText(e,a);e=[];for(var x=0;x<z.lines.length;x++){var B=z.lines[x].tokens;var A=[];for(var y=0;y<B.length;y++){A.push(B[y].text)}e.push(A.join(''))}e=e.join('\n')}var k;var h;var l=a.textAlign;var s=a.textVerticalAlign;var m=mc(a.font);var C=m.style+' '+m.variant+' '+m.weight+' '+m.size+'px "'+m.family+'"';n=n||getBoundingRect(e,C,l,s,a.textPadding,a.textLineHeight);var g=this.transform;if(g&&!w){fh.copy(c);fh.applyTransform(g);c=fh}if(!w){var v=a.textPosition;if(v instanceof Array){k=c.x+hg(v[0],c.width);h=c.y+hg(v[1],c.height);l=l||'left'}else {var u=this.calculateTextPosition?this.calculateTextPosition({},a,c):calculateTextPosition({},a,c);k=u.x;h=u.y;l=l||u.textAlign;s=s||u.textVerticalAlign}}else {k=c.x;h=c.y}k=adjustTextX(k,n.width,l);h=adjustTextY(h,n.height,s);h+=n.height/2;var r=createNode;var b=this._textVmlEl;var o;var i;var f;if(!b){b=r('line');o=r('path');i=r('textpath');f=r('skew');i.style['v-text-align']='left';er(b);o.textpathok=!0;i.on=!0;b.from='0 0';b.to='1000 0.05';ab(b,f);ab(b,o);ab(b,i);this._textVmlEl=b}else {f=b.firstChild;o=f.nextSibling;i=o.nextSibling}var t=[k,h];var q=b.style;if(g&&w){applyTransform(t,t,g);f.on=!0;f.matrix=g[0].toFixed(3)+p+g[2].toFixed(3)+p+g[1].toFixed(3)+p+g[3].toFixed(3)+',0,0';f.offset=(j(t[0])||0)+','+(j(t[1])||0);f.origin='0 0';q.left='0px';q.top='0px'}else {f.on=!1;q.left=j(k)+'px';q.top=j(h)+'px'}i.string=j9(e);try{i.style.font=C}catch(o4){}cC(b,'fill',{fill:a.textFill,opacity:a.opacity},this);cC(b,'stroke',{stroke:a.textStroke,opacity:a.opacity,lineDash:a.lineDash||null},this);b.style.zIndex=e9(this.zlevel,this.z,this.z2);ab(D,b)};var lB=function(a){cn(a,this._textVmlEl);this._textVmlEl=null};var ln=function(a){ab(a,this._textVmlEl)};var jd=[dp,Displayable,ZImage,Path,e];for(var fV=0;fV<jd.length;fV++){var fF=jd[fV].prototype;fF.drawRectText=l7;fF.removeRectText=lB;fF.appendRectText=ln}e.prototype.brushVML=function(b){var a=this.style;if(a.text!=null){this.drawRectText(b,{x:a.x||0,y:a.y||0,width:0,height:0},this.getBoundingRect(),!0)}else {this.removeRectText(b)}};e.prototype.onRemove=function(a){this.removeRectText(a)};e.prototype.onAdd=function(a){this.appendRectText(a)}}function parseInt10$1(a){return parseInt(a,10)}function VMLPainter(e,a){initVML();this.root=e;this.storage=a;var c=document.createElement('div');var b=document.createElement('div');c.style.cssText='display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;';b.style.cssText='position:absolute;left:0;top:0;';e.appendChild(c);this._vmlRoot=b;this._vmlViewport=c;this.resize();var f=a.delFromStorage;var g=a.addToStorage;a.delFromStorage=function(c){f.call(a,c);if(c){c.onRemove&&c.onRemove(b)}};a.addToStorage=function(c){c.onAdd&&c.onAdd(b);g.call(a,c)};this._firstPaint=!0}VMLPainter.prototype={constructor:VMLPainter,getType:function(){return 'vml'},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a){return {offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}}},refresh:function(){var a=this.storage.getDisplayList(!0,!0);this._paintList(a)},_paintList:function(e){var b=this._vmlRoot;for(var c=0;c<e.length;c++){var a=e[c];if(a.invisible||a.ignore){if(!a.__alreadyNotVisible){a.onRemove(b)}a.__alreadyNotVisible=!0}else {if(a.__alreadyNotVisible){a.onAdd(b)}a.__alreadyNotVisible=!1;if(a.__dirty){a.beforeBrush&&a.beforeBrush();(a.brushVML||a.brush).call(a,b);a.afterBrush&&a.afterBrush()}}a.__dirty=!1}if(this._firstPaint){this._vmlViewport.appendChild(b);this._firstPaint=!1}},resize:function(b,a){var b=b==null?this._getWidth():b;var a=a==null?this._getHeight():a;if(this._width!==b||this._height!==a){this._width=b;this._height=a;var c=this._vmlViewport.style;c.width=b+'px';c.height=a+'px'}},dispose:function(){this.root.innerHTML='';this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){if(this._vmlViewport){this.root.removeChild(this._vmlViewport)}},_getWidth:function(){var b=this.root;var a=b.currentStyle;return (b.clientWidth||parseInt10$1(a.width))-parseInt10$1(a.paddingLeft)-parseInt10$1(a.paddingRight)|0},_getHeight:function(){var b=this.root;var a=b.currentStyle;return (b.clientHeight||parseInt10$1(a.height))-parseInt10$1(a.paddingTop)-parseInt10$1(a.paddingBottom)|0}};function createMethodNotSupport(a){return function(){aA('In IE8.0 VML mode painter not support method "'+a+'"')}}each$1(['getLayer','insertLayer','eachLayer','eachBuiltinLayer','eachOtherLayer','getLayers','modLayer','delLayer','clearLayer','toDataURL','pathToImage'],function(a){VMLPainter.prototype[a]=createMethodNotSupport(a)});registerPainter('vml',VMLPainter);var ox='http://www.w3.org/2000/svg';function createElement(a){return document.createElementNS(ox,a)}var bc=y.CMD;var ny=Array.prototype.join;var bO='none';var fd=Math.round;var ii=Math.sin;var h9=Math.cos;var i9=Math.PI;var aJ=Math.PI*2;var om=180/i9;var h1=1.0E-4;function round4(a){return fd(a*10000)/10000}function isAroundZero$1(a){return a<h1&&a>-h1}function pathHasFill(a,c){var b=c?a.textFill:a.fill;return b!=null&&b!==bO}function pathHasStroke(b,c){var a=c?b.textStroke:b.stroke;return a!=null&&a!==bO}function setTransform(b,a){if(a){attr(b,'transform','matrix('+ny.call(a,',')+')')}}function attr(c,b,a){if(!a||a.type!=='linear'&&a.type!=='radial'){c.setAttribute(b,a)}}function attrXLink(c,a,b){c.setAttributeNS('http://www.w3.org/1999/xlink',a,b)}function bindStyle(b,a,c,j){if(pathHasFill(a,c)){var f=c?a.textFill:a.fill;f=f==='transparent'?bO:f;attr(b,'fill',f);attr(b,'fill-opacity',a.fillOpacity!=null?a.fillOpacity*a.opacity:a.opacity)}else {attr(b,'fill',bO)}if(pathHasStroke(a,c)){var e=c?a.textStroke:a.stroke;e=e==='transparent'?bO:e;attr(b,'stroke',e);var h=c?a.textStrokeWidth:a.lineWidth;var g=!c&&a.strokeNoScale?j.getLineScale():1;attr(b,'stroke-width',h/g);attr(b,'paint-order',c?'stroke':'fill');attr(b,'stroke-opacity',a.strokeOpacity!=null?a.strokeOpacity:a.opacity);var i=a.lineDash;if(i){attr(b,'stroke-dasharray',a.lineDash.join(','));attr(b,'stroke-dashoffset',fd(a.lineDashOffset||0))}else {attr(b,'stroke-dasharray','')}a.lineCap&&attr(b,'stroke-linecap',a.lineCap);a.lineJoin&&attr(b,'stroke-linejoin',a.lineJoin);a.miterLimit&&attr(b,'stroke-miterlimit',a.miterLimit)}else {attr(b,'stroke',bO)}}function pathDataToString$1(q){var h=[];var b=q.data;var x=q.len();for(var a=0;a<x;){var y=b[a++];var e='';var j=0;switch(y){case bc.M:e='M';j=2;break;case bc.L:e='L';j=2;break;case bc.Q:e='Q';j=4;break;case bc.C:e='C';j=6;break;case bc.A:var r=b[a++];var s=b[a++];var m=b[a++];var n=b[a++];var l=b[a++];var c=b[a++];var z=b[a++];var k=b[a++];var o=Math.abs(c);var p=isAroundZero$1(o-aJ)||(k?c>=aJ:-c>=aJ);var w=c>0?c%aJ:c%aJ+aJ;var i=!1;if(p){i=!0}else {if(isAroundZero$1(o)){i=!1}else {i=w>=i9===!!k}};var A=round4(r+m*h9(l));var B=round4(s+n*ii(l));if(p){if(k){c=aJ-1.0E-4}else {c=-aJ+1.0E-4}i=!0;if(a===9){h.push('M',A,B)}};var f=round4(r+m*h9(l+c));var g=round4(s+n*ii(l+c));h.push('A',round4(m),round4(n),fd(z*om),+i,+k,f,g);break;case bc.Z:e='Z';break;case bc.R:var f=round4(b[a++]);var g=round4(b[a++]);var v=round4(b[a++]);var t=round4(b[a++]);h.push('M',f,g,'L',f+v,g,'L',f+v,g+t,'L',f,g+t,'L',f,g);break;}e&&h.push(e);for(var u=0;u<j;u++){h.push(round4(b[a++]))}}return h.join(' ')}var ck={};ck.brush=function(a){var f=a.style;var b=a.__svgEl;if(!b){b=createElement('path');a.__svgEl=b}if(!a.path){a.createPathProxy()}var c=a.path;if(a.__dirtyPath){c.beginPath();c.subPixelOptimize=!1;a.buildPath(c,a.shape);a.__dirtyPath=!1;var e=pathDataToString$1(c);if(e.indexOf('NaN')<0){attr(b,'d',e)}}bindStyle(b,f,!1,a);setTransform(b,a.transform);if(f.text!=null){cB(a,a.getBoundingRect())}};var fq={};fq.brush=function(b){var e=b.style;var c=e.image;if(c instanceof HTMLImageElement){var f=c.src;c=f}if(!c){return}var i=e.x||0;var j=e.y||0;var h=e.width;var g=e.height;var a=b.__svgEl;if(!a){a=createElement('image');b.__svgEl=a}if(c!==b.__imageSrc){attrXLink(a,'href',c);b.__imageSrc=c}attr(a,'width',h);attr(a,'height',g);attr(a,'x',i);attr(a,'y',j);setTransform(a,b.transform);if(e.text!=null){cB(b,b.getBoundingRect())}};var dA={};var eg=new BoundingRect();var bZ={};var ah=[];var j_={left:'start',right:'end',center:'middle',middle:'middle'};var cB=function(a,m){var f=a.style;var p=a.transform;var v=a instanceof e||f.transformText;a.__dirty&&normalizeTextStyle(f,!0);var h=f.text;h!=null&&(h+='');if(!needDrawText(h,f)){return}h==null&&(h='');if(!v&&p){eg.copy(m);eg.applyTransform(p);m=eg}var c=a.__textSvgEl;if(!c){c=createElement('text');a.__textSvgEl=c}var x=c.style;var B=f.font||cK;var y=c.__computedFont;if(B!==c.__styleFont){x.font=c.__styleFont=B;y=c.__computedFont=x.font}var l=f.textPadding;var D=f.textLineHeight;var i=a.__textCotentBlock;if(!i||a.__dirtyText){i=a.__textCotentBlock=parsePlainText(h,y,l,D,f.truncate)}var E=i.outerHeight;var q=i.lineHeight;getBoxPosition(bZ,a,f,m);var t=bZ.baseX;var A=bZ.baseY;var s=bZ.textAlign||'left';var C=bZ.textVerticalAlign;setTextTransform(c,v,p,f,m,t,A);var F=adjustTextY(A,E,C);var u=t;var n=F;if(l){u=getTextXForPadding$1(t,s,l);n+=l[0]}n+=q/2;bindStyle(c,f,!0,a);var w=i.canCacheByTextString;var j=a.__tspanList||(a.__tspanList=[]);var k=j.length;if(w&&a.__canCacheByTextString&&a.__text===h){if(a.__dirtyText&&k){for(var b=0;b<k;++b){updateTextLocation(j[b],s,u,n+b*q)}}}else {a.__text=h;a.__canCacheByTextString=w;var z=i.lines;var r=z.length;var b=0;for(;b<r;b++){var g=j[b];var o=z[b];if(!g){g=j[b]=createElement('tspan');c.appendChild(g);g.appendChild(document.createTextNode(o))}else {if(g.__zrText!==o){g.innerHTML='';g.appendChild(document.createTextNode(o))}}updateTextLocation(g,s,u,n+b*q)}if(k>r){for(;b<k;b++){c.removeChild(j[b])}j.length=r}}};function setTextTransform(j,i,g,h,a,c,e){identity(ah);if(i&&g){copy$1(ah,g)}var f=h.textRotation;if(a&&f){var b=h.textOrigin;if(b==='center'){c=a.width/2+a.x;e=a.height/2+a.y}else {if(b){c=b[0]+a.x;e=b[1]+a.y}}ah[4]-=c;ah[5]-=e;rotate(ah,ah,f);ah[4]+=c;ah[5]+=e}setTransform(j,ah)}function getTextXForPadding$1(b,c,a){return c==='right'?b-a[1]:c==='center'?b+a[3]/2-a[1]/2:b+a[3]}function updateTextLocation(a,b,c,e){attr(a,'dominant-baseline','middle');attr(a,'text-anchor',j_[b]);attr(a,'x',c);attr(a,'y',e)}dA.drawRectText=cB;dA.brush=function(a){var b=a.style;if(b.text!=null){cB(a,!1)}};function Diff(){}Diff.prototype={diff:function(c,a,i){if(!i){i=function(b,e){return b===e}}this.equals=i;var h=this;c=c.slice();a=a.slice();var f=a.length;var g=c.length;var e=1;var m=f+g;var b=[{newPos:-1,components:[]}];var n=this.extractCommon(b[0],a,c,0);if(b[0].newPos+1>=f&&n+1>=g){var k=[];for(var j=0;j<a.length;j++){k.push(j)}return [{indices:k,count:a.length}]}function execEditLength(){for(var j=-1*e;j<=e;j+=2){var k;var m=b[j-1];var l=b[j+1];var n=(l?l.newPos:0)-j;if(m){b[j-1]=undefined}var p=m&&m.newPos+1<f;var o=l&&0<=n&&n<g;if(!p&&!o){b[j]=undefined;continue}if(!p||o&&m.newPos<l.newPos){k=clonePath(l);h.pushComponent(k.components,undefined,!0)}else {k=m;k.newPos++;h.pushComponent(k.components,!0,undefined)}n=h.extractCommon(k,a,c,j);if(k.newPos+1>=f&&n+1>=g){return buildValues(h,k.components,a,c)}else {b[j]=k}}e++}while(e<=m){var l=execEditLength();if(l){return l}}},pushComponent:function(a,e,c){var b=a[a.length-1];if(b&&b.added===e&&b.removed===c){a[a.length-1]={count:b.count+1,added:e,removed:c}}else {a.push({count:1,added:e,removed:c})}},extractCommon:function(e,f,g,h){var i=f.length;var j=g.length;var a=e.newPos;var b=a-h;var c=0;while(a+1<i&&b+1<j&&this.equals(f[a+1],g[b+1])){a++;b++;c++}if(c){e.components.push({count:c})}e.newPos=a;return b},tokenize:function(a){return a.slice()},join:function(a){return a.slice()}};function buildValues(l,g,j,k){var f=0;var i=g.length;var h=0;var e=0;for(;f<i;f++){var a=g[f];if(!a.removed){var c=[];for(var b=h;b<h+a.count;b++){c.push(b)}a.indices=c;h+=a.count;if(!a.added){e+=a.count}}else {var c=[];for(var b=e;b<e+a.count;b++){c.push(b)}a.indices=c;e+=a.count}}return g}function clonePath(a){return {newPos:a.newPos,components:a.components.slice(0)}}var nx=new Diff();var mC=function(c,b,a){return nx.diff(c,b,a)};var mx='0';var h2='1';function Definable(f,e,a,b,c){this._zrId=f;this._svgRoot=e;this._tagNames=typeof a==='string'?[a]:a;this._markLabel=b;this._domName=c||'_dom';this.nextId=0}Definable.prototype.createElement=createElement;Definable.prototype.getDefs=function(c){var b=this._svgRoot;var a=this._svgRoot.getElementsByTagName('defs');if(a.length===0){if(c){a=b.insertBefore(this.createElement('defs'),b.firstChild);if(!a.contains){a.contains=function(f){var b=a.children;if(!b){return !1}for(var e=b.length-1;e>=0;--e){if(b[e]===f){return !0}}return !1}}return a}else {return null}}else {return a[0]}};Definable.prototype.update=function(a,b){if(!a){return}var e=this.getDefs(!1);if(a[this._domName]&&e.contains(a[this._domName])){if(typeof b==='function'){b(a)}}else {var c=this.add(a);if(c){a[this._domName]=c}}};Definable.prototype.addDom=function(b){var a=this.getDefs(!0);a.appendChild(b)};Definable.prototype.removeDom=function(a){var b=this.getDefs(!1);if(b&&a[this._domName]){b.removeChild(a[this._domName]);a[this._domName]=null}};Definable.prototype.getDoms=function(){var b=this.getDefs(!1);if(!b){return []}var a=[];each$1(this._tagNames,function(c){var e=b.getElementsByTagName(c);a=a.concat([].slice.call(e))});return a};Definable.prototype.markAllUnused=function(){var a=this.getDoms();var b=this;each$1(a,function(a){a[b._markLabel]=mx})};Definable.prototype.markUsed=function(a){if(a){a[this._markLabel]=h2}};Definable.prototype.removeUnused=function(){var a=this.getDefs(!1);if(!a){return}var b=this.getDoms();var c=this;each$1(b,function(b){if(b[c._markLabel]!==h2){a.removeChild(b)}})};Definable.prototype.getSvgProxy=function(a){if(a instanceof Path){return ck}else {if(a instanceof ZImage){return fq}else {if(a instanceof e){return dA}else {return ck}}}};Definable.prototype.getTextSvgElement=function(a){return a.__textSvgEl};Definable.prototype.getSvgElement=function(a){return a.__svgEl};function GradientManager(b,a){Definable.call(this,b,a,['linearGradient','radialGradient'],'__gradient_in_use__')}inherits(GradientManager,Definable);GradientManager.prototype.addWithoutUpdate=function(c,a){if(a&&a.style){var b=this;each$1(['fill','stroke'],function(e){if(a.style[e]&&(a.style[e].type==='linear'||a.style[e].type==='radial')){var f=a.style[e];var h=b.getDefs(!0);var g;if(f._dom){g=f._dom;if(!h.contains(f._dom)){b.addDom(g)}}else {g=b.add(f)}b.markUsed(a);var i=g.getAttribute('id');c.setAttribute(e,'url(#'+i+')')}})}};GradientManager.prototype.add=function(a){var b;if(a.type==='linear'){b=this.createElement('linearGradient')}else {if(a.type==='radial'){b=this.createElement('radialGradient')}else {aA('Illegal gradient type.');return null}}a.id=a.id||this.nextId++;b.setAttribute('id','zr'+this._zrId+'-gradient-'+a.id);this.updateDom(a,b);this.addDom(b);return b};GradientManager.prototype.update=function(a){var b=this;Definable.prototype.update.call(this,a,function(){var e=a.type;var c=a._dom.tagName;if(e==='linear'&&c==='linearGradient'||e==='radial'&&c==='radialGradient'){b.updateDom(a,a._dom)}else {b.removeDom(a);b.add(a)}})};GradientManager.prototype.updateDom=function(a,b){if(a.type==='linear'){b.setAttribute('x1',a.x);b.setAttribute('y1',a.y);b.setAttribute('x2',a.x2);b.setAttribute('y2',a.y2)}else {if(a.type==='radial'){b.setAttribute('cx',a.x);b.setAttribute('cy',a.y);b.setAttribute('r',a.r)}else {aA('Illegal gradient type.');return}}if(a.global){b.setAttribute('gradientUnits','userSpaceOnUse')}else {b.setAttribute('gradientUnits','objectBoundingBox')}b.innerHTML='';var f=a.colorStops;for(var e=0,j=f.length;e<j;++e){var c=this.createElement('stop');c.setAttribute('offset',f[e].offset*100+'%');var g=f[e].color;if(g.indexOf('rgba'>-1)){var h=parse(g)[3];var i=toHex(g);c.setAttribute('stop-color','#'+i);c.setAttribute('stop-opacity',h)}else {c.setAttribute('stop-color',f[e].color)}b.appendChild(c)}a._dom=b};GradientManager.prototype.markUsed=function(b){if(b.style){var a=b.style.fill;if(a&&a._dom){Definable.prototype.markUsed.call(this,a._dom)}a=b.style.stroke;if(a&&a._dom){Definable.prototype.markUsed.call(this,a._dom)}}};function ClippathManager(b,a){Definable.call(this,b,a,'clipPath','__clippath_in_use__')}inherits(ClippathManager,Definable);ClippathManager.prototype.update=function(a){var c=this.getSvgElement(a);if(c){this.updateDom(c,a.__clipPaths,!1)}var b=this.getTextSvgElement(a);if(b){this.updateDom(b,a.__clipPaths,!0)}this.markUsed(a)};ClippathManager.prototype.updateDom=function(g,c,h){if(c&&c.length>0){var i=this.getDefs(!0);var a=c[0];var b;var f;var e=h?'_textDom':'_dom';if(a[e]){f=a[e].getAttribute('id');b=a[e];if(!i.contains(b)){i.appendChild(b)}}else {f='zr'+this._zrId+'-clip-'+this.nextId;++this.nextId;b=this.createElement('clipPath');b.setAttribute('id',f);i.appendChild(b);a[e]=b}var j=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!h){var k=Array.prototype.slice.call(a.transform);mul$1(a.transform,a.parent.invTransform,a.transform);j.brush(a);a.transform=k}else {j.brush(a)}var l=this.getSvgElement(a);b.innerHTML='';b.appendChild(l.cloneNode());g.setAttribute('clip-path','url(#'+f+')');if(c.length>1){this.updateDom(b,c.slice(1),h)}}else {if(g){g.setAttribute('clip-path','none')}}};ClippathManager.prototype.markUsed=function(a){var b=this;if(a.__clipPaths){each$1(a.__clipPaths,function(c){if(c._dom){Definable.prototype.markUsed.call(b,c._dom)}if(c._textDom){Definable.prototype.markUsed.call(b,c._textDom)}})}};function ShadowManager(b,a){Definable.call(this,b,a,['filter'],'__filter_in_use__','_shadowDom')}inherits(ShadowManager,Definable);ShadowManager.prototype.addWithoutUpdate=function(c,a){if(a&&hasShadow(a.style)){var b;if(a._shadowDom){b=a._shadowDom;var e=this.getDefs(!0);if(!e.contains(a._shadowDom)){this.addDom(b)}}else {b=this.add(a)}this.markUsed(a);var f=b.getAttribute('id');c.style.filter='url(#'+f+')'}};ShadowManager.prototype.add=function(a){var b=this.createElement('filter');a._shadowDomId=a._shadowDomId||this.nextId++;b.setAttribute('id','zr'+this._zrId+'-shadow-'+a._shadowDomId);this.updateDom(a,b);this.addDom(b);return b};ShadowManager.prototype.update=function(b,a){var c=a.style;if(hasShadow(c)){var e=this;Definable.prototype.update.call(this,a,function(){e.updateDom(a,a._shadowDom)})}else {this.remove(b,a)}};ShadowManager.prototype.remove=function(a,b){if(b._shadowDomId!=null){this.removeDom(a);a.style.filter=''}};ShadowManager.prototype.updateDom=function(e,c){var b=c.getElementsByTagName('feDropShadow');if(b.length===0){b=this.createElement('feDropShadow')}else {b=b[0]}var a=e.style;var j=e.scale?e.scale[0]||1:1;var k=e.scale?e.scale[1]||1:1;var g;var h;var f;var i;if(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY){g=a.shadowOffsetX||0;h=a.shadowOffsetY||0;f=a.shadowBlur;i=a.shadowColor}else {if(a.textShadowBlur){g=a.textShadowOffsetX||0;h=a.textShadowOffsetY||0;f=a.textShadowBlur;i=a.textShadowColor}else {this.removeDom(c,a);return}}b.setAttribute('dx',g/j);b.setAttribute('dy',h/k);b.setAttribute('flood-color',i);var m=f/2/j;var n=f/2/k;var l=m+' '+n;b.setAttribute('stdDeviation',l);c.setAttribute('x','-100%');c.setAttribute('y','-100%');c.setAttribute('width',Math.ceil(f/2*200)+'%');c.setAttribute('height',Math.ceil(f/2*200)+'%');c.appendChild(b);e._shadowDom=c};ShadowManager.prototype.markUsed=function(a){if(a._shadowDom){Definable.prototype.markUsed.call(this,a._shadowDom)}};function hasShadow(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY||a.textShadowBlur||a.textShadowOffsetX||a.textShadowOffsetY)}function parseInt10$2(a){return parseInt(a,10)}function getSvgProxy(a){if(a instanceof Path){return ck}else {if(a instanceof ZImage){return fq}else {if(a instanceof e){return dA}else {return ck}}}}function checkParentAvailable(a,b){return b&&a&&b.parentNode!==a}function insertAfter(a,b,e){if(checkParentAvailable(a,b)&&e){var c=e.nextSibling;c?a.insertBefore(b,c):a.appendChild(b)}}function prepend(a,b){if(checkParentAvailable(a,b)){var c=a.firstChild;c?a.insertBefore(b,c):a.appendChild(b)}}function remove$1(a,b){if(b&&a&&b.parentNode===a){a.removeChild(b)}}function getTextSvgElement(a){return a.__textSvgEl}function getSvgElement(a){return a.__svgEl}var c1=function(f,g,c,e){this.root=f;this.storage=g;this._opts=c=extend({},c||{});var a=createElement('svg');a.setAttribute('xmlns','http://www.w3.org/2000/svg');a.setAttribute('version','1.1');a.setAttribute('baseProfile','full');a.style.cssText='user-select:none;position:absolute;left:0;top:0;';this.gradientManager=new GradientManager(e,a);this.clipPathManager=new ClippathManager(e,a);this.shadowManager=new ShadowManager(e,a);var b=document.createElement('div');b.style.cssText='overflow:hidden;position:relative';this._svgRoot=a;this._viewport=b;f.appendChild(b);b.appendChild(a);this.resize(c.width,c.height);this._visibleList=[]};c1.prototype={constructor:c1,getType:function(){return 'svg'},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a){return {offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}}},refresh:function(){var a=this.storage.getDisplayList(!0);this._paintList(a)},setBackgroundColor:function(a){this._viewport.style.background=a},_paintList:function(n){this.gradientManager.markAllUnused();this.clipPathManager.markAllUnused();this.shadowManager.markAllUnused();var i=this._svgRoot;var l=this._visibleList;var o=n.length;var j=[];var e;for(e=0;e<o;e++){var a=n[e];var m=getSvgProxy(a);var b=getSvgElement(a)||getTextSvgElement(a);if(!a.invisible){if(a.__dirty){m&&m.brush(a);this.clipPathManager.update(a);if(a.style){this.gradientManager.update(a.style.fill);this.gradientManager.update(a.style.stroke);this.shadowManager.update(b,a)}a.__dirty=!1}j.push(a)}}var k=mC(l,j);var h;for(e=0;e<k.length;e++){var g=k[e];if(g.removed){for(var f=0;f<g.count;f++){var a=l[g.indices[f]];var b=getSvgElement(a);var c=getTextSvgElement(a);remove$1(i,b);remove$1(i,c)}}}for(e=0;e<k.length;e++){var g=k[e];if(g.added){for(var f=0;f<g.count;f++){var a=j[g.indices[f]];var b=getSvgElement(a);var c=getTextSvgElement(a);h?insertAfter(i,b,h):prepend(i,b);if(b){insertAfter(i,c,b)}else {if(h){insertAfter(i,c,h)}else {prepend(i,c)}}insertAfter(i,c,b);h=c||b||h;this.gradientManager.addWithoutUpdate(b||c,a);this.shadowManager.addWithoutUpdate(b||c,a);this.clipPathManager.markUsed(a)}}else {if(!g.removed){for(var f=0;f<g.count;f++){var a=j[g.indices[f]];h=getTextSvgElement(a)||getSvgElement(a)||h;var b=getSvgElement(a);var c=getTextSvgElement(a);this.gradientManager.markUsed(a);this.gradientManager.addWithoutUpdate(b||c,a);this.shadowManager.markUsed(a);this.shadowManager.addWithoutUpdate(b||c,a);this.clipPathManager.markUsed(a)}}}}this.gradientManager.removeUnused();this.clipPathManager.removeUnused();this.shadowManager.removeUnused();this._visibleList=j},_getDefs:function(c){var b=this._svgRoot;var a=this._svgRoot.getElementsByTagName('defs');if(a.length===0){if(c){var a=b.insertBefore(createElement('defs'),b.firstChild);if(!a.contains){a.contains=function(f){var b=a.children;if(!b){return !1}for(var e=b.length-1;e>=0;--e){if(b[e]===f){return !0}}return !1}}return a}else {return null}}else {return a[0]}},resize:function(b,a){var c=this._viewport;c.style.display='none';var g=this._opts;b!=null&&(g.width=b);a!=null&&(g.height=a);b=this._getSize(0);a=this._getSize(1);c.style.display='';if(this._width!==b||this._height!==a){this._width=b;this._height=a;var e=c.style;e.width=b+'px';e.height=a+'px';var f=this._svgRoot;f.setAttribute('width',b);f.setAttribute('height',a)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(b){var c=this._opts;var a=['width','height'][b];var g=['clientWidth','clientHeight'][b];var h=['paddingLeft','paddingTop'][b];var i=['paddingRight','paddingBottom'][b];if(c[a]!=null&&c[a]!=='auto'){return parseFloat(c[a])}var e=this.root;var f=document.defaultView.getComputedStyle(e);return (e[g]||parseInt10$2(f[a])||parseInt10$2(e.style[a]))-(parseInt10$2(f[h])||0)-(parseInt10$2(f[i])||0)|0},dispose:function(){this.root.innerHTML='';this._svgRoot=this._viewport=this.storage=null},clear:function(){if(this._viewport){this.root.removeChild(this._viewport)}},pathToDataUrl:function(){this.refresh();var a=this._svgRoot.outerHTML;return 'data:image/svg+xml;charset=UTF-8,'+a}};function createMethodNotSupport$1(a){return function(){aA('In SVG mode painter not support method "'+a+'"')}}each$1(['getLayer','insertLayer','eachLayer','eachBuiltinLayer','eachOtherLayer','getLayers','modLayer','delLayer','clearLayer','toDataURL','pathToImage'],function(a){c1.prototype[a]=createMethodNotSupport$1(a)});registerPainter('svg',c1);d.version=iV;d.dependencies=eR;d.PRIORITY=Y;d.init=init;d.connect=connect;d.disConnect=disConnect;d.disconnect=m7;d.dispose=dispose;d.getInstanceByDom=getInstanceByDom;d.getInstanceById=getInstanceById;d.registerTheme=registerTheme;d.registerPreprocessor=registerPreprocessor;d.registerProcessor=registerProcessor;d.registerPostUpdate=registerPostUpdate;d.registerAction=registerAction;d.registerCoordinateSystem=registerCoordinateSystem;d.getCoordinateSystemDimensions=getCoordinateSystemDimensions;d.registerLayout=registerLayout;d.registerVisual=registerVisual;d.registerLoading=registerLoading;d.extendComponentModel=extendComponentModel;d.extendComponentView=extendComponentView;d.extendSeriesModel=extendSeriesModel;d.extendChartView=extendChartView;d.setCanvasCreator=setCanvasCreator;d.registerMap=registerMap;d.getMap=getMap;d.dataTool=nW;d.zrender=oh;d.number=ov;d.format=op;d.throttle=throttle;d.helper=oq;d.matrix=ot;d.vector=oz;d.color=oF;d.parseGeoJSON=eD;d.parseGeoJson=ml;d.util=i0;d.graphic=h6;d.List=s;d.Model=Model;d.Axis=q;d.env=f});